window.adthrive.core = {
    "partners": [{
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "33across",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.73
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.968
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.73
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "appnexus",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.986
        }],
        "s2s": [],
        "bidder_name": "brightroll",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "colossus",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "concert",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.99
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "conversant",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "criteo",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "deepintent",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.01
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "districtm",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "districtmDMX",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.01
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "dmdmx",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.99
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "G-TRUSTX-b827d08da2714822",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "G-JW_PLAYER-b4d68a98a4484b55",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-IPONWEB-c1bd196e2c6b4def",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-IPONWEB-0c3229501281451f",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-a69231310c8e4f10",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-eeda70ad29e145c1",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-c1109f1b7eef4707",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-2664f826686d4ce4",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-0939149bc58441b7",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-JW_PLAYER-5b5aec89d6704dc3",
                "type": "percent",
                "value": 0.63
            }, {
                "name": "G-ONEFOOTBALL-8bbb779550d54c22",
                "type": "percent",
                "value": 0.63
            }]
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.69
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.69
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "grid",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.91
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "g-trustx-69dcdccd456a4d4a",
                "type": "percent",
                "value": 0.952
            }]
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "gridvid",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.995
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "gumgum",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.95
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "136707122019991",
                "type": "percent",
                "value": 0.84
            }, {
                "name": "136707122019993",
                "type": "percent",
                "value": 0.87
            }, {
                "name": "136708142019991",
                "type": "percent",
                "value": 0.89
            }, {
                "name": "136712112019997",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "136712112019995",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "136707162019999",
                "type": "percent",
                "value": 0.88
            }, {
                "name": "136704252018993",
                "type": "percent",
                "value": 0.88
            }, {
                "name": "136703312017993",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136703312017997",
                "type": "percent",
                "value": 0.86
            }, {
                "name": "136710072020991",
                "type": "percent",
                "value": 0.79
            }, {
                "name": "136707162019993",
                "type": "percent",
                "value": 0.91
            }, {
                "name": "136703312017991",
                "type": "percent",
                "value": 0.87
            }, {
                "name": "PAD136707102020991",
                "type": "percent",
                "value": 0.8
            }, {
                "name": "136712112019999",
                "type": "percent",
                "value": 0.82
            }, {
                "name": "7002232015",
                "type": "percent",
                "value": 0.69
            }, {
                "name": "136706042019991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136712112019993",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136707152019991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136704252018991",
                "type": "percent",
                "value": 0.89
            }, {
                "name": "8209221604",
                "type": "percent",
                "value": 0.86
            }, {
                "name": "136707122019994",
                "type": "percent",
                "value": 0.71
            }, {
                "name": "136708142019992",
                "type": "percent",
                "value": 0.85
            }, {
                "name": "136712112019998",
                "type": "percent",
                "value": 0.78
            }, {
                "name": "136712112019996",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "136704252018994",
                "type": "percent",
                "value": 0.91
            }, {
                "name": "136703312017996",
                "type": "percent",
                "value": 0.8
            }, {
                "name": "136703312017998",
                "type": "percent",
                "value": 0.68
            }, {
                "name": "136710072020992",
                "type": "percent",
                "value": 0.74
            }, {
                "name": "136707162019994",
                "type": "percent",
                "value": 0.76
            }, {
                "name": "136703312017992",
                "type": "percent",
                "value": 0.93
            }, {
                "name": "PAD136707102020992",
                "type": "percent",
                "value": 0.8
            }, {
                "name": "8209221601",
                "type": "percent",
                "value": 0.76
            }, {
                "name": "136706042019992",
                "type": "percent",
                "value": 0.69
            }, {
                "name": "136712112019994",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "136707152019992",
                "type": "percent",
                "value": 0.85
            }, {
                "name": "136704252018992",
                "type": "percent",
                "value": 0.77
            }, {
                "name": "136707122019992",
                "type": "percent",
                "value": 0.85
            }, {
                "name": "136703072017996",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "1367071620199910",
                "type": "percent",
                "value": 0.94
            }, {
                "name": "M1IX203202022021992",
                "type": "flat",
                "value": 0.5
            }, {
                "name": "M1IX203202022021991",
                "type": "flat",
                "value": 0.5
            }, {
                "name": "PAD136701112021991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "PAD136701112021992",
                "type": "percent",
                "value": 1
            }, {
                "name": "DMD136703032021991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "DMD136703032021992",
                "type": "percent",
                "value": 0.82
            }, {
                "name": "DMD136702172021991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "DMD136704082021991",
                "type": "percent",
                "value": 0.88
            }, {
                "name": "DMD136704052021991",
                "type": "percent",
                "value": 0.89
            }, {
                "name": "DMD136704082021992",
                "type": "percent",
                "value": 0.8
            }, {
                "name": "DMD136702172021992",
                "type": "percent",
                "value": 0.91
            }, {
                "name": "DMD136704052021992",
                "type": "percent",
                "value": 0.77
            }, {
                "name": "136705172021991",
                "type": "percent",
                "value": 0.85
            }, {
                "name": "136705172021992",
                "type": "percent",
                "value": 0.69
            }, {
                "name": "136704262021991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136704262021992",
                "type": "percent",
                "value": 0.69
            }, {
                "name": "PAD136707312020991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "136712112019991",
                "type": "percent",
                "value": 0.88
            }, {
                "name": "136706042019995",
                "type": "percent",
                "value": 0.89
            }, {
                "name": "PAD136707312020992",
                "type": "percent",
                "value": 0.92
            }, {
                "name": "136712112019992",
                "type": "percent",
                "value": 0.95
            }, {
                "name": "136706042019996",
                "type": "percent",
                "value": 0.83
            }, {
                "name": "203209212021995",
                "type": "flat",
                "value": 1
            }, {
                "name": "203209212021996",
                "type": "flat",
                "value": 1
            }, {
                "name": "203210122021995",
                "type": "flat",
                "value": 1
            }, {
                "name": "203210122021996",
                "type": "flat",
                "value": 1
            }, {
                "name": "M1IX203212162021995",
                "type": "flat",
                "value": 1
            }, {
                "name": "M1IX203212162021996",
                "type": "flat",
                "value": 1
            }, {
                "name": "9311192021991",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "9311192021992",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "DMD136708052021991",
                "type": "percent",
                "value": 0.9
            }, {
                "name": "DMD136708052021992",
                "type": "percent",
                "value": 0.8
            }, {
                "name": "146002182022991",
                "type": "flat",
                "value": 1
            }, {
                "name": "146002182022992",
                "type": "flat",
                "value": 1
            }, {
                "name": "146002182022993",
                "type": "flat",
                "value": 1
            }, {
                "name": "146002182022994",
                "type": "flat",
                "value": 1
            }, {
                "name": "146002182022995",
                "type": "flat",
                "value": 1
            }, {
                "name": "DMD136708302021992",
                "type": "percent",
                "value": 0.71
            }, {
                "name": "2251041120229923",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229922",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229921",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229920",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229919",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229918",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229917",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229916",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229915",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229914",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229913",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229912",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229911",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "2251041120229910",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022999",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022998",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022997",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022996",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022995",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022994",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022993",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022992",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "225104112022991",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "400104282022991",
                "type": "percent",
                "value": 0.97
            }]
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.95
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.72
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.72
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "ix",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.97
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "kargo",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "nativo",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "instream",
            "type": "percent",
            "value": 0.01
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.01
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "oneVideo",
        "enabled": false
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.964
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.73
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.73
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "openx",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.994
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.72
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "PM-KINC-9618",
                "type": "flat",
                "value": 2
            }]
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.72
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "pubm_ss",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.8
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "PM-KINC-9618",
                "type": "flat",
                "value": 2
            }]
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.74
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "pubmatic",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.999
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.964
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "roundel",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.962
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.84
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "829398",
                "type": "percent",
                "value": 0.95
            }, {
                "name": "832174",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "832176",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855828",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855824",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855816",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855814",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855812",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855810",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855808",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855806",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855804",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855802",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855800",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855798",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855796",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855794",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855792",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855790",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855788",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855786",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855784",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855782",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855780",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855778",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855776",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "859888",
                "type": "percent",
                "value": 0.97
            }]
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.84
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "rubi_ss",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.99
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "829398",
                "type": "percent",
                "value": 0.95
            }, {
                "name": "832174",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "832176",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855828",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855824",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855816",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855814",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855812",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855810",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855808",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855806",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855804",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855802",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855800",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855798",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855796",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855794",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855792",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855790",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855788",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855786",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855784",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855782",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855780",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855778",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "855776",
                "type": "percent",
                "value": 0.97
            }, {
                "name": "859888",
                "type": "percent",
                "value": 0.97
            }]
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.84
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.84
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "rubicon",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "sharethrough",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "instream",
            "type": "percent",
            "value": 0.995
        }, {
            "name": "pmp",
            "type": "percent",
            "value": 1,
            "deals": [{
                "name": "21ebe.8180e.26d6",
                "type": "flat",
                "value": 2
            }, {
                "name": "153c7.7e28.4b71",
                "type": "flat",
                "value": 2
            }, {
                "name": "1ec46.6201a.8951",
                "type": "flat",
                "value": 2
            }, {
                "name": "21ebe.2503b.b869",
                "type": "flat",
                "value": 2
            }, {
                "name": "449f0.6018b.2301",
                "type": "flat",
                "value": 2
            }, {
                "name": "1e6a0.d1904.ff8e",
                "type": "flat",
                "value": 2
            }, {
                "name": "346d5.7861e.d3dc",
                "type": "flat",
                "value": 2
            }, {
                "name": "346d5.5be26.0870",
                "type": "flat",
                "value": 2
            }, {
                "name": "21ebe.c673f.7d27",
                "type": "flat",
                "value": 2
            }, {
                "name": "1bccb.84e7c.831c",
                "type": "flat",
                "value": 2
            }, {
                "name": "21ebe.9417b.988c",
                "type": "flat",
                "value": 2
            }]
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "spotx",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.996
        }],
        "s2s": [],
        "bidder_name": "teads",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "instream",
            "type": "percent",
            "value": 0.999
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "telaria",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.989
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "tripl_ss",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.958
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "triplelift",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.957
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "ttd",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.978
        }],
        "s2s": [],
        "bidder_name": "undertone",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.48
        }],
        "s2s": [],
        "bidder_name": "unruly",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "verizon",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 1
        }, {
            "name": "instream",
            "type": "percent",
            "value": 0.992
        }, {
            "name": "outstream",
            "type": "percent",
            "value": 0.5
        }, {
            "name": "stickyOutstream",
            "type": "percent",
            "value": 0.5
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "yahoossp",
        "enabled": true
    }, {
        "secondary": false,
        "show": true,
        "cpm": [{
            "name": "default",
            "type": "percent",
            "value": 0.986
        }],
        "s2s": [{
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "display"
        }, {
            "s2s_value": 0,
            "endpoint_value": null,
            "endpoint": null,
            "media_type": "video"
        }],
        "bidder_name": "yieldmo",
        "enabled": true
    }],
    "predictiveAnalysis": [],
    "country": "US"
};

adthrive.branch = adthrive.branch || 'master e68bde1';
adthrive.bucket = adthrive.bucket || 'debug';
adthrive.gdpr = 'false'
adthrive.deployment = adthrive.deployment || 'X';

var adthrive = (function () {
	'use strict';

	var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

	var Reflect$1;
	(function (Reflect) {
	    (function (factory) {
	        var root = typeof commonjsGlobal === "object" ? commonjsGlobal :
	            typeof self === "object" ? self :
	                typeof this === "object" ? this :
	                    Function("return this;")();
	        var exporter = makeExporter(Reflect);
	        if (typeof root.Reflect === "undefined") {
	            root.Reflect = Reflect;
	        }
	        else {
	            exporter = makeExporter(root.Reflect, exporter);
	        }
	        factory(exporter);
	        function makeExporter(target, previous) {
	            return function (key, value) {
	                if (typeof target[key] !== "function") {
	                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });
	                }
	                if (previous)
	                    previous(key, value);
	            };
	        }
	    })(function (exporter) {
	        var hasOwn = Object.prototype.hasOwnProperty;
	        var supportsSymbol = typeof Symbol === "function";
	        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== "undefined" ? Symbol.toPrimitive : "@@toPrimitive";
	        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== "undefined" ? Symbol.iterator : "@@iterator";
	        var supportsCreate = typeof Object.create === "function";
	        var supportsProto = { __proto__: [] } instanceof Array;
	        var downLevel = !supportsCreate && !supportsProto;
	        var HashMap = {
	            create: supportsCreate
	                ? function () { return MakeDictionary(Object.create(null)); }
	                : supportsProto
	                    ? function () { return MakeDictionary({ __proto__: null }); }
	                    : function () { return MakeDictionary({}); },
	            has: downLevel
	                ? function (map, key) { return hasOwn.call(map, key); }
	                : function (map, key) { return key in map; },
	            get: downLevel
	                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }
	                : function (map, key) { return map[key]; },
	        };
	        var functionPrototype = Object.getPrototypeOf(Function);
	        var usePolyfill = typeof process === "object" && process.env && process.env["REFLECT_METADATA_USE_MAP_POLYFILL"] === "true";
	        var _Map = !usePolyfill && typeof Map === "function" && typeof Map.prototype.entries === "function" ? Map : CreateMapPolyfill();
	        var _Set = !usePolyfill && typeof Set === "function" && typeof Set.prototype.entries === "function" ? Set : CreateSetPolyfill();
	        var _WeakMap = !usePolyfill && typeof WeakMap === "function" ? WeakMap : CreateWeakMapPolyfill();
	        var Metadata = new _WeakMap();
	        function decorate(decorators, target, propertyKey, attributes) {
	            if (!IsUndefined(propertyKey)) {
	                if (!IsArray(decorators))
	                    throw new TypeError();
	                if (!IsObject(target))
	                    throw new TypeError();
	                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))
	                    throw new TypeError();
	                if (IsNull(attributes))
	                    attributes = undefined;
	                propertyKey = ToPropertyKey(propertyKey);
	                return DecorateProperty(decorators, target, propertyKey, attributes);
	            }
	            else {
	                if (!IsArray(decorators))
	                    throw new TypeError();
	                if (!IsConstructor(target))
	                    throw new TypeError();
	                return DecorateConstructor(decorators, target);
	            }
	        }
	        exporter("decorate", decorate);
	        function metadata(metadataKey, metadataValue) {
	            function decorator(target, propertyKey) {
	                if (!IsObject(target))
	                    throw new TypeError();
	                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))
	                    throw new TypeError();
	                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
	            }
	            return decorator;
	        }
	        exporter("metadata", metadata);
	        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);
	        }
	        exporter("defineMetadata", defineMetadata);
	        function hasMetadata(metadataKey, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryHasMetadata(metadataKey, target, propertyKey);
	        }
	        exporter("hasMetadata", hasMetadata);
	        function hasOwnMetadata(metadataKey, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);
	        }
	        exporter("hasOwnMetadata", hasOwnMetadata);
	        function getMetadata(metadataKey, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryGetMetadata(metadataKey, target, propertyKey);
	        }
	        exporter("getMetadata", getMetadata);
	        function getOwnMetadata(metadataKey, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);
	        }
	        exporter("getOwnMetadata", getOwnMetadata);
	        function getMetadataKeys(target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryMetadataKeys(target, propertyKey);
	        }
	        exporter("getMetadataKeys", getMetadataKeys);
	        function getOwnMetadataKeys(target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            return OrdinaryOwnMetadataKeys(target, propertyKey);
	        }
	        exporter("getOwnMetadataKeys", getOwnMetadataKeys);
	        function deleteMetadata(metadataKey, target, propertyKey) {
	            if (!IsObject(target))
	                throw new TypeError();
	            if (!IsUndefined(propertyKey))
	                propertyKey = ToPropertyKey(propertyKey);
	            var metadataMap = GetOrCreateMetadataMap(target, propertyKey,  false);
	            if (IsUndefined(metadataMap))
	                return false;
	            if (!metadataMap.delete(metadataKey))
	                return false;
	            if (metadataMap.size > 0)
	                return true;
	            var targetMetadata = Metadata.get(target);
	            targetMetadata.delete(propertyKey);
	            if (targetMetadata.size > 0)
	                return true;
	            Metadata.delete(target);
	            return true;
	        }
	        exporter("deleteMetadata", deleteMetadata);
	        function DecorateConstructor(decorators, target) {
	            for (var i = decorators.length - 1; i >= 0; --i) {
	                var decorator = decorators[i];
	                var decorated = decorator(target);
	                if (!IsUndefined(decorated) && !IsNull(decorated)) {
	                    if (!IsConstructor(decorated))
	                        throw new TypeError();
	                    target = decorated;
	                }
	            }
	            return target;
	        }
	        function DecorateProperty(decorators, target, propertyKey, descriptor) {
	            for (var i = decorators.length - 1; i >= 0; --i) {
	                var decorator = decorators[i];
	                var decorated = decorator(target, propertyKey, descriptor);
	                if (!IsUndefined(decorated) && !IsNull(decorated)) {
	                    if (!IsObject(decorated))
	                        throw new TypeError();
	                    descriptor = decorated;
	                }
	            }
	            return descriptor;
	        }
	        function GetOrCreateMetadataMap(O, P, Create) {
	            var targetMetadata = Metadata.get(O);
	            if (IsUndefined(targetMetadata)) {
	                if (!Create)
	                    return undefined;
	                targetMetadata = new _Map();
	                Metadata.set(O, targetMetadata);
	            }
	            var metadataMap = targetMetadata.get(P);
	            if (IsUndefined(metadataMap)) {
	                if (!Create)
	                    return undefined;
	                metadataMap = new _Map();
	                targetMetadata.set(P, metadataMap);
	            }
	            return metadataMap;
	        }
	        function OrdinaryHasMetadata(MetadataKey, O, P) {
	            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
	            if (hasOwn)
	                return true;
	            var parent = OrdinaryGetPrototypeOf(O);
	            if (!IsNull(parent))
	                return OrdinaryHasMetadata(MetadataKey, parent, P);
	            return false;
	        }
	        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {
	            var metadataMap = GetOrCreateMetadataMap(O, P,  false);
	            if (IsUndefined(metadataMap))
	                return false;
	            return ToBoolean(metadataMap.has(MetadataKey));
	        }
	        function OrdinaryGetMetadata(MetadataKey, O, P) {
	            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
	            if (hasOwn)
	                return OrdinaryGetOwnMetadata(MetadataKey, O, P);
	            var parent = OrdinaryGetPrototypeOf(O);
	            if (!IsNull(parent))
	                return OrdinaryGetMetadata(MetadataKey, parent, P);
	            return undefined;
	        }
	        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {
	            var metadataMap = GetOrCreateMetadataMap(O, P,  false);
	            if (IsUndefined(metadataMap))
	                return undefined;
	            return metadataMap.get(MetadataKey);
	        }
	        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {
	            var metadataMap = GetOrCreateMetadataMap(O, P,  true);
	            metadataMap.set(MetadataKey, MetadataValue);
	        }
	        function OrdinaryMetadataKeys(O, P) {
	            var ownKeys = OrdinaryOwnMetadataKeys(O, P);
	            var parent = OrdinaryGetPrototypeOf(O);
	            if (parent === null)
	                return ownKeys;
	            var parentKeys = OrdinaryMetadataKeys(parent, P);
	            if (parentKeys.length <= 0)
	                return ownKeys;
	            if (ownKeys.length <= 0)
	                return parentKeys;
	            var set = new _Set();
	            var keys = [];
	            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {
	                var key = ownKeys_1[_i];
	                var hasKey = set.has(key);
	                if (!hasKey) {
	                    set.add(key);
	                    keys.push(key);
	                }
	            }
	            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {
	                var key = parentKeys_1[_a];
	                var hasKey = set.has(key);
	                if (!hasKey) {
	                    set.add(key);
	                    keys.push(key);
	                }
	            }
	            return keys;
	        }
	        function OrdinaryOwnMetadataKeys(O, P) {
	            var keys = [];
	            var metadataMap = GetOrCreateMetadataMap(O, P,  false);
	            if (IsUndefined(metadataMap))
	                return keys;
	            var keysObj = metadataMap.keys();
	            var iterator = GetIterator(keysObj);
	            var k = 0;
	            while (true) {
	                var next = IteratorStep(iterator);
	                if (!next) {
	                    keys.length = k;
	                    return keys;
	                }
	                var nextValue = IteratorValue(next);
	                try {
	                    keys[k] = nextValue;
	                }
	                catch (e) {
	                    try {
	                        IteratorClose(iterator);
	                    }
	                    finally {
	                        throw e;
	                    }
	                }
	                k++;
	            }
	        }
	        function Type(x) {
	            if (x === null)
	                return 1 ;
	            switch (typeof x) {
	                case "undefined": return 0 ;
	                case "boolean": return 2 ;
	                case "string": return 3 ;
	                case "symbol": return 4 ;
	                case "number": return 5 ;
	                case "object": return x === null ? 1  : 6 ;
	                default: return 6 ;
	            }
	        }
	        function IsUndefined(x) {
	            return x === undefined;
	        }
	        function IsNull(x) {
	            return x === null;
	        }
	        function IsSymbol(x) {
	            return typeof x === "symbol";
	        }
	        function IsObject(x) {
	            return typeof x === "object" ? x !== null : typeof x === "function";
	        }
	        function ToPrimitive(input, PreferredType) {
	            switch (Type(input)) {
	                case 0 : return input;
	                case 1 : return input;
	                case 2 : return input;
	                case 3 : return input;
	                case 4 : return input;
	                case 5 : return input;
	            }
	            var hint = PreferredType === 3  ? "string" : PreferredType === 5  ? "number" : "default";
	            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);
	            if (exoticToPrim !== undefined) {
	                var result = exoticToPrim.call(input, hint);
	                if (IsObject(result))
	                    throw new TypeError();
	                return result;
	            }
	            return OrdinaryToPrimitive(input, hint === "default" ? "number" : hint);
	        }
	        function OrdinaryToPrimitive(O, hint) {
	            if (hint === "string") {
	                var toString_1 = O.toString;
	                if (IsCallable(toString_1)) {
	                    var result = toString_1.call(O);
	                    if (!IsObject(result))
	                        return result;
	                }
	                var valueOf = O.valueOf;
	                if (IsCallable(valueOf)) {
	                    var result = valueOf.call(O);
	                    if (!IsObject(result))
	                        return result;
	                }
	            }
	            else {
	                var valueOf = O.valueOf;
	                if (IsCallable(valueOf)) {
	                    var result = valueOf.call(O);
	                    if (!IsObject(result))
	                        return result;
	                }
	                var toString_2 = O.toString;
	                if (IsCallable(toString_2)) {
	                    var result = toString_2.call(O);
	                    if (!IsObject(result))
	                        return result;
	                }
	            }
	            throw new TypeError();
	        }
	        function ToBoolean(argument) {
	            return !!argument;
	        }
	        function ToString(argument) {
	            return "" + argument;
	        }
	        function ToPropertyKey(argument) {
	            var key = ToPrimitive(argument, 3 );
	            if (IsSymbol(key))
	                return key;
	            return ToString(key);
	        }
	        function IsArray(argument) {
	            return Array.isArray
	                ? Array.isArray(argument)
	                : argument instanceof Object
	                    ? argument instanceof Array
	                    : Object.prototype.toString.call(argument) === "[object Array]";
	        }
	        function IsCallable(argument) {
	            return typeof argument === "function";
	        }
	        function IsConstructor(argument) {
	            return typeof argument === "function";
	        }
	        function IsPropertyKey(argument) {
	            switch (Type(argument)) {
	                case 3 : return true;
	                case 4 : return true;
	                default: return false;
	            }
	        }
	        function GetMethod(V, P) {
	            var func = V[P];
	            if (func === undefined || func === null)
	                return undefined;
	            if (!IsCallable(func))
	                throw new TypeError();
	            return func;
	        }
	        function GetIterator(obj) {
	            var method = GetMethod(obj, iteratorSymbol);
	            if (!IsCallable(method))
	                throw new TypeError();
	            var iterator = method.call(obj);
	            if (!IsObject(iterator))
	                throw new TypeError();
	            return iterator;
	        }
	        function IteratorValue(iterResult) {
	            return iterResult.value;
	        }
	        function IteratorStep(iterator) {
	            var result = iterator.next();
	            return result.done ? false : result;
	        }
	        function IteratorClose(iterator) {
	            var f = iterator["return"];
	            if (f)
	                f.call(iterator);
	        }
	        function OrdinaryGetPrototypeOf(O) {
	            var proto = Object.getPrototypeOf(O);
	            if (typeof O !== "function" || O === functionPrototype)
	                return proto;
	            if (proto !== functionPrototype)
	                return proto;
	            var prototype = O.prototype;
	            var prototypeProto = prototype && Object.getPrototypeOf(prototype);
	            if (prototypeProto == null || prototypeProto === Object.prototype)
	                return proto;
	            var constructor = prototypeProto.constructor;
	            if (typeof constructor !== "function")
	                return proto;
	            if (constructor === O)
	                return proto;
	            return constructor;
	        }
	        function CreateMapPolyfill() {
	            var cacheSentinel = {};
	            var arraySentinel = [];
	            var MapIterator =  (function () {
	                function MapIterator(keys, values, selector) {
	                    this._index = 0;
	                    this._keys = keys;
	                    this._values = values;
	                    this._selector = selector;
	                }
	                MapIterator.prototype["@@iterator"] = function () { return this; };
	                MapIterator.prototype[iteratorSymbol] = function () { return this; };
	                MapIterator.prototype.next = function () {
	                    var index = this._index;
	                    if (index >= 0 && index < this._keys.length) {
	                        var result = this._selector(this._keys[index], this._values[index]);
	                        if (index + 1 >= this._keys.length) {
	                            this._index = -1;
	                            this._keys = arraySentinel;
	                            this._values = arraySentinel;
	                        }
	                        else {
	                            this._index++;
	                        }
	                        return { value: result, done: false };
	                    }
	                    return { value: undefined, done: true };
	                };
	                MapIterator.prototype.throw = function (error) {
	                    if (this._index >= 0) {
	                        this._index = -1;
	                        this._keys = arraySentinel;
	                        this._values = arraySentinel;
	                    }
	                    throw error;
	                };
	                MapIterator.prototype.return = function (value) {
	                    if (this._index >= 0) {
	                        this._index = -1;
	                        this._keys = arraySentinel;
	                        this._values = arraySentinel;
	                    }
	                    return { value: value, done: true };
	                };
	                return MapIterator;
	            }());
	            return  (function () {
	                function Map() {
	                    this._keys = [];
	                    this._values = [];
	                    this._cacheKey = cacheSentinel;
	                    this._cacheIndex = -2;
	                }
	                Object.defineProperty(Map.prototype, "size", {
	                    get: function () { return this._keys.length; },
	                    enumerable: true,
	                    configurable: true
	                });
	                Map.prototype.has = function (key) { return this._find(key,  false) >= 0; };
	                Map.prototype.get = function (key) {
	                    var index = this._find(key,  false);
	                    return index >= 0 ? this._values[index] : undefined;
	                };
	                Map.prototype.set = function (key, value) {
	                    var index = this._find(key,  true);
	                    this._values[index] = value;
	                    return this;
	                };
	                Map.prototype.delete = function (key) {
	                    var index = this._find(key,  false);
	                    if (index >= 0) {
	                        var size = this._keys.length;
	                        for (var i = index + 1; i < size; i++) {
	                            this._keys[i - 1] = this._keys[i];
	                            this._values[i - 1] = this._values[i];
	                        }
	                        this._keys.length--;
	                        this._values.length--;
	                        if (key === this._cacheKey) {
	                            this._cacheKey = cacheSentinel;
	                            this._cacheIndex = -2;
	                        }
	                        return true;
	                    }
	                    return false;
	                };
	                Map.prototype.clear = function () {
	                    this._keys.length = 0;
	                    this._values.length = 0;
	                    this._cacheKey = cacheSentinel;
	                    this._cacheIndex = -2;
	                };
	                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };
	                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };
	                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };
	                Map.prototype["@@iterator"] = function () { return this.entries(); };
	                Map.prototype[iteratorSymbol] = function () { return this.entries(); };
	                Map.prototype._find = function (key, insert) {
	                    if (this._cacheKey !== key) {
	                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);
	                    }
	                    if (this._cacheIndex < 0 && insert) {
	                        this._cacheIndex = this._keys.length;
	                        this._keys.push(key);
	                        this._values.push(undefined);
	                    }
	                    return this._cacheIndex;
	                };
	                return Map;
	            }());
	            function getKey(key, _) {
	                return key;
	            }
	            function getValue(_, value) {
	                return value;
	            }
	            function getEntry(key, value) {
	                return [key, value];
	            }
	        }
	        function CreateSetPolyfill() {
	            return  (function () {
	                function Set() {
	                    this._map = new _Map();
	                }
	                Object.defineProperty(Set.prototype, "size", {
	                    get: function () { return this._map.size; },
	                    enumerable: true,
	                    configurable: true
	                });
	                Set.prototype.has = function (value) { return this._map.has(value); };
	                Set.prototype.add = function (value) { return this._map.set(value, value), this; };
	                Set.prototype.delete = function (value) { return this._map.delete(value); };
	                Set.prototype.clear = function () { this._map.clear(); };
	                Set.prototype.keys = function () { return this._map.keys(); };
	                Set.prototype.values = function () { return this._map.values(); };
	                Set.prototype.entries = function () { return this._map.entries(); };
	                Set.prototype["@@iterator"] = function () { return this.keys(); };
	                Set.prototype[iteratorSymbol] = function () { return this.keys(); };
	                return Set;
	            }());
	        }
	        function CreateWeakMapPolyfill() {
	            var UUID_SIZE = 16;
	            var keys = HashMap.create();
	            var rootKey = CreateUniqueKey();
	            return  (function () {
	                function WeakMap() {
	                    this._key = CreateUniqueKey();
	                }
	                WeakMap.prototype.has = function (target) {
	                    var table = GetOrCreateWeakMapTable(target,  false);
	                    return table !== undefined ? HashMap.has(table, this._key) : false;
	                };
	                WeakMap.prototype.get = function (target) {
	                    var table = GetOrCreateWeakMapTable(target,  false);
	                    return table !== undefined ? HashMap.get(table, this._key) : undefined;
	                };
	                WeakMap.prototype.set = function (target, value) {
	                    var table = GetOrCreateWeakMapTable(target,  true);
	                    table[this._key] = value;
	                    return this;
	                };
	                WeakMap.prototype.delete = function (target) {
	                    var table = GetOrCreateWeakMapTable(target,  false);
	                    return table !== undefined ? delete table[this._key] : false;
	                };
	                WeakMap.prototype.clear = function () {
	                    this._key = CreateUniqueKey();
	                };
	                return WeakMap;
	            }());
	            function CreateUniqueKey() {
	                var key;
	                do
	                    key = "@@WeakMap@@" + CreateUUID();
	                while (HashMap.has(keys, key));
	                keys[key] = true;
	                return key;
	            }
	            function GetOrCreateWeakMapTable(target, create) {
	                if (!hasOwn.call(target, rootKey)) {
	                    if (!create)
	                        return undefined;
	                    Object.defineProperty(target, rootKey, { value: HashMap.create() });
	                }
	                return target[rootKey];
	            }
	            function FillRandomBytes(buffer, size) {
	                for (var i = 0; i < size; ++i)
	                    buffer[i] = Math.random() * 0xff | 0;
	                return buffer;
	            }
	            function GenRandomBytes(size) {
	                if (typeof Uint8Array === "function") {
	                    if (typeof crypto !== "undefined")
	                        return crypto.getRandomValues(new Uint8Array(size));
	                    if (typeof msCrypto !== "undefined")
	                        return msCrypto.getRandomValues(new Uint8Array(size));
	                    return FillRandomBytes(new Uint8Array(size), size);
	                }
	                return FillRandomBytes(new Array(size), size);
	            }
	            function CreateUUID() {
	                var data = GenRandomBytes(UUID_SIZE);
	                data[6] = data[6] & 0x4f | 0x40;
	                data[8] = data[8] & 0xbf | 0x80;
	                var result = "";
	                for (var offset = 0; offset < UUID_SIZE; ++offset) {
	                    var byte = data[offset];
	                    if (offset === 4 || offset === 6 || offset === 8)
	                        result += "-";
	                    if (byte < 16)
	                        result += "0";
	                    result += byte.toString(16).toLowerCase();
	                }
	                return result;
	            }
	        }
	        function MakeDictionary(obj) {
	            obj.__ = undefined;
	            delete obj.__;
	            return obj;
	        }
	    });
	})(Reflect$1 || (Reflect$1 = {}));

	var Lifecycle;
	(function (Lifecycle) {
	    Lifecycle[Lifecycle["Transient"] = 0] = "Transient";
	    Lifecycle[Lifecycle["Singleton"] = 1] = "Singleton";
	    Lifecycle[Lifecycle["ResolutionScoped"] = 2] = "ResolutionScoped";
	    Lifecycle[Lifecycle["ContainerScoped"] = 3] = "ContainerScoped";
	})(Lifecycle || (Lifecycle = {}));
	var Lifecycle$1 = Lifecycle;

	var extendStatics = function(d, b) {
	    extendStatics = Object.setPrototypeOf ||
	        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
	        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
	    return extendStatics(d, b);
	};
	function __extends(d, b) {
	    extendStatics(d, b);
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	}
	function __values(o) {
	    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
	    if (m) return m.call(o);
	    if (o && typeof o.length === "number") return {
	        next: function () {
	            if (o && i >= o.length) o = void 0;
	            return { value: o && o[i++], done: !o };
	        }
	    };
	    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
	}
	function __read(o, n) {
	    var m = typeof Symbol === "function" && o[Symbol.iterator];
	    if (!m) return o;
	    var i = m.call(o), r, ar = [], e;
	    try {
	        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
	    }
	    catch (error) { e = { error: error }; }
	    finally {
	        try {
	            if (r && !r.done && (m = i["return"])) m.call(i);
	        }
	        finally { if (e) throw e.error; }
	    }
	    return ar;
	}
	function __spread() {
	    for (var ar = [], i = 0; i < arguments.length; i++)
	        ar = ar.concat(__read(arguments[i]));
	    return ar;
	}

	var INJECTION_TOKEN_METADATA_KEY = "injectionTokens";
	function getParamInfo(target) {
	    var params = Reflect.getMetadata("design:paramtypes", target) || [];
	    var injectionTokens = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};
	    Object.keys(injectionTokens).forEach(function (key) {
	        params[+key] = injectionTokens[key];
	    });
	    return params;
	}
	function defineInjectionTokenMetadata(data, transform) {
	    return function (target, _propertyKey, parameterIndex) {
	        var descriptors = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};
	        descriptors[parameterIndex] = transform
	            ? {
	                token: data,
	                transform: transform.transformToken,
	                transformArgs: transform.args || []
	            }
	            : data;
	        Reflect.defineMetadata(INJECTION_TOKEN_METADATA_KEY, descriptors, target);
	    };
	}

	function isClassProvider(provider) {
	    return !!provider.useClass;
	}

	function isFactoryProvider(provider) {
	    return !!provider.useFactory;
	}

	var DelayedConstructor = (function () {
	    function DelayedConstructor(wrap) {
	        this.wrap = wrap;
	        this.reflectMethods = [
	            "get",
	            "getPrototypeOf",
	            "setPrototypeOf",
	            "getOwnPropertyDescriptor",
	            "defineProperty",
	            "has",
	            "set",
	            "deleteProperty",
	            "apply",
	            "construct"
	        ];
	    }
	    DelayedConstructor.prototype.createProxy = function (createObject) {
	        var _this = this;
	        var target = {};
	        var init = false;
	        var value;
	        var delayedObject = function () {
	            if (!init) {
	                value = createObject(_this.wrap());
	                init = true;
	            }
	            return value;
	        };
	        return new Proxy(target, this.createHandler(delayedObject));
	    };
	    DelayedConstructor.prototype.createHandler = function (delayedObject) {
	        var handler = {};
	        var install = function (name) {
	            handler[name] = function () {
	                var args = [];
	                for (var _i = 0; _i < arguments.length; _i++) {
	                    args[_i] = arguments[_i];
	                }
	                args[0] = delayedObject();
	                var method = Reflect[name];
	                return method.apply(void 0, __spread(args));
	            };
	        };
	        this.reflectMethods.forEach(install);
	        return handler;
	    };
	    return DelayedConstructor;
	}());

	function isNormalToken(token) {
	    return typeof token === "string" || typeof token === "symbol";
	}
	function isTokenDescriptor(descriptor) {
	    return (typeof descriptor === "object" &&
	        "token" in descriptor &&
	        "multiple" in descriptor);
	}
	function isTransformDescriptor(descriptor) {
	    return (typeof descriptor === "object" &&
	        "token" in descriptor &&
	        "transform" in descriptor);
	}
	function isConstructorToken(token) {
	    return typeof token === "function" || token instanceof DelayedConstructor;
	}

	function isTokenProvider(provider) {
	    return !!provider.useToken;
	}

	function isValueProvider(provider) {
	    return provider.useValue != undefined;
	}

	function isProvider(provider) {
	    return (isClassProvider(provider) ||
	        isValueProvider(provider) ||
	        isTokenProvider(provider) ||
	        isFactoryProvider(provider));
	}

	var RegistryBase = (function () {
	    function RegistryBase() {
	        this._registryMap = new Map();
	    }
	    RegistryBase.prototype.entries = function () {
	        return this._registryMap.entries();
	    };
	    RegistryBase.prototype.getAll = function (key) {
	        this.ensure(key);
	        return this._registryMap.get(key);
	    };
	    RegistryBase.prototype.get = function (key) {
	        this.ensure(key);
	        var value = this._registryMap.get(key);
	        return value[value.length - 1] || null;
	    };
	    RegistryBase.prototype.set = function (key, value) {
	        this.ensure(key);
	        this._registryMap.get(key).push(value);
	    };
	    RegistryBase.prototype.setAll = function (key, value) {
	        this._registryMap.set(key, value);
	    };
	    RegistryBase.prototype.has = function (key) {
	        this.ensure(key);
	        return this._registryMap.get(key).length > 0;
	    };
	    RegistryBase.prototype.clear = function () {
	        this._registryMap.clear();
	    };
	    RegistryBase.prototype.ensure = function (key) {
	        if (!this._registryMap.has(key)) {
	            this._registryMap.set(key, []);
	        }
	    };
	    return RegistryBase;
	}());

	var Registry = (function (_super) {
	    __extends(Registry, _super);
	    function Registry() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return Registry;
	}(RegistryBase));

	var ResolutionContext = (function () {
	    function ResolutionContext() {
	        this.scopedResolutions = new Map();
	    }
	    return ResolutionContext;
	}());

	function formatDependency(params, idx) {
	    if (params === null) {
	        return "at position #" + idx;
	    }
	    var argName = params.split(",")[idx].trim();
	    return "\"" + argName + "\" at position #" + idx;
	}
	function composeErrorMessage(msg, e, indent) {
	    if (indent === void 0) { indent = "    "; }
	    return __spread([msg], e.message.split("\n").map(function (l) { return indent + l; })).join("\n");
	}
	function formatErrorCtor(ctor, paramIdx, error) {
	    var _a = __read(ctor.toString().match(/constructor\(([\w, ]+)\)/) || [], 2), _b = _a[1], params = _b === void 0 ? null : _b;
	    var dep = formatDependency(params, paramIdx);
	    return composeErrorMessage("Cannot inject the dependency " + dep + " of \"" + ctor.name + "\" constructor. Reason:", error);
	}

	var PreResolutionInterceptors = (function (_super) {
	    __extends(PreResolutionInterceptors, _super);
	    function PreResolutionInterceptors() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return PreResolutionInterceptors;
	}(RegistryBase));
	var PostResolutionInterceptors = (function (_super) {
	    __extends(PostResolutionInterceptors, _super);
	    function PostResolutionInterceptors() {
	        return _super !== null && _super.apply(this, arguments) || this;
	    }
	    return PostResolutionInterceptors;
	}(RegistryBase));
	var Interceptors = (function () {
	    function Interceptors() {
	        this.preResolution = new PreResolutionInterceptors();
	        this.postResolution = new PostResolutionInterceptors();
	    }
	    return Interceptors;
	}());

	var typeInfo = new Map();
	var InternalDependencyContainer = (function () {
	    function InternalDependencyContainer(parent) {
	        this.parent = parent;
	        this._registry = new Registry();
	        this.interceptors = new Interceptors();
	    }
	    InternalDependencyContainer.prototype.register = function (token, providerOrConstructor, options) {
	        if (options === void 0) { options = { lifecycle: Lifecycle$1.Transient }; }
	        var provider;
	        if (!isProvider(providerOrConstructor)) {
	            provider = { useClass: providerOrConstructor };
	        }
	        else {
	            provider = providerOrConstructor;
	        }
	        if (isTokenProvider(provider)) {
	            var path = [token];
	            var tokenProvider = provider;
	            while (tokenProvider != null) {
	                var currentToken = tokenProvider.useToken;
	                if (path.includes(currentToken)) {
	                    throw new Error("Token registration cycle detected! " + __spread(path, [currentToken]).join(" -> "));
	                }
	                path.push(currentToken);
	                var registration = this._registry.get(currentToken);
	                if (registration && isTokenProvider(registration.provider)) {
	                    tokenProvider = registration.provider;
	                }
	                else {
	                    tokenProvider = null;
	                }
	            }
	        }
	        if (options.lifecycle === Lifecycle$1.Singleton ||
	            options.lifecycle == Lifecycle$1.ContainerScoped ||
	            options.lifecycle == Lifecycle$1.ResolutionScoped) {
	            if (isValueProvider(provider) || isFactoryProvider(provider)) {
	                throw new Error("Cannot use lifecycle \"" + Lifecycle$1[options.lifecycle] + "\" with ValueProviders or FactoryProviders");
	            }
	        }
	        this._registry.set(token, { provider: provider, options: options });
	        return this;
	    };
	    InternalDependencyContainer.prototype.registerType = function (from, to) {
	        if (isNormalToken(to)) {
	            return this.register(from, {
	                useToken: to
	            });
	        }
	        return this.register(from, {
	            useClass: to
	        });
	    };
	    InternalDependencyContainer.prototype.registerInstance = function (token, instance) {
	        return this.register(token, {
	            useValue: instance
	        });
	    };
	    InternalDependencyContainer.prototype.registerSingleton = function (from, to) {
	        if (isNormalToken(from)) {
	            if (isNormalToken(to)) {
	                return this.register(from, {
	                    useToken: to
	                }, { lifecycle: Lifecycle$1.Singleton });
	            }
	            else if (to) {
	                return this.register(from, {
	                    useClass: to
	                }, { lifecycle: Lifecycle$1.Singleton });
	            }
	            throw new Error('Cannot register a type name as a singleton without a "to" token');
	        }
	        var useClass = from;
	        if (to && !isNormalToken(to)) {
	            useClass = to;
	        }
	        return this.register(from, {
	            useClass: useClass
	        }, { lifecycle: Lifecycle$1.Singleton });
	    };
	    InternalDependencyContainer.prototype.resolve = function (token, context) {
	        if (context === void 0) { context = new ResolutionContext(); }
	        var registration = this.getRegistration(token);
	        if (!registration && isNormalToken(token)) {
	            throw new Error("Attempted to resolve unregistered dependency token: \"" + token.toString() + "\"");
	        }
	        this.executePreResolutionInterceptor(token, "Single");
	        if (registration) {
	            var result = this.resolveRegistration(registration, context);
	            this.executePostResolutionInterceptor(token, result, "Single");
	            return result;
	        }
	        if (isConstructorToken(token)) {
	            var result = this.construct(token, context);
	            this.executePostResolutionInterceptor(token, result, "Single");
	            return result;
	        }
	        throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.");
	    };
	    InternalDependencyContainer.prototype.executePreResolutionInterceptor = function (token, resolutionType) {
	        var e_1, _a;
	        if (this.interceptors.preResolution.has(token)) {
	            var remainingInterceptors = [];
	            try {
	                for (var _b = __values(this.interceptors.preResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {
	                    var interceptor = _c.value;
	                    if (interceptor.options.frequency != "Once") {
	                        remainingInterceptors.push(interceptor);
	                    }
	                    interceptor.callback(token, resolutionType);
	                }
	            }
	            catch (e_1_1) { e_1 = { error: e_1_1 }; }
	            finally {
	                try {
	                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
	                }
	                finally { if (e_1) throw e_1.error; }
	            }
	            this.interceptors.preResolution.setAll(token, remainingInterceptors);
	        }
	    };
	    InternalDependencyContainer.prototype.executePostResolutionInterceptor = function (token, result, resolutionType) {
	        var e_2, _a;
	        if (this.interceptors.postResolution.has(token)) {
	            var remainingInterceptors = [];
	            try {
	                for (var _b = __values(this.interceptors.postResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {
	                    var interceptor = _c.value;
	                    if (interceptor.options.frequency != "Once") {
	                        remainingInterceptors.push(interceptor);
	                    }
	                    interceptor.callback(token, result, resolutionType);
	                }
	            }
	            catch (e_2_1) { e_2 = { error: e_2_1 }; }
	            finally {
	                try {
	                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
	                }
	                finally { if (e_2) throw e_2.error; }
	            }
	            this.interceptors.postResolution.setAll(token, remainingInterceptors);
	        }
	    };
	    InternalDependencyContainer.prototype.resolveRegistration = function (registration, context) {
	        if (registration.options.lifecycle === Lifecycle$1.ResolutionScoped &&
	            context.scopedResolutions.has(registration)) {
	            return context.scopedResolutions.get(registration);
	        }
	        var isSingleton = registration.options.lifecycle === Lifecycle$1.Singleton;
	        var isContainerScoped = registration.options.lifecycle === Lifecycle$1.ContainerScoped;
	        var returnInstance = isSingleton || isContainerScoped;
	        var resolved;
	        if (isValueProvider(registration.provider)) {
	            resolved = registration.provider.useValue;
	        }
	        else if (isTokenProvider(registration.provider)) {
	            resolved = returnInstance
	                ? registration.instance ||
	                    (registration.instance = this.resolve(registration.provider.useToken, context))
	                : this.resolve(registration.provider.useToken, context);
	        }
	        else if (isClassProvider(registration.provider)) {
	            resolved = returnInstance
	                ? registration.instance ||
	                    (registration.instance = this.construct(registration.provider.useClass, context))
	                : this.construct(registration.provider.useClass, context);
	        }
	        else if (isFactoryProvider(registration.provider)) {
	            resolved = registration.provider.useFactory(this);
	        }
	        else {
	            resolved = this.construct(registration.provider, context);
	        }
	        if (registration.options.lifecycle === Lifecycle$1.ResolutionScoped) {
	            context.scopedResolutions.set(registration, resolved);
	        }
	        return resolved;
	    };
	    InternalDependencyContainer.prototype.resolveAll = function (token, context) {
	        var _this = this;
	        if (context === void 0) { context = new ResolutionContext(); }
	        var registrations = this.getAllRegistrations(token);
	        if (!registrations && isNormalToken(token)) {
	            throw new Error("Attempted to resolve unregistered dependency token: \"" + token.toString() + "\"");
	        }
	        this.executePreResolutionInterceptor(token, "All");
	        if (registrations) {
	            var result_1 = registrations.map(function (item) {
	                return _this.resolveRegistration(item, context);
	            });
	            this.executePostResolutionInterceptor(token, result_1, "All");
	            return result_1;
	        }
	        var result = [this.construct(token, context)];
	        this.executePostResolutionInterceptor(token, result, "All");
	        return result;
	    };
	    InternalDependencyContainer.prototype.isRegistered = function (token, recursive) {
	        if (recursive === void 0) { recursive = false; }
	        return (this._registry.has(token) ||
	            (recursive &&
	                (this.parent || false) &&
	                this.parent.isRegistered(token, true)));
	    };
	    InternalDependencyContainer.prototype.reset = function () {
	        this._registry.clear();
	        this.interceptors.preResolution.clear();
	        this.interceptors.postResolution.clear();
	    };
	    InternalDependencyContainer.prototype.clearInstances = function () {
	        var e_3, _a;
	        try {
	            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
	                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];
	                this._registry.setAll(token, registrations
	                    .filter(function (registration) { return !isValueProvider(registration.provider); })
	                    .map(function (registration) {
	                    registration.instance = undefined;
	                    return registration;
	                }));
	            }
	        }
	        catch (e_3_1) { e_3 = { error: e_3_1 }; }
	        finally {
	            try {
	                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
	            }
	            finally { if (e_3) throw e_3.error; }
	        }
	    };
	    InternalDependencyContainer.prototype.createChildContainer = function () {
	        var e_4, _a;
	        var childContainer = new InternalDependencyContainer(this);
	        try {
	            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
	                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];
	                if (registrations.some(function (_a) {
	                    var options = _a.options;
	                    return options.lifecycle === Lifecycle$1.ContainerScoped;
	                })) {
	                    childContainer._registry.setAll(token, registrations.map(function (registration) {
	                        if (registration.options.lifecycle === Lifecycle$1.ContainerScoped) {
	                            return {
	                                provider: registration.provider,
	                                options: registration.options
	                            };
	                        }
	                        return registration;
	                    }));
	                }
	            }
	        }
	        catch (e_4_1) { e_4 = { error: e_4_1 }; }
	        finally {
	            try {
	                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
	            }
	            finally { if (e_4) throw e_4.error; }
	        }
	        return childContainer;
	    };
	    InternalDependencyContainer.prototype.beforeResolution = function (token, callback, options) {
	        if (options === void 0) { options = { frequency: "Always" }; }
	        this.interceptors.preResolution.set(token, {
	            callback: callback,
	            options: options
	        });
	    };
	    InternalDependencyContainer.prototype.afterResolution = function (token, callback, options) {
	        if (options === void 0) { options = { frequency: "Always" }; }
	        this.interceptors.postResolution.set(token, {
	            callback: callback,
	            options: options
	        });
	    };
	    InternalDependencyContainer.prototype.getRegistration = function (token) {
	        if (this.isRegistered(token)) {
	            return this._registry.get(token);
	        }
	        if (this.parent) {
	            return this.parent.getRegistration(token);
	        }
	        return null;
	    };
	    InternalDependencyContainer.prototype.getAllRegistrations = function (token) {
	        if (this.isRegistered(token)) {
	            return this._registry.getAll(token);
	        }
	        if (this.parent) {
	            return this.parent.getAllRegistrations(token);
	        }
	        return null;
	    };
	    InternalDependencyContainer.prototype.construct = function (ctor, context) {
	        var _this = this;
	        if (ctor instanceof DelayedConstructor) {
	            return ctor.createProxy(function (target) {
	                return _this.resolve(target, context);
	            });
	        }
	        var paramInfo = typeInfo.get(ctor);
	        if (!paramInfo || paramInfo.length === 0) {
	            if (ctor.length === 0) {
	                return new ctor();
	            }
	            else {
	                throw new Error("TypeInfo not known for \"" + ctor.name + "\"");
	            }
	        }
	        var params = paramInfo.map(this.resolveParams(context, ctor));
	        return new (ctor.bind.apply(ctor, __spread([void 0], params)))();
	    };
	    InternalDependencyContainer.prototype.resolveParams = function (context, ctor) {
	        var _this = this;
	        return function (param, idx) {
	            var _a, _b, _c;
	            try {
	                if (isTokenDescriptor(param)) {
	                    if (isTransformDescriptor(param)) {
	                        return param.multiple
	                            ? (_a = _this.resolve(param.transform)).transform.apply(_a, __spread([_this.resolveAll(param.token)], param.transformArgs)) : (_b = _this.resolve(param.transform)).transform.apply(_b, __spread([_this.resolve(param.token, context)], param.transformArgs));
	                    }
	                    else {
	                        return param.multiple
	                            ? _this.resolveAll(param.token)
	                            : _this.resolve(param.token, context);
	                    }
	                }
	                else if (isTransformDescriptor(param)) {
	                    return (_c = _this.resolve(param.transform, context)).transform.apply(_c, __spread([_this.resolve(param.token, context)], param.transformArgs));
	                }
	                return _this.resolve(param, context);
	            }
	            catch (e) {
	                throw new Error(formatErrorCtor(ctor, idx, e));
	            }
	        };
	    };
	    return InternalDependencyContainer;
	}());
	var instance = new InternalDependencyContainer();

	function inject(token) {
	    return defineInjectionTokenMetadata(token);
	}

	function injectable() {
	    return function (target) {
	        typeInfo.set(target, getParamInfo(target));
	    };
	}

	function singleton() {
	    return function (target) {
	        injectable()(target);
	        instance.registerSingleton(target);
	    };
	}

	if (typeof Reflect === "undefined" || !Reflect.getMetadata) {
	    throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");
	}

	function __decorate(decorators, target, key, desc) {
	    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
	    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
	    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
	    return c > 3 && r && Object.defineProperty(target, key, r), r;
	}
	function __param(paramIndex, decorator) {
	    return function (target, key) { decorator(target, key, paramIndex); }
	}
	function __metadata(metadataKey, metadataValue) {
	    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
	}

	class DebounceByKey {
	    constructor(_wait) {
	        this._wait = _wait;
	        this._timeouts = new Map();
	    }
	    async limit(key) {
	        return new Promise(resolve => {
	            if (this._timeouts.has(key)) {
	                window.clearTimeout(this._timeouts.get(key));
	            }
	            const cancel = window.setTimeout(() => {
	                resolve();
	            }, this._wait);
	            this._timeouts.set(key, cancel);
	        });
	    }
	}

	class Emitter {
	    constructor() {
	        this._listeners = new Set();
	        this._emitted = 0;
	    }
	    on(listener) {
	        this._listeners.add(listener);
	        return () => {
	            this.off(listener);
	        };
	    }
	    off(listener) {
	        this._listeners.delete(listener);
	    }
	    once() {
	        return new Promise(resolve => {
	            const off = this.on((...args) => {
	                off();
	                return resolve(args);
	            });
	        });
	    }
	    async emit(value) {
	        return Promise.all([...this._listeners].map(listener => listener(value))).then(result => {
	            this._emitted++;
	            return result;
	        });
	    }
	    clear() {
	        this._listeners.clear();
	    }
	    get count() {
	        return this._listeners.size;
	    }
	    get emitted() {
	        return this._emitted;
	    }
	}

	let Logger = class Logger {
	    constructor() {
	        this.sending = new Emitter();
	        this.logQueue = [];
	        this.supressedEventLogNames = new Map([['SlotRenderEnded', 'adImpression']]);
	        this.disableLogging = false;
	        this.queueLogs = false;
	    }
	    init(adthrive) {
	        this.logFilter = adthrive.loggerFilters || [];
	        this.siteId = adthrive.siteAds.siteId;
	        this.siteName = adthrive.siteAds.siteName;
	        this.bucket = adthrive.bucket;
	        this.branch = adthrive.branch;
	        this.deployment = adthrive.deployment;
	        this.debug = adthrive.debug;
	    }
	    log(className, methodName, ...args) {
	        this.call(console.log, className, methodName, ...args);
	    }
	    info(className, methodName, ...args) {
	        this.call(console.info, className, methodName, ...args);
	    }
	    warn(className, methodName, ...args) {
	        this.call(console.warn, className, methodName, ...args);
	    }
	    error(className, methodName, ...args) {
	        this.call(console.error, className, methodName, ...args);
	        this.makeRequest('send', 'error', className, methodName, ...args).catch(err => {
	            console.error(err);
	        });
	    }
	    event(className, methodName, ...args) {
	        const shouldLog = this.debug || !this.supressedEventLogNames.has(className) || this.supressedEventLogNames.get(className) !== methodName;
	        if (shouldLog) {
	            this.call(console.log, className, methodName, ...args);
	        }
	        this.makeRequest('send', 'event', className, methodName, ...args).catch(err => {
	            console.error(err);
	        });
	    }
	    fetchEvent(className, methodName, ...args) {
	        this.call(console.log, className, methodName, ...args);
	        this.makeRequest('fetch', 'event', className, methodName, ...args).catch(err => {
	            console.error(err);
	        });
	    }
	    call(logFunction, className, methodName, ...args) {
	        const filter = this.logFilter;
	        if (filter && filter.length && filter.indexOf(className) > -1) {
	            return;
	        }
	        const message = [`%c${className}::${methodName} `];
	        const params = ['color: #999; font-weight: bold;'];
	        if (args.length > 0 && typeof args[0] === 'string') {
	            message.push(args.shift());
	        }
	        params.push(...args);
	        try {
	            Function.prototype.apply.call(logFunction, console, [message.join(''), ...params]);
	        }
	        catch (err) {
	            console.error(err);
	            return;
	        }
	    }
	    buildRequestUrl(type, className, methodName, args) {
	        const baseUrl = `https://logger.adthrive.com/${type}`;
	        const message = [`${className}::${methodName} `];
	        if (args.length > 0 && typeof args[0] === 'string') {
	            message.push(args.shift());
	        }
	        const body = args.map(arg => {
	            if (arg && arg.error) {
	                arg = arg.error;
	            }
	            if (arg instanceof Error) {
	                arg = {
	                    name: arg.name,
	                    message: arg.message,
	                    stack: arg.stack,
	                };
	            }
	            return arg;
	        });
	        if (this.data) {
	            body.push(this.data);
	        }
	        const payload = [
	            `siteId=${encodeURIComponent(this.siteId || '')}`,
	            `siteName=${encodeURIComponent(this.siteName || '')}`,
	            `bucket=${encodeURIComponent(this.bucket || '')}`,
	            `branch=${encodeURIComponent(this.branch || '')}`,
	            `deployment=${encodeURIComponent(this.deployment || '')}`,
	            `message=${encodeURIComponent(message.join('').trim())}`,
	            `pageurl=${encodeURIComponent(window.location.origin + window.location.pathname)}`,
	            `body=${encodeURIComponent(JSON.stringify(body))}`,
	        ];
	        return `${baseUrl}?${payload.join('&')}`;
	    }
	    clearLogQueue(sendLogs) {
	        this.info('Logger', 'gdprEnforcement', 'clearLogQueue', sendLogs);
	        if (sendLogs) {
	            this.logQueue.forEach(log => {
	                if (log.action === 'send') {
	                    this.sendRequest(log.type, log.className, log.methodName, ...log.args).catch(() => { });
	                }
	                if (log.action === 'fetch') {
	                    this.fetchRequest(log.type, log.className, log.methodName, ...log.args).catch(() => { });
	                }
	            });
	        }
	        this.logQueue = [];
	        this.queueLogs = false;
	    }
	    async makeRequest(action, type, className, methodName, ...args) {
	        if (this.disableLogging) {
	            this.info('Logger', 'gdprEnforcement', 'logging disabled');
	            return Promise.resolve(false);
	        }
	        if (this.queueLogs) {
	            const log = { action, type, className, methodName, args };
	            this.logQueue.push(log);
	            this.info('Logger', 'gdprEnforcement', 'log queued');
	            return Promise.resolve(true);
	        }
	        if (action === 'send') {
	            return this.sendRequest(type, className, methodName, ...args);
	        }
	        else {
	            return this.fetchRequest(type, className, methodName, ...args);
	        }
	    }
	    async sendRequest(type, className, methodName, ...args) {
	        this.sending.emit().catch(() => { });
	        const requestUrl = this.buildRequestUrl(type, className, methodName, args);
	        const maxCloudFrontUrlSize = 8192;
	        if (requestUrl.length > maxCloudFrontUrlSize) {
	            return this.sendRequest(type, className, methodName, 'Error query too large').catch(err => {
	                console.error(err);
	            });
	        }
	        return new Promise((resolve, reject) => {
	            const request = new XMLHttpRequest();
	            request.open('get', requestUrl);
	            request.addEventListener('load', () => {
	                if (request.status !== 200) {
	                    return reject(new Error(`Logger send request failed ${request.status}`));
	                }
	                return resolve(request.responseText);
	            });
	            request.addEventListener('error', () => {
	                return reject(new Error('Logger send request failed'));
	            });
	            request.send();
	        });
	    }
	    async fetchRequest(type, className, methodName, ...args) {
	        this.sending.emit().catch(() => { });
	        const requestUrl = this.buildRequestUrl(type, className, methodName, args);
	        return fetch(requestUrl, { method: 'GET', keepalive: true, referrerPolicy: 'no-referrer-when-downgrade' });
	    }
	};
	Logger = __decorate([
	    injectable()
	], Logger);
	const logger = new Logger();

	const adjustCpm = (bidderCpmConfig, bidCpm) => {
	    if (bidderCpmConfig) {
	        return bidderCpmConfig.type === 'flat' ? bidCpm - bidderCpmConfig.value : bidderCpmConfig.value * bidCpm;
	    }
	    return bidCpm;
	};
	const getConfigFromMediaType = (_config, bidderName, bidResponse) => {
	    const instreamBid = _config.video.instreamAdUnits.has(bidResponse === null || bidResponse === void 0 ? void 0 : bidResponse.adUnitCode);
	    const outstreamBid = !instreamBid && ('vastUrl' in bidResponse || 'vastXml' in bidResponse);
	    const name = instreamBid ? 'instream' : outstreamBid ? 'outstream' : 'default';
	    return _config.partners.getBidderConfig(bidderName).cpmMap.get(_config.partners.getBidderConfig(bidderName).cpmMap.has(name) ? name : 'default');
	};
	const adjustCpmFromBidResponse = (_config, bidCpm, bidderName, bidResponse) => {
	    var _a;
	    const dealId = bidResponse === null || bidResponse === void 0 ? void 0 : bidResponse.dealId;
	    const pmpConfig = _config.partners.getBidderConfig(bidderName).cpmMap.get('pmp');
	    if (dealId && pmpConfig) {
	        const dealConfig = (_a = pmpConfig.deals) === null || _a === void 0 ? void 0 : _a.filter(configDeal => configDeal.name === dealId.toString())[0];
	        if (!dealConfig) {
	            return adjustCpm(pmpConfig, bidCpm);
	        }
	        return pmpConfig.type === 'flat' ? adjustCpm(dealConfig, bidCpm) : pmpConfig.value * adjustCpm(dealConfig, bidCpm);
	    }
	    else {
	        const mediatypeConfig = getConfigFromMediaType(_config, bidderName, bidResponse);
	        return adjustCpm(mediatypeConfig, bidCpm);
	    }
	};

	const navUserAgent = navigator.userAgent;
	const navVendor = navigator.vendor;
	const isChrome = (userAgent, vendor) => {
	    return /Chrom/.test(userAgent || navUserAgent) && /Google/.test(vendor || navVendor) && !isEdge(userAgent) && !isOpera(userAgent);
	};
	const isSafari = (userAgent, vendor) => {
	    return /Safari/.test(userAgent || navUserAgent) && /Apple Computer/.test(vendor || navVendor) && !isEdge(userAgent) && !isOpera(userAgent);
	};
	const isEdge = (userAgent) => {
	    return /Edge\/|Edg\//.test(userAgent || navUserAgent);
	};
	const isFirefox = (userAgent) => {
	    return /Firefox/.test(userAgent || navUserAgent);
	};
	const isInternetExplorer = (userAgent) => {
	    return /Trident|MSIE/.test(userAgent || navUserAgent);
	};
	const isOpera = (userAgent) => {
	    return /Opera|OPR/.test(userAgent || navUserAgent);
	};
	const getBrowserName = (userAgent, vendor) => {
	    if (isChrome(userAgent, vendor)) {
	        return 'Chrome';
	    }
	    if (isSafari(userAgent, vendor)) {
	        return 'Safari';
	    }
	    if (isEdge(userAgent)) {
	        return 'Edge';
	    }
	    if (isFirefox(userAgent)) {
	        return 'Firefox';
	    }
	    if (isOpera(userAgent)) {
	        return 'Opera';
	    }
	    if (isInternetExplorer(userAgent)) {
	        return 'IE';
	    }
	    return 'Others';
	};

	const calculateFooterBottom = () => {
	    const footerAd = document.querySelector('.adthrive-footer');
	    let footerBottom = 52;
	    if (footerAd && footerAd.style.display === 'none') {
	        footerBottom = 102;
	    }
	    else if (footerAd) {
	        footerBottom = Math.max(footerAd.getBoundingClientRect().height, footerBottom);
	    }
	    return footerBottom;
	};

	const defaultTo = (value, defaultValue) => {
	    return value == null || value !== value ? defaultValue : value;
	};

	const delay = (duration) => {
	    return new Promise(resolve => {
	        setTimeout(resolve, duration);
	    });
	};

	const deviceByBreakpoint = (tablet, desktop) => {
	    const width = window.innerWidth;
	    if (width >= desktop) {
	        return 'desktop';
	    }
	    if (width >= tablet) {
	        return 'tablet';
	    }
	    return 'phone';
	};

	const domReady = () => {
	    return new Promise(resolve => {
	        if (document.readyState === 'interactive' || document.readyState === 'complete') {
	            return resolve();
	        }
	        document.addEventListener('DOMContentLoaded', () => resolve());
	    });
	};

	const elementBoundingRect = (element) => {
	    const rect = element.getBoundingClientRect();
	    return {
	        top: rect.top + window.pageYOffset,
	        left: rect.left + window.pageXOffset,
	        bottom: rect.bottom + window.pageYOffset,
	        right: rect.right + window.pageXOffset,
	        width: rect.right - rect.left,
	        height: rect.bottom - rect.top,
	    };
	};

	const elementInnerWidth = (element) => {
	    let width = element.clientWidth;
	    if (getComputedStyle) {
	        const cs = getComputedStyle(element, null);
	        width -= parseFloat(cs.paddingLeft || '0') + parseFloat(cs.paddingRight || '0');
	    }
	    return width;
	};

	const elementOffset = (element) => {
	    const height = element.offsetHeight;
	    const width = element.offsetWidth;
	    const boundingClientRectangle = element.getBoundingClientRect();
	    const bodyEl = document.body;
	    const docEl = document.documentElement;
	    const scrollTop = window.pageYOffset || docEl.scrollTop || bodyEl.scrollTop;
	    const scrollLeft = window.pageXOffset || docEl.scrollLeft || bodyEl.scrollLeft;
	    const clientTop = docEl.clientTop || bodyEl.clientTop || 0;
	    const clientLeft = docEl.clientLeft || bodyEl.clientLeft || 0;
	    const top = Math.round(boundingClientRectangle.top + scrollTop - clientTop);
	    const left = Math.round(boundingClientRectangle.left + scrollLeft - clientLeft);
	    return {
	        top,
	        left,
	        bottom: top + height,
	        right: left + width,
	        width,
	        height,
	    };
	};

	const isElementInViewport = (element) => {
	    const bounding = element.getBoundingClientRect();
	    return (bounding.top >= 0 &&
	        bounding.left >= 0 &&
	        bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
	        bounding.right <= (window.innerWidth || document.documentElement.clientWidth));
	};
	const isElementOffScreenAboveScrolled = (element) => {
	    return window.pageYOffset > element.getBoundingClientRect().top + window.pageYOffset;
	};
	const isElementWithinXScreenHeights = (element, screens) => {
	    return window.pageYOffset - (element.getBoundingClientRect().top + window.pageYOffset) < window.innerHeight + window.innerHeight * screens;
	};

	const checkEmail = (value) => {
	    const matched = value.match(/([a-zA-Z0-9._!#$%+^&*()[\]<>-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
	    if (!matched) {
	        return '';
	    }
	    return matched[0];
	};
	const trimInput = (value) => {
	    return value.replace(/\s/g, '');
	};
	const validateEmail = (value) => {
	    return checkEmail(trimInput(value.toLowerCase()));
	};

	const filterUnique = (value, index, self) => {
	    return self.indexOf(value) === index;
	};

	const getMainArticle = () => {
	    const articles = document.querySelectorAll('article');
	    if (articles.length === 0) {
	        return null;
	    }
	    let content = articles.item(0);
	    articles.forEach(article => {
	        if (article.offsetHeight > content.offsetHeight) {
	            content = article;
	        }
	    });
	    if (content && content.offsetHeight > window.innerHeight * 1.5) {
	        return content;
	    }
	    return null;
	};

	const getClsGlobal = () => window.adthriveCLS;

	const getJSON = (url) => {
	    return new Promise((resolve, reject) => {
	        fetch(url)
	            .then(result => {
	            result
	                .json()
	                .then(json => resolve(json))
	                .catch(() => reject(false));
	        })
	            .catch(() => reject(false));
	    });
	};

	const removeSessionValue = (key) => {
	    sessionStorage.removeItem(`adthrive_${key.toLowerCase()}`);
	};
	const getSessionValue = (key, timeout, rolling = false) => {
	    try {
	        const item = sessionStorage.getItem(`adthrive_${key.toLowerCase()}`);
	        if (item) {
	            const parsed = JSON.parse(item);
	            const expired = timeout !== undefined && Date.now() - parsed.created >= timeout;
	            if (parsed && !expired) {
	                if (rolling) {
	                    setSessionValue(key, parsed.value);
	                }
	                return parsed.value;
	            }
	        }
	    }
	    catch (err) {
	    }
	    return null;
	};
	const setSessionValue = (key, value) => {
	    try {
	        const item = { value, created: Date.now() };
	        sessionStorage.setItem(`adthrive_${key.toLowerCase()}`, JSON.stringify(item));
	    }
	    catch (err) {
	    }
	};
	const getOrSetSessionValue = (key, getValue, timeout, rolling = true) => {
	    const saved = getSessionValue(key, timeout, rolling);
	    if (saved !== null) {
	        return saved;
	    }
	    const value = getValue();
	    setSessionValue(key, value);
	    return value;
	};

	const getReferrer = (timeout = 1800000) => {
	    const saved = getSessionValue('referrer', timeout);
	    const current = getExternalReferrerHostname();
	    return defaultTo(current, saved);
	};
	const getExternalReferrerHostname = () => {
	    if (document.referrer && document.referrer.length) {
	        const referrerHostname = getHostname(document.referrer);
	        const referrerDomain = getRootDomain(referrerHostname);
	        const locationDomain = getRootDomain(window.location.hostname);
	        if (referrerDomain !== locationDomain) {
	            return referrerHostname;
	        }
	    }
	    return undefined;
	};
	const getHostname = (href) => {
	    const element = document.createElement('a');
	    element.href = href;
	    return element.hostname;
	};
	const getRootDomain = (domain) => {
	    const splitArr = domain.split('.');
	    const arrLen = splitArr.length;
	    if (arrLen > 2) {
	        domain = splitArr[arrLen - 2] + '.' + splitArr[arrLen - 1];
	        if ((splitArr[arrLen - 2].length === 2 || splitArr[arrLen - 2].length === 3) && splitArr[arrLen - 1].length === 2) {
	            domain = splitArr[arrLen - 3] + '.' + domain;
	        }
	    }
	    return domain;
	};

	const getViewportDimensions = () => {
	    const width = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
	    const height = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
	    return {
	        width,
	        height,
	    };
	};

	const getVastXML = (url) => {
	    return new Promise((resolve, reject) => {
	        fetch(url)
	            .then(result => {
	            result
	                .text()
	                .then(xml => {
	                typeof xml === 'string' ? resolve(xml) : reject('Vast XML not in proper format');
	            })
	                .catch(err => {
	                reject(err);
	            });
	        })
	            .catch(err => reject(err));
	    });
	};

	const importScript = (src, append = false, defer = false) => {
	    return new Promise((resolve, reject) => {
	        const script = document.createElement('script');
	        script.addEventListener('error', () => {
	            return reject(new Error(`Failed to import script ${src}`));
	        });
	        script.addEventListener('load', () => {
	            return resolve(script);
	        });
	        script.type = 'text/javascript';
	        script.src = src;
	        script.defer = defer;
	        insertOrAppend(script, append);
	    });
	};
	const insertOrAppend = (script, append) => {
	    const node = document.getElementsByTagName('script')[0];
	    if (node && node.parentNode && !append) {
	        node.parentNode.insertBefore(script, node);
	    }
	    else {
	        document.body.appendChild(script);
	    }
	};

	const importStyle = (src) => {
	    const stylesheet = document.createElement('link');
	    stylesheet.rel = 'stylesheet';
	    stylesheet.type = 'text/css';
	    stylesheet.href = src;
	    document.head.appendChild(stylesheet);
	};

	const firstPartyDataKeyOrder = ['Refresh', 'PD', 'Source', 'Browser', 'Topic', 'MCMP', 'Sens'];
	const setIXFirstPartyData = (firstPartyData, prebidMethods) => {
	    prebidMethods.addToQueue(() => {
	        const ixConfig = prebidMethods.getConfig('ix') || { firstPartyData: {} };
	        const combinedFirstPartyData = {
	            ...ixConfig.firstPartyData,
	            ...firstPartyData,
	        };
	        const newFirstPartyData = {};
	        firstPartyDataKeyOrder.forEach(keyName => {
	            if (keyName in combinedFirstPartyData) {
	                newFirstPartyData[keyName] = combinedFirstPartyData[keyName];
	            }
	        });
	        for (const key in combinedFirstPartyData) {
	            if (firstPartyDataKeyOrder.indexOf(key) === -1) {
	                newFirstPartyData[key] = combinedFirstPartyData[key];
	            }
	        }
	        ixConfig.firstPartyData = newFirstPartyData;
	        prebidMethods.setConfig({ ix: ixConfig });
	    });
	};
	const getStandardSource = (referrer) => {
	    const standardSources = {
	        google: 'google',
	        facebook: 'facebook',
	        instagram: 'instagram',
	        pinterest: 'pinterest',
	    };
	    const standardSource = referrer.split('.').filter(val => standardSources[val])[0];
	    return standardSource || 'other';
	};
	const standardizeTrafficSources = (referrer) => {
	    if (!referrer) {
	        return 'direct';
	    }
	    return getStandardSource(referrer);
	};

	const isAdXAd = ({ event, ignoreOtherCompanyIds = false }) => {
	    const _adxCampaignIds = new Set([-1, 0, 1, 199612376, 2143809321]);
	    const _notAdxCompanyIds = new Set([
	        4455444655, 4460609902, 4463579729, 4464180925, 4466143841, 4550726766, 4623743690, 4623743882, 4634020290, 4642901988, 4697115760, 4801442281,
	        4802163255, 4805985973, 4807636548, 4867316569,
	    ]);
	    const adxMatch = !event.campaignId || _adxCampaignIds.has(event.campaignId);
	    const ebdaMatch = !event.companyIds || (event.companyIds && !event.companyIds.some(companyId => _notAdxCompanyIds.has(companyId)));
	    if (ignoreOtherCompanyIds) {
	        return adxMatch;
	    }
	    return adxMatch && ebdaMatch;
	};

	const isUserAgentInvalid = () => {
	    return /python|apis|googleweblight|spider|crawler|curl|wget|ia_archiver|insights|baidu|bot|monitor|scraper|A6-Indexer|addthis|admantx|agentslug|alexa|anderspink|apache-httpclient|apachebench|apis-google|appengine-google|ask jeeves|asynchttpclient|awe.sm|baidu|barkrowler|biglotron|bingpreview|brandverify|bubing|butterfly|buzztalk|cf-uc|check_http|cloudflare|cmradar\/0.1|coldfusion|comodo ssl checker|convera|copypants|crowsnest|curl|dap\/nethttp|daumoa|developers.google.com\/\+\/web\/snippet\/|digitalpersona fingerprint software|drupact|duckduck|elb-healthchecker|embedly|eoaagent|europarchive|eventmachine httpclient|evrinid|exaleadcloudview|ezooms|ez publish|facebookexternalhit|feedburner|feedfetcher-google|findlink|findthatfile|flipboardproxy|garlik|genieo|getprismatic.com|ghost|gigablast|go http package|google( page speed insights| web preview|google-site-verification|-structured-data-testing-tool|-structureddatatestingtool)|hatena|headless|heritrix|htmlparser|http(_request2|client|s|unit)|httrack|hubspot|ichiro|icoreservice|idmarch|in(agist|sieve|stapaper)|ips-agent|jack|jakarta commons|java|jetslide|jobseeker|js-kit|kimengi|knows.is|kraken|laconica|libwww|lighthouse|linode|lipperhey|longurl|ltx71|lwp-trivial|mappydata|mastodon|mediapartners-google|megaindex.ru|metauri|mfe_expand|mixnode|mon(tastic|tools)|moreover|mrchrome|nberta|net(craft|researchserver|state|vibes)|newrelicpinger|newspaper|newsme|ning|nmap|nutch|online-domain-tools|paessler|page(peek|sinventory|thing)|panopta|peerindex|phantomjs|pingdom|plukkie|proximic|pu_in|publiclibraryarchive.org|python-(httplib2|requests|urllib)|quanti|queryseeker|quicklook|qwanti|re-animator|readability|rebelmouse|relateiq|riddler|rssmicro|ruby|scrapy|seo-audit|seodiver|seokicks|shopwiki|shortlinktranslate|siege|sistrix|site24x7|siteexplorer|skypeuripreview|slack|slurp|socialrank|sogou|spinn3r|squider|statuscake|stripe|summify|teeraid|teoma|test certificate info|tineye|traackr|tweetedtimes|twikle|twitjobsearch|twitmunin|twurly|typhoeus|unwindfetch|uptim(e|ia)|uptm.io|vagabondo|vb project|vigil|vkshare|wappalyzer|watchsumo|webceo|webdatascout|webmon|webscout|wesee|wget|whatsapp|whatweb|wikido|wordpress|wormly|wotbox|xenu link sleuth|xing-contenttabreceiver|yandex|yanga|yeti|yff35|yourls|zelist.ro|zibb|^Mozilla\/5\.0$|Viv\/2/i.test(window.navigator.userAgent);
	};

	const webdriverValidation = () => {
	    if (navigator && navigator.webdriver) {
	        return 'wdv';
	    }
	    return;
	};
	const hardwareValidation = () => {
	    if (navigator && navigator.hardwareConcurrency > 16) {
	        return 'hwv';
	    }
	    return;
	};
	const userAgentValidation = () => {
	    if (navigator && navigator.userAgent && isUserAgentInvalid()) {
	        return 'uav';
	    }
	    return;
	};
	const viewportValidation = () => {
	    const dimensions = getViewportDimensions();
	    if (dimensions.width > 5000 || dimensions.height > 5000) {
	        return 'vpv';
	    }
	    return;
	};
	const webGLValidator = () => {
	    const canvas = document.createElement('canvas');
	    const gl = canvas.getContext && canvas.getContext('webgl');
	    const debugInfo = gl && gl.getExtension && gl.getExtension('WEBGL_debug_renderer_info');
	    if (debugInfo && debugInfo.UNMASKED_RENDERER_WEBGL) {
	        const renderer = gl && gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
	        if (renderer === 'Google SwiftShader') {
	            return 'wglv';
	        }
	    }
	    return;
	};
	const isBotTraffic = () => {
	    const botArray = [viewportValidation(), webdriverValidation(), userAgentValidation(), hardwareValidation(), webGLValidator()].filter((value) => !!value);
	    return botArray.length ? botArray : undefined;
	};

	const isDesktop = () => {
	    return /Windows NT|Macintosh/i.test(navigator.userAgent);
	};

	const isVisible = (element) => {
	    return !!(element.offsetWidth || element.offsetHeight || element.getClientRects().length);
	};

	const isHidden = (element) => {
	    return !isVisible(element);
	};

	const isHighlyViewableSlot = (slot, threshold) => {
	    return slot.viewability >= threshold || slot.lazy || slot.refreshCount > 0;
	};

	const isMobile = () => {
	    const userAgent = navigator.userAgent;
	    const excluded = /Tablet|iPad|Playbook|Nook|webOS|Kindle|Android (?!.*Mobile).*Safari/i.test(userAgent);
	    const mobile = /Mobi|iP(hone|od)|Opera Mini/i.test(userAgent);
	    return mobile && !excluded;
	};

	const linearInterpolation = (arr, p) => {
	    if (arr.length <= 1) {
	        return 0;
	    }
	    arr.sort((a, b) => a - b);
	    if (p <= 0) {
	        return arr[0];
	    }
	    if (p >= 1) {
	        return arr[arr.length - 1];
	    }
	    const rank = p * (arr.length + 1);
	    const lower = Math.floor(rank) - 1;
	    const upper = lower + 1;
	    const weight = Number((rank % 1).toFixed(1));
	    if (rank < 1) {
	        return arr[0];
	    }
	    if (upper >= arr.length) {
	        return arr[lower];
	    }
	    return arr[lower] + weight * (arr[upper] - arr[lower]);
	};

	const setCrossDomainMessaging = (expectedOrigin, dataToSend) => {
	    const receiveMessage = (evt) => {
	        try {
	            const { origin, source } = evt;
	            const data = JSON.parse(evt.data);
	            const messageMatches = data && data.message === dataToSend.message;
	            const originMatches = origin && origin.match(expectedOrigin);
	            if (!originMatches || !messageMatches) {
	                return;
	            }
	            source.postMessage(JSON.stringify(dataToSend), origin);
	        }
	        catch (e) {
	            return;
	        }
	    };
	    window.addEventListener('message', receiveMessage);
	};

	const now$2 = () => {
	    try {
	        return Math.round(window.performance.now());
	    }
	    catch (err) {
	        return 0;
	    }
	};

	const obfuscate = (value, rdx) => {
	    return Math.floor(value * 100000).toString(rdx);
	};
	const deobfuscate = (value, rdx) => {
	    return parseInt(value, rdx) / 100000;
	};
	const deobfuscateBidCpms = (values, rdx = 33) => {
	    const floors = Object.keys(values).reduce((prevVal, currentVal) => {
	        const deobfuscated = values[currentVal].map(cv => deobfuscate(cv, rdx));
	        return { ...prevVal, ...{ [currentVal]: [...deobfuscated] } };
	    }, {});
	    return floors;
	};
	const obfuscateBidCpms = (floors, rdx = 33) => {
	    const obfuscatedFloors = Object.keys(floors).reduce((prevVal, currentVal) => {
	        const mapped = floors[currentVal].map(cv => obfuscate(cv, rdx));
	        return { ...prevVal, [currentVal]: mapped };
	    }, {});
	    return obfuscatedFloors;
	};

	const pageLoaded = () => {
	    return new Promise(resolve => {
	        if (document.readyState === 'complete') {
	            return resolve();
	        }
	        window.addEventListener('load', () => resolve());
	    });
	};

	const parseQueryString = () => {
	    return window.location.search
	        .slice(1)
	        .split('&')
	        .reduce((queryMap, param) => {
	        const [key, value] = param.split('=');
	        queryMap.set(key, value);
	        return queryMap;
	    }, new Map());
	};
	const createQueryString = (params) => {
	    return Object.keys(params)
	        .map(key => `${key}=${encodeURIComponent(params[key])}`)
	        .join('&');
	};

	const randomFloat = (min, max) => {
	    return Math.random() * (max - min) + min;
	};
	const randomInteger = (min, max) => {
	    return Math.floor(randomFloat(Math.ceil(min), Math.floor(max)));
	};
	const random = () => {
	    if (window.crypto) {
	        const buffer = new Uint8Array(1);
	        crypto.getRandomValues(buffer);
	        return buffer[0] / 0xff;
	    }
	    return Math.random();
	};

	const removeRandomElement = (array, threshold) => {
	    if (array.length >= threshold) {
	        array.splice(Math.floor(Math.random() * array.length), 1);
	    }
	};

	const readCookie = (key) => {
	    const value = RegExp('(^|[^;]+)\\s*' + key + '\\s*=\\s*([^;]+)').exec(document.cookie);
	    return value ? value.pop() : '';
	};

	const stdTimezoneOffset = () => {
	    const jan = new Date(new Date().getFullYear(), 0, 1);
	    const jul = new Date(new Date().getFullYear(), 6, 1);
	    return Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());
	};
	const isDstObserved = () => {
	    return new Date().getTimezoneOffset() < stdTimezoneOffset();
	};
	const getTimezone = () => {
	    return Intl.DateTimeFormat().resolvedOptions().timeZone;
	};
	const locationCheck = (ianaTimezones, offsets) => {
	    if ('Intl' in window) {
	        const ianaTimezone = getTimezone();
	        return ianaTimezones.some(tz => ianaTimezone === tz);
	    }
	    else {
	        return offsets.some(ofs => {
	            const offset = new Date().getTimezoneOffset();
	            const targetOffset = isDstObserved() ? ofs - 60 : ofs;
	            return offset === targetOffset;
	        });
	    }
	};
	const isPacific = () => {
	    return locationCheck(['America/Los_Angeles'], [480]);
	};
	const isNewZealand = () => {
	    return locationCheck(['Pacific/Auckland'], [-720]);
	};
	const isHawaii = () => {
	    return locationCheck(['Pacific/Honolulu'], [600]);
	};
	const isPhoenix = () => {
	    return locationCheck(['America/Phoenix'], [420]);
	};

	const defined = (input) => input !== undefined;
	const hasProperty = (x, property) => {
	    return !!(x && typeof x === 'object' && property in x);
	};
	const tryToAccessProperty = (x, property) => {
	    if (hasProperty(x, property)) {
	        return x[property];
	    }
	    return null;
	};

	const urlMatch = (patterns) => {
	    const url = window.location.href;
	    return patterns.some(pattern => {
	        const re = new RegExp(pattern, 'i');
	        return re.test(url);
	    });
	};

	const getUIDForSource = (source, isPrebidLoaded) => {
	    if (isPrebidLoaded) {
	        for (const eid of pbjs.getUserIdsAsEids()) {
	            if (eid.source && eid.source === source && eid.uids && eid.uids.length > 0 && eid.uids[0].id) {
	                return eid.uids[0].id;
	            }
	        }
	    }
	    return null;
	};

	const validCssSelector = (selector) => {
	    try {
	        return { valid: true, elements: document.querySelectorAll(selector) };
	    }
	    catch (err) {
	        return { valid: false, ...err };
	    }
	};
	const allowablePageSelector = (selector) => {
	    if (selector === '') {
	        return { valid: true };
	    }
	    return validCssSelector(selector);
	};

	const write = (className, methodName, args, result, start, end) => {
	    const duration = Math.round(end - start);
	    const message = [];
	    const params = [];
	    message.push('(', args.map(() => '%o').join(', '), ')');
	    params.push(...args);
	    if (result !== undefined) {
	        message.push(` => %o`);
	        params.push(result);
	    }
	    message.push(` %c(${duration}ms)`);
	    params.push('color: #999;');
	    logger.info(className, methodName, message.join(''), ...params);
	};
	const wrapMethod = (className, key, descriptor) => {
	    const method = descriptor.get !== undefined ? descriptor.get : descriptor.value;
	    return function (...args) {
	        try {
	            const start = now$2();
	            const result = method.apply(this, args);
	            if (result instanceof Promise) {
	                return result
	                    .then(value => {
	                    const end = now$2();
	                    write(className, key, args, value, start, end);
	                    return Promise.resolve(value);
	                })
	                    .catch(err => {
	                    if (!err.logged) {
	                        logger.error(className, key, err);
	                        err.logged = true;
	                    }
	                    throw err;
	                });
	            }
	            else {
	                const end = now$2();
	                write(className, key, args, result, start, end);
	                return result;
	            }
	        }
	        catch (err) {
	            if (!err.logged) {
	                logger.error(className, key, err);
	                err.logged = true;
	            }
	            throw err;
	        }
	    };
	};
	const log = (className, includePrivate = false) => {
	    return (constructor) => {
	        const propertyNames = Object.getOwnPropertyNames(constructor.prototype);
	        const properties = propertyNames
	            .filter(key => includePrivate || key.indexOf('_') !== 0)
	            .map(key => [key, Object.getOwnPropertyDescriptor(constructor.prototype, key)]);
	        for (const [key, descriptor] of properties) {
	            if (descriptor !== undefined && typeof descriptor.value === 'function') {
	                constructor.prototype[key] = wrapMethod(className, key, descriptor);
	            }
	            else if (descriptor !== undefined && descriptor.get !== undefined && typeof descriptor.get === 'function') {
	                Object.defineProperty(constructor.prototype, key, {
	                    ...descriptor,
	                    get: wrapMethod(className, key, descriptor),
	                });
	            }
	        }
	    };
	};

	const sticky = () => {
	    return (_target, _propertyKey, descriptor) => {
	        const method = descriptor.value;
	        if (method) {
	            descriptor.value = function (...args) {
	                var _a;
	                const key = this.key;
	                if (((_a = getSessionValue('branch')) === null || _a === void 0 ? void 0 : _a.enabled) === false) {
	                    removeSessionValue(key);
	                }
	                return getOrSetSessionValue(key, () => method.apply(this, args), 1800000);
	            };
	        }
	    };
	};

	const createError = (message) => {
	    const err = new Error(message);
	    err.source = 'ulid';
	    return err;
	};
	const ENCODING = '0123456789ABCDEFGHJKMNPQRSTVWXYZ';
	const ENCODING_LEN = ENCODING.length;
	const TIME_MAX = Math.pow(2, 48) - 1;
	const TIME_LEN = 10;
	const RANDOM_LEN = 16;
	const randomChar = (prng) => {
	    let rand = Math.floor(prng() * ENCODING_LEN);
	    if (rand === ENCODING_LEN) {
	        rand = ENCODING_LEN - 1;
	    }
	    return ENCODING.charAt(rand);
	};
	const encodeTime = (now, len) => {
	    if (isNaN(now)) {
	        throw new Error(`${now} must be a number`);
	    }
	    if (now > TIME_MAX) {
	        throw createError(`cannot encode time greater than ${TIME_MAX}`);
	    }
	    let mod;
	    let str = '';
	    for (; len > 0; len--) {
	        mod = now % ENCODING_LEN;
	        str = ENCODING.charAt(mod) + str;
	        now = (now - mod) / ENCODING_LEN;
	    }
	    return str;
	};
	const encodeRandom = (len, prng) => {
	    let str = '';
	    for (; len > 0; len--) {
	        str = randomChar(prng) + str;
	    }
	    return str;
	};
	const ulid = () => {
	    return encodeTime(Date.now(), TIME_LEN) + encodeRandom(RANDOM_LEN, () => random());
	};

	let ABGroup = class ABGroup {
	    constructor() {
	        this._map = new Map();
	        this.setAbGroup = !parseQueryString().has('at_features');
	    }
	    set(key, value) {
	        if (this.setAbGroup) {
	            this._map.set(key, value);
	        }
	    }
	    get(key) {
	        return this._map.get(key);
	    }
	    get groups() {
	        const groups = [];
	        for (const [k, v] of this._map) {
	            groups.push(`${k}:${v}`);
	        }
	        return groups;
	    }
	    get groupsAsObject() {
	        const groups = {};
	        for (const k of this._map.keys()) {
	            const v = this._map.get(k);
	            if (v) {
	                groups[k] = v;
	            }
	        }
	        return groups;
	    }
	};
	ABGroup = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [])
	], ABGroup);

	let ExperimentOverrides = class ExperimentOverrides {
	    constructor() {
	        this.adthriveExperimentOverrides = this.getExperimentOverrides();
	    }
	    getExperimentOverrides() {
	        let atFeaturesMap = {};
	        const atFeatures = parseQueryString().get('at_features');
	        if (atFeatures) {
	            try {
	                const decodedAtFeatures = decodeURIComponent(atFeatures);
	                atFeaturesMap = JSON.parse(decodedAtFeatures);
	                logger.event('ExperimentOverrides', 'getExperimentOverrides', 'at_features', atFeaturesMap);
	            }
	            catch (error) {
	                const message = error instanceof URIError ? 'Invalid URL encoded parameters' : 'Invalid JSON experiment overrides';
	                logger.info('ExperimentOverrides', 'getExperimentOverrides', message, error);
	            }
	        }
	        return atFeaturesMap;
	    }
	    hasValidOverride(key, validVals) {
	        if (key in this.adthriveExperimentOverrides) {
	            const overrideVal = this.adthriveExperimentOverrides[key];
	            const isValid = this.isValidExperimentOverride(validVals, overrideVal);
	            logger.info('ExperimentOverrides', 'override', isValid ? 'valid' : 'invalid', key, overrideVal);
	            return isValid;
	        }
	        return false;
	    }
	    useOverride(key) {
	        return this.adthriveExperimentOverrides[key];
	    }
	    isValidExperimentOverride(validVals, overrideVal) {
	        if (validVals.length === 0) {
	            return false;
	        }
	        const experimentType = Array.isArray(validVals[0]) ? 'array' : typeof validVals[0];
	        if (experimentType === 'array') {
	            if (!Array.isArray(overrideVal)) {
	                return false;
	            }
	            if (overrideVal.some(value => validVals.indexOf(value) === -1) &&
	                overrideVal.map(item => '[' + JSON.stringify(item) + ']').some(value => validVals.map(item => JSON.stringify(item)).indexOf(value) === -1) &&
	                validVals.map(item => JSON.stringify(item)).indexOf(JSON.stringify(overrideVal)) === -1) {
	                return false;
	            }
	        }
	        else if (experimentType === 'object') {
	            if (validVals.map(validVal => JSON.stringify(validVal)).indexOf(JSON.stringify(overrideVal)) === -1) {
	                return false;
	            }
	        }
	        else if (validVals.indexOf(overrideVal) === -1) {
	            return false;
	        }
	        return true;
	    }
	};
	ExperimentOverrides = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [])
	], ExperimentOverrides);

	class Experiment {
	    constructor() {
	        const originalMethod = this.run.bind(this);
	        this.run = () => {
	            const experimentOverrides = instance.resolve(ExperimentOverrides);
	            const validVals = this._choices.map(validOption => validOption.choice);
	            if (experimentOverrides.hasValidOverride(this.key, validVals)) {
	                return experimentOverrides.useOverride(this.key);
	            }
	            return originalMethod();
	        };
	    }
	}

	class Operation {
	}

	class BernoulliTrial extends Operation {
	    constructor(_probability) {
	        super();
	        this._probability = _probability;
	    }
	    get() {
	        if (this._probability < 0 || this._probability > 1) {
	            throw new Error('Invalid probability');
	        }
	        return Math.random() < this._probability;
	    }
	}

	class UniformChoice extends Operation {
	    constructor(_choices = []) {
	        super();
	        this._choices = _choices;
	    }
	    addChoice(choice) {
	        this._choices.push(choice);
	    }
	    get() {
	        const index = randomInteger(0, this._choices.length);
	        return this._choices[index];
	    }
	}

	class WeightedChoice extends Operation {
	    constructor(_choices = [], _default) {
	        super();
	        this._choices = _choices;
	        this._default = _default;
	    }
	    static fromArray(choices, _default) {
	        return new WeightedChoice(choices.map(([choice, weight]) => ({ choice, weight })), _default);
	    }
	    addChoice(choice, weight) {
	        this._choices.push({ choice, weight });
	    }
	    get() {
	        const threshold = randomFloat(0, 100);
	        let cumWeight = 0;
	        for (const { choice, weight } of this._choices) {
	            cumWeight += weight;
	            if (cumWeight >= threshold) {
	                return choice;
	            }
	        }
	        return this._default;
	    }
	    get totalWeight() {
	        return this._choices.reduce((total, { weight }) => total + weight, 0);
	    }
	}

	let InterstitialExperiment = class InterstitialExperiment extends Experiment {
	    constructor(_adthrive, abgroup) {
	        super();
	        this._adthrive = _adthrive;
	        this._result = 'off';
	        this.key = 'inters';
	        this._choices = [
	            { choice: 'all', weight: 0 },
	            { choice: 'adx', weight: 95 },
	            { choice: 'off', weight: 5 },
	        ];
	        if (this.canDisplayInterstitial() &&
	            ((isMobile() && defaultTo(this._adthrive.siteAds.adOptions.mobileInterstitial, false)) ||
	                (!isMobile() && defaultTo(this._adthrive.siteAds.adOptions.desktopInterstitial, false)))) {
	            this._result = this.run();
	            abgroup.set(this.key, this._result);
	        }
	    }
	    canDisplayInterstitial() {
	        try {
	            const googleInstlFlag = window.localStorage.getItem('__lsv__');
	            const timestamp = googleInstlFlag ? JSON.parse(decodeURIComponent(googleInstlFlag)) : [];
	            if (timestamp.length) {
	                const oneHourInMs = 60 * 60 * 1000;
	                const now = new Date().getTime();
	                const lastSeen = timestamp[0];
	                const diff = now - lastSeen;
	                return diff > oneHourInMs;
	            }
	            else {
	                return true;
	            }
	        }
	        catch (err) {
	            logger.error('InterstitialExperiment', 'canDisplayInterstitial', { message: err.message });
	            return false;
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	InterstitialExperiment = __decorate([
	    log('InterstitialExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ABGroup])
	], InterstitialExperiment);

	let AdOptions = class AdOptions {
	    constructor(adthrive, _interstitialExperiment) {
	        this._interstitialExperiment = _interstitialExperiment;
	        this.footerCloseButtonMigrated = false;
	        const { allowSmallerAdSizes, footerCloseButton, footerCloseButtonMobile, footerCloseButtonDesktop, footerSelector, infiniteScroll, infiniteScrollOptions, infiniteScrollRefresh, pmp, targetaff, } = adthrive.siteAds.adOptions;
	        this.allowSmallerAdSizes = defaultTo(allowSmallerAdSizes, true);
	        if (footerCloseButtonMobile !== undefined && footerCloseButtonDesktop !== undefined) {
	            this.footerCloseButtonMigrated = true;
	        }
	        this.interstitial = {
	            gam: this._interstitialExperiment.result !== 'off' ? true : false,
	            prebid: this._interstitialExperiment.result === 'all' ? true : false,
	        };
	        this.footerCloseButton = defaultTo(footerCloseButton, true);
	        this.footerCloseButtonMobile = defaultTo(footerCloseButtonMobile, true);
	        this.footerCloseButtonDesktop = defaultTo(footerCloseButtonDesktop, true);
	        this.footerSelector = defaultTo(footerSelector, '');
	        this.pmp = defaultTo(pmp, true);
	        this.infiniteScroll = defaultTo(infiniteScroll, false);
	        this.infiniteScrollOptions = defaultTo(infiniteScrollOptions, {});
	        this.infiniteScrollRefresh = defaultTo(infiniteScrollRefresh, true);
	        this.targetAff = defaultTo(targetaff, false);
	    }
	};
	AdOptions = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, InterstitialExperiment])
	], AdOptions);

	let AdTypes = class AdTypes {
	    constructor(adthrive) {
	        const adTypes = adthrive.siteAds.adTypes || {};
	        this.animatedFooter = defaultTo(adTypes.animatedFooter, true);
	        this.expandableFooter = defaultTo(adTypes.expandableFooter, true);
	        this.interscroller = defaultTo(adTypes.interscroller, true);
	        this.miniscroller = defaultTo(adTypes.miniscroller, true);
	        this.nativeMobileContent = defaultTo(adTypes.nativeMobileContent, true);
	        this.nativeDesktopContent = defaultTo(adTypes.nativeDesktopContent, true);
	        this.nativeDesktopSidebar = defaultTo(adTypes.nativeDesktopSidebar, true);
	        this.nativeDesktopRecipe = defaultTo(adTypes.nativeDesktopRecipe, true);
	        this.nativeMobileRecipe = defaultTo(adTypes.nativeMobileRecipe, true);
	        this.outstreamDesktop = defaultTo(adTypes.outstreamDesktop, true);
	        this.outstreamMobile = defaultTo(adTypes.outstreamMobile, true);
	    }
	    has(name) {
	        return this[name] && this[name] === true;
	    }
	    get enabled() {
	        return Object.keys(this).filter(key => this[key] === true);
	    }
	    get enabledMinified() {
	        const adTypeMinified = {
	            outstreamDesktop: { min: 'od', val: this.outstreamDesktop },
	            outstreamMobile: { min: 'om', val: this.outstreamMobile },
	        };
	        return this.enabled
	            .filter(adType => Object.keys(adTypeMinified).indexOf(adType) !== -1 && adTypeMinified[adType].val)
	            .map(adType => adTypeMinified[adType].min);
	    }
	    get outstreamEnabled() {
	        return isMobile() ? this.outstreamMobile === true : this.outstreamDesktop === true;
	    }
	};
	AdTypes = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], AdTypes);

	let AmazonHoldLoadExperiment = class AmazonHoldLoadExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'amzn_hold_load';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.5).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], AmazonHoldLoadExperiment.prototype, "run", null);
	AmazonHoldLoadExperiment = __decorate([
	    log('AmazonLibraryExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], AmazonHoldLoadExperiment);

	let AmazonExperiment = class AmazonExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'amzn';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.995).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], AmazonExperiment.prototype, "run", null);
	AmazonExperiment = __decorate([
	    log('AmazonExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], AmazonExperiment);

	let WebVitalsExperiment = class WebVitalsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'wvtls';
	        this._choices = [{ choice: true }, { choice: false }];
	        if (isChrome()) {
	            this._result = this.run();
	            abgroup.set(this.key, this.result ? 'on' : 'off');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.25).get();
	    }
	};
	WebVitalsExperiment = __decorate([
	    log('WebVitalsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], WebVitalsExperiment);

	let BootstrapConfig = class BootstrapConfig {
	    constructor(adthrive, amazonExperiment, webVitalsExperiment) {
	        var _a;
	        this.amazonEnabled = amazonExperiment.result;
	        this.webVitalsEnabled = webVitalsExperiment.result;
	        this.gptLibFailed = false;
	        this.liveRamp = defaultTo(adthrive.siteAds.adOptions.liveRamp, true);
	        this.liveRampId = defaultTo(adthrive.siteAds.adOptions.liveRampId, '7f035220-1751-4684-bb7f-a1c0d45657df');
	        if (this.liveRampId.length !== 36) {
	            this.liveRampId = '7f035220-1751-4684-bb7f-a1c0d45657df';
	        }
	        if (((_a = adthrive === null || adthrive === void 0 ? void 0 : adthrive.core) === null || _a === void 0 ? void 0 : _a.country) === 'FR') {
	            this.liveRampId = '34233849-5500-4e44-8601-5006ae8d13fe';
	        }
	        this._baseUrl = adthrive.baseUrl;
	    }
	    get baseUrl() {
	        return this._baseUrl;
	    }
	    get recencyFrequencyIframeLocation() {
	        return `${this._baseUrl}/html/recency-and-frequency.html`;
	    }
	};
	BootstrapConfig = __decorate([
	    log('BootstrapConfig'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, AmazonExperiment,
	        WebVitalsExperiment])
	], BootstrapConfig);

	let AmazonBootstrap = class AmazonBootstrap {
	    constructor(adthrive, _bootstrapConfig) {
	        this.adthrive = adthrive;
	        this._bootstrapConfig = _bootstrapConfig;
	        this._url = 'https://c.amazon-adsystem.com/aax2/apstag.js';
	    }
	    async load() {
	        if (this._bootstrapConfig.amazonEnabled && this.adthrive.siteAds.adOptions.amazonUAM) {
	            this.init();
	            const fastAds = this.adthrive.fastAds;
	            if (fastAds && fastAds.amazon) {
	                return fastAds.amazon.promise.then(() => true).catch(() => importScript(this._url).then(() => true));
	            }
	            return importScript(this._url).then(() => true);
	        }
	        else {
	            return Promise.resolve(false);
	        }
	    }
	    init() {
	        if (window.apstag) {
	            return;
	        }
	        const q = (c, r) => {
	            window.apstag._Q.push([c, r]);
	        };
	        window.apstag = {
	            init() {
	                q('i', arguments);
	            },
	            fetchBids() {
	                q('f', arguments);
	            },
	            setDisplayBids() {
	                return;
	            },
	            targetingKeys() {
	                return [];
	            },
	            _Q: [],
	        };
	    }
	};
	AmazonBootstrap = __decorate([
	    log('AmazonBootstrap'),
	    injectable(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, BootstrapConfig])
	], AmazonBootstrap);

	let GAMBootstrap = class GAMBootstrap {
	    constructor(_adthrive) {
	        this._adthrive = _adthrive;
	        this._url = 'https://securepubads.g.doubleclick.net/tag/js/gpt.js';
	    }
	    async load() {
	        window.googletag = window.googletag || {};
	        window.googletag.cmd = window.googletag.cmd || [];
	        return this.import();
	    }
	    sendScript() {
	        return importScript(this._url).then(() => true);
	    }
	    import() {
	        const fastAds = this._adthrive.fastAds;
	        if (!fastAds || !fastAds.gam) {
	            return this.sendScript();
	        }
	        return fastAds.gam.promise.then(() => true).catch(() => this.sendScript());
	    }
	};
	GAMBootstrap = __decorate([
	    log('GAMBootstrap'),
	    injectable(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], GAMBootstrap);

	let RecencyFrequencyIframeInsertionExperiment = class RecencyFrequencyIframeInsertionExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'rfii';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this.result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0).get();
	    }
	};
	RecencyFrequencyIframeInsertionExperiment = __decorate([
	    log('RecencyFrequencyIframeInsertionExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RecencyFrequencyIframeInsertionExperiment);

	let MarmaladeBootstrap = class MarmaladeBootstrap {
	    constructor(bootstrapConfig, rfiiExperiment) {
	        this.bootstrapConfig = bootstrapConfig;
	        this.rfiiExperiment = rfiiExperiment;
	        this._marmaladeFinishedTimeout = 3000;
	        this._frame = document.createElement('IFRAME');
	    }
	    async get() {
	        if (window.adthrive.marmalade) {
	            return window.adthrive.marmalade.then(async (marmaladeData) => {
	                if (isRecencyAndFrequencyDataPresent(marmaladeData) || this.rfiiExperiment.result) {
	                    await addIframeToPage(this._frame, this.bootstrapConfig.recencyFrequencyIframeLocation).then(() => {
	                        logger.event('MarmaladeBootstrap', 'recencyFrequencyIframeAdded');
	                    });
	                }
	                return marmaladeData;
	            });
	        }
	        const marmaladeFinished = new Promise(resolve => {
	            window.adthrive.marmaladeFinished = resolve;
	        });
	        const timeout = new Promise(resolve => {
	            const id = setTimeout(() => {
	                clearTimeout(id);
	                resolve({});
	            }, this._marmaladeFinishedTimeout);
	        });
	        return Promise.race([marmaladeFinished, timeout]);
	    }
	};
	MarmaladeBootstrap = __decorate([
	    log('MarmaladeBootstrap'),
	    injectable(),
	    __metadata("design:paramtypes", [BootstrapConfig, RecencyFrequencyIframeInsertionExperiment])
	], MarmaladeBootstrap);
	const addIframeToPage = (frame, src) => {
	    let resolveIframeLoadedPromise;
	    const iframeLoadedPromise = new Promise(resolve => {
	        resolveIframeLoadedPromise = resolve;
	    });
	    frame.onload = () => {
	        resolveIframeLoadedPromise();
	    };
	    frame.src = src;
	    frame.id = 'adthrive-mcmp';
	    frame.style.display = 'none';
	    document.body.appendChild(frame);
	    return iframeLoadedPromise;
	};
	const isRecencyAndFrequencyDataPresent = (marmaladeData) => {
	    return 'mcmp' in marmaladeData;
	};

	let PrebidBootstrap = class PrebidBootstrap {
	    constructor({ baseUrl }) {
	        this._url = `${baseUrl}/vendor/prebid/prebid.min.js`;
	    }
	    async load() {
	        this.init();
	        return await importScript(this._url).then(() => true);
	    }
	    init() {
	        window.pbjs = window.pbjs || {};
	        window.pbjs.que = window.pbjs.que || [];
	    }
	};
	PrebidBootstrap = __decorate([
	    log('PrebidBootstrap'),
	    injectable(),
	    __metadata("design:paramtypes", [BootstrapConfig])
	], PrebidBootstrap);

	let WebVitalsBootstrap = class WebVitalsBootstrap {
	    constructor(_bootstrapConfig) {
	        this._bootstrapConfig = _bootstrapConfig;
	        this._url = 'https://unpkg.com/web-vitals@2.0.1/dist/web-vitals.umd.js';
	    }
	    load() {
	        if (this._bootstrapConfig.webVitalsEnabled) {
	            return this.import();
	        }
	        else {
	            return Promise.resolve(true);
	        }
	    }
	    async import() {
	        return await importScript(this._url, false, true);
	    }
	};
	WebVitalsBootstrap = __decorate([
	    log('WebVitalsBootstrap'),
	    injectable(),
	    __metadata("design:paramtypes", [BootstrapConfig])
	], WebVitalsBootstrap);

	let Bootstrap = class Bootstrap {
	    constructor(bootstrapConfig, _amazon, _waitForAmazon, _gam, _marmalade, _prebid, _webVitals) {
	        this.bootstrapConfig = bootstrapConfig;
	        this._amazon = _amazon;
	        this._waitForAmazon = _waitForAmazon;
	        this._gam = _gam;
	        this._marmalade = _marmalade;
	        this._prebid = _prebid;
	        this._webVitals = _webVitals;
	    }
	    async run() {
	        let webVitalLoader;
	        let marmaladeRes;
	        return Promise.all([
	            this._run(() => this._amazon.load(), { wait: this._waitForAmazon.result }),
	            this._run(() => this._gam.load(), { required: true }).catch(error => this.gamFallback(error && error.result, webVitalLoader, marmaladeRes)),
	            (marmaladeRes = this._run(() => this._marmalade.get())),
	            this._run(() => this._prebid.load()),
	            this._run(() => {
	                webVitalLoader = this._webVitals.load();
	                return webVitalLoader;
	            }, { wait: false }),
	            domReady(),
	        ]).then(([amazon, gam, marmalade, prebid, webvitals]) => ({
	            amazon,
	            gam,
	            marmalade,
	            prebid,
	            webvitals,
	        }));
	    }
	    gamFallback(message, webvitals, marmalade) {
	        this.bootstrapConfig.gptLibFailed = true;
	        if (!this.bootstrapConfig.webVitalsEnabled) {
	            this.bootstrapConfig.webVitalsEnabled = true;
	            webvitals = this._webVitals.load();
	        }
	        return webvitals.then(() => marmalade.then(result => Promise.reject({ message, marmalade: result })));
	    }
	    _run(fn, { required = false, wait = true } = {}) {
	        const started = now$2();
	        const done = (result) => {
	            const finished = now$2();
	            return {
	                result,
	                started,
	                finished,
	                duration: finished - started,
	            };
	        };
	        const timed = fn().then(done, err => {
	            return required ? Promise.reject(done(err.message)) : done(err.message);
	        });
	        return wait ? timed : Promise.resolve(done(true));
	    }
	};
	Bootstrap = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [BootstrapConfig,
	        AmazonBootstrap,
	        AmazonHoldLoadExperiment,
	        GAMBootstrap,
	        MarmaladeBootstrap,
	        PrebidBootstrap,
	        WebVitalsBootstrap])
	], Bootstrap);

	let Amazon = class Amazon {
	    constructor(adthrive, bootstrapConfig) {
	        this.pubId = '4fbba76f-7987-4fa2-9733-c27eb3a2170b';
	        this.adUnitExclusions = new Set(['Video_StickyOutstream', 'Interstitial']);
	        const amazonEnabled = bootstrapConfig.amazonEnabled;
	        this.enabled = amazonEnabled && adthrive.siteAds.adOptions.amazonUAM === true;
	    }
	};
	Amazon = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, BootstrapConfig])
	], Amazon);

	let AuctionOptions = class AuctionOptions {
	    constructor() {
	        this.bidders = ['unruly', 'districtm', 'undertone', '33across'];
	    }
	};
	AuctionOptions = __decorate([
	    singleton()
	], AuctionOptions);

	let CCPA = class CCPA {
	    constructor() {
	        this.nonCompliantBidders = ['unruly'];
	        this.ccpaNotApplicable = '1---';
	        this.ccpaOptIn = '1YNY';
	        this.ccpaOptOut = '1YYY';
	        this.required = isPacific();
	        this.required = isPacific();
	        this.privacyString = readCookie('usprivacy');
	        this.gpcEnabled = localStorage.getItem('adthrive_gpc');
	        this.userOptedOut = this.privacyString === this.ccpaOptOut ? true : false;
	        if (this.required) {
	            this.comscoreParams = this.userOptedOut ? '0' : '1';
	        }
	    }
	    get enabled() {
	        return this.required && this.userOptedOut;
	    }
	};
	CCPA = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [])
	], CCPA);

	class ClsOptions {
	    constructor() {
	        this._clsGlobalData = getClsGlobal();
	    }
	    get enabled() {
	        return this._clsGlobalData && this._clsGlobalData.siteAds;
	    }
	    set siteAds(data) {
	        this._clsGlobalData.siteAds = data;
	    }
	    get siteAds() {
	        return this._clsGlobalData.siteAds;
	    }
	    set disableAds(data) {
	        this._clsGlobalData.disableAds = data;
	    }
	    get disableAds() {
	        return this._clsGlobalData.disableAds;
	    }
	    set enabledLocations(data) {
	        this._clsGlobalData.enabledLocations = data;
	    }
	    get enabledLocations() {
	        return this._clsGlobalData.enabledLocations;
	    }
	    get injectedFromPlugin() {
	        return this._clsGlobalData.injectedFromPlugin;
	    }
	    set injectedFromPlugin(status) {
	        this._clsGlobalData.injectedFromPlugin = status;
	    }
	    get injectedFromSiteAds() {
	        return this._clsGlobalData.injectedFromSiteAds;
	    }
	    set injectedFromSiteAds(status) {
	        this._clsGlobalData.injectedFromSiteAds = status;
	    }
	    overwriteInjectedSlots(slots) {
	        this._clsGlobalData.injectedSlots = slots;
	    }
	    setInjectedSlots(slot) {
	        this._clsGlobalData.injectedSlots.push(slot);
	    }
	    get injectedSlots() {
	        return this._clsGlobalData.injectedSlots;
	    }
	    setInjectedScripts(script) {
	        this._clsGlobalData.injectedScripts = this._clsGlobalData.injectedScripts || [];
	        this._clsGlobalData.injectedScripts.push(script);
	    }
	    get getInjectedScripts() {
	        return this._clsGlobalData.injectedScripts;
	    }
	    setExperiment(key, val) {
	        this._clsGlobalData.experiments = this._clsGlobalData.experiments || [];
	        this._clsGlobalData.experiments[key] = val;
	    }
	    getExperiment(key) {
	        return this._clsGlobalData.experiments && this._clsGlobalData.experiments[key];
	    }
	    get branch() {
	        return this._clsGlobalData.branch;
	    }
	    get bucket() {
	        return this._clsGlobalData.bucket;
	    }
	    set videoDisabledFromPlugin(status) {
	        this._clsGlobalData.videoDisabledFromPlugin = status;
	    }
	    get videoDisabledFromPlugin() {
	        return this._clsGlobalData.videoDisabledFromPlugin;
	    }
	    set targetDensityLog(data) {
	        this._clsGlobalData.targetDensityLog = data;
	    }
	    get targetDensityLog() {
	        return this._clsGlobalData.targetDensityLog;
	    }
	}

	let Context = class Context {
	    constructor(adthrive) {
	        this.connectionTargeting = [];
	        const { bucket, plugin, branch, debug, deployment, baseUrl, fastAds, siteAds, styleUrl, invalidTraffic, integration } = adthrive;
	        const { tablet, desktop } = siteAds.breakpoints;
	        this.baseUrl = baseUrl;
	        this.branch = branch;
	        this.bucket = bucket;
	        this.plugin = plugin;
	        this.fastAds = fastAds;
	        this.invalidTraffic = invalidTraffic;
	        this.deployment = deployment;
	        this.domain = window.location.host;
	        this.device = deviceByBreakpoint(tablet, desktop);
	        this.pageUrl = window.location.href;
	        this.pageviewKey = ulid();
	        this.querystring = parseQueryString();
	        this.sessionKey = getOrSetSessionValue('session_key', () => ulid(), 1800000);
	        this.styleUrl = styleUrl;
	        this.debug = debug;
	        this.integration = integration;
	        const adsMinPerformance = window.performance
	            .getEntriesByType('resource')
	            .filter(resource => resource.name.indexOf('ads.min.js') > -1 && resource.name.indexOf('ads.adthrive.com') > -1)[0];
	        if (adsMinPerformance) {
	            const durationStr = Math.round(adsMinPerformance.responseEnd - adsMinPerformance.startTime).toString();
	            if (durationStr !== 'NaN') {
	                this.adsMinLoadDuration = [durationStr];
	            }
	        }
	        const connection = window.navigator && (window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection);
	        if (connection) {
	            if (connection.effectiveType) {
	                this.connectionTargeting.push(`niet:${connection.effectiveType}`);
	            }
	            if (connection.downlink || connection.bandwidth) {
	                this.connectionTargeting.push(`dl:${connection.downlink || connection.bandwidth}`);
	            }
	        }
	    }
	};
	Context = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], Context);

	const standardUnitHeight = 250;
	const mobileAsideUnitHeight = 50;
	const desktopAsideUnitHeight = 90;
	let CLSOptimizedAds = class CLSOptimizedAds {
	    constructor(adthrive, _context, _abgroup, _clsOptions) {
	        this.adthrive = adthrive;
	        this._context = _context;
	        this._abgroup = _abgroup;
	        this._clsOptions = _clsOptions;
	        this._defaultHeight = standardUnitHeight;
	        this._map = new Map([
	            [
	                'phone',
	                {
	                    Content: standardUnitHeight,
	                    Recipe: standardUnitHeight,
	                    Header: mobileAsideUnitHeight,
	                    Footer: mobileAsideUnitHeight,
	                    Below_Post: standardUnitHeight,
	                    Sidebar: standardUnitHeight,
	                },
	            ],
	            [
	                'tablet',
	                {
	                    Content: standardUnitHeight,
	                    Recipe: standardUnitHeight,
	                    Header: desktopAsideUnitHeight,
	                    Footer: desktopAsideUnitHeight,
	                    Below_post: standardUnitHeight,
	                    Sidebar: standardUnitHeight,
	                },
	            ],
	            [
	                'desktop',
	                {
	                    Content: standardUnitHeight,
	                    Recipe: standardUnitHeight,
	                    Header: desktopAsideUnitHeight,
	                    Footer: desktopAsideUnitHeight,
	                    Below_Post: standardUnitHeight,
	                    Sidebar: standardUnitHeight,
	                },
	            ],
	        ]);
	        if (this._clsOptions.enabled) {
	            const clsSiteSpecificExperimentKey = 'clsins_ss';
	            const clsExperimentResult = this._clsOptions.getExperiment(clsSiteSpecificExperimentKey);
	            if (clsExperimentResult) {
	                this._abgroup.set(clsSiteSpecificExperimentKey, clsExperimentResult);
	            }
	            const clsScriptsOnPage = ['cls-insertion', 'cls-header-insertion', 'cls-disable-ads'];
	            clsScriptsOnPage
	                .filter(clsScript => {
	                if (this._clsOptions.branch) {
	                    const elementId = `${clsScript}-${this._clsOptions.branch}`;
	                    const selector = 'script[id^=' + elementId + ']';
	                    return document.querySelectorAll(selector).length > 0;
	                }
	                return false;
	            })
	                .forEach(insertedScriptName => this._clsOptions.setInjectedScripts(insertedScriptName));
	        }
	    }
	    get enabled() {
	        return (this.adthrive.siteAds.adOptions.clsOptimizedAds ||
	            (this._clsOptions.enabled && (this._clsOptions.injectedFromPlugin || this._clsOptions.injectedFromSiteAds)));
	    }
	    getDivHeight(adUnitLocation, device) {
	        const adUnitsByDevice = this._map.get(device);
	        return (adUnitsByDevice && adUnitsByDevice[adUnitLocation]) || this._defaultHeight;
	    }
	    setStyle(element, location) {
	        if (location === 'Footer' || (this.enabled && this._map.get(this._context.device)[location])) {
	            element.style.minHeight = `${this._map.get(this._context.device)[location]}px`;
	            element.classList.add('adthrive-ad-cls');
	        }
	    }
	};
	CLSOptimizedAds = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, Context,
	        ABGroup,
	        ClsOptions])
	], CLSOptimizedAds);

	let Comscore = class Comscore {
	    constructor(adthrive) {
	        this.tracker = true;
	        this.gdpr = false;
	        this._footerMessages = new Map([
	            ['FamilyParenting', 'CafeMedia Family & Parenting'],
	            ['Finance', 'CafeMedia Finance'],
	            ['Food', 'CafeMedia Food'],
	            ['General', 'CafeMedia'],
	            ['HomeDIY', 'CafeMedia Home/DIY'],
	            ['Lifestyle', 'CafeMedia Lifestyle'],
	            ['Pets', 'CafeMedia Pets'],
	            ['Tech', 'CafeMedia Tech'],
	            ['Travel', 'CafeMedia Travel'],
	        ]);
	        const { comscore, comscoreFooter } = adthrive.siteAds.adOptions;
	        this.category = defaultTo(comscore, 'General');
	        this.comscore = defaultTo(comscoreFooter, true);
	        this.comscoreMessage = defaultTo(this._footerMessages.get(this.category), 'CafeMedia');
	    }
	};
	Comscore = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], Comscore);

	let DisableAds = class DisableAds {
	    constructor(adthrive, _clsOptions) {
	        this.adthrive = adthrive;
	        this._clsOptions = _clsOptions;
	        this.all = false;
	        this.content = false;
	        this.recipe = false;
	        this.video = false;
	        this.locations = new Set();
	        this.reasons = new Set();
	        this._clsDivs = ['adthrive-below-post', 'adthrive-content', 'adthrive-header', 'adthrive-recipe', 'adthrive-sidebar'];
	        if (this.urlHasEmail(window.location.href) || this.urlHasEmail(window.document.referrer)) {
	            this.all = true;
	            this.reasons.add('all_email');
	            this.removeClsDivs(this._clsDivs);
	        }
	        try {
	            if (document.body.classList.contains('adthrive-disable-all')) {
	                this.all = true;
	                this.reasons.add('all_plugin');
	            }
	            if (document.body.classList.contains('adthrive-disable-content')) {
	                this.content = true;
	                this.recipe = true;
	                this.locations.add('Content');
	                this.locations.add('Recipe');
	                this.reasons.add('content_plugin');
	            }
	            if (document.querySelector('.tag-novideo') !== null) {
	                this.video = true;
	                this.locations.add('Video');
	                this.reasons.add('video_tag');
	            }
	            if (document.body.classList.contains('adthrive-disable-video')) {
	                this.video = true;
	                this.locations.add('Video');
	                this.reasons.add('video_plugin');
	            }
	        }
	        catch (err) {
	            logger.error('DisableAds', 'constructor', { message: err.message });
	            const support = 'classList' in document.createElement('_');
	            logger.error('BodyDeviceClassComponent', 'init.support', { support });
	            const supportBody = 'classList' in document.body;
	            logger.error('BodyDeviceClassComponent', 'init.supportBody', { supportBody });
	        }
	    }
	    removeClsDivs(selectors) {
	        if (!this._clsOptions.enabled) {
	            return;
	        }
	        const filteredSlots = this._clsOptions.injectedSlots.filter((slot) => {
	            const currentAdUnit = slot.element;
	            let shouldFilter = false;
	            if (currentAdUnit.parentNode && selectors.some(selector => currentAdUnit.classList.contains(selector))) {
	                currentAdUnit.parentNode.removeChild(currentAdUnit);
	                shouldFilter = true;
	            }
	            return !shouldFilter;
	        });
	        this._clsOptions.overwriteInjectedSlots(filteredSlots);
	    }
	    disableAllAds(patterns) {
	        if (!patterns || urlMatch(patterns)) {
	            this.all = true;
	            this.reasons.add('all_page');
	            this.removeClsDivs(this._clsDivs);
	        }
	    }
	    disableContentAds(patterns) {
	        if (!patterns || urlMatch(patterns)) {
	            this.content = true;
	            this.recipe = true;
	            this.locations.add('Content');
	            this.locations.add('Recipe');
	            this.reasons.add('content_page');
	            this.removeClsDivs(['adthrive-content', 'adthrive-recipe']);
	        }
	    }
	    disablePlaylistPlayers(patterns) {
	        if (!patterns || urlMatch(patterns)) {
	            this.video = true;
	            this.locations.add('Video');
	            this.reasons.add('video_page');
	            this.adthrive.siteAds.videoPlayers ? this._removeCLSVideoPlayers() : this._removeLegacyCLSVideoPlayers();
	        }
	    }
	    _removeCLSVideoPlayers() {
	        var _a;
	        (_a = this.adthrive.siteAds.videoPlayers) === null || _a === void 0 ? void 0 : _a.players.filter(player => player.type === "stickyPlaylist"  || player.type === "sekindo" ).map(player => document.querySelectorAll(`#cls-video-container-${player.playlistId}`)).forEach(clsElements => {
	            var _a;
	            for (let i = 0; i < clsElements.length; i++) {
	                const currentAdUnit = clsElements[i];
	                (_a = currentAdUnit.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(currentAdUnit);
	            }
	        });
	    }
	    _removeLegacyCLSVideoPlayers() {
	        var _a, _b;
	        const playlistPlayerId = (_a = this.adthrive.siteAds.video) === null || _a === void 0 ? void 0 : _a.jwPlaylistId;
	        if (playlistPlayerId) {
	            const clsAdUnits = document.querySelectorAll(`#cls-video-container-${playlistPlayerId}`);
	            for (let i = 0; i < clsAdUnits.length; i++) {
	                const currentAdUnit = clsAdUnits[i];
	                (_b = currentAdUnit.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(currentAdUnit);
	            }
	        }
	    }
	    urlHasEmail(url) {
	        if (!url) {
	            return false;
	        }
	        const hasAnEmail = /([A-Z0-9._%+-]+(@|%(25)*40)[A-Z0-9.-]+\.[A-Z]{2,})/i;
	        return hasAnEmail.exec(url) !== null;
	    }
	};
	DisableAds = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ClsOptions])
	], DisableAds);

	let RemoveLargeSizeExperiment = class RemoveLargeSizeExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this._choices = [{ choice: true }, { choice: false }];
	        this.key = 'smhd100';
	        const cls = window.adthriveCLS;
	        const clsExperiments = cls && cls.experiments;
	        this._result = clsExperiments && this.key in clsExperiments ? clsExperiments[this.key] : this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	RemoveLargeSizeExperiment = __decorate([
	    log('RemoveLargeSizeExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RemoveLargeSizeExperiment);

	let RemoveLargeSidebarExperiment = class RemoveLargeSidebarExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'smad300';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(1).get();
	    }
	};
	RemoveLargeSidebarExperiment = __decorate([
	    log('RemoveLargeSidebarExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RemoveLargeSidebarExperiment);

	let DynamicAdsMapper = class DynamicAdsMapper {
	    constructor(_adthrive, _adOptions, _removeLargeSizeExperiment, _removeLargeSidebarExperiment) {
	        this._adthrive = _adthrive;
	        this._adOptions = _adOptions;
	        this._removeLargeSizeExperiment = _removeLargeSizeExperiment;
	        this._removeLargeSidebarExperiment = _removeLargeSidebarExperiment;
	        this._stickyOutstreamEnabled = false;
	        this._supportedSizes = [
	            [728, 90],
	            [300, 250],
	            [300, 600],
	            [320, 50],
	            [970, 250],
	            [160, 600],
	            [300, 1050],
	            [336, 280],
	            [970, 90],
	            [300, 50],
	            [320, 100],
	            [468, 60],
	            [250, 250],
	            [120, 240],
	            [1, 1],
	            [300, 300],
	            [552, 334],
	            [300, 420],
	            [728, 250],
	            [320, 300],
	            [300, 390],
	        ];
	        this._interstitialSupportedSizes = [
	            [320, 50],
	            [300, 250],
	            [300, 600],
	            [336, 280],
	            [320, 480],
	            [1, 1],
	        ];
	        this._adUnitAuctionPriorityMap = new Map([
	            ['Footer', 1],
	            ['Header', 2],
	            ['Sidebar', 3],
	            ['Content', 4],
	            ['Recipe', 5],
	            ['Sidebar_sticky', 6],
	            ['Below Post', 7],
	        ]);
	        this._adUnitSettingTemplate = {
	            auctionPriority: 8,
	            autosize: true,
	            classNames: [],
	            devices: ['tablet', 'phone', 'desktop'],
	            elementSelector: 'body',
	            every: 1,
	            lazy: false,
	            lazyMax: 0,
	            lazyMaxDefaulted: false,
	            location: '',
	            max: 1,
	            pageSelector: '',
	            position: 'beforebegin',
	            sequence: 1,
	            sizes: [],
	            skip: 0,
	            spacing: 0,
	            special: [],
	            sticky: false,
	            stickyOverlapSelector: '',
	        };
	        const { tablet, desktop } = _adthrive.siteAds.breakpoints;
	        this._device = deviceByBreakpoint(tablet, desktop);
	        this._adthriveSiteAds = this._adthrive.siteAds;
	        this._adthriveOptions = this._adthriveSiteAds.adOptions;
	        this.setupStickyOutstreamSettings();
	        this.setupInterstitialSettings();
	    }
	    setupStickyOutstreamSettings() {
	        const legacyOptions = this._adthriveSiteAds.video && this._adthriveSiteAds.video.partners && this._adthriveSiteAds.video.partners.stickyOutstream;
	        const newOptions = this._adthriveSiteAds.videoPlayers &&
	            this._adthriveSiteAds.videoPlayers.partners &&
	            this._adthriveSiteAds.videoPlayers.partners.stickyOutstream;
	        const stickyVideoOptions = legacyOptions || newOptions;
	        const stickyAdOptions = defaultTo((this._adthriveOptions && this._adthriveOptions.stickyOutstream) || stickyVideoOptions, null);
	        const stickyOutstreamConfig = stickyAdOptions && (this._device === 'phone' ? stickyAdOptions.mobile : stickyAdOptions.desktop);
	        if (stickyAdOptions && stickyOutstreamConfig) {
	            this._stickyOutstreamEnabled = stickyOutstreamConfig.enabled;
	            const dynamicAd = { ...this._adUnitSettingTemplate };
	            dynamicAd.sticky = true;
	            dynamicAd.location = 'Video_StickyOutstream';
	            dynamicAd.position = 'beforeend';
	            dynamicAd.pageSelector = defaultTo(stickyVideoOptions && stickyVideoOptions.blockedPageSelectors, '');
	            dynamicAd.sizes = this._device === 'phone' ? [[300, 50]] : [[300, 250]];
	            this._stickyOutstreamSettingTemplate = dynamicAd;
	        }
	    }
	    setupInterstitialSettings() {
	        const dynamicAd = { ...this._adUnitSettingTemplate };
	        const adOptions = this._adthriveOptions;
	        dynamicAd.location = 'Interstitial';
	        dynamicAd.sizes = this.interstitalSupportedSizes();
	        dynamicAd.pageSelector = defaultTo(adOptions.interstitialBlockedPageSelectors || adOptions.mobileInterstitialBlockedPageSelectors, '');
	        this._interstitialSettingTemplate = dynamicAd;
	    }
	    get() {
	        this._adthriveOptions;
	        this._adthrive.siteAds.adUnits.sort((a, b) => {
	            const aLocationName = a.location === 'Sidebar' && a.sticky ? a.location + '_sticky' : a.location;
	            const bLocationName = b.location === 'Sidebar' && b.sticky ? b.location + '_sticky' : b.location;
	            return this._adUnitAuctionPriorityMap.get(aLocationName) - this._adUnitAuctionPriorityMap.get(bLocationName);
	        });
	        const dynamicAds = this._adthrive.siteAds.adUnits
	            .filter((adUnit) => adUnit.dynamic !== undefined && adUnit.dynamic.enabled)
	            .map(adUnit => {
	            const location = adUnit.location.replace(/\s+/g, '_');
	            return {
	                auctionPriority: this._adUnitAuctionPriorityMap.get(location) || 8,
	                location,
	                sequence: defaultTo(adUnit.sequence, 1),
	                sizes: this.onlySupportedAdSizes(adUnit.adSizes).filter(size => this.excludeTallSizes(adUnit.location, size, adUnit.sequence, adUnit.adSizes)),
	                devices: adUnit.devices,
	                pageSelector: defaultTo(adUnit.dynamic.pageSelector, '').trim(),
	                elementSelector: defaultTo(adUnit.dynamic.elementSelector, '').trim(),
	                position: defaultTo(adUnit.dynamic.position, 'beforebegin'),
	                max: Math.floor(defaultTo(adUnit.dynamic.max, 0)),
	                spacing: defaultTo(adUnit.dynamic.spacing, 0),
	                skip: Math.floor(defaultTo(adUnit.dynamic.skip, 0)),
	                every: Math.max(Math.floor(defaultTo(adUnit.dynamic.every, 1)), 1),
	                classNames: adUnit.dynamic.classNames || [],
	                sticky: adUnit.location === 'Footer' ? true : adUnit.sticky,
	                stickyOverlapSelector: defaultTo(adUnit.stickyOverlapSelector, '').trim(),
	                autosize: adUnit.autosize,
	                special: defaultTo(adUnit.targeting, [])
	                    .filter((targeting) => targeting.key === 'special')
	                    .reduce((values, targeting) => values.concat(...targeting.value), []),
	                lazy: defaultTo(adUnit.dynamic.lazy, false),
	                lazyMax: defaultTo(adUnit.dynamic.lazyMax, 2),
	                lazyMaxDefaulted: adUnit.dynamic.lazyMax === 0 ? false : !adUnit.dynamic.lazyMax,
	            };
	        });
	        if (this._stickyOutstreamEnabled && this._stickyOutstreamSettingTemplate) {
	            dynamicAds.push(this._stickyOutstreamSettingTemplate);
	        }
	        if (this._adOptions.interstitial.gam && this._interstitialSettingTemplate) {
	            dynamicAds.push(this._interstitialSettingTemplate);
	        }
	        return dynamicAds;
	    }
	    onlySupportedAdSizes(sizes) {
	        return this._supportedSizes.filter(([w1, h1]) => {
	            return sizes.some(([w2, h2]) => w1 === w2 && h1 === h2);
	        });
	    }
	    interstitalSupportedSizes() {
	        return this._interstitialSupportedSizes.filter(([w1, h1]) => {
	            if (this._device !== 'phone' && `${w1},${h1}` === '320,50') {
	                return false;
	            }
	            return true;
	        });
	    }
	    excludeTallSizes(location, [w1, h1], sequence, adSizes) {
	        return !((location === 'Footer' && this._device === 'phone' && w1 === 320 && h1 === 100) ||
	            (location === 'Header' && h1 > 100 && this._removeLargeSizeExperiment.result) ||
	            (location === 'Sidebar' &&
	                sequence !== 9 &&
	                adSizes.some(([w1, h1]) => h1 <= 300) &&
	                h1 > 300 &&
	                this._removeLargeSidebarExperiment.result));
	    }
	};
	DynamicAdsMapper = __decorate([
	    injectable(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, AdOptions,
	        RemoveLargeSizeExperiment,
	        RemoveLargeSidebarExperiment])
	], DynamicAdsMapper);

	let EBHOExperiment = class EBHOExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'ebho';
	        this._choices = [
	            { choice: { name: 'ix_ebda', weight: 0.5 } },
	            { choice: { name: 'medianet_ebda', weight: 1 } },
	            { choice: { name: 'openx_ebda', weight: 0.5 } },
	            { choice: { name: 'pubmatic_ebda', weight: 1 } },
	            { choice: { name: 'rhythmone_ebda', weight: 1 } },
	            { choice: { name: 'rubicon_ebda', weight: 0.5 } },
	            { choice: { name: 'sharethrough_ebda', weight: 10 } },
	            { choice: { name: 'smart_ebda', weight: 1 } },
	            { choice: { name: 'sonobi_ebda', weight: 1 } },
	            { choice: { name: 'sovrn_ebda', weight: 10 } },
	            { choice: { name: 'emx_ebda', weight: 1 } },
	            { choice: { name: 'triplelift_ebda', weight: 1 } },
	            { choice: { name: 'verizon_ebda', weight: 10 } },
	            { choice: { name: 'yieldmo_ebda', weight: 10 } },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? this._result.name : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const choices = this._choices
	            .map(item => item.choice)
	            .map(bidder => ({
	            choice: bidder,
	            weight: bidder.weight,
	        }));
	        const holdoutChoices = new WeightedChoice(choices);
	        if (holdoutChoices.totalWeight > 90) {
	            logger.warn('EBHOExperiment', 'constructor', 'Holdout experiment percentages totaled over 90');
	        }
	        return holdoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Object)
	], EBHOExperiment.prototype, "run", null);
	EBHOExperiment = __decorate([
	    log('EBHOExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], EBHOExperiment);

	let EBHO = class EBHO {
	    constructor(ebhoExperiment) {
	        this.bidder = ebhoExperiment.result;
	    }
	};
	EBHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [EBHOExperiment])
	], EBHO);

	let ImpressionLogExperiment = class ImpressionLogExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: 0, weight: 98.8 },
	            { choice: 1, weight: 0.2 },
	            { choice: 2, weight: 1 },
	        ];
	        this.key = 'loglevel';
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? (this._result === 1 ? 'on' : 'log') : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], ImpressionLogExperiment.prototype, "run", null);
	ImpressionLogExperiment = __decorate([
	    log('EventLogExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], ImpressionLogExperiment);

	let ImpressionLog = class ImpressionLog {
	    constructor(impressionLogExperiment) {
	        this.enabled = impressionLogExperiment.result;
	    }
	};
	ImpressionLog = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [ImpressionLogExperiment])
	], ImpressionLog);

	let Footer = class Footer {
	    constructor() {
	        this.elements = [];
	    }
	};
	Footer = __decorate([
	    singleton()
	], Footer);

	let GAM = class GAM {
	    constructor(adthrive) {
	        this.prefix = 'AdThrive';
	        this.networkCode = '18190176';
	        this._gamMCMEnabled = defaultTo(adthrive.siteAds.adOptions.gamMCMEnabled, false);
	        this._gamMCMChildNetworkCode = defaultTo(adthrive.siteAds.adOptions.gamMCMChildNetworkCode, '');
	        this.account =
	            this._gamMCMEnabled && this._gamMCMChildNetworkCode !== '' ? `${this.networkCode},${this._gamMCMChildNetworkCode}` : this.networkCode;
	        const excluded = new Set(['service', 'bidding', 'dynamicVersion']);
	        this.targeting = adthrive.siteAds.targeting
	            .filter(({ key }) => !excluded.has(key))
	            .map(({ key, value }) => {
	            if (typeof value === 'boolean') {
	                value = String(value);
	            }
	            return { key, value };
	        });
	    }
	};
	GAM = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], GAM);

	let GDPR = class GDPR {
	    constructor(adthrive) {
	        this.cafeMediaVendorId = 996;
	        this.nonCompliantBidders = ['deepintent', 'roundel', 'yahoossp'];
	        this.isRequired = adthrive.gdpr === 'true' ? true : false;
	    }
	    get enabled() {
	        return this.isRequired;
	    }
	};
	GDPR = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], GDPR);

	let HBHOExperiment = class HBHOExperiment extends Experiment {
	    constructor() {
	        super();
	        this.biddersHeldOut = [];
	        this.key = 'hbho';
	        this._result = [];
	        this._choices = [
	            { choice: ['33across'], threshold: 0.1 },
	            { choice: ['appnexus'], threshold: 0.01 },
	            { choice: ['brightroll'], threshold: 0.01 },
	            { choice: ['concert'], threshold: 0.05 },
	            { choice: ['conversant'], threshold: 0.1 },
	            { choice: ['criteo'], threshold: 0.01 },
	            { choice: ['deepIntent'], threshold: 0.01 },
	            { choice: ['districtm'], threshold: 0.35 },
	            { choice: ['districtmDMX'], threshold: 0.25 },
	            { choice: ['grid'], threshold: 0.005 },
	            { choice: ['gumgum'], threshold: 0.01 },
	            { choice: ['kargo'], threshold: 0.01 },
	            { choice: ['ix'], threshold: 0.005 },
	            { choice: ['nativo'], threshold: 0.1 },
	            { choice: ['openx'], threshold: 0.01 },
	            { choice: ['pubmatic'], threshold: 0.01 },
	            { choice: ['roundel'], threshold: 0.1 },
	            { choice: ['rubicon'], threshold: 0.01 },
	            { choice: ['sharethrough'], threshold: 0.1 },
	            { choice: ['teads'], threshold: 0.01 },
	            { choice: ['triplelift'], threshold: 0.005 },
	            { choice: ['ttd'], threshold: 0.01 },
	            { choice: ['undertone'], threshold: 0.01 },
	            { choice: ['unruly'], threshold: 0.1 },
	            { choice: ['verizon'], threshold: 0.01 },
	            { choice: ['yahoossp'], threshold: 0.01 },
	            { choice: ['yieldmo'], threshold: 0.01 },
	        ];
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return this._choices.filter(({ threshold }) => new BernoulliTrial(threshold).get()).map(({ choice }) => choice[0]);
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], HBHOExperiment.prototype, "run", null);
	HBHOExperiment = __decorate([
	    log('HBHOExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], HBHOExperiment);

	let HBHO = class HBHO {
	    constructor(hbhoExperiment) {
	        this.bidders = hbhoExperiment.result;
	    }
	};
	HBHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [HBHOExperiment])
	], HBHO);

	let IdentityApi = class IdentityApi {
	    constructor(adthrive) {
	        this.adthrive = adthrive;
	        this.apiReady = new Emitter();
	        this.optIn = new Emitter();
	    }
	    get enabled() {
	        return defaultTo(this.adthrive.siteAds.adOptions.liveRampATS, false);
	    }
	};
	IdentityApi = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], IdentityApi);

	let IDHOExperiment = class IDHOExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: { name: 'id5Id', weight: 5 } },
	            { choice: { name: 'identityLink', weight: 1 } },
	            { choice: { name: 'unifiedId', weight: 1 } },
	            { choice: { name: 'pubCommonId', weight: 5 } },
	            { choice: { name: 'criteo', weight: 25 } },
	            { choice: { name: 'connectId', weight: 5 } },
	        ];
	        this.key = 'idho';
	        this._result = this.run();
	        abgroup.set(this.key, this.result ? this.result.name : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const choices = this._choices
	            .map(item => item.choice)
	            .map(bidder => ({
	            choice: bidder,
	            weight: bidder.weight,
	        }));
	        const holdoutChoices = new WeightedChoice(choices);
	        if (holdoutChoices.totalWeight > 90) {
	            logger.warn('IDHOExperiment', 'constructor', 'Holdout experiment percentages totaled over 90');
	        }
	        return holdoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Object)
	], IDHOExperiment.prototype, "run", null);
	IDHOExperiment = __decorate([
	    log('IDHOExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], IDHOExperiment);

	let IDHO = class IDHO {
	    constructor(idhoExperiment) {
	        this.subModule = idhoExperiment.result;
	    }
	};
	IDHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [IDHOExperiment])
	], IDHO);

	let InfiniteScroll = class InfiniteScroll {
	    constructor() {
	        this.refreshSlots = new Set(['Footer']);
	        this.ajaxType = false;
	    }
	};
	InfiniteScroll = __decorate([
	    singleton()
	], InfiniteScroll);

	let BelowPostMarginExperiment = class BelowPostMarginExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'lzbpvp';
	        this._choices = [
	            { choice: 0.75, weight: 40 },
	            { choice: 0.25, weight: 20 },
	            { choice: 0.125, weight: 20 },
	            { choice: 0, weight: 20 },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, String(this._result));
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Number)
	], BelowPostMarginExperiment.prototype, "run", null);
	BelowPostMarginExperiment = __decorate([
	    log('BelowPostMarginExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], BelowPostMarginExperiment);

	let ContentMarginExperiment = class ContentMarginExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'lzcvp';
	        this._choices = [
	            { choice: 2, weight: 60 },
	            { choice: 1.25, weight: 10 },
	            { choice: 1, weight: 10 },
	            { choice: 0.75, weight: 10 },
	            { choice: 0.5, weight: 10 },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, String(this._result));
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Number)
	], ContentMarginExperiment.prototype, "run", null);
	ContentMarginExperiment = __decorate([
	    log('ContentMarginExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], ContentMarginExperiment);

	let LZHBExperiment = class LZHBExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'lzhb';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.9).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], LZHBExperiment.prototype, "run", null);
	LZHBExperiment = __decorate([
	    log('LZHBExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], LZHBExperiment);

	let LazyLoad = class LazyLoad {
	    constructor(lzhb, contentMargin, belowPostMargin) {
	        this._defaultViewPort = 2;
	        this._infScrollViewPort = 4;
	        this.googleLazyLoadSettings = {
	            disabled: {
	                fetchMarginPercent: -1,
	                renderMarginPercent: -1,
	                mobileScaling: -1,
	            },
	            gam: {
	                fetchMarginPercent: 600,
	                renderMarginPercent: 100,
	                mobileScaling: 1.5,
	            },
	            hbMarginPercent: 700,
	        };
	        this.lzhb = lzhb.result;
	        this.viewports = {
	            content: contentMargin.result,
	            belowPost: belowPostMargin.result,
	            default: this._defaultViewPort,
	            infScroll: this._infScrollViewPort,
	        };
	    }
	};
	LazyLoad = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [LZHBExperiment, ContentMarginExperiment, BelowPostMarginExperiment])
	], LazyLoad);

	let LiveRampAts = class LiveRampAts {
	    constructor(adthrive) {
	        this._url = 'https://ats.rlcdn.com/ats.js';
	        this._config = {
	            placementID: 111,
	            storageType: 'localStorage',
	            detectionType: 'direct',
	            logging: 'error',
	        };
	        this.enabled = defaultTo(adthrive.siteAds.adOptions.liveRampATS, true);
	    }
	};
	LiveRampAts = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], LiveRampAts);

	const marmaladeAdUnits = {
	    AS: {
	        location: 'Sponsor_Tile',
	        selectors: ['h1.entry-title', 'h1.post-title', 'h1.posttitle', 'h1.story-title', 'h1.heading', '.post > .post-title'],
	        size: [
	            [300, 55],
	            [234, 60],
	        ],
	        position: 'afterend',
	        classNames: ['adthrive-sponsor-tile'],
	        find: (selector) => document.querySelector(selector),
	        requireSelectorMatch: true,
	        lazy: false,
	    },
	    NR: {
	        location: 'Native_Recipe',
	        sequence: 1,
	        selectors: [
	            '[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="recipeIngredient"]:last-child',
	            '[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="ingredients"]:last-child',
	            '[itemscope][itemtype$="//schema.org/Recipe"] .ingredient:last-child',
	            '.wprm-recipe-ingredient:last-child',
	            '#recipe .ingredients',
	            '.wprm-recipe-ingredients-container',
	            '.tasty-recipe-ingredients',
	            '[class*="recipe"] [class*="ingredient"] ul li:last-child',
	            '[class*="create-ingredient"] ul li:last-child',
	            '[class*="tasty-recipe"] [class*="ingredient"] p:last-child',
	            '[class*=recipe] [class*=recipe] ~ p + ul li:last-child',
	        ],
	        size: [
	            [225, 65],
	            [234, 60],
	            [300, 100],
	        ],
	        position: 'afterend',
	        classNames: ['adthrive-native-recipe'],
	        find: (selector) => {
	            const matches = document.querySelectorAll(selector);
	            if (matches.length > 0) {
	                return matches[matches.length - 1];
	            }
	            return null;
	        },
	        requireSelectorMatch: false,
	        lazy: true,
	    },
	};

	let Marmalade = class Marmalade {
	    constructor(response) {
	        this.loaded = false;
	        this.campaigns = [];
	        this.siteCodes = [];
	        this.adViewability = [];
	        this.speed = navigator.connection && navigator.connection.effectiveType === '4g' ? '1' : '0';
	        this.adUnits = marmaladeAdUnits;
	        this.selectorMatches = [];
	        this.ortbSegments = new Map();
	        this.hvThreshold = 0.6;
	        this.mcmp = [];
	        this.flpProdIds = [];
	        this.activeCampaign = (campaign) => {
	            const now = Date.now();
	            return now >= this.parseDate(campaign.start_date).getTime() && now <= this.parseDate(campaign.expiration_date).getTime();
	        };
	        if (response) {
	            this.loaded = true;
	            const { host, page, adViewability } = response;
	            if (host && host.length) {
	                this.siteCodes = host[0].site_codes || [];
	            }
	            if (page && page.length) {
	                const campaigns = page[0].campaigns || [];
	                this.campaigns = campaigns.filter(this.activeCampaign);
	            }
	            if (adViewability && adViewability.length) {
	                this.adViewability = adViewability;
	            }
	            const marmladeData = this.getMcmpFlpIds();
	            this.mcmp = marmladeData.mcmp || [];
	            this.flpProdIds = marmladeData.flpProdIds || [];
	            this.ortbSegments = this.campaigns.reduce((acc, val) => {
	                const re = new RegExp(/(^iab(a|c))_(\d*)/);
	                const [, ortbType, , ortbSegmentId] = re.exec(val.dfp_id) || [];
	                const segment = acc.get(ortbType) || [];
	                segment.push({ id: ortbSegmentId });
	                acc.set(ortbType, segment);
	                return acc;
	            }, new Map());
	        }
	    }
	    isValidMarmaladeCampaign(campaign) {
	        const adUnitType = campaign.dfp_id.substring(0, 2);
	        const adUnit = this.adUnits[adUnitType];
	        if (adUnit) {
	            const match = adUnit.find(adUnit.selectors.join(','));
	            if (match) {
	                this.selectorMatches.push({ adUnit, match });
	            }
	            return !adUnit.requireSelectorMatch || !!match;
	        }
	        else {
	            return true;
	        }
	    }
	    getMcmpFlpIds() {
	        return this.campaigns
	            .filter(campaign => this.isValidMarmaladeCampaign(campaign))
	            .reduce((acc, campaign) => {
	            acc.mcmp.push(campaign.dfp_id);
	            campaign.flp_prod_id && acc.flpProdIds.push(...JSON.parse(campaign.flp_prod_id));
	            return acc;
	        }, { mcmp: [], flpProdIds: [] });
	    }
	    parseDate(input) {
	        const parts = input.split('-');
	        return new Date(Number(parts[0]), Number(parts[1]) - 1, Number(parts[2]));
	    }
	};
	Marmalade = __decorate([
	    singleton(),
	    __param(0, inject('MarmaladeResponse')),
	    __metadata("design:paramtypes", [Object])
	], Marmalade);

	let Partners = class Partners {
	    constructor(adthrive) {
	        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8;
	        this._biddersConfig = new Map();
	        (_a = adthrive === null || adthrive === void 0 ? void 0 : adthrive.core) === null || _a === void 0 ? void 0 : _a.partners.forEach(bidderCoreConfig => {
	            if (bidderCoreConfig.bidder_name) {
	                const enabled = defaultTo(bidderCoreConfig.enabled, true);
	                const cpmMap = new Map();
	                if (bidderCoreConfig.cpm && bidderCoreConfig.cpm.length) {
	                    bidderCoreConfig.cpm.forEach((bidderCPM) => {
	                        cpmMap.set(bidderCPM.name, bidderCPM);
	                    });
	                }
	                this._biddersConfig.set(bidderCoreConfig.bidder_name, { bidder_name: bidderCoreConfig.bidder_name, enabled, cpmMap });
	            }
	        });
	        const adOptions = adthrive.siteAds.adOptions;
	        this.appNexus = adOptions.appNexus && defaultTo((_b = this._biddersConfig.get('appnexus')) === null || _b === void 0 ? void 0 : _b.enabled, true);
	        this.brightroll = defaultTo(adOptions.brightroll, true) && defaultTo((_c = this._biddersConfig.get('brightroll')) === null || _c === void 0 ? void 0 : _c.enabled, true);
	        this.concert = defaultTo(adOptions.concert, false) && defaultTo((_d = this._biddersConfig.get('concert')) === null || _d === void 0 ? void 0 : _d.enabled, false);
	        this.conversant = adOptions.conversant && defaultTo((_e = this._biddersConfig.get('conversant')) === null || _e === void 0 ? void 0 : _e.enabled, false);
	        this.criteo = defaultTo(adOptions.criteo, true) && defaultTo((_f = this._biddersConfig.get('criteo')) === null || _f === void 0 ? void 0 : _f.enabled, true);
	        this.deepIntent = defaultTo(adOptions.deepIntent, true) && defaultTo((_g = this._biddersConfig.get('deepintent')) === null || _g === void 0 ? void 0 : _g.enabled, true);
	        this.districtM = adOptions.districtM && defaultTo((_h = this._biddersConfig.get('districtm')) === null || _h === void 0 ? void 0 : _h.enabled, true);
	        this.districtMDMX = adOptions.districtM && defaultTo((_j = this._biddersConfig.get('districtmDMX')) === null || _j === void 0 ? void 0 : _j.enabled, true);
	        this.districtMDMXVideo = adOptions.districtM && defaultTo((_k = this._biddersConfig.get('districtmDMX')) === null || _k === void 0 ? void 0 : _k.enabled, true);
	        this.indexExchange = adOptions.indexExchange && defaultTo((_l = this._biddersConfig.get('ix')) === null || _l === void 0 ? void 0 : _l.enabled, true);
	        this.gumgum = defaultTo(adOptions.gumgum, true) && defaultTo((_m = this._biddersConfig.get('gumgum')) === null || _m === void 0 ? void 0 : _m.enabled, true);
	        this.kargo = defaultTo(adOptions.kargo, true) && defaultTo((_o = this._biddersConfig.get('kargo')) === null || _o === void 0 ? void 0 : _o.enabled, true);
	        this.mediaGrid = defaultTo(adOptions.mediaGrid, true) && defaultTo((_p = this._biddersConfig.get('grid')) === null || _p === void 0 ? void 0 : _p.enabled, true);
	        this.mediaGridVideo = defaultTo(adOptions.mediaGrid, true) && defaultTo((_q = this._biddersConfig.get('gridvid')) === null || _q === void 0 ? void 0 : _q.enabled, true);
	        this.nativo = defaultTo(adOptions.nativo, true) && defaultTo((_r = this._biddersConfig.get('nativo')) === null || _r === void 0 ? void 0 : _r.enabled, true);
	        this.openx = adOptions.openx && defaultTo((_s = this._biddersConfig.get('openx')) === null || _s === void 0 ? void 0 : _s.enabled, true);
	        this.pubMatic = defaultTo(adOptions.pubMatic, true) && defaultTo((_t = this._biddersConfig.get('pubmatic')) === null || _t === void 0 ? void 0 : _t.enabled, true);
	        this.rubicon = defaultTo(adOptions.rubicon, true) && defaultTo((_u = this._biddersConfig.get('rubicon')) === null || _u === void 0 ? void 0 : _u.enabled, true);
	        this.sharethrough = defaultTo(adOptions.sharethrough, true) && defaultTo((_v = this._biddersConfig.get('sharethrough')) === null || _v === void 0 ? void 0 : _v.enabled, true);
	        this.spotx = defaultTo((_w = this._biddersConfig.get('spotx')) === null || _w === void 0 ? void 0 : _w.enabled, true);
	        this.teads = defaultTo(adOptions.teads, true) && defaultTo((_x = this._biddersConfig.get('teads')) === null || _x === void 0 ? void 0 : _x.enabled, true);
	        this.roundel = defaultTo(adOptions.roundel, true) && defaultTo((_y = this._biddersConfig.get('roundel')) === null || _y === void 0 ? void 0 : _y.enabled, true);
	        this.telaria = defaultTo((_z = this._biddersConfig.get('telaria')) === null || _z === void 0 ? void 0 : _z.enabled, true);
	        this.thirtyThreeAcross = defaultTo(adOptions.thirtyThreeAcross, true) && defaultTo((_0 = this._biddersConfig.get('33across')) === null || _0 === void 0 ? void 0 : _0.enabled, true);
	        this.tripleLift = defaultTo(adOptions.tripleLift, true) && defaultTo((_1 = this._biddersConfig.get('triplelift')) === null || _1 === void 0 ? void 0 : _1.enabled, true);
	        this.ttd = defaultTo(adOptions.theTradeDesk, true) && defaultTo((_2 = this._biddersConfig.get('ttd')) === null || _2 === void 0 ? void 0 : _2.enabled, true);
	        this.undertone = defaultTo(adOptions.undertone, true) && defaultTo((_3 = this._biddersConfig.get('undertone')) === null || _3 === void 0 ? void 0 : _3.enabled, true);
	        this.unruly = defaultTo(adOptions.unruly, true) && defaultTo((_4 = this._biddersConfig.get('unruly')) === null || _4 === void 0 ? void 0 : _4.enabled, true);
	        this.verizon = defaultTo(adOptions.verizon, true) && defaultTo((_5 = this._biddersConfig.get('verizon')) === null || _5 === void 0 ? void 0 : _5.enabled, true);
	        this.oneVideo = defaultTo(adOptions.oneVideo, true) && defaultTo((_6 = this._biddersConfig.get('oneVideo')) === null || _6 === void 0 ? void 0 : _6.enabled, true);
	        this.yahoossp = defaultTo(adOptions.yahoossp, true) && defaultTo((_7 = this._biddersConfig.get('yahoossp')) === null || _7 === void 0 ? void 0 : _7.enabled, true);
	        this.yieldmo = defaultTo(adOptions.yieldmo, true) && defaultTo((_8 = this._biddersConfig.get('yieldmo')) === null || _8 === void 0 ? void 0 : _8.enabled, true);
	        this.amazonUAM = adOptions.amazonUAM;
	        const maybeNewPartners = adthrive.siteAds.videoPlayers && adthrive.siteAds.videoPlayers.partners;
	        const maybeLegacyPartners = adthrive.siteAds.video && adthrive.siteAds.video.partners;
	        const videoPartners = maybeNewPartners || maybeLegacyPartners || {};
	        this.video = {
	            amazonUAM: defaultTo(videoPartners.amazonUAM, true) && this.amazonUAM,
	            appNexus: defaultTo(videoPartners.appNexus, true) && this.appNexus,
	            conversant: defaultTo(videoPartners.conversant, false) && this.conversant,
	            criteo: defaultTo(videoPartners.criteo, true) && this.criteo,
	            districtM: defaultTo(videoPartners.districtM, true) && this.districtM,
	            districtMDMXVideo: defaultTo(videoPartners.districtM, true) && this.districtMDMXVideo,
	            gumgum: defaultTo(videoPartners.gumgum, true) && this.gumgum,
	            indexExchange: defaultTo(videoPartners.indexExchange, true) && this.indexExchange,
	            mediaGridVideo: defaultTo(videoPartners.mediaGrid, true) && this.mediaGridVideo,
	            oneVideo: defaultTo(videoPartners.oneVideo, true) && this.oneVideo,
	            openx: defaultTo(videoPartners.openx, true) && this.openx,
	            pubMatic: defaultTo(videoPartners.pubMatic, true) && this.pubMatic,
	            rubicon: defaultTo(videoPartners.rubicon, true) && this.rubicon,
	            sharethrough: defaultTo(videoPartners.sharethrough, true) && this.sharethrough,
	            spotx: defaultTo(videoPartners.spotx, true) && this.spotx,
	            telaria: defaultTo(videoPartners.telaria, false) && this.telaria,
	            tripleLift: defaultTo(videoPartners.tripleLift, true) && this.tripleLift,
	            ttd: defaultTo(videoPartners.ttd, true) && this.ttd,
	            yahoossp: defaultTo(videoPartners.yahoossp, true) && this.yahoossp,
	        };
	    }
	    getBidderConfig(name) {
	        return defaultTo(this._biddersConfig.get(name), { bidder_name: name, enabled: true, cpmMap: new Map() });
	    }
	};
	Partners = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], Partners);

	let SensOffExperiment = class SensOffExperiment extends Experiment {
	    constructor(adthrive) {
	        super();
	        this.key = 'SensOffExperiment';
	        this._choices = [];
	        this._sensCategories = defaultTo(adthrive.siteAds.adOptions.sensitiveCategories, []);
	        this._choices = this._sensCategories.map(item => {
	            return {
	                choice: [item],
	            };
	        });
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return this._sensCategories.filter(() => new BernoulliTrial(0.01).get());
	    }
	};
	SensOffExperiment = __decorate([
	    log('SensOffExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], SensOffExperiment);

	let Site = class Site {
	    constructor(adthrive, _sensOffExperiment) {
	        this._sensOffExperiment = _sensOffExperiment;
	        this.id = adthrive.siteAds.siteId;
	        this.name = adthrive.siteAds.siteName;
	        this.verticals = adthrive.siteAds.adOptions.verticals;
	        this.sensitiveCategories = defaultTo(adthrive.siteAds.adOptions.sensitiveCategories, []);
	        this.sensCategoriesOff = this._sensOffExperiment.result;
	        this.filteredSensitiveCategories = this.sensitiveCategories.filter(category => this.sensCategoriesOff.indexOf(category) === -1);
	        this.breakpoints = adthrive.siteAds.breakpoints;
	        this.style = adthrive.style;
	    }
	};
	Site = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, SensOffExperiment])
	], Site);

	let RubiconExperiment = class RubiconExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: 'both', weight: 90 },
	            { choice: 'client', weight: 9 },
	            { choice: 'server', weight: 1 },
	        ];
	        this.key = 'magnitedr';
	        this._result = this.run();
	        abgroup.set(this.key, this._result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], RubiconExperiment.prototype, "run", null);
	RubiconExperiment = __decorate([
	    log('RubiconExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RubiconExperiment);

	let TripleLiftExperiment = class TripleLiftExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: 'both', weight: 99 },
	            { choice: 'client', weight: 1 },
	            { choice: 'server', weight: 0 },
	        ];
	        this.key = 'tripleliftdr';
	        this._result = this.run();
	        abgroup.set(this.key, this._result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], TripleLiftExperiment.prototype, "run", null);
	TripleLiftExperiment = __decorate([
	    log('TripleLiftExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], TripleLiftExperiment);

	let S2SExperiment = class S2SExperiment extends Experiment {
	    constructor(abgroup, tripleliftExperiment, rubiconExperiment) {
	        super();
	        this._result = ['33across', 'brightroll', 'conversant', 'deepintent', 'districtm', 'pubm_ss', 'yieldmo'];
	        this._choices = [
	            { choice: ['appnexus'], threshold: 0.05 },
	            { choice: ['grid'], threshold: 0.9 },
	            { choice: ['gumgum'], threshold: 0.02 },
	        ];
	        this.key = 'pbs2s';
	        this.addToS2SBidders('tripl_ss', tripleliftExperiment);
	        this.addToS2SBidders('rubi_ss', rubiconExperiment);
	        const active = this.run();
	        this._choices.forEach(({ choice }) => {
	            const bidder = choice[0];
	            if (active.indexOf(bidder) !== -1) {
	                this._result.push(bidder);
	                abgroup.set('pbs2s_' + bidder, 'on');
	            }
	            else {
	                abgroup.set('pbs2s_' + bidder, 'off');
	            }
	        });
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return this._choices.filter(({ threshold }) => new BernoulliTrial(threshold).get()).map(({ choice }) => choice[0]);
	    }
	    addToS2SBidders(bidder, experiment) {
	        if (experiment.result === 'both' || experiment.result === 'server') {
	            this._result.push(bidder);
	        }
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], S2SExperiment.prototype, "run", null);
	S2SExperiment = __decorate([
	    log('S2SExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup, TripleLiftExperiment, RubiconExperiment])
	], S2SExperiment);

	let Prebid = class Prebid {
	    constructor(s2sExperiment, _gam, _site) {
	        this._gam = _gam;
	        this._site = _site;
	        this.deals = [];
	        this.targetingKeys = [
	            'ADOMAIN',
	            'AD_ID',
	            'BIDDER',
	            'CACHE_ID',
	            'CACHE_HOST',
	            'DEAL',
	            'FORMAT',
	            'PRICE_BUCKET',
	            'SIZE',
	            'SOURCE',
	            'UUID',
	            'INTERSTITIAL',
	        ];
	        this.sendAllBidsTargetingKeys = this.targetingKeys.filter(key => ['ADOMAIN', 'BIDDER', 'INTERSTITIAL'].indexOf(key) === -1);
	        this.interstitialAdUnitCode = `gpt_unit_/${this._gam.account}/AdThrive_Interstitial_1/${this._site.id}_0`;
	        this.s2s = this.s2s = {
	            bidders: s2sExperiment.result,
	        };
	    }
	};
	Prebid = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [S2SExperiment, GAM, Site])
	], Prebid);

	let TargetDensityExperiment = class TargetDensityExperiment extends Experiment {
	    constructor(adthrive, abgroup) {
	        super();
	        this.adthrive = adthrive;
	        this.key = 'adsp7';
	        this._result = false;
	        this._choices = [{ choice: true }, { choice: false }];
	        const win = window;
	        const plugin = win.adthrive && win.adthrive.plugin;
	        const cls = win.adthriveCLS;
	        const clsExperiments = cls && cls.experiments;
	        const versionUsesPluginExperimentJson = '1.1.';
	        const adDensityEnabled = defaultTo(adthrive.siteAds.adDensityEnabled, true);
	        if (adDensityEnabled) {
	            if (clsExperiments && this.key in clsExperiments) {
	                this._result = clsExperiments[this.key];
	                abgroup.set(this.key, this._result ? 'on' : 'off');
	            }
	            else if (adthrive.siteAds.adDensityLayout &&
	                ((clsExperiments && 'clsins_ss' in clsExperiments) || (plugin && plugin.indexOf(versionUsesPluginExperimentJson) > -1))) {
	                this._result = this.run();
	                abgroup.set(this.key, this._result ? 'on' : 'off');
	            }
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(1).get();
	    }
	};
	TargetDensityExperiment = __decorate([
	    log('TargetDensityExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ABGroup])
	], TargetDensityExperiment);

	let TargetDensity = class TargetDensity {
	    constructor(adthrive, _targetDensityExperiment) {
	        this._targetDensityExperiment = _targetDensityExperiment;
	        this.enabled = this._targetDensityExperiment.result;
	        this.settings = adthrive.siteAds.adDensityLayout;
	    }
	};
	TargetDensity = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, TargetDensityExperiment])
	], TargetDensity);

	let InitialTimeoutExperiment = class InitialTimeoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [{ choice: 2000 }, { choice: 2200 }, { choice: 2400 }, { choice: 2600 }, { choice: 2800 }];
	        this.key = 'to_initial';
	        this._result = this.run();
	        abgroup.set(this.key, String(this._result));
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new UniformChoice(this._choices.map(item => item.choice)).get();
	    }
	};
	InitialTimeoutExperiment = __decorate([
	    log('InitialTimeoutExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], InitialTimeoutExperiment);

	let Timeouts = class Timeouts {
	    constructor(initialTimeoutExperiment) {
	        this.initialBidsRequest = initialTimeoutExperiment.result;
	        this.refreshBidsRequest = 5000;
	    }
	};
	Timeouts = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [InitialTimeoutExperiment])
	], Timeouts);

	let UserPageDataLoggingStore = class UserPageDataLoggingStore {
	    constructor() {
	        this._data = {};
	    }
	    set(data) {
	        this._data = { ...this._data, ...data };
	    }
	    get() {
	        return Object.keys(this._data).length !== 0 ? this._data : undefined;
	    }
	    getByKey(key) {
	        return this._data[key];
	    }
	    clear() {
	        this.set({});
	    }
	};
	UserPageDataLoggingStore = __decorate([
	    log('UserPageDataLoggingStore'),
	    singleton()
	], UserPageDataLoggingStore);

	let UserPageDataLoggingEvents = class UserPageDataLoggingEvents {
	    constructor(_userPageDataLoggingStore) {
	        this._userPageDataLoggingStore = _userPageDataLoggingStore;
	        this.loggingData = new Emitter();
	        this._maxTimeOnPage = 3600000;
	        this._listeners = [];
	        this._callbacks = new Set();
	        this._requestSent = false;
	        setTimeout(() => {
	            this._callbacks.forEach(callback => this._executeCallback(callback));
	            this.cleanup();
	        }, this._maxTimeOnPage);
	    }
	    _executeCallback(callback) {
	        callback();
	        this._callbacks.delete(callback);
	        if (this._callbacks.size === 0) {
	            this.logUserPageData();
	        }
	    }
	    setUserPageData(data) {
	        if (data) {
	            this._userPageDataLoggingStore.set(data);
	        }
	    }
	    logUserPageData() {
	        if (!this._requestSent) {
	            logger.fetchEvent('UserPageDataLoggingComponent', `logUserData`, this._userPageDataLoggingStore.get());
	            this._requestSent = true;
	            this.cleanup();
	        }
	    }
	    addCallbackToQueue(emitters, callback) {
	        this._callbacks.add(callback);
	        emitters.forEach(emitter => {
	            this._listeners.push(emitter.on(() => this._executeCallback(callback)));
	        });
	    }
	    cleanup() {
	        this._listeners.forEach(listenerOff => {
	            listenerOff();
	        });
	        this._listeners = [];
	        this._callbacks.clear();
	    }
	};
	UserPageDataLoggingEvents = __decorate([
	    log('UserPageDataLoggingEvents'),
	    singleton(),
	    __metadata("design:paramtypes", [UserPageDataLoggingStore])
	], UserPageDataLoggingEvents);

	const isSafariWithInfiniteLoopBug = (userAgentOverride, vendorOverride) => {
	    var _a;
	    const userAgent = userAgentOverride || navigator.userAgent;
	    const vendor = vendorOverride || navigator.vendor;
	    if (!isSafari(userAgent, vendor)) {
	        return false;
	    }
	    const safariVersionRegex = / Version\/(1\d)\.(\d+)/;
	    const safariVersionTokens = ((_a = safariVersionRegex.exec(userAgent)) === null || _a === void 0 ? void 0 : _a.slice(-2)) || [];
	    const isSafariFourteen = safariVersionTokens[0] === '14';
	    const isSafariFifteenDotThreeOrLess = safariVersionTokens[0] === '15' && +safariVersionTokens[1] < 4;
	    return isSafariFourteen || isSafariFifteenDotThreeOrLess;
	};
	const mitigateSafariInfiniteLoopBug = () => {
	    if (!isSafariWithInfiniteLoopBug()) {
	        return;
	    }
	    window.addEventListener('beforeunload', () => {
	        window.addEventListener('visibilitychange', event => {
	            event.stopImmediatePropagation();
	        }, true);
	    }, true);
	};
	const runBrowserWorkarounds = () => {
	    mitigateSafariInfiniteLoopBug();
	};

	let PageManager = class PageManager {
	    constructor() {
	        this.beforeUnload = new Emitter();
	        this.pageHide = new Emitter();
	        this.resize = new Emitter();
	        this.scroll = new Emitter();
	        this.visibilityChange = new Emitter();
	        this.addEventListener('beforeunload', this.beforeUnload);
	        this.addEventListener('pagehide', this.pageHide);
	        this.addEventListener('resize', this.resize);
	        this.addEventListener('scroll', this.scroll);
	        this.addEventListener('visibilitychange', this.visibilityChange, document);
	        runBrowserWorkarounds();
	    }
	    setupOnceEvent(eventType, callback, target = window) {
	        const eventListener = () => {
	            target.removeEventListener(eventType, eventListener);
	            callback();
	        };
	        target.addEventListener(eventType, eventListener);
	    }
	    setupOnceEventWithPromise(eventType, target = window) {
	        return new Promise(resolve => {
	            const eventListener = (event) => {
	                target.removeEventListener(eventType, eventListener);
	                return resolve(event);
	            };
	            target.addEventListener(eventType, eventListener);
	        });
	    }
	    addEventListener(name, eventEmitter, target = window) {
	        target.addEventListener(name, () => {
	            eventEmitter.emit().catch(() => false);
	        }, false);
	    }
	};
	PageManager = __decorate([
	    log('PageManager'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], PageManager);

	let Timing = class Timing {
	    constructor(_userPageDataLoggingEvent, _pageManager) {
	        this._userPageDataLoggingEvent = _userPageDataLoggingEvent;
	        this._pageManager = _pageManager;
	        this.started = 0;
	        this.loading = 0;
	        this.totalTimeOnPage = 0;
	        this.bootstrapFinished = 0;
	        this.amazonStarted = 0;
	        this.amazonFinished = 0;
	        this.amazonDuration = 0;
	        this.gamStarted = 0;
	        this.gamFinished = 0;
	        this.gamDuration = 0;
	        this.marmaladeStarted = 0;
	        this.marmaladeFinished = 0;
	        this.marmaladeDuration = 0;
	        this.prebidStarted = 0;
	        this.prebidFinished = 0;
	        this.prebidDuration = 0;
	        this.webVitalsStarted = 0;
	        this.webVitalsFinished = 0;
	        this.webVitalsDuration = 0;
	        this.started = now$2();
	        if (document.visibilityState === 'visible') {
	            this.timeOnPage = this.started;
	        }
	        this._pageManager.visibilityChange.on(() => this.documentVisibilityChanged());
	        _userPageDataLoggingEvent.loggingData.on(() => {
	            if (document.visibilityState === 'visible') {
	                this.totalTimeOnPage += now$2() - this.timeOnPage;
	            }
	        });
	    }
	    get timingData() {
	        return {
	            started: this.started,
	            loading: this.loading,
	            totalTimeOnPage: this.totalTimeOnPage,
	            bootstrapFinished: this.bootstrapFinished,
	            amazonStarted: this.amazonStarted,
	            amazonFinished: this.amazonFinished,
	            amazonDuration: this.amazonDuration,
	            gamStarted: this.gamStarted,
	            gamFinished: this.gamFinished,
	            gamDuration: this.gamDuration,
	            marmaladeStarted: this.marmaladeStarted,
	            marmaladeFinished: this.marmaladeFinished,
	            marmaladeDuration: this.marmaladeDuration,
	            prebidStarted: this.prebidStarted,
	            prebidFinished: this.prebidFinished,
	            prebidDuration: this.prebidDuration,
	            webVitalsStarted: this.webVitalsStarted,
	            webVitalsFinished: this.webVitalsFinished,
	            webVitalsDuration: this.webVitalsDuration,
	            ...(this.timeOnPage && { timeOnPage: this.timeOnPage }),
	        };
	    }
	    documentVisibilityChanged() {
	        if (document.visibilityState === 'visible') {
	            this.timeOnPage = now$2();
	        }
	        else if (document.visibilityState === 'hidden') {
	            this.totalTimeOnPage += now$2() - this.timeOnPage;
	            this.timeOnPage = undefined;
	        }
	    }
	};
	Timing = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [UserPageDataLoggingEvents, PageManager])
	], Timing);

	let TKHOExperiment = class TKHOExperiment extends Experiment {
	    constructor(adthrive, abgroup) {
	        super();
	        this._choices = [
	            { choice: 'ats', weight: 1 },
	            { choice: 'conf', weight: 1 },
	            { choice: 'hawk', weight: 1 },
	            { choice: 'tgtaff', weight: 1 },
	            { choice: 'none', weight: 96 },
	        ];
	        this.key = '3pho';
	        this._result = this.run();
	        abgroup.set(this.key, this.result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	TKHOExperiment = __decorate([
	    log('TKHOExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ABGroup])
	], TKHOExperiment);

	let TKHO = class TKHO {
	    constructor(trackersExperiment) {
	        this.tracker = trackersExperiment.result;
	    }
	};
	TKHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [TKHOExperiment])
	], TKHO);

	let VBHOExperiment = class VBHOExperiment extends Experiment {
	    constructor() {
	        super();
	        this._result = [];
	        this._choices = [
	            { choice: ['appnexus'], threshold: 0.1 },
	            { choice: ['conversant'], threshold: 0.01 },
	            { choice: ['criteo'], threshold: 0.01 },
	            { choice: ['districtm'], threshold: 0.3 },
	            { choice: ['dmdmx'], threshold: 0.2 },
	            { choice: ['gridvid'], threshold: 0.01 },
	            { choice: ['gumgum'], threshold: 0.5 },
	            { choice: ['ix'], threshold: 0.005 },
	            { choice: ['oneVideo'], threshold: 0.2 },
	            { choice: ['openx'], threshold: 0.1 },
	            { choice: ['pubmatic'], threshold: 0.01 },
	            { choice: ['roundel'], threshold: 0.1 },
	            { choice: ['rubicon'], threshold: 0.01 },
	            { choice: ['sharethrough'], threshold: 0.01 },
	            { choice: ['spotx'], threshold: 0.01 },
	            { choice: ['telaria'], threshold: 0.01 },
	            { choice: ['triplelift'], threshold: 0.01 },
	            { choice: ['ttd'], threshold: 0.01 },
	            { choice: ['yahoossp'], threshold: 0.01 },
	        ];
	        this.key = 'vbho';
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return this._choices.filter(({ threshold }) => new BernoulliTrial(threshold).get()).map(({ choice }) => choice[0]);
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], VBHOExperiment.prototype, "run", null);
	VBHOExperiment = __decorate([
	    log('VBHOExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], VBHOExperiment);

	let VBHO = class VBHO {
	    constructor(vbhoExperiment) {
	        this.bidders = vbhoExperiment.result;
	    }
	};
	VBHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [VBHOExperiment])
	], VBHO);

	let VEBHOExperiment = class VEBHOExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: { name: 'chocolate_ebda', weight: 1 } },
	            { choice: { name: 'ix_ebda', weight: 0.5 } },
	            { choice: { name: 'medianet_ebda', weight: 1 } },
	            { choice: { name: 'openx_ebda', weight: 0.5 } },
	            { choice: { name: 'pubmatic_ebda', weight: 1 } },
	            { choice: { name: 'rhythmone_ebda', weight: 0.5 } },
	            { choice: { name: 'rubicon_ebda', weight: 0.5 } },
	            { choice: { name: 'sonobi_ebda', weight: 0.5 } },
	            { choice: { name: 'spotx_ebda', weight: 1 } },
	            { choice: { name: 'telaria_ebda', weight: 1 } },
	            { choice: { name: 'triplelift_ebda', weight: 1 } },
	            { choice: { name: 'verizon_ebda', weight: 1 } },
	        ];
	        this.key = 'vebho';
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? this._result.name : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const choices = this._choices
	            .map(item => item.choice)
	            .map(bidder => ({
	            choice: bidder,
	            weight: bidder.weight,
	        }));
	        const holdoutChoices = new WeightedChoice(choices);
	        if (holdoutChoices.totalWeight > 90) {
	            logger.warn('VEBHOExperiment', 'constructor', 'Holdout experiment percentages totaled over 90');
	        }
	        return holdoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Object)
	], VEBHOExperiment.prototype, "run", null);
	VEBHOExperiment = __decorate([
	    log('VEBHOExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], VEBHOExperiment);

	let VEBHO = class VEBHO {
	    constructor(vebhoExperiment) {
	        this.bidder = vebhoExperiment.result;
	    }
	};
	VEBHO = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [VEBHOExperiment])
	], VEBHO);

	let CloseButtonTimeoutExperiment = class CloseButtonTimeoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: 6000, weight: 5 },
	            { choice: 4000, weight: 75 },
	            { choice: 2000, weight: 15 },
	            { choice: 0, weight: 5 },
	        ];
	        this.key = 'cbt';
	        this._result = this.run();
	        if (this._result === 6000) {
	            abgroup.set(this.key, '6s');
	        }
	        else if (this._result === 4000) {
	            abgroup.set(this.key, '4s');
	        }
	        else if (this._result === 2000) {
	            abgroup.set(this.key, '2s');
	        }
	        else if (this._result === 0) {
	            abgroup.set(this.key, '0s');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const timeoutChoices = new WeightedChoice(this._choices);
	        return timeoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], CloseButtonTimeoutExperiment.prototype, "run", null);
	CloseButtonTimeoutExperiment = __decorate([
	    log('CloseButtonTimeoutExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], CloseButtonTimeoutExperiment);

	let ProtocolsExperiment = class ProtocolsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: { protocols: [1, 2, 3, 4, 5, 6, 7, 8], value: 'all', scope: 'all' }, weight: 55 },
	            { choice: { protocols: [2, 3, 5, 6, 7, 8], value: 'nv1', scope: 'all' }, weight: 15 },
	            { choice: { protocols: [1, 2, 3, 5, 6, 7, 8], value: 'allr', scope: 'limited' }, weight: 15 },
	            { choice: { protocols: [2, 3, 5, 6, 7, 8], value: 'nv1r', scope: 'limited' }, weight: 15 },
	        ];
	        this.key = 'proto';
	        this._result = this.run();
	        abgroup.set(this.key, this._result.value);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const protocolsChoices = new WeightedChoice(this._choices);
	        return protocolsChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], ProtocolsExperiment.prototype, "run", null);
	ProtocolsExperiment = __decorate([
	    log('ProtocolsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], ProtocolsExperiment);

	let VastTimeoutExperiment = class VastTimeoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [
	            { choice: 5000, weight: 40 },
	            { choice: 10000, weight: 40 },
	            { choice: 15000, weight: 20 },
	        ];
	        this.key = 'vast_to';
	        this._result = this.run();
	        if (this._result === 5000) {
	            abgroup.set(this.key, '5s');
	        }
	        else if (this._result === 10000) {
	            abgroup.set(this.key, '10s');
	        }
	        else if (this._result === 15000) {
	            abgroup.set(this.key, '15s');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const timeoutChoices = new WeightedChoice(this._choices);
	        return timeoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], VastTimeoutExperiment.prototype, "run", null);
	VastTimeoutExperiment = __decorate([
	    log('VastTimeoutExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], VastTimeoutExperiment);

	var DensityDevice;
	(function (DensityDevice) {
	    DensityDevice["Desktop"] = "desktop";
	    DensityDevice["Mobile"] = "mobile";
	})(DensityDevice || (DensityDevice = {}));

	var VideoAdUnit;
	(function (VideoAdUnit) {
	    VideoAdUnit["Video_Collapse_Autoplay_SoundOff"] = "Video_Collapse_Autoplay_SoundOff";
	    VideoAdUnit["Video_Individual_Autoplay_SOff"] = "Video_Individual_Autoplay_SOff";
	    VideoAdUnit["Video_Coll_SOff_Smartphone"] = "Video_Coll_SOff_Smartphone";
	    VideoAdUnit["Video_In_Post_ClicktoPlay_SoundOn"] = "Video_In-Post_ClicktoPlay_SoundOn";
	})(VideoAdUnit || (VideoAdUnit = {}));
	var PinterestReplacedPlayer;
	(function (PinterestReplacedPlayer) {
	    PinterestReplacedPlayer["StickySekindo"] = "stickySekindo";
	    PinterestReplacedPlayer["StaticSekindo"] = "staticSekindo";
	    PinterestReplacedPlayer["None"] = "none";
	})(PinterestReplacedPlayer || (PinterestReplacedPlayer = {}));

	let AdvancePlaylistExperiment = class AdvancePlaylistExperiment extends Experiment {
	    constructor(_adthrive, abgroup) {
	        super();
	        this._adthrive = _adthrive;
	        this._result = false;
	        this.key = 'vadv';
	        this._choices = [{ choice: true }, { choice: false }];
	        const advPListLegacy = this._adthrive.siteAds.adOptions.advancePlaylist;
	        const advPList = this._adthrive.siteAds.adOptions.advancePlaylistOptions;
	        const playlistSetting = !advPList ? advPListLegacy : advPList && advPList.playlistPlayer && advPList.playlistPlayer.enabled;
	        if (defaultTo(playlistSetting, true)) {
	            this._result = this.run();
	            abgroup.set(this.key, this._result ? 'on' : 'off');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.99).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], AdvancePlaylistExperiment.prototype, "run", null);
	AdvancePlaylistExperiment = __decorate([
	    log('AdvancePlaylistExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ABGroup])
	], AdvancePlaylistExperiment);

	let AdvancePlaylistRelatedExperiment = class AdvancePlaylistRelatedExperiment extends Experiment {
	    constructor(_adthrive, abgroup) {
	        super();
	        this._adthrive = _adthrive;
	        this._result = false;
	        this.key = 'rvadv_ab1';
	        this._choices = [{ choice: true }, { choice: false }];
	        const siteAds = this._adthrive.siteAds;
	        const advPList = siteAds.adOptions.advancePlaylistOptions || {};
	        const videoPlayers = siteAds.videoPlayers;
	        const playlist = ((videoPlayers && videoPlayers.players) || []).filter(player => player.type === 'stickyPlaylist');
	        if (playlist.length && defaultTo(advPList.relatedPlayer && advPList.relatedPlayer.enabled, true)) {
	            this._result = this.run();
	            abgroup.set(this.key, this._result ? 'on' : 'off');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.9).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], AdvancePlaylistRelatedExperiment.prototype, "run", null);
	AdvancePlaylistRelatedExperiment = __decorate([
	    log('AdvancePlaylistRelatedExperiment'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, ABGroup])
	], AdvancePlaylistRelatedExperiment);

	let JwRequestTimeoutExperiment = class JwRequestTimeoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'reqTo';
	        this._choices = [
	            { choice: 10000, weight: 20 },
	            { choice: 15000, weight: 60 },
	            { choice: 20000, weight: 20 },
	        ];
	        this._result = this.run();
	        if (this._result === 10000) {
	            abgroup.set(this.key, '10');
	        }
	        else if (this._result === 15000) {
	            abgroup.set(this.key, '15');
	        }
	        else if (this._result === 20000) {
	            abgroup.set(this.key, '20');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const timeoutChoices = new WeightedChoice(this._choices);
	        return timeoutChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], JwRequestTimeoutExperiment.prototype, "run", null);
	JwRequestTimeoutExperiment = __decorate([
	    log('JwRequestTimeoutExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], JwRequestTimeoutExperiment);

	let LogAdDurationExperiment = class LogAdDurationExperiment extends Experiment {
	    constructor() {
	        super();
	        this.key = 'LogAdDurationExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.03).get();
	    }
	};
	LogAdDurationExperiment = __decorate([
	    log('LogAdDurationExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], LogAdDurationExperiment);

	let LogAdLifeCycleExperiment = class LogAdLifeCycleExperiment extends Experiment {
	    constructor() {
	        super();
	        this.key = 'LogAdLifeCycleExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	LogAdLifeCycleExperiment = __decorate([
	    log('LogAdLifeCycleExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], LogAdLifeCycleExperiment);

	let PlaybackmethodExperiment = class PlaybackmethodExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'pbm';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._map = new Map([
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, [3]],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [6]],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, [6]],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, [6]],
	        ]);
	        this._result = this.run();
	        this.playbackmethod = this._result ? this._map : undefined;
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.2).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], PlaybackmethodExperiment.prototype, "run", null);
	PlaybackmethodExperiment = __decorate([
	    log('PlaybackmethodExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], PlaybackmethodExperiment);

	class VideoUtils {
	    static getScrollTop() {
	        return (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0);
	    }
	    static shufflePlaylist(playlist) {
	        let currentIndex = playlist.length;
	        let tempValue;
	        let randomIndex;
	        while (0 !== currentIndex) {
	            randomIndex = Math.floor(Math.random() * playlist.length);
	            currentIndex -= 1;
	            tempValue = playlist[currentIndex];
	            playlist[currentIndex] = playlist[randomIndex];
	            playlist[randomIndex] = tempValue;
	        }
	        return playlist;
	    }
	    static playerInView(playerElement) {
	        const boundingRect = playerElement.getBoundingClientRect();
	        return window.innerHeight > boundingRect.top + boundingRect.height / 2;
	    }
	    static createQueryString(params) {
	        return Object.keys(params)
	            .map(key => `${key}=${params[key]}`)
	            .join('&');
	    }
	    static createEncodedQueryString(params) {
	        return Object.keys(params)
	            .map(key => `${key}=${encodeURIComponent(params[key])}`)
	            .join('&');
	    }
	    static setMobileLocation(mobileLocation) {
	        mobileLocation = mobileLocation || 'bottom-right';
	        if (mobileLocation === 'top-left') {
	            mobileLocation = "adthrive-collapse-top-left" ;
	        }
	        else if (mobileLocation === 'top-right') {
	            mobileLocation = "adthrive-collapse-top-right" ;
	        }
	        else if (mobileLocation === 'bottom-left') {
	            mobileLocation = "adthrive-collapse-bottom-left" ;
	        }
	        else if (mobileLocation === 'bottom-right') {
	            mobileLocation = "adthrive-collapse-bottom-right" ;
	        }
	        return mobileLocation;
	    }
	}

	let VideoAdOptions = class VideoAdOptions {
	    constructor(_adthrive, closeButtonTimeoutExperiment, vastTimeoutExperiment, protocolsExperiment, playbackmethodExperiment, logAdDurationExperiment, logLifeCycleExperiment, jwRequestTimeoutExperiment, advancePlaylistExperiment) {
	        this._adthrive = _adthrive;
	        this.players = [];
	        this.instreamAdUnits = new Set([
	            VideoAdUnit.Video_Collapse_Autoplay_SoundOff,
	            VideoAdUnit.Video_Individual_Autoplay_SOff,
	            VideoAdUnit.Video_Coll_SOff_Smartphone,
	            VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	        ]);
	        this.closeButtonTimeout = closeButtonTimeoutExperiment.result;
	        this.vastTimeout = defaultTo(vastTimeoutExperiment.result, 10000);
	        this.maxRedirect = 8;
	        this.apiValue = [2];
	        this.videoWasClosed = defaultTo(getSessionValue('video_closed', 1800000, true), false);
	        this.mobileStickyPlayerOnPage = false;
	        this.playbackmethod = playbackmethodExperiment.playbackmethod;
	        this.logAdDuration = logAdDurationExperiment.result;
	        this.logAdLifeCycle = logLifeCycleExperiment.result;
	        this.jwRequestTimeout = jwRequestTimeoutExperiment.result;
	        this.mimeType =
	            navigator.userAgent && navigator.userAgent.search(/Chrom|firefox/i) === -1
	                ? ['video/mp4', 'application/javascript']
	                : ['video/mp4', 'application/javascript', 'video/webm'];
	        this.videoProtocols = protocolsExperiment.result;
	        this.position = { id: 1, name: 'above' };
	        this.removeVideoTitleWrapper = defaultTo(_adthrive.siteAds.adOptions.removeVideoTitleWrapper, false);
	        const videoPlayers = _adthrive.siteAds.videoPlayers;
	        this.footerSelector = defaultTo(videoPlayers && videoPlayers.footerSelector, '');
	        this.players = defaultTo(videoPlayers &&
	            videoPlayers.players.map(player => {
	                player.mobileLocation = VideoUtils.setMobileLocation(player.mobileLocation);
	                return player;
	            }), []);
	        this.contextualSettings = videoPlayers && videoPlayers.contextual;
	        this.jwPlaylist = this.getPlayListPlayerVideos();
	        this.advancePlaylist = this.getAdvancePlaylistConfig(advancePlaylistExperiment);
	    }
	    setupAdvanceRelatedExperiment(isCollapsible) {
	        const aprExp = instance.resolve(AdvancePlaylistRelatedExperiment);
	        const advancePlayConfig = this.advancePlaylist.relatedPlayer || {};
	        const advancePlayConfigPlayer = isCollapsible ? advancePlayConfig.sticky : advancePlayConfig.static;
	        const enabled = advancePlayConfigPlayer ? advancePlayConfigPlayer.enabled : advancePlayConfig.enabled;
	        if (enabled && aprExp) {
	            advancePlayConfig.applyToFirst = advancePlayConfigPlayer ? advancePlayConfigPlayer.applyToFirst : advancePlayConfig.applyToFirst;
	            advancePlayConfig.shouldRun = this.jwPlaylist
	                .then(result => typeof result === 'object' && aprExp.result)
	                .catch(() => Promise.reject().catch(() => false));
	        }
	    }
	    getPlayListPlayerVideos() {
	        const siteAds = this._adthrive.siteAds;
	        const videoPlayers = siteAds.videoPlayers;
	        const playlist = ((videoPlayers && videoPlayers.players) || []).filter(player => player.type === 'stickyPlaylist');
	        const playlistId = playlist.length && playlist[0].playlistId;
	        return !playlistId
	            ? Promise.reject().catch(() => false)
	            : getJSON(`https://cdn.jwplayer.com/v2/playlists/${playlistId}`);
	    }
	    getAdvancePlaylistConfig(apExp) {
	        const advPList = this._adthrive.siteAds.adOptions.advancePlaylistOptions || {};
	        const advPListRelated = advPList.relatedPlayer || {};
	        return {
	            playlistPlayer: {
	                enabled: apExp.result,
	            },
	            relatedPlayer: {
	                applyToFirst: defaultTo(advPListRelated.applyToFirst, true),
	                enabled: defaultTo(advPListRelated.enabled, true),
	                shouldRun: Promise.reject().catch(() => false),
	                static: advPListRelated.static,
	                sticky: advPListRelated.sticky,
	            },
	        };
	    }
	};
	VideoAdOptions = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, CloseButtonTimeoutExperiment,
	        VastTimeoutExperiment,
	        ProtocolsExperiment,
	        PlaybackmethodExperiment,
	        LogAdDurationExperiment,
	        LogAdLifeCycleExperiment,
	        JwRequestTimeoutExperiment,
	        AdvancePlaylistExperiment])
	], VideoAdOptions);

	let VideoConfig = class VideoConfig {
	    constructor(_videoAdOptions, protocolsExperiment, closeButtonTimeoutExperiment, vastTimeoutExperiment) {
	        this._videoAdOptions = _videoAdOptions;
	        this.apiValue = [2];
	        this.mobileStickyPlayerOnPage = false;
	        this.playlistPlayerAdded = false;
	        this.contextualPlayerAdded = false;
	        this.sekindoPlayerAdded = false;
	        this.hasJwPlayer = false;
	        this.preventStickyOutstream = false;
	        this.hasStickyOutstream = false;
	        this.footerSelector = '';
	        this.removeVideoTitleWrapper = false;
	        this.instreamAdUnits = new Set([
	            VideoAdUnit.Video_Collapse_Autoplay_SoundOff,
	            VideoAdUnit.Video_Individual_Autoplay_SOff,
	            VideoAdUnit.Video_Coll_SOff_Smartphone,
	            VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	        ]);
	        const videoAdOptions = this._videoAdOptions;
	        this.videoProtocols = protocolsExperiment.result;
	        this.closeButtonTimeout = closeButtonTimeoutExperiment.result;
	        this.vastTimeout = vastTimeoutExperiment.result;
	        this.position = { id: 1, name: 'above' };
	        this.maxRedirect = 8;
	        this.playbackmethod = videoAdOptions.playbackmethod;
	        this.advancePlaylist = videoAdOptions.advancePlaylist;
	        this.jwPlaylist = videoAdOptions.jwPlaylist;
	        this.setupAdvanceRelatedExperiment = videoAdOptions.setupAdvanceRelatedExperiment;
	        this.contextualSettings = videoAdOptions.contextualSettings;
	        this.mimeType = videoAdOptions.mimeType;
	        this.videoProtocols = videoAdOptions.videoProtocols;
	        this.closeButtonTimeout = videoAdOptions.closeButtonTimeout;
	        this.jwRequestTimeout = videoAdOptions.jwRequestTimeout;
	        this.logAdDuration = videoAdOptions.logAdDuration;
	        this.logAdLifeCycle = videoAdOptions.logAdLifeCycle;
	        this.vastTimeout = videoAdOptions.vastTimeout;
	        this.videoWasClosed = videoAdOptions.videoWasClosed;
	        this.removeVideoTitleWrapper = videoAdOptions.removeVideoTitleWrapper;
	        this.players = videoAdOptions.players;
	        this.footerSelector = videoAdOptions.footerSelector;
	    }
	};
	VideoConfig = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [VideoAdOptions,
	        ProtocolsExperiment,
	        CloseButtonTimeoutExperiment,
	        VastTimeoutExperiment])
	], VideoConfig);

	let Config = class Config {
	    constructor(abGroup, adOptions, adTypes, amazon, ccpa, clsOptimizedAds, comscore, context, disableAds, ebho, impressionLog, footer, gam, gdpr, hbho, identityApi, idho, infiniteScroll, lazyLoad, liveRampAts, marmalade, partners, prebid, site, targetDensity, timeouts, timing, tkho, vbho, vebho, auctionOptions, video, dynamicAdsMapper) {
	        this.abGroup = abGroup;
	        this.adOptions = adOptions;
	        this.adTypes = adTypes;
	        this.amazon = amazon;
	        this.ccpa = ccpa;
	        this.clsOptimizedAds = clsOptimizedAds;
	        this.comscore = comscore;
	        this.context = context;
	        this.disableAds = disableAds;
	        this.ebho = ebho;
	        this.impressionLog = impressionLog;
	        this.footer = footer;
	        this.gam = gam;
	        this.gdpr = gdpr;
	        this.hbho = hbho;
	        this.identityApi = identityApi;
	        this.idho = idho;
	        this.infiniteScroll = infiniteScroll;
	        this.lazyLoad = lazyLoad;
	        this.liveRampAts = liveRampAts;
	        this.marmalade = marmalade;
	        this.partners = partners;
	        this.prebid = prebid;
	        this.site = site;
	        this.targetDensity = targetDensity;
	        this.timeouts = timeouts;
	        this.timing = timing;
	        this.tkho = tkho;
	        this.vbho = vbho;
	        this.vebho = vebho;
	        this.auctionOptions = auctionOptions;
	        this.video = video;
	        this.dynamicAds = dynamicAdsMapper.get();
	        const clsOptions = instance.resolve(ClsOptions);
	        if (clsOptions.enabled) {
	            this.clsOptions = clsOptions;
	        }
	    }
	};
	Config = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup,
	        AdOptions,
	        AdTypes,
	        Amazon,
	        CCPA,
	        CLSOptimizedAds,
	        Comscore,
	        Context,
	        DisableAds,
	        EBHO,
	        ImpressionLog,
	        Footer,
	        GAM,
	        GDPR,
	        HBHO,
	        IdentityApi,
	        IDHO,
	        InfiniteScroll,
	        LazyLoad,
	        LiveRampAts,
	        Marmalade,
	        Partners,
	        Prebid,
	        Site,
	        TargetDensity,
	        Timeouts,
	        Timing,
	        TKHO,
	        VBHO,
	        VEBHO,
	        AuctionOptions,
	        VideoConfig,
	        DynamicAdsMapper])
	], Config);

	class Slot {
	    constructor(location, sequence, sizes, element, sticky, lazy = false, auctionPriority = 8, stickyOverlapSelector, special = [], enabledForAuction = true, infinite = false) {
	        this.location = location;
	        this.sequence = sequence;
	        this.sizes = sizes;
	        this.element = element;
	        this.sticky = sticky;
	        this.lazy = lazy;
	        this.auctionPriority = auctionPriority;
	        this.stickyOverlapSelector = stickyOverlapSelector;
	        this.special = special;
	        this.enabledForAuction = enabledForAuction;
	        this.infinite = infinite;
	        this.refreshPaused = false;
	        this.viewableDuration = 0;
	        this.outOfViewIO = true;
	        this.outOfViewGPT = true;
	        this.alwaysInView = false;
	        this.displayed = false;
	        this.refreshCount = 0;
	        this.viewability = 0;
	        this.servedPrebidBidResponse = undefined;
	    }
	    get id() {
	        return this.element.id;
	    }
	    get isSticky() {
	        return this.sticky;
	    }
	    get hasHighViewability() {
	        return this.sticky || this.location === 'Recipe';
	    }
	    get isAboveTheFold() {
	        return elementBoundingRect(this.element).top > 1000;
	    }
	    hasSize([w1, h1]) {
	        return this.sizes.some(([w2, h2]) => w1 === w2 && h1 === h2);
	    }
	    get name() {
	        return [this.location, this.sequence].filter(defined).join('_');
	    }
	    get placementMapName() {
	        return this.location === 'Content' && this.sequence && this.sequence > 9 ? `${this.location}_9` : this.name;
	    }
	    pushToQueue(command) {
	        const googleTag = window.googletag;
	        googleTag && googleTag.cmd && googleTag.cmd.push(command);
	    }
	    setViewability(marmalade) {
	        marmalade.adViewability
	            .filter(adViewability => adViewability.speed === marmalade.speed &&
	            window.innerWidth >= adViewability.width[0] &&
	            (!adViewability.width[1] || window.innerWidth <= adViewability.width[1]))
	            .forEach(adViewability => {
	            Object.keys(adViewability.adUnits).forEach(adUnit => {
	                if (adUnit === this.name) {
	                    this.viewability = adViewability.adUnits[adUnit];
	                }
	            });
	        });
	    }
	    clearTargeting(key) {
	        if (this.googleTagSlot) {
	            this.googleTagSlot.clearTargeting(key);
	        }
	        else {
	            logger.error('Slot', 'setTargeting', 'Attempted to clear targeting before slot was defined', key);
	        }
	    }
	    setTargeting(targetOrTargeting) {
	        this.pushToQueue(() => {
	            if (this.googleTagSlot) {
	                const targeting = Array.isArray(targetOrTargeting) ? targetOrTargeting : [targetOrTargeting];
	                for (const target of targeting) {
	                    this.googleTagSlot.setTargeting(target.key, target.value);
	                }
	            }
	            else {
	                logger.error('Slot', 'setTargeting', 'Attempted to set targeting before slot was defined', targetOrTargeting);
	            }
	        });
	    }
	    setSlotTargetingFlag(flagKey, flagVals, slot, overwrite = false) {
	        const addNewTargetingToFlagKey = () => {
	            const existingFlagVals = slot.getTargeting('flag_slot');
	            const filteredEntries = existingFlagVals.filter(entry => {
	                const [k] = entry.split(':');
	                return !overwrite || k !== flagKey;
	            });
	            slot.setTargeting('flag_slot', [...filteredEntries, ...flagVals.map(val => `${flagKey}:${val}`)]);
	        };
	        if (flagVals && flagVals.length > 0) {
	            this.pushToQueue(() => addNewTargetingToFlagKey());
	        }
	    }
	    getTargeting(key) {
	        if (this.googleTagSlot) {
	            return this.googleTagSlot.getTargeting(key);
	        }
	        else {
	            logger.error('Slot', 'getTargeting', 'Attempted to get targeting before slot was defined');
	        }
	        return [];
	    }
	    getTargetingMap() {
	        if (this.googleTagSlot) {
	            const slot = this.googleTagSlot;
	            return slot.getTargetingKeys().reduce((targeting, key) => {
	                targeting[key] = slot.getTargeting(key);
	                return targeting;
	            }, {});
	        }
	        else {
	            logger.error('Slot', 'getTargetingMap', 'Attempted to get targeting before slot was defined');
	        }
	        return {};
	    }
	}

	let Slots = class Slots {
	    constructor() {
	        this.added = new Emitter();
	        this.bidServed = new Emitter();
	        this._slots = new Map();
	    }
	    add(slotOrSlots) {
	        const slots = this.castArray(slotOrSlots);
	        for (const slot of slots) {
	            if (!this._slots.has(slot.id)) {
	                this._slots.set(slot.id, slot);
	                this.added.emit(slot).catch(reason => {
	                    logger.error('Slots', 'add', reason);
	                });
	            }
	        }
	        return slots;
	    }
	    remove(slotOrSlots) {
	        const slots = this.castArray(slotOrSlots);
	        for (const slot of slots) {
	            if (this._slots.has(slot.id)) {
	                this._slots.delete(slot.id);
	            }
	        }
	    }
	    get(id) {
	        if (id) {
	            return this._slots.get(id);
	        }
	        return [...this._slots.values()];
	    }
	    castArray(lookup) {
	        if (typeof lookup === 'string') {
	            const slot = this.get(lookup);
	            return slot !== undefined ? [slot] : [];
	        }
	        return Array.isArray(lookup) ? lookup : [lookup];
	    }
	};
	Slots = __decorate([
	    log('Slots'),
	    singleton()
	], Slots);

	var GoogleAdManager_1;
	let GoogleAdManager = GoogleAdManager_1 = class GoogleAdManager {
	    constructor(_config, _slots) {
	        this._config = _config;
	        this._slots = _slots;
	        this._started = false;
	        this.postStartTargetingWhiteList = ['bms', 'pvk', 'flag', 'hi_au', 'abgroup'];
	        this.impressionViewable = new Emitter();
	        this.slotOnload = new Emitter();
	        this.slotRenderEnded = new Emitter();
	        this.slotVisibilityChanged = new Emitter();
	        this.slotRequested = new Emitter();
	        this.started = new Emitter();
	    }
	    init() {
	        GoogleAdManager_1.pushToQueue(() => {
	            const pubads = googletag.pubads();
	            pubads.setSafeFrameConfig({
	                sandbox: true,
	                allowOverlayExpansion: true,
	                allowPushExpansion: true,
	                useUniqueDomain: true,
	            });
	            pubads.set('page_url', this._config.context.pageUrl);
	            pubads.collapseEmptyDivs();
	            pubads.enableSingleRequest();
	            pubads.disableInitialLoad();
	            pubads.setTagForChildDirectedTreatment(0);
	            this._addGamEventListeners();
	        });
	    }
	    start() {
	        GoogleAdManager_1.pushToQueue(() => {
	            googletag.enableServices();
	            this.started.emit().catch(reason => {
	                logger.error('GoogleAdManager', 'start', 'started', reason);
	            });
	            this._started = true;
	        });
	    }
	    static pushToQueue(command) {
	        googletag.cmd.push(command);
	    }
	    waitForQueue() {
	        return new Promise(resolve => {
	            googletag.cmd.push(() => {
	                resolve(true);
	            });
	        });
	    }
	    setTargeting(targetOrTargeting) {
	        const targeting = (Array.isArray(targetOrTargeting) ? targetOrTargeting : [targetOrTargeting]).filter(target => {
	            return !(!target.value || !target.value.length);
	        });
	        if (this._started && targeting.some(kv => this.postStartTargetingWhiteList.indexOf(kv.key) === -1)) {
	            logger.error('GoogleAdManager', 'setTargeting', 'Attempted to set targeting after started');
	            return;
	        }
	        for (const target of targeting) {
	            if (target) {
	                GoogleAdManager_1.pushToQueue(() => {
	                    googletag.pubads().setTargeting(target.key, target.value);
	                });
	            }
	        }
	    }
	    setSlotTargeting(targetOrTargeting, slot) {
	        const targeting = Array.isArray(targetOrTargeting) ? targetOrTargeting : [targetOrTargeting];
	        for (const target of targeting) {
	            if (target) {
	                GoogleAdManager_1.pushToQueue(() => {
	                    slot.setTargeting(target.key, Array.isArray(target.value) ? target.value.join(',') : target.value);
	                });
	            }
	        }
	    }
	    setTargetingFlag(flagKey, flagVals, overwrite = false) {
	        const addNewTargetingToFlagKey = () => {
	            const pubads = googletag.pubads();
	            const existingFlagVals = pubads.getTargeting('flag');
	            const filteredEntries = existingFlagVals.filter(entry => {
	                const [k] = entry.split(':');
	                return !overwrite || k !== flagKey;
	            });
	            this.setTargeting({
	                key: 'flag',
	                value: [...filteredEntries, ...flagVals.map(val => `${flagKey}:${val}`)],
	            });
	        };
	        if (flagVals && flagVals.length > 0) {
	            GoogleAdManager_1.pushToQueue(() => addNewTargetingToFlagKey());
	        }
	    }
	    getTargeting() {
	        return googletag
	            .pubads()
	            .getTargetingKeys()
	            .map(key => ({ key, value: googletag.pubads().getTargeting(key) }));
	    }
	    getTargetingValuesForKey(key) {
	        return googletag.pubads().getTargeting(key);
	    }
	    getTargetingMap() {
	        const pubads = googletag.pubads();
	        return pubads.getTargetingKeys().reduce((targeting, key) => {
	            targeting[key] = pubads.getTargeting(key);
	            return targeting;
	        }, {});
	    }
	    clearTargetingForKey(key) {
	        GoogleAdManager_1.pushToQueue(() => {
	            googletag.pubads().clearTargeting(key);
	        });
	    }
	    defineSlots(slots) {
	        const { id } = this._config.site;
	        const { account, prefix } = this._config.gam;
	        return slots
	            .map(slot => {
	            const pathName = slot.location === 'Content' && slot.sequence && slot.sequence > 9 ? slot.location : slot.name;
	            const adUnitPath = `/${account}/${prefix}_${pathName}/${id}`;
	            const sizes = slot.location === 'Video_StickyOutstream' ? [...slot.sizes] : [...slot.sizes, 'fluid'];
	            this._setupSlot(slot, adUnitPath, sizes);
	            return slot;
	        })
	            .filter(defined);
	    }
	    displaySlots(slots) {
	        GoogleAdManager_1.pushToQueue(() => {
	            const pubads = googletag.pubads();
	            const initialLoadDisabled = pubads.isInitialLoadDisabled();
	            if (googletag && !googletag.pubadsReady) {
	                logger.error('index', 'load', new Error(`Unexpected googletag.pubadsReady: ${googletag.pubadsReady}`));
	            }
	            for (const slot of slots) {
	                googletag
	                    .pubads()
	                    .enableLazyLoad(slot.lazy ? this._config.lazyLoad.googleLazyLoadSettings.gam : this._config.lazyLoad.googleLazyLoadSettings.disabled);
	                initialLoadDisabled ? pubads.refresh([slot.googleTagSlot]) : googletag.display(slot.id);
	            }
	        });
	    }
	    refreshSlots(slots) {
	        GoogleAdManager_1.pushToQueue(() => {
	            googletag.pubads().refresh(slots.map(slot => slot.googleTagSlot));
	        });
	    }
	    clearSlots(slots) {
	        GoogleAdManager_1.pushToQueue(() => {
	            const googleTagSlots = slots.map(slot => slot.googleTagSlot);
	            googletag.pubads().clear(googleTagSlots);
	        });
	    }
	    destroySlots(slots) {
	        GoogleAdManager_1.pushToQueue(() => {
	            const googleTagSlots = slots.map(slot => slot.googleTagSlot);
	            googletag.destroySlots(googleTagSlots);
	        });
	    }
	    _addGamEventListeners() {
	        this._addEventListener(this.impressionViewable, 'impressionViewable');
	        this._addEventListener(this.slotOnload, 'slotOnload');
	        this._addEventListener(this.slotRenderEnded, 'slotRenderEnded');
	        this._addEventListener(this.slotVisibilityChanged, 'slotVisibilityChanged');
	        this._addEventListener(this.slotRequested, 'slotRequested');
	    }
	    _addEventListener(emitter, eventType) {
	        GoogleAdManager_1.pushToQueue(() => {
	            googletag.pubads().addEventListener(eventType, event => {
	                const slot = this._slots.get(event.slot.getSlotElementId());
	                if (slot) {
	                    emitter.emit({ slot, event }).catch(reason => {
	                        logger.error('GoogleAdManager', 'addEventListener', 'emit', reason);
	                    });
	                }
	            });
	        });
	    }
	    _setupSlot(slot, adUnitPath, sizes) {
	        const pubads = googletag.pubads();
	        slot.googleTagSlot =
	            slot.location === 'Interstitial'
	                ? googletag.defineOutOfPageSlot(adUnitPath, googletag.enums.OutOfPageFormat.INTERSTITIAL)
	                : googletag.defineSlot(adUnitPath, sizes, slot.element.id);
	        if (!slot.googleTagSlot) {
	            logger.error('GoogleAdManager', 'defineSlots', `Duplicate ${adUnitPath}`);
	            return;
	        }
	        slot.googleTagSlot
	            .addService(pubads)
	            .setTargeting('location', slot.location)
	            .setTargeting('sequence', String(slot.sequence))
	            .setTargeting('id', slot.id);
	        if ((slot.sequence === 1 && slot.isAboveTheFold) || slot.location === 'Footer') {
	            slot.googleTagSlot.setTargeting('ATF', 'true');
	        }
	        if (slot.isSticky && slot.location !== 'Video_StickyOutstream') {
	            slot.googleTagSlot.setTargeting('sticky', 'true');
	        }
	        if (slot.special && slot.special.length > 0) {
	            slot.googleTagSlot.setTargeting('special', slot.special);
	        }
	        if (slot.location === 'Sponsor_Tile') {
	            slot.googleTagSlot.setCollapseEmptyDiv(true, true);
	        }
	        if (pubads.isInitialLoadDisabled()) {
	            googletag.display(slot.googleTagSlot);
	        }
	    }
	};
	GoogleAdManager = GoogleAdManager_1 = __decorate([
	    log('GoogleAdManager'),
	    singleton(),
	    __metadata("design:paramtypes", [Config, Slots])
	], GoogleAdManager);

	class AuctionManager {
	    get videoEnabled() {
	        return true;
	    }
	    get enabled() {
	        return true;
	    }
	}

	let AmazonHoldDisplayExperiment = class AmazonHoldDisplayExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'amzn_hold_disp';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.5).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], AmazonHoldDisplayExperiment.prototype, "run", null);
	AmazonHoldDisplayExperiment = __decorate([
	    log('AmazonLibraryExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], AmazonHoldDisplayExperiment);

	class PrebidMethods {
	    addAdUnits(adUnits) {
	        this.addToQueue(() => {
	            pbjs.addAdUnits(adUnits);
	        });
	    }
	    addToQueue(command) {
	        pbjs.que.push(command);
	    }
	    enableAnalytics(config) {
	        this.addToQueue(() => {
	            pbjs.enableAnalytics(config);
	        });
	    }
	    isPrebidLoaded() {
	        return window.pbjs && window.pbjs.libLoaded;
	    }
	    markWinningBidAsUsed(options) {
	        this.addToQueue(() => {
	            pbjs.markWinningBidAsUsed(options);
	        });
	    }
	    offEvent(method, callback) {
	        this.addToQueue(() => {
	            pbjs.offEvent(method, callback);
	        });
	    }
	    onEvent(method, callback) {
	        this.addToQueue(() => {
	            pbjs.onEvent(method, callback);
	        });
	    }
	    refreshUserIds(options, callback) {
	        this.addToQueue(() => {
	            pbjs.refreshUserIds(options, callback);
	        });
	    }
	    requestBids(request) {
	        this.addToQueue(() => {
	            pbjs.requestBids(request);
	        });
	    }
	    setAliasBidder(adapterName, name) {
	        this.addToQueue(() => {
	            pbjs.aliasBidder(adapterName, name);
	        });
	    }
	    setBidderConfig(options) {
	        this.addToQueue(() => {
	            pbjs.setBidderConfig(options);
	        });
	    }
	    setBidderSettings(settings) {
	        this.addToQueue(() => {
	            pbjs.bidderSettings = settings;
	        });
	    }
	    setBidsReceivedFilter(filterFunc) {
	        this.addToQueue(() => {
	            pbjs.setBidsReceivedFilter(filterFunc);
	        });
	    }
	    setConfig(options) {
	        this.addToQueue(() => {
	            pbjs.setConfig(options);
	        });
	    }
	    setTargetingForGPTAsync(adUnitCodes) {
	        this.addToQueue(() => {
	            pbjs.setTargetingForGPTAsync(adUnitCodes);
	        });
	    }
	    triggerUserSyncs() {
	        this.addToQueue(() => {
	            pbjs.triggerUserSyncs();
	        });
	    }
	    waitForQueue() {
	        return new Promise((resolve, reject) => {
	            if (!this.isPrebidLoaded())
	                reject(false);
	            pbjs.que.push(() => {
	                resolve(true);
	            });
	        });
	    }
	    getBidResponsesForAdUnitCode(adUnitCode) {
	        return pbjs.getBidResponsesForAdUnitCode(adUnitCode);
	    }
	    getConfig(option, callback) {
	        return callback ? pbjs.getConfig(option, callback) : pbjs.getConfig(option);
	    }
	    getHighestCpmBids(adUnitCode) {
	        return pbjs.getHighestCpmBids(adUnitCode);
	    }
	}

	let LazyLoadFloorsExperiment = class LazyLoadFloorsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this._choices = [
	            { choice: 0, weight: 60 },
	            { choice: 0.8, weight: 10 },
	            { choice: 0.9, weight: 10 },
	            { choice: 0.95, weight: 10 },
	            { choice: 0.99, weight: 10 },
	        ];
	        this.key = 'lzflrcontent';
	        this._result = this.run();
	        if (this._result === 0) {
	            this.abgroup.set(this.key, 'off');
	        }
	        else if (this._result === 0.8) {
	            this.abgroup.set(this.key, '80');
	        }
	        else if (this._result === 0.9) {
	            this.abgroup.set(this.key, '90');
	        }
	        else if (this._result === 0.95) {
	            this.abgroup.set(this.key, '95');
	        }
	        else if (this._result === 0.99) {
	            this.abgroup.set(this.key, '99');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Number)
	], LazyLoadFloorsExperiment.prototype, "run", null);
	LazyLoadFloorsExperiment = __decorate([
	    log('LazyLoadFloorsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], LazyLoadFloorsExperiment);

	let RubiconFloorsExperiment = class RubiconFloorsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this._choices = [
	            { choice: 'on', weight: 4 },
	            { choice: 'on_min', weight: 4 },
	            { choice: 'off', weight: 90 },
	            { choice: 'none', weight: 2 },
	        ];
	        this.key = 'rbflr';
	        this._result = this.run();
	        this.abgroup.set(this.key, this._result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", String)
	], RubiconFloorsExperiment.prototype, "run", null);
	RubiconFloorsExperiment = __decorate([
	    log('RubiconFloorsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RubiconFloorsExperiment);

	let SessionFloorsExperiment = class SessionFloorsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this._choices = [
	            { choice: 0, weight: 60 },
	            { choice: 0.8, weight: 10 },
	            { choice: 0.9, weight: 10 },
	            { choice: 0.95, weight: 10 },
	            { choice: 0.99, weight: 10 },
	        ];
	        this.key = 'sessflrs1';
	        this._result = this.run();
	        if (this._result === 0) {
	            this.abgroup.set(this.key, 'off');
	        }
	        else {
	            this.abgroup.set(this.key, `${this._result * 100}`);
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Number)
	], SessionFloorsExperiment.prototype, "run", null);
	SessionFloorsExperiment = __decorate([
	    log('SessionFloorsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], SessionFloorsExperiment);

	let FloorsExperimentHandler = class FloorsExperimentHandler {
	    constructor(_rubiconFloorsExperiment, abGroup) {
	        this._rubiconFloorsExperiment = _rubiconFloorsExperiment;
	        this.abGroup = abGroup;
	        this._result = {
	            rubicon: false,
	            legacy: false,
	            percentile: {
	                lazy: 0,
	                session: 0,
	            },
	        };
	        this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        if (this._rubiconFloorsExperiment.result === 'on' || this._rubiconFloorsExperiment.result === 'on_min') {
	            this._result.rubicon = true;
	        }
	        if (this._rubiconFloorsExperiment.result === 'off' || this._rubiconFloorsExperiment.result === 'on_min') {
	            this._result.legacy = true;
	            this._result.percentile.lazy = new LazyLoadFloorsExperiment(this.abGroup).result;
	            this._result.percentile.session = new SessionFloorsExperiment(this.abGroup).result;
	        }
	    }
	};
	FloorsExperimentHandler = __decorate([
	    log('FloorsExperimentHandler'),
	    singleton(),
	    __metadata("design:paramtypes", [RubiconFloorsExperiment, ABGroup])
	], FloorsExperimentHandler);

	let Floors = class Floors {
	    constructor(_floorsExperiment, _config, _prebidMethods) {
	        this._floorsExperiment = _floorsExperiment;
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._amazonFloors = {};
	    }
	    setValues(obj, adUnitCode, floorCpm) {
	        obj.values[`${window.location.host}|${adUnitCode}`] = floorCpm > 0 ? floorCpm : 0;
	    }
	    getDefaultFloorConfig() {
	        return {
	            currency: 'USD',
	            schema: {
	                fields: ['domain', 'adUnitCode'],
	                delimiter: '|',
	            },
	            values: {},
	        };
	    }
	    setPrebidFloors(data) {
	        if (data.modelGroups.length > 0) {
	            this._setPrebidFloors(data);
	        }
	    }
	    setLegacyFloorsConfig(data) {
	        if (!Object.keys(data.values).length) {
	            return;
	        }
	        this._setAmazonFloors(data);
	        const rubiconFloorData = this.rubiconData || { floorsSchemaVersion: 2, modelGroups: [{ ...data, modelWeight: 100, modelVersion: 'legacy' }] };
	        if (this._floorsExperiment.result.rubicon === true && this._floorsExperiment.result.legacy === true && this.rubiconData) {
	            rubiconFloorData.modelGroups = this.rubiconData.modelGroups.map((modelGroup) => {
	                modelGroup.values = this.getMaxFloors(data.values, modelGroup.values);
	                return modelGroup;
	            });
	        }
	        this.setPrebidFloors(rubiconFloorData);
	    }
	    _setPrebidFloors(data) {
	        this._prebidMethods.setConfig({
	            floors: {
	                enforcement: {
	                    enforceJS: false,
	                },
	                data,
	            },
	        });
	    }
	    _setAmazonFloors({ values, currency }) {
	        Object.keys(values).forEach(k => {
	            const id = (k.split('|').length && k.split('|')[1]) || k;
	            this._amazonFloors[id] = {
	                value: values[k],
	                currency: currency || 'USD',
	            };
	        });
	    }
	    getAmazonFloorsBySlotId(id) {
	        return this._amazonFloors[id] || this._amazonFloors[id.toLowerCase()] || {};
	    }
	    getMaxFloors(legacyFloors = {}, rubiconFloors = {}) {
	        const rubiconAdUnitKeys = this.setAdUnitCodeKeys(rubiconFloors);
	        const legacyAdUnitKeys = this.setAdUnitCodeKeys(legacyFloors);
	        const mergedWithAdUnitCodeKeys = { ...legacyAdUnitKeys, ...rubiconAdUnitKeys };
	        return Object.keys(mergedWithAdUnitCodeKeys).reduce((acc, key) => {
	            const validNum = (num) => (isNaN(num) ? 0 : num);
	            acc[`${window.location.host}|${key}`] = Math.max(validNum(legacyAdUnitKeys[key]), validNum(rubiconAdUnitKeys[key]));
	            return acc;
	        }, {});
	    }
	    setAdUnitCodeKeys(prebidFloorsValues) {
	        return Object.keys(prebidFloorsValues).reduce((acc, floorValue) => {
	            floorValue.split('|').forEach(field => {
	                const adUnitCodeMatched = this.verifyAdUnitCode(field);
	                if (adUnitCodeMatched) {
	                    acc[field.toLowerCase()] = prebidFloorsValues[floorValue];
	                }
	            });
	            return acc;
	        }, {});
	    }
	    verifyAdUnitCode(field) {
	        const displayUnit = !!/AdThrive_/i.exec(field);
	        const videoUnit = [...this._config.video.instreamAdUnits].filter(x => x.toLowerCase() === field.toLowerCase())[0] === undefined ? false : true;
	        return displayUnit || videoUnit;
	    }
	};
	Floors = __decorate([
	    log('Floors'),
	    singleton(),
	    __metadata("design:paramtypes", [FloorsExperimentHandler, Config, PrebidMethods])
	], Floors);

	class SupplyChain {
	    getSupplyChainConfig(sid) {
	        return {
	            ver: '1.0',
	            complete: 1,
	            nodes: [
	                {
	                    asi: 'cafemedia.com',
	                    sid,
	                    hp: 1,
	                },
	            ],
	        };
	    }
	}

	let AmazonAuctionManager = class AmazonAuctionManager extends AuctionManager {
	    constructor(_config, _amazonHoldDisplayExperiment, _floors) {
	        super();
	        this._config = _config;
	        this._amazonHoldDisplayExperiment = _amazonHoldDisplayExperiment;
	        this._floors = _floors;
	        this.holdDisplayExperiment = false;
	        this.videoSlotNames = new Map();
	        this.videoSlotBids = new Map();
	    }
	    init() {
	        window.apstag.init({
	            pubID: this._config.amazon.pubId,
	            adServer: 'googletag',
	            videoAdServer: 'DFP',
	            schain: new SupplyChain().getSupplyChainConfig(this._config.site.id),
	        });
	        this.holdDisplayExperiment = this._amazonHoldDisplayExperiment.result;
	        this.videoSlotNames = this.initVideoSlotMap();
	    }
	    requestBids(slots, timeout = this._config.timeouts.initialBidsRequest - 200) {
	        const { id } = this._config.site;
	        const { networkCode, prefix } = this._config.gam;
	        return new Promise(resolve => {
	            GoogleAdManager.pushToQueue(() => {
	                const amazonSlots = slots
	                    .filter(slot => slot.googleTagSlot !== undefined && !this._config.amazon.adUnitExclusions.has(slot.location))
	                    .map(slot => {
	                    const floor = this._floors.getAmazonFloorsBySlotId(slot.element.id);
	                    return {
	                        slotID: slot.element.id,
	                        slotName: `/${networkCode}/${prefix}_${slot.name}/${id}`,
	                        sizes: slot.sizes,
	                        ...(floor &&
	                            floor.currency && {
	                            floor: {
	                                value: Math.ceil(floor.value * 100),
	                                currency: floor.currency,
	                            },
	                        }),
	                    };
	                });
	                if (amazonSlots.length) {
	                    window.apstag.fetchBids({
	                        slots: amazonSlots,
	                        timeout,
	                    }, () => {
	                        GoogleAdManager.pushToQueue(() => {
	                            window.apstag.setDisplayBids();
	                            resolve();
	                        });
	                    });
	                    if (!this.holdDisplayExperiment) {
	                        resolve();
	                    }
	                }
	                else {
	                    resolve();
	                }
	            });
	        });
	    }
	    refreshBids(slots) {
	        return this.requestBids(slots, this._config.timeouts.refreshBidsRequest - 200);
	    }
	    requestVideoBids(videos, timeout = this._config.timeouts.initialBidsRequest - 200) {
	        return Promise.all(videos.map(video => {
	            const floor = this._floors.getAmazonFloorsBySlotId(video.name);
	            const amazonVideoSlot = {
	                slotID: this.videoSlotNames.get(video.name),
	                mediaType: 'video',
	                ...(floor &&
	                    floor.currency && {
	                    floor: {
	                        value: Math.ceil(floor.value * 100),
	                        currency: floor.currency,
	                    },
	                }),
	            };
	            return new Promise(resolve => {
	                if (amazonVideoSlot) {
	                    window.apstag.fetchBids({
	                        slots: [amazonVideoSlot],
	                        timeout,
	                    }, (bids) => {
	                        if (bids.length > 0) {
	                            this.videoSlotBids.set(video._playlistId, bids[0]);
	                        }
	                        resolve();
	                    });
	                }
	                else {
	                    resolve();
	                }
	            });
	        }))
	            .then(() => Promise.resolve())
	            .catch();
	    }
	    getVideoBid(playlistId) {
	        const videoBid = this.videoSlotBids.get(playlistId);
	        if (videoBid) {
	            this.videoSlotBids.delete(playlistId);
	            return videoBid;
	        }
	    }
	    initVideoSlotMap() {
	        const deviceSlotMap = {
	            desktop: new Map([
	                [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, 'Sticky_Playlist_Desktop'],
	                [VideoAdUnit.Video_Individual_Autoplay_SOff, 'Sticky_Related_Desktop'],
	                [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, 'CTP_Desktop'],
	            ]),
	            mobile: new Map([
	                [VideoAdUnit.Video_Coll_SOff_Smartphone, 'Sticky_Playlist_Mobile'],
	                [VideoAdUnit.Video_Individual_Autoplay_SOff, 'Sticky_Related_Mobile'],
	                [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, 'CTP_Mobile'],
	            ]),
	        };
	        return isDesktop() ? deviceSlotMap.desktop : deviceSlotMap.mobile;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.amazonUAM;
	    }
	    get enabled() {
	        return window.apstag !== undefined && this._config.amazon.enabled;
	    }
	};
	AmazonAuctionManager = __decorate([
	    log('AmazonAuctionManager'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, AmazonHoldDisplayExperiment, Floors])
	], AmazonAuctionManager);

	class Analytics {
	}

	let AnalyticsExperiment = class AnalyticsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'pba';
	        this._choices = [
	            { choice: { name: 'roxot', weight: 1 } },
	            { choice: { name: 'rubicon', weight: 0 } },
	            { choice: { name: 'none', weight: 99 } },
	        ];
	        this._result = this.run();
	        abgroup.set('pba', this._result ? this._result.name : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        const choices = this._choices
	            .map(item => item.choice)
	            .map(aa => ({
	            choice: aa,
	            weight: aa.weight,
	        }));
	        const analyticsChoices = new WeightedChoice(choices);
	        return analyticsChoices.get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Object)
	], AnalyticsExperiment.prototype, "run", null);
	AnalyticsExperiment = __decorate([
	    log('AnalyticsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], AnalyticsExperiment);

	let RoxotAnalytics = class RoxotAnalytics extends Analytics {
	    constructor(_config, _prebidMethods, _analyticsExperiment) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._analyticsExperiment = _analyticsExperiment;
	        this.name = 'roxot';
	    }
	    init() {
	        if (window.localStorage) {
	            try {
	                this._prebidMethods.enableAnalytics({
	                    provider: 'roxot',
	                    options: {
	                        publisherIds: ['ffcc0e40-07d0-4238-92e4-f711915afb5a'],
	                        host: `${this._config.context.bucket}.com`,
	                    },
	                });
	            }
	            catch (err) {
	                logger.error('RoxotAnalytics', 'init - ignored', err);
	            }
	        }
	        else {
	            logger.error('RoxotAnalytics', 'init', new Error('Disabled roxot because localStorage is undefined'));
	        }
	    }
	    get enabled() {
	        var _a;
	        return ((_a = this._analyticsExperiment.result) === null || _a === void 0 ? void 0 : _a.name) === 'roxot';
	    }
	};
	RoxotAnalytics = __decorate([
	    log('RoxotAnalytics'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods, AnalyticsExperiment])
	], RoxotAnalytics);

	let RubiconAnalytics = class RubiconAnalytics extends Analytics {
	    constructor(_rubiconFloorsExperiment, _analyticsExperiment, _prebidMethods) {
	        super();
	        this._rubiconFloorsExperiment = _rubiconFloorsExperiment;
	        this._analyticsExperiment = _analyticsExperiment;
	        this._prebidMethods = _prebidMethods;
	        this.name = 'rubicon';
	    }
	    init() {
	        try {
	            this._prebidMethods.enableAnalytics({
	                provider: this.name,
	                options: {
	                    accountId: 9262,
	                    endpoint: 'https://prebid-a.rubiconproject.com/event',
	                },
	            });
	        }
	        catch (err) {
	            logger.error('RubiconAnalytics', 'init - ignored', err);
	        }
	    }
	    get enabled() {
	        var _a;
	        return this._rubiconFloorsExperiment.result === 'on' || ((_a = this._analyticsExperiment.result) === null || _a === void 0 ? void 0 : _a.name) === 'rubicon';
	    }
	};
	RubiconAnalytics = __decorate([
	    log('RubiconAnalytics'),
	    injectable(),
	    __metadata("design:paramtypes", [RubiconFloorsExperiment,
	        AnalyticsExperiment,
	        PrebidMethods])
	], RubiconAnalytics);

	class BidderBase {
	    updateBidParams(_slot, _adUnit, bid) {
	        return bid;
	    }
	    get enabled() {
	        return true;
	    }
	    get videoEnabled() {
	        return true;
	    }
	    get name() {
	        return this.bidderConfig.bidder_name;
	    }
	}

	class Bidder extends BidderBase {
	    getSlotBidRequests(_slot) {
	        return;
	    }
	    getVideoSlotBidRequests(_video) {
	        return;
	    }
	    getBidRequests(slots) {
	        return slots.reduce((bids, slot) => {
	            bids.set(slot.id, this.getSlotBidRequests(slot));
	            return bids;
	        }, new Map());
	    }
	    getVideoBidRequests(videos) {
	        return videos.reduce((bids, video) => {
	            bids.set(video.name, this.getVideoSlotBidRequests(video));
	            return bids;
	        }, new Map());
	    }
	}

	let ThirtyThreeAcrossBidder = class ThirtyThreeAcrossBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('33across');
	        this._map = new Map([
	            ['Below_Post_1', 'dqjinO_Lqr6i5uaKkv7mNO'],
	            ['Content_1', 'dzqsVw_Lqr6iHHaKlId8sQ'],
	            ['Content_2', 'dGYL36_Lqr6iHHaKlId8sQ'],
	            ['Content_3', 'dPmBLW_Lqr6ikXaKkGJozW'],
	            ['Content_4', 'dYmdO4_Lqr6ikXaKkGJozW'],
	            ['Content_5', 'd73_q4_Lqr6ikfaKlId8sQ'],
	            ['Content_6', 'aeCNc8_Lur6ikfaKlId8sQ'],
	            ['Content_7', 'amEJ90_Lur6ikXaKkGJozW'],
	            ['Content_8', 'avcDUU_Lur6ikXaKkGJozW'],
	            ['Content_9', 'aE0F5q_Lur6iHHaKlId8sQ'],
	            ['Footer_1', 'aMbGkS_Lur6ikXaKkGJozW'],
	            ['Header_1', 'aZCnyg_Lur6ikfaKlId8sQ'],
	            ['Header_2', 'a7S6ye_Lur6ikXaKkGJozW'],
	            ['Recipe_1', 'bfXhLW_Lur6ioMaKkGJozW'],
	            ['Recipe_2', 'bmQVLo_Lur6ikfaKlId8sQ'],
	            ['Recipe_3', 'd7kcPCUhur6yo-aKkGJozW'],
	            ['Recipe_4', 'agAjkaUhyr6yo9aKlId8sQ'],
	            ['Sidebar_1', 'buEy3O_Lur6ikfaKlId8sQ'],
	            ['Sidebar_2', 'bCOsqy_Lur6ikfaKlId8sQ'],
	            ['Sidebar_3', 'bOGvrc_Lur6ikXaKkGJozW'],
	            ['Sidebar_4', 'bW-wb0_Lur6ikfaKlId8sQ'],
	            ['Sidebar_5', 'b8nVxi_Lur6ikXaKkGJozW'],
	            ['Sidebar_9', 'cggK7W_Lur6ikfaKlId8sQ'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.thirtyThreeAcross;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        siteId: this._map.get(slot.placementMapName),
	                        productId: 'siab',
	                    },
	                },
	            ];
	        }
	    }
	};
	ThirtyThreeAcrossBidder = __decorate([
	    log('ThirtyThreeAcrossBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], ThirtyThreeAcrossBidder);

	let OneVideoStreamExperiment = class OneVideoStreamExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'rmos1';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.01).get();
	    }
	};
	OneVideoStreamExperiment = __decorate([
	    log('OneVideoStreamExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], OneVideoStreamExperiment);

	let OneVideoStreamNoVideoExperiment = class OneVideoStreamNoVideoExperiment extends Experiment {
	    constructor(abgroup, config) {
	        super();
	        this._result = false;
	        this.key = 'rmosnv1';
	        this._choices = [{ choice: true }, { choice: false }];
	        if (!config.video.hasJwPlayer) {
	            this._result = this.run();
	            abgroup.set(this.key, this._result ? 'on' : 'off');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.01).get();
	    }
	};
	OneVideoStreamNoVideoExperiment = __decorate([
	    log('OneVideoStreamNoVideoExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup, Config])
	], OneVideoStreamNoVideoExperiment);

	let Outstream = class Outstream {
	    constructor(_config) {
	        this._config = _config;
	        this._sharedConfig = {
	            context: 'outstream',
	            mimes: ['video/mp4'],
	            api: [2],
	            skip: 0,
	            pos: 1,
	            protocols: [2, 3, 5, 6, 7, 8],
	            linearity: 1,
	            minduration: 0,
	            maxduration: 30,
	            playbackmethod: [2],
	        };
	        const { desktop, tablet } = this._config.site.breakpoints;
	        this._stickyOutstreamSize = deviceByBreakpoint(tablet, desktop) === 'phone' ? [178, 100] : [227, 150];
	    }
	    _callANRenderer(bid, ad) {
	        const adResponse = this._getOutstreamRendererConfig(ad);
	        bid.renderer.push(() => {
	            window.ANOutstreamVideo.renderAd({
	                targetId: bid.adUnitCode,
	                adResponse,
	                rendererOptions: {
	                    audioOnMouseover: false,
	                    playerSkin: {
	                        topBarColor: 'rgba(0,0,0,0.0)',
	                        topBarTextColor: 'rgba(0,0,0,0.0)',
	                    },
	                    playVideoVisibleThreshold: 1,
	                    disableCollapse: {
	                        enabled: false,
	                        replay: false,
	                    },
	                },
	            });
	        });
	    }
	    _renderer(bid) {
	        let vastXml = bid.ad || bid.vastXml;
	        if (vastXml) {
	            this._callANRenderer(bid, vastXml);
	        }
	        else if (bid.vastUrl) {
	            vastXml = getVastXML(bid.vastUrl);
	            vastXml
	                .then((vastXML) => {
	                this._callANRenderer(bid, vastXML);
	                return true;
	            })
	                .catch((err) => {
	                logger.error('StickyOutstream', 'fetch', { message: err });
	                return false;
	            });
	        }
	    }
	    get standardOutstreamConfig() {
	        return {
	            playerSize: [640, 480],
	            ...this._sharedConfig,
	        };
	    }
	    get stickyOutstreamConfig() {
	        return {
	            ...this._sharedConfig,
	            playerSize: this._stickyOutstreamSize,
	            renderer: {
	                url: 'https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js',
	                render: (bid) => {
	                    this._renderer(bid);
	                },
	            },
	        };
	    }
	    _getOutstreamRendererConfig(vastXml) {
	        return {
	            ad: {
	                video: {
	                    content: vastXml,
	                    player_width: this._stickyOutstreamSize[0],
	                    player_height: this._stickyOutstreamSize[1],
	                },
	            },
	        };
	    }
	};
	Outstream = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], Outstream);

	let MediaType = class MediaType {
	    constructor(_config, _gam, _outstream, _oneVideoStreamExperiment) {
	        this._config = _config;
	        this._gam = _gam;
	        this._outstream = _outstream;
	        this._oneVideoStreamExperiment = _oneVideoStreamExperiment;
	        this._standardOutstreamSlots = ['Content_1', 'Below_Post_1'];
	        this.oneStreamExpResult = false;
	    }
	    runOneStreamExperiment() {
	        const oneVideoStreamNoVideoExperiment = instance.resolve(OneVideoStreamNoVideoExperiment);
	        this._gam.setTargeting({ key: 'abgroup', value: this._config.abGroup.groups.join(',') });
	        this.oneStreamExpResult = oneVideoStreamNoVideoExperiment.result;
	        if (this.oneStreamExpResult) {
	            ['Content_3', 'Content_5', 'Recipe_1'].forEach(unit => {
	                this._standardOutstreamSlots.push(unit);
	            });
	        }
	    }
	    isOutstreamAllowed() {
	        return !this._oneVideoStreamExperiment.result || !this._config.video.hasJwPlayer;
	    }
	    outstreamEnabled(slot) {
	        const viewability = slot.viewability;
	        const refreshCount = slot.refreshCount;
	        const isStickyOutstream = slot.location === 'Video_StickyOutstream';
	        const outstreamHVP = refreshCount >= 1 || viewability >= 0.5 || isStickyOutstream;
	        const outstreamCapable = (this._config.adTypes.outstreamEnabled || isStickyOutstream) && this.outstreamSlots.has(slot.placementMapName) && this.isOutstreamAllowed();
	        return {
	            outstreamCapable,
	            currentlyActive: outstreamCapable && outstreamHVP,
	        };
	    }
	    getMediaType(slotRequest) {
	        const mediaType = {};
	        const { slot, video } = slotRequest;
	        if (video && this._config.video.instreamAdUnits.has(video.name)) {
	            const instreamVideoMediaType = this.getInstreamConfig(video);
	            mediaType.video = instreamVideoMediaType;
	        }
	        if (slot) {
	            const highlyViewable = isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold);
	            const bannerMediaType = {
	                sizes: slot.sizes,
	                ...(highlyViewable && {
	                    pos: 1,
	                }),
	            };
	            if (slot.location !== 'Video_StickyOutstream') {
	                mediaType.banner = bannerMediaType;
	            }
	            if (this.outstreamEnabled(slot).currentlyActive) {
	                mediaType.video = slot.location !== 'Video_StickyOutstream' ? this._outstream.standardOutstreamConfig : this._outstream.stickyOutstreamConfig;
	            }
	        }
	        return mediaType;
	    }
	    get outstreamSlots() {
	        return new Set(this.getOutstreamEnabledUnits());
	    }
	    getOutstreamEnabledUnits() {
	        return this._config.video.hasStickyOutstream ? ['Video_StickyOutstream_1'] : this._standardOutstreamSlots;
	    }
	    getInstreamConfig(video) {
	        var _a;
	        return {
	            context: 'instream',
	            playerSize: video.size,
	            mimes: this._config.video.mimeType,
	            protocols: this._config.video.videoProtocols.protocols,
	            maxduration: 30,
	            ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(video.name)) && {
	                playbackmethod: this._config.video.playbackmethod.get(video.name),
	            }),
	            linearity: 1,
	            api: this._config.video.apiValue,
	            w: video.size[0],
	            h: video.size[1],
	            pos: this._config.video.position.id,
	            minduration: 1,
	            startdelay: 0,
	            placement: 1,
	            skip: 0,
	        };
	    }
	};
	MediaType = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [Config,
	        GoogleAdManager,
	        Outstream,
	        OneVideoStreamExperiment])
	], MediaType);

	let AppNexusBidder = class AppNexusBidder extends Bidder {
	    constructor(_config, _mediaType) {
	        super();
	        this._config = _config;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('appnexus');
	        this._keywords = {
	            keywords: {
	                ...(this._config.site.filteredSensitiveCategories.length && {
	                    sens: this._config.site.filteredSensitiveCategories,
	                }),
	                bucket: [this._config.context.bucket],
	                Chrome: `${isChrome()}`,
	                Mobile: '' + navigator.userAgent && navigator.userAgent.search(/Mobi/i) > -1,
	                ...(this._config.site.verticals.length && {
	                    verticals: this._config.site.verticals,
	                }),
	            },
	        };
	        this.outstreamType = isMobile() ? 'outstreamMobile' : 'outstreamDesktop';
	        this._map = new Map([
	            ['Below_Post_1', [{ placementId: 13036386 }]],
	            [
	                'Content_1',
	                [
	                    { placementId: 13036388 },
	                    {
	                        placementId: 16808429,
	                        adType: this.outstreamType,
	                        playback_method: ['auto_play_sound_off'],
	                    },
	                ],
	            ],
	            ['Content_2', [{ placementId: 13036389 }]],
	            ['Content_3', [{ placementId: 13036391 }]],
	            ['Content_4', [{ placementId: 13036393 }]],
	            ['Content_5', [{ placementId: 13036394 }]],
	            ['Content_6', [{ placementId: 13036396 }]],
	            ['Content_7', [{ placementId: 13036398 }]],
	            ['Content_8', [{ placementId: 13036399 }]],
	            ['Content_9', [{ placementId: 13036400 }]],
	            ['Footer_1', [{ placementId: 13036401 }]],
	            ['Header_1', [{ placementId: 13036404 }]],
	            ['Header_2', [{ placementId: 13036405 }]],
	            ['Interstitial_1', [{ placementId: 21240886 }]],
	            ['Recipe_1', [{ placementId: 13036406 }]],
	            ['Recipe_2', [{ placementId: 13036407 }]],
	            ['Recipe_3', [{ placementId: 15014787 }]],
	            ['Recipe_4', [{ placementId: 15998791 }]],
	            ['Sidebar_1', [{ placementId: 13036408 }]],
	            ['Sidebar_2', [{ placementId: 13036409 }]],
	            ['Sidebar_3', [{ placementId: 13036410 }]],
	            ['Sidebar_4', [{ placementId: 13036411 }]],
	            ['Sidebar_5', [{ placementId: 13036412 }]],
	            ['Sidebar_9', [{ placementId: 13036416 }]],
	            ['Video_StickyOutstream_1', [{ placementId: 22366045 }]],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [{ placementId: 15504193, playback_method: ['auto_play_sound_off'] }]],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, [{ placementId: 15504209, playback_method: ['auto_play_sound_off'] }]],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, [{ placementId: 15504166, playback_method: ['click_to_play'] }]],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, [{ placementId: 17947919, playback_method: ['auto_play_sound_off'] }]],
	        ]);
	        this._playbackmethodMap = new Map([
	            [3, 'click_to_play'],
	            [6, 'auto_play_sound_off'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.appNexus;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.appNexus;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ adType }) => !adType || this._config.adTypes.has(adType))
	                .map(({ adType, placementId, playback_method }) => {
	                const isHV = isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold);
	                const video = adType === this.outstreamType ? { video: { playback_method } } : '';
	                const isRefreshableOutstream = adType === this.outstreamType && !this._mediaType.outstreamEnabled(slot).currentlyActive;
	                return {
	                    bidder: this.name,
	                    ...(isRefreshableOutstream ? { labelAny: ['refresh'] } : {}),
	                    params: {
	                        ...this._keywords,
	                        allowSmallerSizes: this._config.adOptions.allowSmallerAdSizes,
	                        placementId,
	                        ...video,
	                        ...(isHV && { position: 'above' }),
	                    },
	                };
	            });
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        var _a;
	        if (this._map.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._keywords,
	                        placementId: this._map.get(_video.name)[0].placementId,
	                        position: this._config.video.position.name,
	                        video: {
	                            mimes: this._config.video.mimeType,
	                            ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) && {
	                                playback_method: this._playbackmethodMap.get(this._config.video.playbackmethod.get(_video.name)[0]),
	                            }),
	                            frameworks: this._config.video.apiValue,
	                        },
	                    },
	                },
	            ];
	        }
	    }
	    updateBidParams(slot, _adUnit, bid) {
	        if (slot.refreshCount === 1) {
	            bid.params.position = 'above';
	        }
	        return bid;
	    }
	};
	AppNexusBidder = __decorate([
	    log('AppNexusBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, MediaType])
	], AppNexusBidder);

	let BrightRollBidder = class BrightRollBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('brightroll');
	        this._params = {
	            publisher: 'adthrive',
	        };
	        this._map = new Set([
	            'Below_Post_1',
	            'Content_1',
	            'Content_2',
	            'Content_3',
	            'Content_4',
	            'Content_5',
	            'Content_6',
	            'Content_7',
	            'Content_8',
	            'Content_9',
	            'Footer_1',
	            'Header_1',
	            'Header_2',
	            'Recipe_1',
	            'Recipe_2',
	            'Recipe_3',
	            'Recipe_4',
	            'Sidebar_1',
	            'Sidebar_2',
	            'Sidebar_3',
	            'Sidebar_4',
	            'Sidebar_5',
	            'Sidebar_9',
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.brightroll;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params,
	                    },
	                },
	            ];
	        }
	    }
	};
	BrightRollBidder = __decorate([
	    log('BrightRollBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], BrightRollBidder);

	let ConcertBidder = class ConcertBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('concert');
	        this._hvThreshold = 0;
	        this._map = new Map([['Content_1', [300, 250]]]);
	        this._desktopSizes = [[620, 366]];
	        this._mobileSizes = [
	            [325, 508],
	            [325, 204],
	        ];
	        if (this._config.context.device === 'desktop') {
	            this._map.set('Content_2', [300, 250]);
	            this._map.set('Content_3', [300, 250]);
	        }
	    }
	    get enabled() {
	        return this._config.partners.concert;
	    }
	    getPartnerIdFromDomain() {
	        try {
	            const domain = getRootDomain(window.location.hostname);
	            const splitArr = domain.split('.');
	            return splitArr[0].toLowerCase().replace('-', '');
	        }
	        catch (err) {
	            logger.error('ConcertBidder', 'getPartnerIdFromDomain', err);
	            return '';
	        }
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName) && slot.hasSize(this._map.get(slot.placementMapName))) {
	            const partnerId = this.getPartnerIdFromDomain();
	            if (partnerId.length > 0) {
	                return [
	                    {
	                        bidder: this.name,
	                        ...(slot.viewability < this._hvThreshold ? { labelAny: ['refresh'] } : {}),
	                        params: {
	                            bidder: this.name,
	                            slot: slot.id,
	                            partnerId,
	                            sizes: isMobile() ? this._mobileSizes : this._desktopSizes,
	                        },
	                    },
	                ];
	            }
	        }
	    }
	};
	ConcertBidder = __decorate([
	    log('ConcertBidder'),
	    singleton(),
	    __metadata("design:paramtypes", [Config])
	], ConcertBidder);

	let ConversantBidder = class ConversantBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('conversant');
	        this._siteId = '203587';
	        this._map = new Map([
	            ['Below_Post_1', { tag_id: '8c6e3091' }],
	            ['Content', { tag_id: 'f4f67b17' }],
	            ['Content_1', { tag_id: '9cbc79fd' }],
	            ['Content_2', { tag_id: '8fdfa3de' }],
	            ['Content_3', { tag_id: 'ff6c383c' }],
	            ['Content_4', { tag_id: '972f654c' }],
	            ['Content_5', { tag_id: 'bd1aadb5' }],
	            ['Content_6', { tag_id: 'ce4f5d6e' }],
	            ['Content_7', { tag_id: 'd85e90b' }],
	            ['Content_8', { tag_id: 'f02f4ba' }],
	            ['Content_9', { tag_id: '2c01cbc' }],
	            ['Footer_1', { tag_id: '1b2dec1' }],
	            ['Header_1', { tag_id: '44d21b5' }],
	            ['Header_2', { tag_id: '3488dd9' }],
	            ['Recipe_1', { tag_id: 'f6cf917' }],
	            ['Recipe_2', { tag_id: '31d9c43' }],
	            ['Recipe_3', { tag_id: 'a7b4d19' }],
	            ['Recipe_4', { tag_id: '245c673' }],
	            ['Recipe_5', { tag_id: '0bf3576' }],
	            ['Sidebar_1', { tag_id: 'bf73d45' }],
	            ['Sidebar_2', { tag_id: '0a57500' }],
	            ['Sidebar_3', { tag_id: 'cceddcd' }],
	            ['Sidebar_4', { tag_id: '872fffd4' }],
	            ['Sidebar_5', { tag_id: 'a7653e4' }],
	            ['Sidebar_9', { tag_id: '517df454' }],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, { tag_id: '0d0dfda' }],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, { tag_id: '50331e1d' }],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, { tag_id: 'de9d5670' }],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, { tag_id: 'ab89e3c1' }],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.conversant;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.conversant;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        tag_id: this._map.get(slot.placementMapName).tag_id,
	                        site_id: this._siteId,
	                    },
	                },
	            ];
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        tag_id: this._map.get(_video.name).tag_id,
	                        site_id: this._siteId,
	                        mimes: this._config.video.mimeType,
	                        api: this._config.video.apiValue,
	                        ...(this._config.video.videoProtocols.scope === 'all' && {
	                            protocols: this._config.video.videoProtocols.protocols,
	                        }),
	                        position: this._config.video.position.id,
	                    },
	                },
	            ];
	        }
	    }
	};
	ConversantBidder = __decorate([
	    log('ConversantBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], ConversantBidder);

	let CriteoBidder = class CriteoBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('criteo');
	        this._params = {
	            networkId: 3927,
	        };
	        this._map = new Set([
	            'Below_Post_1',
	            'Content_1',
	            'Content_2',
	            'Content_3',
	            'Content_4',
	            'Content_5',
	            'Content_6',
	            'Content_7',
	            'Content_8',
	            'Content_9',
	            'Footer_1',
	            'Header_1',
	            'Header_2',
	            'Recipe_1',
	            'Recipe_2',
	            'Recipe_3',
	            'Recipe_4',
	            'Sidebar_1',
	            'Sidebar_2',
	            'Sidebar_3',
	            'Sidebar_4',
	            'Sidebar_5',
	            'Sidebar_9',
	        ]);
	        this._videoMap = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, '1629631'],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, '1629630'],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, '1629629'],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, '1629401'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.criteo;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params,
	                    },
	                },
	            ];
	        }
	    }
	    get videoEnabled() {
	        return this._config.partners.video.criteo;
	    }
	    getVideoSlotBidRequests(_video) {
	        var _a;
	        if (this._videoMap.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        zoneId: this._videoMap.get(_video.name),
	                        video: {
	                            playbackmethod: ((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) || [],
	                        },
	                    },
	                },
	            ];
	        }
	    }
	};
	CriteoBidder = __decorate([
	    log('CriteoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], CriteoBidder);

	let DeepIntentBidder = class DeepIntentBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('deepintent');
	        this._map = new Map([
	            ['Below_Post_1', '441'],
	            ['Content', '442'],
	            ['Content_1', '443'],
	            ['Content_2', '444'],
	            ['Content_3', '445'],
	            ['Content_4', '446'],
	            ['Content_5', '447'],
	            ['Content_6', '448'],
	            ['Content_7', '449'],
	            ['Content_8', '450'],
	            ['Content_9', '451'],
	            ['Footer_1', '452'],
	            ['Header_1', '453'],
	            ['Header_2', '454'],
	            ['Recipe_1', '455'],
	            ['Recipe_2', '456'],
	            ['Recipe_3', '457'],
	            ['Recipe_4', '458'],
	            ['Recipe_5', '459'],
	            ['Sidebar_1', '460'],
	            ['Sidebar_2', '461'],
	            ['Sidebar_3', '462'],
	            ['Sidebar_4', '463'],
	            ['Sidebar_5', '464'],
	            ['Sidebar_9', '465'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.deepIntent && this._config.site.sensitiveCategories.indexOf('drg') !== -1;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        tagId: this._map.get(slot.placementMapName),
	                    },
	                },
	            ];
	        }
	    }
	};
	DeepIntentBidder = __decorate([
	    log('DeepIntentBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], DeepIntentBidder);

	let DistrictMDMXBidder = class DistrictMDMXBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('districtmDMX');
	        this._params = {
	            memberid: 100319,
	        };
	        this._map = new Map([
	            ['Below_Post_1', '210062'],
	            ['Content_1', '210064'],
	            ['Content_2', '210065'],
	            ['Content_3', '210066'],
	            ['Content_4', '210067'],
	            ['Content_5', '210068'],
	            ['Content_6', '210069'],
	            ['Content_7', '210070'],
	            ['Content_8', '210071'],
	            ['Content_9', '210072'],
	            ['Footer_1', '210073'],
	            ['Header_1', '210076'],
	            ['Header_2', '210077'],
	            ['Recipe_1', '210078'],
	            ['Recipe_2', '210079'],
	            ['Recipe_3', '277966'],
	            ['Recipe_4', '277983'],
	            ['Sidebar_1', '210080'],
	            ['Sidebar_2', '210081'],
	            ['Sidebar_3', '210082'],
	            ['Sidebar_4', '210083'],
	            ['Sidebar_5', '210084'],
	            ['Sidebar_9', '210088'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.districtMDMX;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params,
	                        dmxid: this._map.get(slot.placementMapName),
	                    },
	                },
	            ];
	        }
	    }
	};
	DistrictMDMXBidder = __decorate([
	    log('DistrictMDMXBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], DistrictMDMXBidder);

	let DistrictMDMXVideoBidder = class DistrictMDMXVideoBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('dmdmx');
	        this.adapterName = 'districtmDMX';
	        this._params = {
	            memberid: 100319,
	        };
	        this._map = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, '277970'],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, '277968'],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, '277969'],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, '277972'],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.districtMDMX;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.districtMDMXVideo;
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        dmxid: this._map.get(_video.name),
	                        ...this._params,
	                    },
	                },
	            ];
	        }
	    }
	};
	DistrictMDMXVideoBidder = __decorate([
	    log('DistrictMDMXVideoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], DistrictMDMXVideoBidder);

	let DistrictMBidder = class DistrictMBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('districtm');
	        this._map = new Map([
	            ['Below_Post_1', [{ placementId: 13239209 }]],
	            ['Content_1', [{ placementId: 13239211 }]],
	            ['Content_2', [{ placementId: 13239212 }]],
	            ['Content_3', [{ placementId: 13239213 }]],
	            ['Content_4', [{ placementId: 13239216 }]],
	            ['Content_5', [{ placementId: 13239217 }]],
	            ['Content_6', [{ placementId: 13239218 }]],
	            ['Content_7', [{ placementId: 13239219 }]],
	            ['Content_8', [{ placementId: 13239220 }]],
	            ['Content_9', [{ placementId: 13239221 }]],
	            ['Footer_1', [{ placementId: 13239223 }]],
	            ['Header_1', [{ placementId: 13239227 }]],
	            ['Header_2', [{ placementId: 13239229 }]],
	            ['Recipe_1', [{ placementId: 13239230 }]],
	            ['Recipe_2', [{ placementId: 13239231 }]],
	            ['Recipe_3', [{ placementId: 14591635 }]],
	            ['Recipe_4', [{ placementId: 14591652 }]],
	            ['Sidebar_1', [{ placementId: 13239232 }]],
	            ['Sidebar_2', [{ placementId: 13239233 }]],
	            ['Sidebar_3', [{ placementId: 13239234 }]],
	            ['Sidebar_4', [{ placementId: 13239236 }]],
	            ['Sidebar_5', [{ placementId: 13239238 }]],
	            ['Sidebar_9', [{ placementId: 13239242 }]],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [{ placementId: 14591639, playback_method: ['auto_play_sound_off'] }]],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, [{ placementId: 14591637, playback_method: ['auto_play_sound_off'] }]],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, [{ placementId: 14591638, playback_method: ['click_to_play'] }]],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, [{ placementId: 14591641, playback_method: ['auto_play_sound_off'] }]],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.districtM;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.districtM;
	    }
	    updateBidParams(slot, _adUnit, bid) {
	        if (slot.refreshCount === 1) {
	            bid.params.position = 'above';
	        }
	        return bid;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            const isHV = isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold);
	            return this._map.get(slot.placementMapName).map(({ placementId }) => {
	                return {
	                    bidder: this.name,
	                    params: {
	                        placementId,
	                        allowSmallerSizes: this._config.adOptions.allowSmallerAdSizes,
	                        ...(isHV && {
	                            position: 'above',
	                        }),
	                    },
	                };
	            });
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        placementId: this._map.get(_video.name)[0].placementId,
	                        position: this._config.video.position.name,
	                        video: {
	                            mimes: this._config.video.mimeType,
	                            playback_method: this._map.get(_video.name)[0].playback_method,
	                            frameworks: this._config.video.apiValue,
	                        },
	                    },
	                },
	            ];
	        }
	    }
	};
	DistrictMBidder = __decorate([
	    log('DistrictMBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], DistrictMBidder);

	let GumGumBidder = class GumGumBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('gumgum');
	        this._zoneIds = {
	            client: 'g95nznmj',
	            s2s: {
	                desktop: '0yo5ozig',
	                tablet: '0yo5ozig',
	                phone: 'nedjcoh9',
	            },
	        };
	        this._map = new Map([
	            ['Interstitial_1', [{ slotId: 110743 }]],
	            ['Footer_1', []],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, 'glpmwixo'],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, '5zl85htf'],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, '8jzhuyj5'],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, 'dtwgesum'],
	        ]);
	        this._animatedFooterEnabled = this._config.adTypes.animatedFooter;
	        this._interstitialEnabled = this._config.adOptions.interstitial.prebid;
	        this._contextualAuctionParams =
	            this._config.prebid.s2s.bidders.indexOf(this.name) === -1
	                ? { inScreen: this._zoneIds.client }
	                : { zone: this._zoneIds.s2s[this._config.context.device] };
	    }
	    get enabled() {
	        return this._config.partners.gumgum && (this._animatedFooterEnabled || this._interstitialEnabled);
	    }
	    get videoEnabled() {
	        return this._config.partners.video.gumgum;
	    }
	    getSlotBidRequests(slot) {
	        const placement = this._map.get(slot.placementMapName);
	        const isFooterRequest = slot.location === 'Footer' && this._animatedFooterEnabled;
	        const isInterstitialRequest = slot.location === 'Interstitial';
	        if (placement && (isFooterRequest || isInterstitialRequest)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._contextualAuctionParams,
	                        ...(isInterstitialRequest && {
	                            slot: placement[0].slotId,
	                        }),
	                    },
	                },
	            ];
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        video: this._map.get(_video.name),
	                    },
	                },
	            ];
	        }
	    }
	};
	GumGumBidder = __decorate([
	    log('GumGumBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], GumGumBidder);

	const siteIdsMap = new Map([
	    ['Below_Post_1', { siteId: '185759', hvSiteId: '404596' }],
	    ['Content_1', { siteId: '185761', hvSiteId: '404597' }],
	    ['Content_2', { siteId: '185762', hvSiteId: '404598' }],
	    ['Content_3', { siteId: '185763', hvSiteId: '404599' }],
	    ['Content_4', { siteId: '185764', hvSiteId: '404600' }],
	    ['Content_5', { siteId: '185765', hvSiteId: '404601' }],
	    ['Content_6', { siteId: '185766', hvSiteId: '404602' }],
	    ['Content_7', { siteId: '185767', hvSiteId: '404603' }],
	    ['Content_8', { siteId: '185768', hvSiteId: '404604' }],
	    ['Content_9', { siteId: '185769', hvSiteId: '404605' }],
	    ['Footer_1', { siteId: '185770' }],
	    ['Header_1', { siteId: '185774', hvSiteId: '404607' }],
	    ['Interstitial_1', { siteId: '631834' }],
	    ['Recipe_1', { siteId: '185776' }],
	    ['Recipe_2', { siteId: '185777', hvSiteId: '404609' }],
	    ['Recipe_3', { siteId: '304909' }],
	    ['Recipe_4', { siteId: '371523', hvSiteId: '404611' }],
	    ['Sidebar_1', { siteId: '185787' }],
	    ['Sidebar_2', { siteId: '185788' }],
	    ['Sidebar_3', { siteId: '185789' }],
	    ['Sidebar_4', { siteId: '185790' }],
	    ['Sidebar_5', { siteId: '185791' }],
	    ['Sidebar_9', { siteId: '185795' }],
	    ['Video_StickyOutstream_1', { siteId: '745167' }],
	]);
	const map$2 = new Map([
	    [
	        'Below_Post_1',
	        [
	            { size: [728, 90], id: '1_1' },
	            { size: [300, 250], id: '1_2' },
	        ],
	    ],
	    [
	        'Content_1',
	        [
	            { size: [728, 90], id: '3_1' },
	            { size: [300, 250], id: '3_2' },
	            { size: [320, 50], id: '3_4' },
	            { size: [320, 100], id: '3_5' },
	            { size: [300, 50], id: '3_6' },
	        ],
	    ],
	    [
	        'Content_2',
	        [
	            { size: [728, 90], id: '4_1' },
	            { size: [300, 250], id: '4_2' },
	            { size: [320, 50], id: '4_4' },
	            { size: [320, 100], id: '4_5' },
	            { size: [300, 50], id: '4_6' },
	        ],
	    ],
	    [
	        'Content_3',
	        [
	            { size: [300, 250], id: '5_1' },
	            { size: [320, 50], id: '5_2' },
	            { size: [320, 100], id: '5_3' },
	            { size: [300, 50], id: '5_4' },
	        ],
	    ],
	    [
	        'Content_4',
	        [
	            { size: [300, 250], id: '6_1' },
	            { size: [320, 50], id: '6_2' },
	            { size: [320, 100], id: '6_3' },
	            { size: [300, 50], id: '6_4' },
	        ],
	    ],
	    [
	        'Content_5',
	        [
	            { size: [300, 250], id: '7_1' },
	            { size: [320, 50], id: '7_2' },
	            { size: [320, 100], id: '7_3' },
	            { size: [300, 50], id: '7_4' },
	        ],
	    ],
	    [
	        'Content_6',
	        [
	            { size: [300, 250], id: '8_1' },
	            { size: [320, 50], id: '8_2' },
	            { size: [320, 100], id: '8_3' },
	            { size: [300, 50], id: '8_4' },
	        ],
	    ],
	    [
	        'Content_7',
	        [
	            { size: [300, 250], id: '9_1' },
	            { size: [320, 50], id: '9_2' },
	            { size: [300, 50], id: '9_3' },
	        ],
	    ],
	    [
	        'Content_8',
	        [
	            { size: [300, 250], id: '10_1' },
	            { size: [320, 50], id: '10_2' },
	            { size: [300, 50], id: '10_3' },
	        ],
	    ],
	    [
	        'Content_9',
	        [
	            { size: [300, 250], id: '11_1' },
	            { size: [320, 50], id: '11_2' },
	            { size: [300, 50], id: '11_3' },
	        ],
	    ],
	    [
	        'Footer_1',
	        [
	            { size: [728, 90], id: '12_1' },
	            { size: [970, 90], id: '12_2' },
	            { size: [320, 50], id: '12_3' },
	            { size: [320, 100], id: '12_4' },
	            { size: [300, 50], id: '12_5' },
	        ],
	    ],
	    [
	        'Header_1',
	        [
	            { size: [728, 90], id: '15_1' },
	            { size: [970, 90], id: '15_2' },
	            { size: [970, 250], id: '15_3' },
	            { size: [320, 50], id: '15_4' },
	            { size: [320, 100], id: '15_5' },
	            { size: [300, 50], id: '15_6' },
	        ],
	    ],
	    [
	        'Interstitial_1',
	        [
	            { size: [300, 600], id: '36_1' },
	            { size: [336, 280], id: '36_2' },
	            { size: [320, 480], id: '36_3' },
	            { size: [300, 250], id: '36_4' },
	            { size: [320, 50], id: '36_5' },
	        ],
	    ],
	    [
	        'Recipe_1',
	        [
	            { size: [300, 250], id: '17_1' },
	            { size: [320, 50], id: '17_3' },
	            { size: [320, 100], id: '17_4' },
	            { size: [300, 50], id: '17_5' },
	        ],
	    ],
	    [
	        'Recipe_2',
	        [
	            { size: [300, 250], id: '18_1' },
	            { size: [320, 50], id: '18_3' },
	            { size: [320, 100], id: '18_4' },
	            { size: [300, 50], id: '18_5' },
	        ],
	    ],
	    [
	        'Recipe_3',
	        [
	            { size: [300, 250], id: '42_1' },
	            { size: [320, 50], id: '42_3' },
	            { size: [320, 100], id: '42_4' },
	            { size: [300, 50], id: '42_5' },
	        ],
	    ],
	    [
	        'Recipe_4',
	        [
	            { size: [300, 250], id: '43_1' },
	            { size: [320, 50], id: '43_3' },
	            { size: [320, 100], id: '43_4' },
	            { size: [300, 50], id: '43_5' },
	        ],
	    ],
	    [
	        'Sidebar_1',
	        [
	            { size: [300, 250], id: '27_1' },
	            { size: [300, 600], id: '27_2' },
	            { size: [300, 1050], id: '27_3' },
	            { size: [160, 600], id: '27_4' },
	            { size: [300, 50], id: '27_5' },
	        ],
	    ],
	    [
	        'Sidebar_2',
	        [
	            { size: [300, 250], id: '28_1' },
	            { size: [300, 600], id: '28_2' },
	            { size: [160, 600], id: '28_3' },
	            { size: [300, 50], id: '28_4' },
	        ],
	    ],
	    [
	        'Sidebar_3',
	        [
	            { size: [300, 250], id: '29_1' },
	            { size: [300, 600], id: '29_2' },
	            { size: [160, 600], id: '29_3' },
	            { size: [300, 50], id: '29_4' },
	        ],
	    ],
	    [
	        'Sidebar_4',
	        [
	            { size: [300, 250], id: '30_1' },
	            { size: [300, 600], id: '30_2' },
	            { size: [160, 600], id: '30_3' },
	            { size: [300, 50], id: '30_4' },
	        ],
	    ],
	    [
	        'Sidebar_5',
	        [
	            { size: [300, 250], id: '31_1' },
	            { size: [300, 600], id: '31_2' },
	            { size: [160, 600], id: '31_3' },
	            { size: [300, 50], id: '31_4' },
	        ],
	    ],
	    [
	        'Sidebar_9',
	        [
	            { size: [300, 250], id: '35_1' },
	            { size: [300, 600], id: '35_2' },
	            { size: [300, 1050], id: '35_3' },
	            { size: [160, 600], id: '35_4' },
	            { size: [300, 50], id: '35_5' },
	        ],
	    ],
	    [
	        'Video_StickyOutstream_1',
	        [
	            { size: [300, 250], id: '48_1', sizeOverride: [227, 150] },
	            { size: [320, 50], id: '48_2', sizeOverride: [178, 100] },
	        ],
	    ],
	]);
	const videoMap$1 = new Map([
	    [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [{ size: [640, 360], siteId: '185255', id: '44_1' }]],
	    [VideoAdUnit.Video_Coll_SOff_Smartphone, [{ size: [400, 225], siteId: '321341', id: '45_1' }]],
	    [
	        VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	        [
	            { size: [640, 360], siteId: '385287', device: 'desktop', id: '46_1' },
	            { size: [400, 225], siteId: '385288', device: 'mobile', id: '46_2' },
	        ],
	    ],
	    [
	        VideoAdUnit.Video_Individual_Autoplay_SOff,
	        [
	            { size: [640, 360], siteId: '385285', device: 'desktop', id: '47_1' },
	            { size: [400, 225], siteId: '385286', device: 'mobile', id: '47_2' },
	        ],
	    ],
	]);

	let IndexExchangeBidder = class IndexExchangeBidder extends Bidder {
	    constructor(_config, _prebidMethods) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._bidderName = 'ix';
	        this.bidderConfig = this._config.partners.getBidderConfig(this._bidderName);
	    }
	    get enabled() {
	        return this._config.partners.indexExchange;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.indexExchange;
	    }
	    init() {
	        const referrer = getReferrer();
	        const config = this._config;
	        const site = config.site;
	        const verticals = [...site.verticals].filter(filterUnique);
	        const filteredSensitiveCategories = site.filteredSensitiveCategories;
	        const firstPartyData = {
	            PD: `${config.adOptions.pmp ? '' : 'no'}${config.context.device}`,
	            ...(verticals.length && { Topic: verticals.join('#Topic:') }),
	            ...(filteredSensitiveCategories.length && {
	                Sens: filteredSensitiveCategories.join('#Sens:'),
	            }),
	            Source: standardizeTrafficSources(referrer),
	            Browser: getBrowserName(),
	            vp: '0',
	        };
	        setIXFirstPartyData(firstPartyData, this._prebidMethods);
	    }
	    getVideoBidRequests(_videos) {
	        const videosReducer = (bids, jwPlayer) => {
	            const sizeSiteMapper = (value) => {
	                const { siteId, id, size } = value.sizeSite;
	                const prebidRequest = this.getPrebidAdUnitBidRequest(siteId, id, size, false);
	                prebidRequest.params.video = this.getVideoParams(jwPlayer.name);
	                return prebidRequest;
	            };
	            const mappedVideoSiteSizes = this.getVideoSizeSites(_videos)
	                .filter(videoSizeSite => videoSizeSite.video === jwPlayer)
	                .map(sizeSiteMapper);
	            return bids.set(jwPlayer.name, mappedVideoSiteSizes);
	        };
	        return _videos.reduce(videosReducer, new Map());
	    }
	    getBidRequests(slots) {
	        return slots.reduce((bids, slot) => {
	            const slotSiteId = siteIdsMap.get(slot.placementMapName);
	            if (!slotSiteId) {
	                return bids;
	            }
	            const slotSizeIdReducer = (adUnitBids, { sizeId: { id, size } }) => {
	                const handleHvSiteId = () => {
	                    const hvAdUnitBid = this.getPrebidAdUnitBidRequest(slotSiteId.hvSiteId, id, size, slot.location === 'Video_StickyOutstream');
	                    adUnitBids.push(hvAdUnitBid);
	                };
	                if (slotSiteId.hvSiteId && isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold)) {
	                    handleHvSiteId();
	                }
	                adUnitBids.push(this.getPrebidAdUnitBidRequest(slotSiteId.siteId, id, size, slot.location === 'Video_StickyOutstream'));
	                return adUnitBids;
	            };
	            return bids.set(slot.id, this.getSlotSizeIds(slots)
	                .filter((slotSizeId) => slotSizeId.slot === slot)
	                .reduce(slotSizeIdReducer, []));
	        }, new Map());
	    }
	    getVideoParams(jwPlayerName, additionalConfig) {
	        const videoConfig = { ...this._config.video, ...additionalConfig };
	        const videoPlaybackMethod = videoConfig.playbackmethod && videoConfig.playbackmethod.get(jwPlayerName);
	        const playbackMethodMap = new Map([
	            [3, [3]],
	            [6, [2]],
	        ]);
	        const addPlaybackMethod = videoPlaybackMethod && {
	            playbackmethod: playbackMethodMap.get(videoPlaybackMethod[0]),
	        };
	        return {
	            api: videoConfig.apiValue,
	            mimes: videoConfig.mimeType,
	            ...addPlaybackMethod,
	            minduration: 0,
	            maxduration: 30,
	            protocols: videoConfig.videoProtocols.protocols,
	            pos: videoConfig.position.id,
	        };
	    }
	    getPrebidAdUnitBidRequest(siteId, id, size, isStickyOutstream) {
	        return {
	            bidder: this._bidderName,
	            params: {
	                id,
	                siteId,
	                ...(isStickyOutstream ? { video: {} } : { size }),
	            },
	        };
	    }
	    getSlotSizeIds(slots) {
	        const slotSizeIdReducer = (slotSizeSites, slot) => {
	            const filteredAdUnitMap = map$2
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(sizeId => ({ slot, sizeId }));
	            return [...slotSizeSites, ...filteredAdUnitMap];
	        };
	        return slots.filter(slot => map$2.has(slot.placementMapName)).reduce(slotSizeIdReducer, []);
	    }
	    getVideoSizeSites(videoPlayers) {
	        const deviceType = isDesktop() ? 'desktop' : 'mobile';
	        const videoSiteSizesReducer = (videoSizeSites, video) => {
	            const videoSiteSizesFilter = ({ device, size }, index, array) => (!device || (device && device === deviceType)) && video.size[0] === size[0] && video.size[1] === size[1];
	            const filteredVideoAdUnitMap = videoMap$1
	                .get(video.name)
	                .filter(videoSiteSizesFilter)
	                .map(sizeSite => ({
	                video,
	                sizeSite,
	            }));
	            return [...videoSizeSites, ...filteredVideoAdUnitMap];
	        };
	        return videoPlayers.filter(videoPlayer => videoMap$1.has(videoPlayer.name)).reduce(videoSiteSizesReducer, []);
	    }
	};
	IndexExchangeBidder = __decorate([
	    log('IndexExchangeBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods])
	], IndexExchangeBidder);

	const [desktop, content, sidebar, header] = ['desktop', 'content', 'sidebar', 'header'];
	const placementMap = {
	    desktop: {
	        content: { placementId: '_mfu14jCkaN', size: [300, 250] },
	        header: { placementId: '_vzS4k9rMKu', size: [728, 90] },
	        sidebar: { placementId: '_zxmQwsW17E', size: [300, 600] },
	    },
	};
	const desktopMap = new Map([
	    ['Below_Post_1', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_1', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_2', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_3', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_4', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_5', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_6', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_7', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_8', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Content_9', [placementMap[desktop][content], placementMap[desktop][header]]],
	    ['Header_1', [placementMap[desktop][header], placementMap[desktop][content]]],
	    ['Header_2', [placementMap[desktop][header], placementMap[desktop][content]]],
	    ['Recipe_1', [placementMap[desktop][content]]],
	    ['Recipe_2', [placementMap[desktop][content]]],
	    ['Recipe_3', [placementMap[desktop][content]]],
	    ['Recipe_4', [placementMap[desktop][content]]],
	    ['Recipe_5', [placementMap[desktop][content]]],
	    ['Sidebar_1', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	    ['Sidebar_2', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	    ['Sidebar_3', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	    ['Sidebar_4', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	    ['Sidebar_5', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	    ['Sidebar_9', [placementMap[desktop][sidebar], placementMap[desktop][content]]],
	]);
	const adOptionsMap = new Map([
	    ['10000', { id: '_htv2gWQDl4', isOutstream: false }],
	    ['11000', { id: '_rEapvpk6cZ', isOutstream: true }],
	    ['11100', { id: '_hDLFEUkifu', isOutstream: true }],
	    ['10100', { id: '_kEvPWSnblw', isOutstream: false }],
	    ['00011', { id: '_hRaLC9FgYn', isOutstream: false }],
	    ['00010', { id: '_iyznbek6ki', isOutstream: false }],
	    ['00001', { id: '_g1dEyYpnCU', isOutstream: false }],
	]);
	const bannerMap = [
	    'Below_Post_1',
	    'Content_1',
	    'Content_2',
	    'Content_3',
	    'Content_4',
	    'Content_5',
	    'Content_5',
	    'Content_6',
	    'Content_7',
	    'Content_8',
	    'Content_9',
	    'Header_1',
	    'Header_2',
	    'Recipe_1',
	    'Recipe_2',
	    'Recipe_3',
	    'Recipe_4',
	    'Sidebar_1',
	    'Sidebar_2',
	    'Sidebar_3',
	    'Sidebar_4',
	    'Sidebar_5',
	    'Sidebar_9',
	];
	const interscrollerMap = ['Below_Post_1', 'Content_1'];
	const map$1 = { desktop: desktopMap, mobile: null };
	const outstreamMap = ['Below_Post_1', 'Content_1', 'Content_3', 'Content_5', 'Recipe_1 '];

	let KargoBidder = class KargoBidder extends Bidder {
	    constructor(adthrive, _config, _mediaType) {
	        super();
	        this.adthrive = adthrive;
	        this._config = _config;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('kargo');
	        const device = isMobile() ? 'mobile' : 'desktop';
	        this._map = map$1[device];
	    }
	    get enabled() {
	        return this._config.partners.kargo;
	    }
	    createBitStringAdOptions(slot) {
	        const has300x250 = slot.hasSize([300, 250]);
	        const has320x50 = slot.hasSize([320, 50]);
	        const bitStringAdOptions = [
	            +this.isBanner(slot, has300x250, has320x50),
	            +this.isOutstream(slot, has300x250),
	            +this.isInterscroller(slot),
	            +this.isAnimatedFooter(slot, has320x50),
	            +this.isExpandableFooter(slot, has320x50),
	        ].join('');
	        return bitStringAdOptions;
	    }
	    isBanner(slot, has300x250, has320x50) {
	        return has300x250 && has320x50 && bannerMap.indexOf(slot.placementMapName) !== -1;
	    }
	    isOutstream(slot, has300x250) {
	        return has300x250 && outstreamMap.indexOf(slot.placementMapName) !== -1 && this._mediaType.outstreamEnabled(slot).outstreamCapable;
	    }
	    isInterscroller(slot) {
	        return this._config.adTypes.has('interscroller') && interscrollerMap.indexOf(slot.placementMapName) !== -1;
	    }
	    isAnimatedFooter(slot, has320x50) {
	        return has320x50 && this._config.adTypes.has('animatedFooter') && slot.placementMapName === 'Footer_1';
	    }
	    isExpandableFooter(slot, has320x50) {
	        return has320x50 && this._config.adTypes.has('expandableFooter') && slot.placementMapName === 'Footer_1';
	    }
	    getSlotBidRequests(slot) {
	        if (!this._map) {
	            const bitStringAdOptions = this.createBitStringAdOptions(slot);
	            if (adOptionsMap.has(bitStringAdOptions)) {
	                const placementObject = adOptionsMap.get(bitStringAdOptions);
	                return [
	                    {
	                        bidder: this.name,
	                        ...this.getLabels(placementObject.isOutstream, slot.placementMapName),
	                        params: {
	                            placementId: placementObject.id,
	                        },
	                    },
	                ];
	            }
	        }
	        else if (this._map && this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ adType, mobileCollapsePlayer, size }) => (!adType || this._config.adTypes.has(adType)) &&
	                (!mobileCollapsePlayer || !this._config.video.mobileStickyPlayerOnPage) &&
	                slot.hasSize(size))
	                .map(({ placementId }) => {
	                return {
	                    bidder: this.name,
	                    params: {
	                        placementId,
	                    },
	                };
	            });
	        }
	    }
	    getLabels(isOutstream, placementMapName) {
	        const labels = [];
	        if (isOutstream) {
	            labels.push(`outstreamEnabled_${placementMapName}`);
	        }
	        return labels.length ? { labelAny: labels } : {};
	    }
	};
	KargoBidder = __decorate([
	    log('KargoBidder'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, Config, MediaType])
	], KargoBidder);

	let MediaGridBidder = class MediaGridBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('grid');
	        this.settings = {
	            bidCpmAdjustment: (bidCpm, bidResponse) => this._getCPMAdjustment(bidCpm, bidResponse),
	            adserverTargeting: [
	                {
	                    key: 'hb_format',
	                    val: (bidResponse) => bidResponse && bidResponse.meta && bidResponse.meta.demandSource === 'trustx' ? `trustx_${bidResponse.mediaType}` : bidResponse.mediaType,
	                },
	            ],
	        };
	        this._getCPMAdjustment = (bidCpm, bidResponse) => {
	            const dealId = bidResponse.dealId;
	            const isTrustxOutstreamBid = ('vastUrl' in bidResponse || 'vastXml' in bidResponse) && dealId && dealId.toString().indexOf('G-TRUSTX') > -1;
	            return adjustCpmFromBidResponse(this._config, bidCpm, 'grid', {
	                ...bidResponse,
	                ...(isTrustxOutstreamBid && { dealId: undefined }),
	            });
	        };
	        this._map = new Map([
	            ['Below_Post_1', 357],
	            ['Content_1', 358],
	            ['Content_2', 359],
	            ['Content_3', 360],
	            ['Content_4', 361],
	            ['Content_5', 362],
	            ['Content_6', 363],
	            ['Content_7', 364],
	            ['Content_8', 365],
	            ['Content_9', 366],
	            ['Footer_1', 367],
	            ['Header_1', 368],
	            ['Header_2', 369],
	            ['Interstitial_1', 48428],
	            ['Recipe_1', 370],
	            ['Recipe_2', 371],
	            ['Recipe_3', 372],
	            ['Recipe_4', 373],
	            ['Sidebar_1', 375],
	            ['Sidebar_2', 376],
	            ['Sidebar_3', 377],
	            ['Sidebar_4', 378],
	            ['Sidebar_5', 379],
	            ['Sidebar_9', 380],
	            ['Video_StickyOutstream_1', 133519],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.mediaGrid;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        uid: this._map.get(slot.placementMapName),
	                    },
	                },
	            ];
	        }
	    }
	};
	MediaGridBidder = __decorate([
	    log('MediaGridBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], MediaGridBidder);

	let MediaGridVideoBidder = class MediaGridVideoBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('gridvid');
	        this.adapterName = 'grid';
	        this._map = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [{ uid: 2163 }]],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, [{ uid: 2165 }]],
	            [
	                VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	                [
	                    { device: 'desktop', uid: 2164 },
	                    { device: 'mobile', uid: 6056 },
	                ],
	            ],
	            [
	                VideoAdUnit.Video_Individual_Autoplay_SOff,
	                [
	                    { device: 'desktop', uid: 2166 },
	                    { device: 'mobile', uid: 6057 },
	                ],
	            ],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.mediaGridVideo;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.mediaGridVideo;
	    }
	    getVideoSlotBidRequests(_video) {
	        const deviceType = isDesktop() ? 'desktop' : 'mobile';
	        if (this._map.has(_video.name)) {
	            return this._map
	                .get(_video.name)
	                .filter(({ device }) => !device || device === deviceType)
	                .map(({ uid }) => {
	                return {
	                    bidder: this.name,
	                    params: {
	                        uid,
	                    },
	                };
	            });
	        }
	    }
	};
	MediaGridVideoBidder = __decorate([
	    log('MediaGridVideoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], MediaGridVideoBidder);

	let NativoBidder = class NativoBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('nativo');
	        this.adapterName = 'nativo';
	        this._map = new Set(['Content_1', 'Content_2', 'Recipe_1', 'Recipe_2', 'Sidebar_1', 'Sidebar_2']);
	    }
	    get enabled() {
	        return this._config.partners.nativo;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {},
	                },
	            ];
	        }
	    }
	};
	NativoBidder = __decorate([
	    log('NativoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], NativoBidder);

	let OpenXBidder = class OpenXBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('openx');
	        this._params = {
	            delDomain: 'cafemedia-d.openx.net',
	        };
	        this._highImpactParamsMap = new Map([['Content_1', ['interscroller', 'miniscroller']]]);
	        this._map = new Map([
	            ['Below_Post_1', '538699862'],
	            ['Content_1', '538699864'],
	            ['Content_2', '538699865'],
	            ['Content_3', '538699866'],
	            ['Content_4', '538699867'],
	            ['Content_5', '538699868'],
	            ['Content_6', '538699869'],
	            ['Content_7', '538699870'],
	            ['Content_8', '538699871'],
	            ['Content_9', '538699872'],
	            ['Footer_1', '538699840'],
	            ['Header_1', '538699873'],
	            ['Header_2', '538699874'],
	            ['Interstitial_1', '543876568'],
	            ['Recipe_1', '538699843'],
	            ['Recipe_2', '538699844'],
	            ['Recipe_3', '540594416'],
	            ['Recipe_4', '540751624'],
	            ['Sidebar_1', '538699853'],
	            ['Sidebar_2', '538699854'],
	            ['Sidebar_3', '538699855'],
	            ['Sidebar_4', '538699856'],
	            ['Sidebar_5', '538699857'],
	            ['Sidebar_9', '538699861'],
	            ['Video_StickyOutstream_1', '545721971'],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, '540679731'],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, '540679733'],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, '540679727'],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, '540925853'],
	        ]);
	        this._custParams = {
	            ...(this._config.site.filteredSensitiveCategories.length && {
	                sens: this._config.site.filteredSensitiveCategories,
	            }),
	            bucket: [this._config.context.bucket],
	        };
	    }
	    get enabled() {
	        return this._config.partners.openx;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.openx;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            const highImpactParams = this._highImpactParamsMap.get(slot.placementMapName) || [];
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params,
	                        unit: this._map.get(slot.placementMapName),
	                        customParams: {
	                            ...this._custParams,
	                            hi_au: highImpactParams.filter(adTypeName => this._config.adTypes[adTypeName]),
	                        },
	                    },
	                },
	            ];
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        var _a;
	        if (this._map.has(_video.name)) {
	            const protocolsParam = this._config.video.videoProtocols.scope === 'all' ? { protocols: this._config.video.videoProtocols.protocols } : '';
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params,
	                        unit: this._map.get(_video.name),
	                        video: {
	                            mimes: this._config.video.mimeType,
	                            api: this._config.video.apiValue,
	                            ...protocolsParam,
	                            pos: this._config.video.position.id,
	                            ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) && {
	                                playbackmethod: this._config.video.playbackmethod.get(_video.name),
	                            }),
	                        },
	                    },
	                },
	            ];
	        }
	    }
	};
	OpenXBidder = __decorate([
	    log('OpenXBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], OpenXBidder);

	let IrisTv = class IrisTv {
	    constructor() {
	        this.segmentName = 'www.iris.tv';
	        this.segtax = 501;
	        this._irisEndpoint = 'https://context.iris.tv/video_info';
	        this._token = '5d8f38ad6d7de4253cfa501b84c30b1014868d9884be5d68dc64bd50a6edb54c';
	        this._clientToken = 'EXJQESR8SMWMZCJ';
	    }
	    fetchIrisResponse(playerId) {
	        return getJSON(`${this._irisEndpoint}?access_token=${this._token}&client_token=${this._clientToken}&platform_id=${playerId}`);
	    }
	    async setContextualData(playerId) {
	        return this.fetchIrisResponse(playerId)
	            .then(result => {
	            if (result && typeof result !== 'boolean') {
	                const videoInfo = result.video_info;
	                const context = videoInfo && videoInfo.context;
	                if (context && context.length) {
	                    this._contextualData = context;
	                    this._irisId = videoInfo.iris_id;
	                }
	            }
	            return true;
	        })
	            .catch(() => false);
	    }
	    get irisContextualData() {
	        return this._contextualData;
	    }
	    get irisId() {
	        return this._irisId;
	    }
	};
	IrisTv = __decorate([
	    singleton()
	], IrisTv);

	let PubMaticBidder = class PubMaticBidder extends Bidder {
	    constructor(_config, _irisTv) {
	        super();
	        this._config = _config;
	        this._irisTv = _irisTv;
	        this.bidderConfig = this._config.partners.getBidderConfig('pubmatic');
	        this.adapterName = 'pubmatic';
	        this.serverBidderName = 'pubm_ss';
	        this.pubId = '157347';
	        this._map = new Map([
	            ['Below_Post_1', { client: 'BelowPost1', server: 'BelowPost1_XandrS2S' }],
	            ['Content_1', { client: 'Content1', server: 'Content1_XandrS2S' }],
	            ['Content_2', { client: 'Content2', server: 'Content2_XandrS2S' }],
	            ['Content_3', { client: 'Content3', server: 'Content3_XandrS2S' }],
	            ['Content_4', { client: 'Content4', server: 'Content4_XandrS2S' }],
	            ['Content_5', { client: 'Content5', server: 'Content5_XandrS2S' }],
	            ['Content_6', { client: 'Content6', server: 'Content6_XandrS2S' }],
	            ['Content_7', { client: 'Content7', server: 'Content7_XandrS2S' }],
	            ['Content_8', { client: 'Content8', server: 'Content8_XandrS2S' }],
	            ['Content_9', { client: 'Content9', server: 'Content9_XandrS2S' }],
	            ['Footer_1', { client: 'Footer1', server: 'Footer1_XandrS2S' }],
	            ['Header_1', { client: 'Header1', server: 'Header1_XandrS2S' }],
	            ['Header_2', { client: 'Header2', server: 'Header2_XandrS2S' }],
	            ['Interstitial_1', { client: 'interstitial', server: 'interstitial_XandrS2S' }],
	            ['Recipe_1', { client: 'Recipe1', server: 'Recipe1_XandrS2S' }],
	            ['Recipe_2', { client: 'Recipe2', server: 'Recipe2_XandrS2S' }],
	            ['Recipe_3', { client: 'Recipe3', server: 'Recipe3_XandrS2S' }],
	            ['Recipe_4', { client: 'Recipe4', server: 'Recipe4_XandrS2S' }],
	            ['Sidebar_1', { client: 'Sidebar1', server: 'Sidebar1_XandrS2S' }],
	            ['Sidebar_2', { client: 'Sidebar2', server: 'Sidebar2_XandrS2S' }],
	            ['Sidebar_3', { client: 'Sidebar3', server: 'Sidebar3_XandrS2S' }],
	            ['Sidebar_4', { client: 'Sidebar4', server: 'Sidebar4_XandrS2S' }],
	            ['Sidebar_5', { client: 'Sidebar5', server: 'Sidebar5_XandrS2S' }],
	            ['Sidebar_9', { client: 'Sidebar9', server: 'Sidebar9_XandrS2S' }],
	            ['Video_StickyOutstream_1', { client: '2267845', server: '4018943' }],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, { client: '1961309', server: '3437231' }],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, { client: '1961310', server: '3437234' }],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, { client: '1961308', server: '3437232' }],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, { client: '2503033', server: '3443766' }],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.pubMatic;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.pubMatic;
	    }
	    getSlotBidRequests(slot) {
	        const bids = [];
	        if (this._map.has(slot.placementMapName)) {
	            bids.push(this.getBidParams(this.name, this._map.get(slot.placementMapName).client, slot));
	            bids.push(this.getBidParams(this.serverBidderName, this._map.get(slot.placementMapName).server, slot));
	        }
	        return bids;
	    }
	    getBidParams(name, adSlot, slot) {
	        return {
	            bidder: name,
	            params: {
	                publisherId: this.pubId,
	                adSlot: `${adSlot}@${slot.sizes[0][0]}x${slot.sizes[0][1]}`,
	                ...(this._config.site.filteredSensitiveCategories.length && {
	                    pmzoneid: this._config.site.filteredSensitiveCategories.join(','),
	                }),
	            },
	        };
	    }
	    getVideoSlotBidRequests(_video) {
	        const bids = [];
	        if (this._map.has(_video.name)) {
	            bids.push(this.getVideoBidParams(this.name, this._map.get(_video.name).client, _video));
	            bids.push(this.getVideoBidParams(this.serverBidderName, this._map.get(_video.name).server, _video));
	        }
	        return bids;
	    }
	    getDCTRParam(name) {
	        const dctr = [];
	        const irisContextual = this._irisTv.irisContextualData;
	        if (irisContextual && irisContextual.length) {
	            dctr.push(`iris_context=${irisContextual.toString()}`);
	        }
	        return dctr.join('|');
	    }
	    getVideoBidParams(name, adSlot, _video) {
	        var _a;
	        const dctr = this.getDCTRParam(name);
	        return {
	            bidder: name,
	            params: {
	                publisherId: this.pubId,
	                ...(dctr && {
	                    dctr,
	                }),
	                video: {
	                    mimes: this._config.video.mimeType,
	                    api: this._config.video.apiValue,
	                    ...(this._config.video.videoProtocols.scope === 'all' && {
	                        protocols: this._config.video.videoProtocols.protocols,
	                    }),
	                    ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) && {
	                        playbackmethod: this._config.video.playbackmethod.get(_video.name),
	                    }),
	                },
	                adSlot: `${adSlot}@${_video.size[0]}x${_video.size[1]}`,
	                ...(this._config.site.filteredSensitiveCategories.length && {
	                    pmzoneid: this._config.site.filteredSensitiveCategories.join(','),
	                }),
	            },
	        };
	    }
	};
	PubMaticBidder = __decorate([
	    log('PubMaticBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, IrisTv])
	], PubMaticBidder);

	let RoundelBidder = class RoundelBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('roundel');
	        this.adapterName = 'ix';
	        this._params = {
	            siteId: '377190',
	        };
	        this._map = new Map([
	            ['Below_Post_1', [{ size: [728, 90] }, { size: [300, 250] }]],
	            ['Content_1', [{ size: [728, 90] }, { size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_2', [{ size: [728, 90] }, { size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_3', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_4', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_5', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_6', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_7', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_8', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Content_9', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Header_1', [{ size: [728, 90] }, { size: [970, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Header_2', [{ size: [728, 90] }, { size: [970, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Footer_1', [{ size: [728, 90] }, { size: [970, 90] }, { size: [320, 50] }, { size: [320, 100] }, { size: [300, 50] }]],
	            ['Recipe_1', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Recipe_2', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Recipe_3', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Recipe_4', [{ size: [300, 250] }, { size: [320, 50] }, { size: [300, 50] }]],
	            ['Sidebar_1', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	            ['Sidebar_2', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	            ['Sidebar_3', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	            ['Sidebar_4', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	            ['Sidebar_5', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	            ['Sidebar_9', [{ size: [300, 250] }, { size: [300, 600] }, { size: [160, 600] }]],
	        ]);
	        this._videoMap = new Map([
	            [
	                VideoAdUnit.Video_Collapse_Autoplay_SoundOff,
	                [
	                    {
	                        size: [640, 360],
	                        siteId: '485376',
	                        device: 'desktop',
	                    },
	                ],
	            ],
	            [
	                VideoAdUnit.Video_Coll_SOff_Smartphone,
	                [
	                    {
	                        size: [400, 225],
	                        siteId: '485377',
	                        device: 'mobile',
	                    },
	                ],
	            ],
	            [
	                VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	                [
	                    {
	                        size: [640, 360],
	                        siteId: '485380',
	                        device: 'desktop',
	                    },
	                    {
	                        size: [400, 225],
	                        siteId: '485381',
	                        device: 'mobile',
	                    },
	                ],
	            ],
	            [
	                VideoAdUnit.Video_Individual_Autoplay_SOff,
	                [
	                    {
	                        size: [640, 360],
	                        siteId: '485378',
	                        device: 'desktop',
	                    },
	                    {
	                        size: [400, 225],
	                        siteId: '485379',
	                        device: 'mobile',
	                    },
	                ],
	            ],
	        ]);
	        this._playbackmethodMap = new Map([
	            [3, [3]],
	            [6, [2]],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.roundel;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(({ size }) => ({
	                bidder: this.name,
	                ...(slot.viewability < this._config.marmalade.hvThreshold ? { labelAny: ['refresh'] } : {}),
	                params: {
	                    ...this._params,
	                    size,
	                },
	            }));
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        var _a;
	        if (this._videoMap.has(_video.name)) {
	            const deviceType = isDesktop() ? 'desktop' : 'mobile';
	            const params = this._videoMap
	                .get(_video.name)
	                .filter(unit => unit.device === deviceType)
	                .map(({ device, ...rest }) => rest)[0];
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...params,
	                        video: {
	                            mimes: this._config.video.mimeType,
	                            ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) && {
	                                playbackmethod: this._playbackmethodMap.get(this._config.video.playbackmethod.get(_video.name)[0]),
	                            }),
	                            api: this._config.video.apiValue,
	                            minduration: 0,
	                            maxduration: 30,
	                            protocols: this._config.video.videoProtocols.protocols,
	                        },
	                    },
	                },
	            ];
	        }
	    }
	};
	RoundelBidder = __decorate([
	    log('RoundelBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], RoundelBidder);

	let RubiconBidder = class RubiconBidder extends Bidder {
	    constructor(_config, _rubiconExperiment) {
	        super();
	        this._config = _config;
	        this._rubiconExperiment = _rubiconExperiment;
	        this.bidderConfig = this._config.partners.getBidderConfig('rubicon');
	        this.adapterName = 'rubicon';
	        this.serverBidderName = 'rubi_ss';
	        this._bidders = [];
	        this._map = new Map([
	            ['Below_Post_1', { client: 881394, server: 1974272 }],
	            ['Content_1', { client: 881398, server: 1974276 }],
	            ['Content_2', { client: 881400, server: 1974280 }],
	            ['Content_3', { client: 881402, server: 1974282 }],
	            ['Content_4', { client: 881404, server: 1974284 }],
	            ['Content_5', { client: 881406, server: 1974286 }],
	            ['Content_6', { client: 881408, server: 1974288 }],
	            ['Content_7', { client: 881410, server: 1974290 }],
	            ['Content_8', { client: 881412, server: 1974292 }],
	            ['Content_9', { client: 881414, server: 1974294 }],
	            ['Footer_1', { client: 881416, server: 1974296 }],
	            ['Header_1', { client: 881422, server: 1974304 }],
	            ['Header_2', { client: 881426, server: 1974306 }],
	            ['Interstitial_1', { client: 1979348, server: 1979354 }],
	            ['Recipe_1', { client: 881428, server: 1974308 }],
	            ['Recipe_2', { client: 881430, server: 1974310 }],
	            ['Recipe_3', { client: 1187188, server: 1974312 }],
	            ['Recipe_4', { client: 1279328, server: 1974314 }],
	            ['Sidebar_1', { client: 881440, server: 1974316 }],
	            ['Sidebar_2', { client: 881454, server: 1974318 }],
	            ['Sidebar_3', { client: 881460, server: 1974320 }],
	            ['Sidebar_4', { client: 881462, server: 1974322 }],
	            ['Sidebar_5', { client: 881466, server: 1974324 }],
	            ['Sidebar_9', { client: 881478, server: 1974332 }],
	            ['Video_StickyOutstream_1', { client: 2150398, server: 2150396 }],
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, { client: 1259006, server: 2055644 }],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, { client: 1259010, server: 2055648 }],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, { client: 1259008, server: 2055642 }],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, { client: 1506800, server: 2055646 }],
	        ]);
	        const clientEnabled = this._rubiconExperiment.result === 'both' || this._rubiconExperiment.result === 'client';
	        const serverEnabled = this._rubiconExperiment.result === 'both' || this._rubiconExperiment.result === 'server';
	        if (serverEnabled) {
	            this._bidders.push({ name: this.serverBidderName, type: 'server' });
	        }
	        if (clientEnabled) {
	            this._bidders.push({ name: this.name, type: 'client' });
	        }
	    }
	    getDisplayParams(type, location) {
	        const siteId = {
	            server: 363698,
	            client: 180726,
	        };
	        return {
	            accountId: 9262,
	            siteId: location === 'Video_StickyOutstream' ? 386004 : siteId[type],
	            ...(location === 'Video_StickyOutstream' && {
	                video: { language: 'en' },
	            }),
	        };
	    }
	    getVideoParams(type) {
	        const siteId = {
	            server: 375144,
	            client: 253996,
	        };
	        return {
	            accountId: 9262,
	            siteId: siteId[type],
	            video: {
	                language: 'en',
	            },
	        };
	    }
	    get enabled() {
	        return this._config.partners.rubicon;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.rubicon;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._bidders.map(bidder => {
	                const isHV = isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold);
	                return {
	                    bidder: bidder.name,
	                    params: {
	                        ...this.getDisplayParams(bidder.type, slot.location),
	                        zoneId: this._map.get(slot.placementMapName)[bidder.type],
	                        ...(isHV && { position: 'atf' }),
	                    },
	                };
	            });
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            return this._bidders.map(bidder => {
	                return {
	                    bidder: bidder.name,
	                    params: {
	                        ...this.getVideoParams(bidder.type),
	                        zoneId: this._map.get(_video.name)[bidder.type],
	                    },
	                };
	            });
	        }
	    }
	    updateBidParams(slot, _adUnit, bid) {
	        if (slot.refreshCount === 1) {
	            bid.params.position = 'atf';
	        }
	        return bid;
	    }
	};
	RubiconBidder = __decorate([
	    log('RubiconBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, RubiconExperiment])
	], RubiconBidder);

	const map = new Map([
	    [
	        'Below_Post_1',
	        [
	            { size: [300, 250], pkey: '7SbWFfJm2dn10YEIuTIpKDME' },
	            { size: [728, 90], pkey: 'rcC1EVV27zshgwZefZtMMbQH' },
	            { size: [320, 50], pkey: 'T7Qor0zFsfzE8d0WArpJPwQX' },
	            { size: [336, 280], pkey: 'WoVFJAUvQg9oowjifOQLhHfb' },
	        ],
	    ],
	    [
	        'Content_1',
	        [
	            { size: [300, 250], pkey: 'Hqhk8OQEu54TMfika2qbQjZe' },
	            { size: [728, 90], pkey: 'Abg2OePLqx4qSJsbvcMFeKMd' },
	            { size: [320, 50], pkey: 'nlcvbONm7a7qbEq1CUb60bDG' },
	            { size: [336, 280], pkey: 'ygZ1JVS7p7SMDBgz7ueGgfVr' },
	            { size: [300, 50], pkey: '9kDU40A4BJXchR7ikuWND5Ui' },
	        ],
	    ],
	    [
	        'Content_2',
	        [
	            { size: [300, 250], pkey: 'h28JMhou2Lu9BYHVipYoXuJC' },
	            { size: [320, 50], pkey: 'jdumKQjHDTttqY113Cyf8Dg5' },
	            { size: [728, 90], pkey: 'zXUbUzaRyn8LyqVmiSSGFcf5' },
	            { size: [300, 50], pkey: 'D3MXJwPThTgUD48ESouRejcn' },
	            { size: [336, 280], pkey: 'ocdg6DMXhAfaTk7KgImuPCPi' },
	        ],
	    ],
	    [
	        'Content_3',
	        [
	            { size: [300, 250], pkey: 'BFOY9pnh071TtzOy9lBjIr2i' },
	            { size: [320, 50], pkey: '96aXzW1FyE1LlnVyOMYuFW7x' },
	            { size: [728, 90], pkey: 'HhDmPHv4VTNzHzcG65kBlpS0' },
	            { size: [300, 50], pkey: 'JQXmRwXj1jOjHCQF8ufXkKIJ' },
	        ],
	    ],
	    [
	        'Content_4',
	        [
	            { size: [300, 250], pkey: 'GA7GQONt3evAWTb7QFsfr4kT' },
	            { size: [320, 50], pkey: 'iN7VUlNOwy5Nem9ve7HCjt1O' },
	            { size: [728, 90], pkey: 'WlK6M3BJTYR6CKgtW4fpeWwc' },
	            { size: [300, 50], pkey: '7DEh5436UHnmeKGzVXQVsvRk' },
	        ],
	    ],
	    [
	        'Content_5',
	        [
	            { size: [300, 250], pkey: 'ZKk36rd21PTfmO81jIh4Yogg' },
	            { size: [320, 50], pkey: 'Dc9sjnVcwjTK2iG3wYmqLveY' },
	            { size: [728, 90], pkey: 'wuq8OFVQSXj9rmtUlnLo57Tm' },
	            { size: [300, 50], pkey: 'ZWVmSVe4txKlxxCQoqMcGIus' },
	        ],
	    ],
	    [
	        'Content_6',
	        [
	            { size: [300, 250], pkey: '1rWi9eEX25aaJTBP0gYbRZkI' },
	            { size: [320, 50], pkey: 'xpvziI7Hx5t9ZYEhjNh559PS' },
	            { size: [728, 90], pkey: 'NCS2KzLcAOxlnkaJ4xjxF0yY' },
	            { size: [300, 50], pkey: 'T3CRI7sep8LYNDkOrvgSZUPQ' },
	        ],
	    ],
	    [
	        'Content_7',
	        [
	            { size: [300, 250], pkey: 'UyoEFm2doVvp7106fNDYQWUD' },
	            { size: [320, 50], pkey: 'TaEN9LCRL7njBnuDdcqFl45i' },
	            { size: [728, 90], pkey: 'F9qCCjLusYbKBOeMYwTpuEPE' },
	            { size: [300, 50], pkey: 'T4LKxfIKZJCqFzBemjae6MGu' },
	        ],
	    ],
	    [
	        'Content_8',
	        [
	            { size: [300, 250], pkey: 'Kx7r3bEMtM8oX76sHwPJmKc0' },
	            { size: [320, 50], pkey: 'yFU6LWetkGsn5PDQKYT2IDsb' },
	            { size: [728, 90], pkey: 'SzRqozC7KE5CHZ5X0MYolGNg' },
	            { size: [300, 50], pkey: 'TIHmP6MqapPY4RpbkOm3pYpV' },
	        ],
	    ],
	    [
	        'Content_9',
	        [
	            { size: [300, 250], pkey: 'ME02OxIG42MNrqtEtkRcC3WI' },
	            { size: [320, 50], pkey: 'FZAEaVzZWYVTEcRNmWJmjUXB' },
	            { size: [728, 90], pkey: 'd2Rjluzn2K59G2BS6dcOSTnQ' },
	            { size: [300, 50], pkey: 'mBGMr6mqftj8c2qcQky6UjEB' },
	        ],
	    ],
	    [
	        'Footer_1',
	        [
	            { size: [728, 90], pkey: '3B3mEOFlqzWznInsydJTcOM4' },
	            { size: [320, 50], pkey: 'D7FU4vgB3xSrSUsE8x941axF' },
	            { size: [300, 50], pkey: 'GNY9gDQKzEGt6Tlb13yLfmuX' },
	            { size: [970, 90], pkey: 'QpPUq12xurb2uH4eesPfZAHF' },
	            { size: [320, 100], pkey: 'B1C8tQAkMN7kpCuxh1hW6CY8' },
	        ],
	    ],
	    [
	        'Header_1',
	        [
	            { size: [728, 90], pkey: 'gEiCP252abCex8X60QDCQ18Q' },
	            { size: [320, 50], pkey: '1edt8nVrdCirRPclWUszxTkp' },
	            { size: [970, 250], pkey: '8vU2bELnZC87m9GLY6XrB82g' },
	            { size: [300, 50], pkey: 'hjIoNE7R9iO7fInGsX0iibTz' },
	            { size: [300, 250], pkey: 'jStKXZxN8Ccuf6XS4dKqhKr9' },
	            { size: [970, 90], pkey: 'InTyYn8hF3Qs7LnzMuZosUTQ' },
	        ],
	    ],
	    [
	        'Header_2',
	        [
	            { size: [728, 90], pkey: 'qJiJRp6ukhtMyrprTZKHjL2M' },
	            { size: [320, 50], pkey: '8FmqCiT44WYjSNLDf1gQE8JU' },
	            { size: [300, 250], pkey: 'HkFfwTqoieNv9hxPhJKPKoX8' },
	            { size: [970, 250], pkey: 'NwtHSBVFWxfm6Yh7UeCfuHa6' },
	            { size: [300, 50], pkey: '4kwwuV84b6KhCJQy0yjDYdfl' },
	            { size: [320, 100], pkey: 'TJx2N6gevlYeFawnBbRy4gRl' },
	        ],
	    ],
	    [
	        'Recipe_1',
	        [
	            { size: [300, 250], pkey: 'uf0lKHKQpMCXGy4lxiCspQq7' },
	            { size: [320, 50], pkey: 'lklI3sAvIozfaIGNQGORtPOR' },
	            { size: [300, 50], pkey: 'yiehMO6LI3FNHjbCPIb1L3Sk' },
	            { size: [250, 250], pkey: 'LyZ0FEa1r0IYt8G2ZZsZi389' },
	        ],
	    ],
	    [
	        'Recipe_2',
	        [
	            { size: [300, 250], pkey: 'k3diT2fkJ9qUBWQussCusqH3' },
	            { size: [320, 50], pkey: 'nWhVYiRycgz0snwL4hTcS3vA' },
	            { size: [300, 50], pkey: 'dq7FbogqyhCRRIH60EEOqCSU' },
	            { size: [250, 250], pkey: 'yiWtNVya1yOMCncI5pNF5kc5' },
	        ],
	    ],
	    [
	        'Recipe_3',
	        [
	            { size: [300, 250], pkey: '43441FPoOkNSE3t2cVABWnsj' },
	            { size: [320, 50], pkey: 'XTsNJ5wTa3CksG40rnRNHiib' },
	            { size: [300, 50], pkey: 'OogAcgEwqjMqWmbuSN0n1fhg' },
	            { size: [250, 250], pkey: 't9D4xPUErCl21pJOFQemQp9h' },
	        ],
	    ],
	    [
	        'Recipe_4',
	        [
	            { size: [300, 250], pkey: 'DYIoV5pkMmf8Dh6Z328lJjVS' },
	            { size: [320, 50], pkey: '00kJPcqve45ZTYX6hicr37iK' },
	            { size: [300, 50], pkey: 'BpO7D8zDzdyGmFUOGNcRhUUm' },
	            { size: [300, 600], pkey: 'xv9dO3gYMP1nJKg1FZVtIUlc' },
	        ],
	    ],
	    [
	        'Sidebar_1',
	        [
	            { size: [300, 250], pkey: 'CrsU69OOlLRE1gDlLVGWIIV6' },
	            { size: [300, 600], pkey: '3pyeQzDRiW84Hg8gNrOq7BUr' },
	            { size: [160, 600], pkey: 'CFUyMykS3nc38kL2GnT0S7E4' },
	            { size: [320, 50], pkey: '1BptSVedVseFELcEHmSjZmDr' },
	            { size: [300, 50], pkey: '2pg9IZthU4rVlb45qoI2081a' },
	        ],
	    ],
	    [
	        'Sidebar_2',
	        [
	            { size: [300, 250], pkey: 'SRG5uYvQkWqlTzkqgXr65zTB' },
	            { size: [300, 600], pkey: 'Ean6FEKv8T4dKoDEQtgf6J5K' },
	            { size: [160, 600], pkey: 'WbYPSpMSXQPKyD7MaH1Qc5z7' },
	            { size: [320, 50], pkey: 'TAk15aJmBw3jMFoV9vSYYWLl' },
	            { size: [300, 50], pkey: '9w6UD5z59ooQWpW98mmpv0mD' },
	        ],
	    ],
	    [
	        'Sidebar_3',
	        [
	            { size: [300, 250], pkey: 'ePJzx8Sm7N35TzihmA98puiL' },
	            { size: [160, 600], pkey: 'P4EOkxn1ZtpxOxx2lahCdYOJ' },
	            { size: [300, 600], pkey: '6mOPwEqEtbkwuuzizUPzdQhN' },
	            { size: [320, 50], pkey: 'oSwBRQCb6174NZ0wDEyxZW9E' },
	            { size: [300, 50], pkey: 'LImddo0cIDhlsk6dkvMaHxsW' },
	        ],
	    ],
	    [
	        'Sidebar_4',
	        [
	            { size: [300, 250], pkey: 'xVf5XsMi0sHZYN4WvjiFhCt3' },
	            { size: [300, 600], pkey: 'WH8DfDE6oJYbphu2nD4xxeIV' },
	            { size: [160, 600], pkey: '8ZBBtdUqKqArOUPgW7bpiUia' },
	            { size: [320, 50], pkey: 'UMKQPvhCYMOH1sOPVdYEDEQt' },
	            { size: [300, 50], pkey: 'UoweNgEnjfmpxKoHzSXkuoWg' },
	        ],
	    ],
	    [
	        'Sidebar_5',
	        [
	            { size: [300, 250], pkey: 'EhtNcAaPOBeM8QI5ypGM7lZy' },
	            { size: [160, 600], pkey: 'zAOUkIaCHmzOCw2Ma5rrzaql' },
	            { size: [300, 600], pkey: 'LDMKwAfNFjGKWXL0OWKksknT' },
	            { size: [320, 50], pkey: 'WdPWJ92IfPqKgO5vRXvlsDO4' },
	            { size: [300, 50], pkey: 'MgyTpbqDa5nWNz6aDNWyucFn' },
	        ],
	    ],
	    [
	        'Sidebar_9',
	        [
	            { size: [300, 250], pkey: 'JmiI0R5Mw4cFlLp9pgaem31E' },
	            { size: [300, 600], pkey: 'IoYC7dL9wONQvhjMnu3iqP3R' },
	            { size: [160, 600], pkey: 'np3Ol8PXscn2cbaUcrthhTKg' },
	            { size: [320, 50], pkey: 'Cd46ns56pySxsSXXdRi3KlYq' },
	            { size: [300, 50], pkey: 'k8W1t71k8qmkYsiK4v3pop6j' },
	            { size: [250, 250], pkey: 'qINMbG0pc3n9CO2oIW1qxWGE' },
	        ],
	    ],
	]);
	const videoMap = new Map([
	    [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, [{ size: [640, 360], pkey: 'I5VjN89qESPMegBdpCt92W8S' }]],
	    [VideoAdUnit.Video_Coll_SOff_Smartphone, [{ size: [400, 225], pkey: 'iZXbFkwkNrOgpI7ue8o3mJda' }]],
	    [
	        VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	        [
	            { size: [640, 360], pkey: 'sMLWZBQNa6GaKC2khQiIg5Tj' },
	            { size: [400, 225], pkey: 'yHkEhAMj24ubV101Fklbp6fA' },
	        ],
	    ],
	    [
	        VideoAdUnit.Video_Individual_Autoplay_SOff,
	        [
	            { size: [640, 360], pkey: 'GCV9Do84nDBEFaVjb507H4iE' },
	            { size: [400, 225], pkey: '6lY8mDlZX6W7ijhbh6OuDCfj' },
	        ],
	    ],
	]);

	let SharethroughBidder = class SharethroughBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('sharethrough');
	    }
	    get enabled() {
	        return this._config.partners.sharethrough;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.sharethrough;
	    }
	    getSlotBidRequests(slot) {
	        if (map.has(slot.placementMapName)) {
	            return map
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(({ pkey }) => {
	                return {
	                    bidder: this.name,
	                    params: {
	                        pkey,
	                    },
	                };
	            });
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        return videoMap
	            .get(_video.name)
	            .filter(({ size }) => _video.size[0] === size[0] && _video.size[1] === size[1])
	            .map(({ pkey }) => ({
	            bidder: this.name,
	            params: {
	                pkey,
	            },
	        }));
	    }
	};
	SharethroughBidder = __decorate([
	    log('SharethroughBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], SharethroughBidder);

	let SpotXBidder = class SpotXBidder extends Bidder {
	    constructor(_config, _irisTv) {
	        super();
	        this._config = _config;
	        this._irisTv = _irisTv;
	        this.bidderConfig = this._config.partners.getBidderConfig('spotx');
	        this._videoParams = {
	            ad_unit: 'instream',
	            secure: true,
	            mimes: this._config.video.mimeType,
	            position: this._config.video.position.id,
	        };
	        this._map = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, 279547],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, 279549],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, 279548],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, 279550],
	        ]);
	    }
	    get videoEnabled() {
	        return this._config.partners.video.spotx;
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            const irisData = this._irisTv.irisContextualData;
	            const irisId = this._irisTv.irisId;
	            const irisDataAvailable = irisId && irisData && irisData.length;
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._videoParams,
	                        channel_id: this._map.get(_video.name),
	                        ...(irisDataAvailable && {
	                            custom: {
	                                iris_context: irisData,
	                                iris_id: irisId,
	                            },
	                        }),
	                    },
	                },
	            ];
	        }
	    }
	};
	SpotXBidder = __decorate([
	    log('SpotXBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, IrisTv])
	], SpotXBidder);

	let TeadsBidder = class TeadsBidder extends Bidder {
	    constructor(_config, _mediaType) {
	        super();
	        this._config = _config;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('teads');
	        this._pageId = 112062;
	        this._adTypeBitIndexMap = new Map([
	            ['outstream', { adType: isMobile() ? 'outstreamMobile' : 'outstreamDesktop', index: 1 }],
	            ['interscroller', { adType: 'interscroller', index: 2 }],
	            ['miniscroller', { adType: 'miniscroller', index: 3 }],
	        ]);
	        this._adUnitsMap = new Map([
	            ['Below_Post_1', []],
	            ['Content_1', ['outstreamDesktop', 'outstreamMobile', 'miniscroller', 'interscroller']],
	            ['Content_2', ['miniscroller', 'interscroller']],
	            ['Content_3', ['outstreamDesktop', 'outstreamMobile', 'miniscroller', 'interscroller']],
	            ['Content_4', ['miniscroller', 'interscroller']],
	            ['Content_5', ['outstreamDesktop', 'outstreamMobile', 'miniscroller', 'interscroller']],
	            ['Content_6', ['miniscroller', 'interscroller']],
	            ['Content_7', ['miniscroller', 'interscroller']],
	            ['Content_8', ['miniscroller', 'interscroller']],
	            ['Content_9', ['miniscroller', 'interscroller']],
	            ['Footer_1', []],
	            ['Header_1', []],
	            ['Header_2', []],
	            ['Recipe_1', ['outstreamDesktop', 'outstreamMobile', 'miniscroller']],
	            ['Recipe_2', ['miniscroller']],
	            ['Recipe_3', ['miniscroller']],
	            ['Recipe_4', ['miniscroller']],
	            ['Sidebar_1', []],
	            ['Sidebar_2', []],
	            ['Sidebar_3', []],
	            ['Sidebar_4', []],
	            ['Sidebar_5', []],
	            ['Sidebar_9', []],
	        ]);
	        this._deviceAdTypes = {
	            mobile: ['outstreamMobile', 'interscroller', 'miniscroller'],
	            desktop: ['outstreamDesktop'],
	        };
	        this._placementIdMap = new Map([
	            ['1000', { id: 121842, isOutstream: false }],
	            ['1001', { id: 121836, isOutstream: true }],
	            ['1010', { id: 121835, isOutstream: true }],
	            ['1011', { id: 121840, isOutstream: true }],
	            ['1100', { id: 121834, isOutstream: false }],
	            ['1101', { id: 121838, isOutstream: true }],
	            ['1110', { id: 121837, isOutstream: true }],
	            ['1111', { id: 121895, isOutstream: true }],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.teads;
	    }
	    createBitArrayAdOptions(slot) {
	        const activeAdTypes = isMobile() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop;
	        const bitArray = ['1', '0', '0', '0'];
	        const adTypesForSlot = this._adUnitsMap.get(slot.placementMapName);
	        this._adTypeBitIndexMap.forEach((adTypeObject, key) => {
	            const adType = adTypeObject.adType;
	            if (activeAdTypes.indexOf(adType) > -1 && this._config.adTypes.has(adType) && adTypesForSlot.indexOf(adType) > -1) {
	                if (key === 'outstream') {
	                    bitArray[adTypeObject.index] = this._mediaType.outstreamEnabled(slot).currentlyActive ? '1' : '0';
	                }
	                else {
	                    bitArray[adTypeObject.index] = '1';
	                }
	            }
	        });
	        return bitArray;
	    }
	    updateBidParams(slot, _adUnit, bid) {
	        if (slot.refreshCount === 1 && this._adUnitsMap.has(slot.placementMapName)) {
	            const bitArray = this.createBitArrayAdOptions(slot);
	            const placementObject = this._placementIdMap.get(bitArray.join(''));
	            bid.params.placementId = placementObject.id;
	            const existingLabels = bid.labelAny || [];
	            const label = `outstreamEnabled_${slot.placementMapName}`;
	            if (existingLabels.indexOf(label) === -1 && placementObject.isOutstream) {
	                existingLabels.push(label);
	                bid.labelAny = existingLabels;
	            }
	        }
	        return bid;
	    }
	    getSlotBidRequests(slot) {
	        if (this._adUnitsMap.has(slot.placementMapName)) {
	            const bitArray = this.createBitArrayAdOptions(slot);
	            const placementObject = this._placementIdMap.get(bitArray.join(''));
	            return [
	                {
	                    bidder: this.name,
	                    ...this.getLabels(placementObject.isOutstream, slot.placementMapName),
	                    params: {
	                        placementId: placementObject.id,
	                        pageId: this._pageId,
	                    },
	                },
	            ];
	        }
	    }
	    getLabels(isOutstream, placementMapName) {
	        const labels = [];
	        if (isOutstream) {
	            labels.push(`outstreamEnabled_${placementMapName}`);
	        }
	        return labels.length ? { labelAny: labels } : {};
	    }
	};
	TeadsBidder = __decorate([
	    log('TeadsBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, MediaType])
	], TeadsBidder);

	let TelariaBidder = class TelariaBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('telaria');
	        this._map = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, { supplyCode: '6psex-fm1gy', adCode: '6psex-o3fcq' }],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, { supplyCode: '6psex-bgapy', adCode: '6psex-kln5k' }],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, { supplyCode: '6psex-axuft', adCode: '6psex-jaes3' }],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, { supplyCode: '6psex-sootr', adCode: '6psex-0vosj' }],
	        ]);
	    }
	    get videoEnabled() {
	        return this._config.partners.video.telaria;
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._map.has(_video.name)) {
	            const videoParams = this._map.get(_video.name);
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...videoParams,
	                        videoId: _video.name,
	                    },
	                },
	            ];
	        }
	    }
	};
	TelariaBidder = __decorate([
	    log('TelariaBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], TelariaBidder);

	let TripleLiftOutstreamExperiment = class TripleLiftOutstreamExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'tlvid';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0).get();
	    }
	};
	TripleLiftOutstreamExperiment = __decorate([
	    log('TripleLiftOutstreamExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], TripleLiftOutstreamExperiment);

	let TripleLiftBidder = class TripleLiftBidder extends Bidder {
	    constructor(_config, _tripleLiftExperiment, _tripleLiftOutstreamExperiment, _mediaType) {
	        super();
	        this._config = _config;
	        this._tripleLiftExperiment = _tripleLiftExperiment;
	        this._tripleLiftOutstreamExperiment = _tripleLiftOutstreamExperiment;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('triplelift');
	        this.adapterName = 'triplelift';
	        this.serverBidderName = 'tripl_ss';
	        this._clientEnabled = false;
	        this._serverEnabled = false;
	        this.settings = {
	            adserverTargeting: [
	                {
	                    key: 'hb_format',
	                    val: ({ meta, tl_source }) => (meta && meta.mediaType) || this.tlSourceMap.get(tl_source || ''),
	                },
	            ],
	        };
	        this.tlSourceMap = new Map([
	            ['hdx', 'banner'],
	            ['tlx', 'native'],
	        ]);
	        this._verticalCategoryMap = new Map([
	            ['Baby', 'Family'],
	            ['Family and Parenting', 'Family'],
	            ['Natural Parenting', 'Family'],
	            ['Pregnancy', 'Family'],
	            ['Toddler', 'Family'],
	            ['Personal Finance', 'Finance'],
	            ['Professional Finance', 'Finance'],
	            ['Deals', 'Finance'],
	            ['Clean Eating', 'Food'],
	            ['Food', 'Food'],
	            ['Crafts', 'Home'],
	            ['Gardening', 'Home'],
	            ['Green Living', 'Home'],
	            ['Home Decor and Design', 'Home'],
	            ['Pets', 'Home'],
	            ['Travel', 'Travel'],
	            ['News', 'News'],
	            ['Lifestyle', 'Lifestyle'],
	            ['Beauty', 'Lifestyle'],
	            ['Other', 'Lifestyle'],
	            ['Health and Fitness', 'Health'],
	            ['Entertainment', 'Entertainment'],
	            ['Sports', 'Sports'],
	            ['Womens Style', 'Womens Style'],
	            ['Mens Style and Grooming', 'Mens Style'],
	            ['Tech', 'Tech'],
	            ['Wedding', 'Wedding'],
	            ['Auto', 'Auto'],
	        ]);
	        this._categoryPriorityList = new Set([
	            'Food',
	            'Home',
	            'Family',
	            'Finance',
	            'Travel',
	            'News',
	            'Health',
	            'Entertainment',
	            'Sports',
	            'Womens Style',
	            'Mens Style',
	            'Tech',
	            'Wedding',
	            'Auto',
	            'Lifestyle',
	        ]);
	        this._category = defaultTo(this.getCategory(), 'Lifestyle');
	        this._map = new Map([
	            ['Interstitial_1', []],
	            ['Below_Post_1', []],
	            ['Content_1', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_2', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_3', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_4', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_5', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_6', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_7', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_8', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Content_9', ['nativeMobileContent', 'nativeDesktopContent']],
	            ['Footer_1', []],
	            ['Header_1', []],
	            ['Header_2', []],
	            ['Recipe_1', ['nativeMobileRecipe', 'nativeDesktopRecipe']],
	            ['Recipe_2', ['nativeMobileRecipe', 'nativeDesktopRecipe']],
	            ['Recipe_3', ['nativeMobileRecipe', 'nativeDesktopRecipe']],
	            ['Recipe_4', ['nativeMobileRecipe', 'nativeDesktopRecipe']],
	            ['Recipe_5', ['nativeMobileRecipe', 'nativeDesktopRecipe']],
	            ['Sidebar_1', ['nativeDesktopSidebar']],
	            ['Sidebar_2', ['nativeDesktopSidebar']],
	            ['Sidebar_3', ['nativeDesktopSidebar']],
	            ['Sidebar_4', ['nativeDesktopSidebar']],
	            ['Sidebar_5', ['nativeDesktopSidebar']],
	            ['Sidebar_9', ['nativeDesktopSidebar']],
	        ]);
	        this._videoMap = new Map([
	            [
	                VideoAdUnit.Video_Collapse_Autoplay_SoundOff,
	                {
	                    client: 'AdThriveRON_instream_desktopcollapse_prebid_c2s',
	                    server: 'AdThriveRON_instream_desktopcollapse_prebid',
	                },
	            ],
	            [
	                VideoAdUnit.Video_Coll_SOff_Smartphone,
	                {
	                    client: 'AdThriveRON_instream_mwebsticky_prebid_c2s',
	                    server: 'AdThriveRON_instream_mwebsticky_prebid',
	                },
	            ],
	            [
	                VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn,
	                {
	                    client: 'AdThriveRON_instream_CTP_prebid_c2s',
	                    server: 'AdThriveRON_instream_CTP_prebid',
	                },
	            ],
	            [
	                VideoAdUnit.Video_Individual_Autoplay_SOff,
	                {
	                    client: 'AdThriveRON_instream_contextcollapse_prebid_c2s',
	                    server: 'AdThriveRON_instream_contextcollapse_prebid',
	                },
	            ],
	        ]);
	        this._deviceAdTypes = {
	            mobile: ['nativeMobileContent', 'nativeMobileRecipe'],
	            desktop: ['nativeDesktopContent', 'nativeDesktopRecipe', 'nativeDesktopSidebar'],
	        };
	        this._clientEnabled = this._tripleLiftExperiment.result === 'both' || this._tripleLiftExperiment.result === 'client';
	        this._serverEnabled = this._tripleLiftExperiment.result === 'both' || this._tripleLiftExperiment.result === 'server';
	    }
	    get enabled() {
	        return this._config.partners.tripleLift;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.tripleLift;
	    }
	    getSlotBidRequests(slot) {
	        const activeAdTypes = isMobile() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop;
	        const enabledAdTypes = activeAdTypes.filter(adType => this._config.adTypes.has(adType));
	        if (this._map.has(slot.placementMapName)) {
	            const bids = [];
	            let selectedAdType = slot.location === 'Interstitial' ? 'interstitial' : 'standard';
	            this._map.get(slot.placementMapName).forEach((adType) => {
	                if (enabledAdTypes.indexOf(adType) !== -1) {
	                    selectedAdType = adType;
	                }
	            });
	            const inventoryCode = this.getInventoryCode(selectedAdType, slot);
	            const oustreamEligible = this.isOutstreamEligible(slot);
	            if (this._clientEnabled) {
	                bids.push({
	                    bidder: this.name,
	                    ...this.getLabels(slot.placementMapName, oustreamEligible),
	                    params: {
	                        inventoryCode,
	                    },
	                });
	            }
	            if (this._serverEnabled) {
	                bids.push({
	                    bidder: this.serverBidderName,
	                    params: {
	                        inventoryCode: inventoryCode + '_pbs2s',
	                    },
	                });
	            }
	            return bids;
	        }
	    }
	    inventoryCodeAppend(slot) {
	        return this.isOutstreamEligible(slot) ? '_BV' : '';
	    }
	    isOutstreamEligible(slot) {
	        return this._tripleLiftOutstreamExperiment.result && this._mediaType.outstreamEnabled(slot).outstreamCapable;
	    }
	    getInventoryCode(selectedAdType, slot) {
	        if (selectedAdType === 'standard') {
	            return `AdThrive_${slot.placementMapName}_HDX`;
	        }
	        else if (selectedAdType === 'interstitial') {
	            return 'AdThriveRON_interstitial_multisize';
	        }
	        const isContentOrSideBar = slot.placementMapName === 'Content_1' || slot.placementMapName === 'Sidebar_9';
	        const slotName = isContentOrSideBar ? slot.location.toLowerCase() : slot.placementMapName.toLowerCase().replace(/_(?!.*_)/, '');
	        const deviceType = isMobile() ? 'mobile' : 'desktop';
	        const isOutstreamEligible = this.inventoryCodeAppend(slot);
	        return `adthrive${this._category}_${slotName}_fixed_${deviceType}${isOutstreamEligible}`;
	    }
	    getVideoBidParams(name, _video, inventoryCode) {
	        var _a, _b;
	        return {
	            bidder: name,
	            params: {
	                inventoryCode,
	                video: {
	                    ...(isDesktop() ? { w: 640, h: 360 } : { w: 400, h: 225 }),
	                    api: this._config.video.apiValue,
	                    mimes: this._config.video.mimeType,
	                    ...(this._config.video.videoProtocols.scope === 'all' && {
	                        protocols: this._config.video.videoProtocols.protocols,
	                    }),
	                    playbackmethod: (_b = (_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) === null || _b === void 0 ? void 0 : _b[0],
	                    pos: this._config.video.position.id,
	                },
	            },
	        };
	    }
	    getVideoSlotBidRequests(_video) {
	        const bids = [];
	        if (this._videoMap.has(_video.name)) {
	            if (this._clientEnabled) {
	                bids.push(this.getVideoBidParams(this.name, _video, this._videoMap.get(_video.name).client));
	            }
	            if (this._serverEnabled) {
	                bids.push(this.getVideoBidParams(this.serverBidderName, _video, this._videoMap.get(_video.name).server));
	            }
	        }
	        return bids;
	    }
	    getCategory() {
	        const categories = this._config.site.verticals
	            .filter(vertical => this._verticalCategoryMap.has(vertical))
	            .map(vertical => this._verticalCategoryMap.get(vertical));
	        for (const category of this._categoryPriorityList) {
	            if (categories.indexOf(category) !== -1) {
	                return category;
	            }
	        }
	    }
	    getLabels(placementMapName, isOutstream) {
	        const labels = [];
	        if (isOutstream) {
	            labels.push(`outstreamEnabled_${placementMapName}`);
	        }
	        return labels.length ? { labelAny: labels } : {};
	    }
	};
	TripleLiftBidder = __decorate([
	    log('TripleLiftBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        TripleLiftExperiment,
	        TripleLiftOutstreamExperiment,
	        MediaType])
	], TripleLiftBidder);

	let TTDBidder = class TTDBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('ttd');
	        this._device = this._config.context.device;
	        this._set = new Set([
	            'Below_Post_1',
	            'Content_1',
	            'Content_2',
	            'Content_3',
	            'Content_4',
	            'Content_5',
	            'Content_6',
	            'Content_7',
	            'Content_8',
	            'Content_9',
	            'Footer_1',
	            'Header_1',
	            'Recipe_1',
	            'Recipe_2',
	            'Recipe_3',
	            'Recipe_4',
	            'Sidebar_1',
	            'Sidebar_2',
	            'Sidebar_3',
	            'Sidebar_4',
	            'Sidebar_5',
	            'Sidebar_9',
	            'Video_Collapse_Autoplay_SoundOff',
	            'Video_Coll_SOff_Smartphone',
	            'Video_In-Post_ClicktoPlay_SoundOn',
	            'Video_Individual_Autoplay_SOff',
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.ttd;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.ttd;
	    }
	    getSlotBidRequests(slot) {
	        if (this._set.has(slot.placementMapName)) {
	            const placementId = slot.id;
	            const re = new RegExp(`_${this._device}`);
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        publisherId: this._config.site.id,
	                        siteId: this._config.site.id,
	                        placementId: placementId.replace(re, ''),
	                        supplySourceId: 'cafemedia',
	                    },
	                },
	            ];
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._set.has(_video.name)) {
	            const placementId = `${_video.name}`;
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        publisherId: this._config.site.id,
	                        siteId: this._config.site.id,
	                        placementId,
	                        supplySourceId: 'cafemedia',
	                    },
	                },
	            ];
	        }
	    }
	};
	TTDBidder = __decorate([
	    log('TTDBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], TTDBidder);

	let UndertoneBidder = class UndertoneBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('undertone');
	        this._params = {
	            publisherId: 2002,
	        };
	        this._deviceAdTypes = {
	            mobile: ['animatedFooter', 'expandableFooter', 'interscroller', 'miniscroller'],
	            desktop: [],
	        };
	        this._map = new Map([
	            [
	                'Below_Post_1',
	                [
	                    {
	                        placementId: '2002034',
	                        size: [[1, 2]],
	                        adType: 'interscroller',
	                        highViewability: true,
	                    },
	                    {
	                        placementId: '2002035',
	                        size: [[1, 2]],
	                        adType: 'miniscroller',
	                        highViewability: true,
	                    },
	                    {
	                        placementId: '2002036',
	                        size: [[300, 250]],
	                        highViewability: true,
	                    },
	                ],
	            ],
	            [
	                'Content_1',
	                [
	                    { placementId: '2002001', size: [[1, 2]], adType: 'interscroller' },
	                    { placementId: '2002002', size: [[1, 2]], adType: 'miniscroller' },
	                ],
	            ],
	            ['Content_2', [{ placementId: '2002003', size: [[1, 2]], adType: 'miniscroller' }]],
	            ['Content_3', [{ placementId: '2002004', size: [[1, 2]], adType: 'miniscroller' }]],
	            ['Content_4', [{ placementId: '2002005', size: [[1, 2]], adType: 'miniscroller' }]],
	            ['Content_5', [{ placementId: '2002006', size: [[1, 2]], adType: 'miniscroller' }]],
	            [
	                'Footer_1',
	                [
	                    {
	                        placementId: '2002033',
	                        size: [[320, 50]],
	                        adType: 'expandableFooter',
	                    },
	                    {
	                        placementId: '2002038',
	                        size: [[1, 1]],
	                        adType: 'expandableFooter',
	                        mobileCollapsePlayer: true,
	                    },
	                    { placementId: '2002039', size: [[1, 1]], adType: 'animatedFooter' },
	                ],
	            ],
	            ['Header_1', [{ placementId: '2002037', size: [[970, 250]] }]],
	            ['Interstitial_1', [{ placementId: '2002040', size: [[1, 1]] }]],
	            ['Recipe_1', [{ placementId: '2002020', size: [[300, 250]] }]],
	            ['Recipe_2', [{ placementId: '2002021', size: [[300, 250]] }]],
	            ['Recipe_3', [{ placementId: '2002022', size: [[300, 250]] }]],
	            ['Recipe_4', [{ placementId: '2002023', size: [[300, 250]] }]],
	            ['Sidebar_9', [{ placementId: '2002032', size: [[300, 250]] }]],
	        ]);
	    }
	    get enabled() {
	        return this._config.partners.undertone;
	    }
	    getSlotBidRequests(slot) {
	        const activeAdTypes = isMobile() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop;
	        const enabledAdTypes = activeAdTypes.filter(adType => this._config.adTypes.has(adType));
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ adType, mobileCollapsePlayer, size }) => ((!adType && slot.hasSize(size[0])) || (adType && enabledAdTypes.indexOf(adType) !== -1)) &&
	                (!mobileCollapsePlayer || !this._config.video.mobileStickyPlayerOnPage))
	                .map(({ placementId, size, highViewability }) => {
	                return {
	                    bidder: this.name,
	                    ...(highViewability && slot.viewability < this._config.marmalade.hvThreshold ? { labelAny: ['refresh'] } : {}),
	                    params: {
	                        ...this._params,
	                        placementId,
	                        size,
	                    },
	                };
	            });
	        }
	    }
	};
	UndertoneBidder = __decorate([
	    log('UndertoneBidder'),
	    singleton(),
	    __metadata("design:paramtypes", [Config])
	], UndertoneBidder);

	let UnrulyBidder = class UnrulyBidder extends Bidder {
	    constructor(_config, _mediaType) {
	        super();
	        this._config = _config;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('unruly');
	        this._params = {
	            siteId: 208686,
	        };
	    }
	    get enabled() {
	        return this._config.partners.unruly;
	    }
	    getSlotBidRequests(slot) {
	        const { outstreamCapable, currentlyActive } = this._mediaType.outstreamEnabled(slot);
	        if (outstreamCapable && slot.location !== 'Video_StickyOutstream') {
	            return [
	                {
	                    bidder: this.name,
	                    ...(currentlyActive ? {} : { labelAny: ['refresh'] }),
	                    params: {
	                        ...this._params,
	                    },
	                },
	            ];
	        }
	    }
	};
	UnrulyBidder = __decorate([
	    log('UnrulyBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, MediaType])
	], UnrulyBidder);

	let VerizonBidder = class VerizonBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('verizon');
	        this.adapterName = 'aol';
	        this._params = {
	            dcn: isMobile() ? '8a969d580177771bc13c2047d6290082' : '8a9694d00177771bcae21c6941d30023',
	        };
	        this._desktopMap = new Map([
	            [
	                'Content_1',
	                [
	                    { size: [300, 250], id: '8a969d580177771bc13c20458198007e' },
	                    { size: [728, 90], id: '8a96918c0177771bc65220467ff60092' },
	                ],
	            ],
	            ['Content_2', [{ size: [300, 250], id: '8a96918c0177771bc652204531fe0091' }]],
	            ['Content_3', [{ size: [300, 250], id: '8a9694d00177771bcae220463a710058' }]],
	            [
	                'Footer_1',
	                [
	                    { size: [728, 90], id: '8a9694d00177771bcae21c6a7d880025' },
	                    { size: [970, 90], id: '8a969d580177771bc13c2046cd280081' },
	                    { size: [320, 50], id: '8a9694d00177771bcae2204408520056' },
	                ],
	            ],
	            ['Header_1', [{ size: [728, 90], id: '8a969d580177771bc13c2045cac4007f' }]],
	            [
	                'Interstitial_1',
	                [
	                    { size: [300, 250], id: '8a969449017c7c9d384d9f8170b10066' },
	                    { size: [300, 600], id: '8a969449017c7c9d384d9f80b9970064' },
	                    { size: [320, 480], id: '8a969958017c7c9d2d8a9f812d360081' },
	                    { size: [336, 280], id: '8a969449017c7c9d384d9f80f2a20065' },
	                ],
	            ],
	            ['Sidebar_1', [{ size: [300, 250], id: '8a9694d00177771bcae2204449d80057' }]],
	            [
	                'Sidebar_9',
	                [
	                    { size: [320, 50], id: '8a969d580177771bc13c2045ff6b0080' },
	                    { size: [300, 600], id: '8a96918c0177771bc6522043c8540090' },
	                    { size: [160, 600], id: '8a969d580177771bc13c2044ea91007d' },
	                    { size: [300, 250], id: '8a96918c0177771bc6521c6b5f4e003f' },
	                ],
	            ],
	            ['Recipe_1', [{ size: [300, 250], id: '8a9694d00177771bcae21c6bc7e80027' }]],
	            ['Recipe_2', [{ size: [300, 250], id: '8a969d580177771bc13c2044ac08007c' }]],
	        ]);
	        this._mobileMap = new Map([
	            [
	                'Content_1',
	                [
	                    { size: [300, 250], id: '8a969d580177771bc13c2048bd0e0085' },
	                    { size: [320, 50], id: '8a969d580177771bc13c204b68670088' },
	                ],
	            ],
	            [
	                'Content_2',
	                [
	                    { size: [300, 250], id: '8a96918c0177771bc652204877c50094' },
	                    { size: [320, 50], id: '8a96918c0177771bc652204b257e0097' },
	                ],
	            ],
	            ['Content_3', [{ size: [300, 250], id: '8a96918c0177771bc6522048f24e0095' }]],
	            ['Content_4', [{ size: [300, 250], id: '8a9694d00177771bcae220497831005a' }]],
	            ['Content_5', [{ size: [300, 250], id: '8a969d580177771bc13c204a5f240087' }]],
	            ['Content_6', [{ size: [300, 250], id: '8a9694d00177771bcae2204a9092005c' }]],
	            [
	                'Footer_1',
	                [
	                    { size: [320, 100], id: '8a96918c0177771bc652204a27cb0096' },
	                    { size: [300, 50], id: '8a9694d00177771bcae22049449a0059' },
	                    { size: [728, 90], id: '8a9694d00177771bcae2204ad481005d' },
	                    { size: [320, 50], id: '8a969d580177771bc13c20480cf50084' },
	                ],
	            ],
	            [
	                'Interstitial_1',
	                [
	                    { size: [300, 250], id: '8a969161017c7c9d32879f82491c007d' },
	                    { size: [300, 600], id: '8a969161017c7c9d32879f8195b3007c' },
	                    { size: [320, 480], id: '8a969958017c7c9d2d8a9f81f2c50082' },
	                    { size: [336, 280], id: '8a969449017c7c9d384d9f81c5660067' },
	                    { size: [320, 50], id: '8a969449017c7c9d384d9f8279950068' },
	                ],
	            ],
	            ['Recipe_1', [{ size: [300, 250], id: '8a96918c0177771bc6522048483a0093' }]],
	            ['Recipe_2', [{ size: [300, 250], id: '8a9694d00177771bcae22049e596005b' }]],
	            ['Recipe_3', [{ size: [300, 250], id: '8a969d580177771bc13c2049b47f0086' }]],
	        ]);
	        this._map = isMobile() ? this._mobileMap : this._desktopMap;
	    }
	    get enabled() {
	        return this._config.partners.verizon;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(({ id }) => ({
	                bidder: this.name,
	                params: {
	                    ...this._params,
	                    ...(this._config.site.filteredSensitiveCategories.length && {
	                        ext: { sens: this._config.site.filteredSensitiveCategories },
	                    }),
	                    pos: id,
	                },
	            }));
	        }
	    }
	};
	VerizonBidder = __decorate([
	    log('VerizonBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], VerizonBidder);

	let VerizonVideoBidder = class VerizonVideoBidder extends Bidder {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this.bidderConfig = this._config.partners.getBidderConfig('oneVideo');
	        this.instreamPubId = 'CMIExchange';
	        this.outstreamPubId = 'CafeMediaOS';
	        this._map = new Map([
	            [
	                'Video_StickyOutstream_1',
	                [
	                    { size: [300, 250], id: '1286612' },
	                    { size: [320, 50], id: '1286612' },
	                ],
	            ],
	        ]);
	    }
	    get videoEnabled() {
	        return this._config.partners.video.oneVideo;
	    }
	    get enabled() {
	        return this._config.partners.oneVideo;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(({ id }) => ({
	                bidder: this.name,
	                params: {
	                    pubId: this.outstreamPubId,
	                    video: {
	                        inventoryid: id,
	                    },
	                },
	            }));
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        var _a;
	        return [
	            {
	                bidder: this.name,
	                params: {
	                    pubId: this.instreamPubId,
	                    video: {
	                        playerWidth: _video.size[0],
	                        playerHeight: _video.size[1],
	                        mimes: this._config.video.mimeType,
	                        ...(this._config.video.videoProtocols.scope === 'all' ? { protocols: this._config.video.videoProtocols.protocols } : ''),
	                        api: this._config.video.apiValue,
	                        ...(((_a = this._config.video.playbackmethod) === null || _a === void 0 ? void 0 : _a.get(_video.name)) && {
	                            playbackmethod: this._config.video.playbackmethod.get(_video.name),
	                        }),
	                        position: this._config.video.position,
	                    },
	                },
	            },
	        ];
	    }
	};
	VerizonVideoBidder = __decorate([
	    log('VerizonVideoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], VerizonVideoBidder);

	let YahooSSPBidder = class YahooSSPBidder extends Bidder {
	    constructor(_config, _prebidMethods) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this.bidderConfig = this._config.partners.getBidderConfig('yahoossp');
	        this._params = {
	            display: {
	                dcn: isMobile() ? '8a969d580177771bc13c2047d6290082' : '8a9694d00177771bcae21c6941d30023',
	            },
	            video: {
	                dcn: '8a969469017b7bdf59b2e07862af0281',
	            },
	        };
	        this._videoMap = new Map([
	            [VideoAdUnit.Video_Collapse_Autoplay_SoundOff, '8a96941a017e7e91c49492261bdf000c'],
	            [VideoAdUnit.Video_Coll_SOff_Smartphone, '8a9690ee017e7e91bee0922682f1000b'],
	            [VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn, '8a969951017e7e91ba38923576c20011'],
	            [VideoAdUnit.Video_Individual_Autoplay_SOff, '8a969951017e7e91ba389236dc470014'],
	        ]);
	        this._displayMap = {
	            desktop: new Map([
	                [
	                    'Content_1',
	                    [
	                        { size: [300, 250], id: '8a969d580177771bc13c20458198007e' },
	                        { size: [728, 90], id: '8a96918c0177771bc65220467ff60092' },
	                    ],
	                ],
	                ['Content_2', [{ size: [300, 250], id: '8a96918c0177771bc652204531fe0091' }]],
	                ['Content_3', [{ size: [300, 250], id: '8a9694d00177771bcae220463a710058' }]],
	                [
	                    'Footer_1',
	                    [
	                        { size: [728, 90], id: '8a9694d00177771bcae21c6a7d880025' },
	                        { size: [970, 90], id: '8a969d580177771bc13c2046cd280081' },
	                        { size: [320, 50], id: '8a9694d00177771bcae2204408520056' },
	                    ],
	                ],
	                ['Header_1', [{ size: [728, 90], id: '8a969d580177771bc13c2045cac4007f' }]],
	                [
	                    'Interstitial_1',
	                    [
	                        { size: [300, 250], id: '8a969449017c7c9d384d9f8170b10066' },
	                        { size: [300, 600], id: '8a969449017c7c9d384d9f80b9970064' },
	                        { size: [320, 480], id: '8a969958017c7c9d2d8a9f812d360081' },
	                        { size: [336, 280], id: '8a969449017c7c9d384d9f80f2a20065' },
	                    ],
	                ],
	                ['Sidebar_1', [{ size: [300, 250], id: '8a9694d00177771bcae2204449d80057' }]],
	                [
	                    'Sidebar_9',
	                    [
	                        { size: [320, 50], id: '8a969d580177771bc13c2045ff6b0080' },
	                        { size: [300, 600], id: '8a96918c0177771bc6522043c8540090' },
	                        { size: [160, 600], id: '8a969d580177771bc13c2044ea91007d' },
	                        { size: [300, 250], id: '8a96918c0177771bc6521c6b5f4e003f' },
	                    ],
	                ],
	                ['Recipe_1', [{ size: [300, 250], id: '8a9694d00177771bcae21c6bc7e80027' }]],
	                ['Recipe_2', [{ size: [300, 250], id: '8a969d580177771bc13c2044ac08007c' }]],
	                ['Video_StickyOutstream_1', [{ size: [300, 250], id: '8a969d87017b7be074aae07a22b70005' }]],
	            ]),
	            mobile: new Map([
	                [
	                    'Content_1',
	                    [
	                        { size: [300, 250], id: '8a969d580177771bc13c2048bd0e0085' },
	                        { size: [320, 50], id: '8a969d580177771bc13c204b68670088' },
	                    ],
	                ],
	                [
	                    'Content_2',
	                    [
	                        { size: [300, 250], id: '8a96918c0177771bc652204877c50094' },
	                        { size: [320, 50], id: '8a96918c0177771bc652204b257e0097' },
	                    ],
	                ],
	                ['Content_3', [{ size: [300, 250], id: '8a96918c0177771bc6522048f24e0095' }]],
	                ['Content_4', [{ size: [300, 250], id: '8a9694d00177771bcae220497831005a' }]],
	                ['Content_5', [{ size: [300, 250], id: '8a969d580177771bc13c204a5f240087' }]],
	                ['Content_6', [{ size: [300, 250], id: '8a9694d00177771bcae2204a9092005c' }]],
	                [
	                    'Footer_1',
	                    [
	                        { size: [320, 100], id: '8a96918c0177771bc652204a27cb0096' },
	                        { size: [300, 50], id: '8a9694d00177771bcae22049449a0059' },
	                        { size: [728, 90], id: '8a9694d00177771bcae2204ad481005d' },
	                        { size: [320, 50], id: '8a969d580177771bc13c20480cf50084' },
	                    ],
	                ],
	                [
	                    'Interstitial_1',
	                    [
	                        { size: [300, 250], id: '8a969161017c7c9d32879f82491c007d' },
	                        { size: [300, 600], id: '8a969161017c7c9d32879f8195b3007c' },
	                        { size: [320, 480], id: '8a969958017c7c9d2d8a9f81f2c50082' },
	                        { size: [336, 280], id: '8a969449017c7c9d384d9f81c5660067' },
	                        { size: [320, 50], id: '8a969449017c7c9d384d9f8279950068' },
	                    ],
	                ],
	                ['Recipe_1', [{ size: [300, 250], id: '8a96918c0177771bc6522048483a0093' }]],
	                ['Recipe_2', [{ size: [300, 250], id: '8a9694d00177771bcae22049e596005b' }]],
	                ['Recipe_3', [{ size: [300, 250], id: '8a969d580177771bc13c2049b47f0086' }]],
	                ['Video_StickyOutstream_1', [{ size: [300, 50], id: '8a969d87017b7be074aae07a22b70005' }]],
	            ]),
	        };
	        this._setYahooMediaConfig();
	        const displayMap = this._displayMap;
	        this._map = isMobile() ? displayMap.mobile : displayMap.desktop;
	    }
	    get enabled() {
	        return this._config.partners.yahoossp;
	    }
	    get videoEnabled() {
	        return this._config.partners.video.yahoossp;
	    }
	    getSlotBidRequests(slot) {
	        if (this._map.has(slot.placementMapName)) {
	            return this._map
	                .get(slot.placementMapName)
	                .filter(({ size }) => slot.hasSize(size))
	                .map(({ id }) => ({
	                bidder: this.name,
	                params: {
	                    ...(slot.location !== 'Video_StickyOutstream' ? this._params.display : this._params.video),
	                    pos: id,
	                },
	            }));
	        }
	    }
	    getVideoSlotBidRequests(_video) {
	        if (this._videoMap.has(_video.name)) {
	            return [
	                {
	                    bidder: this.name,
	                    params: {
	                        ...this._params.video,
	                        pos: this._videoMap.get(_video.name),
	                    },
	                },
	            ];
	        }
	    }
	    _setYahooMediaConfig() {
	        this._prebidMethods.setConfig({
	            yahoossp: {
	                mode: 'all',
	            },
	        });
	    }
	};
	YahooSSPBidder = __decorate([
	    log('YahooSSPBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods])
	], YahooSSPBidder);

	let YieldmoBidder = class YieldmoBidder extends Bidder {
	    constructor(_config, _mediaType) {
	        super();
	        this._config = _config;
	        this._mediaType = _mediaType;
	        this.bidderConfig = this._config.partners.getBidderConfig('yieldmo');
	        this.settings = {
	            adserverTargeting: [
	                {
	                    key: 'hb_format',
	                    val: bidResponse => {
	                        return this._creativeFormatMap.get(this.getCreativeFormatId(bidResponse.ad)) || bidResponse.mediaType;
	                    },
	                },
	            ],
	        };
	        this._creativeFormatMap = new Map([
	            ['44', 'banner'],
	            ['47', 'banner'],
	            ['49', 'banner'],
	            ['50', 'banner'],
	            ['43', 'banner'],
	            ['17', 'banner'],
	            ['23', 'banner'],
	            ['33', 'banner'],
	            ['40', 'outstream'],
	            ['51', 'outstream'],
	            ['48', 'outstream'],
	            ['34', 'outstream'],
	            ['14', 'miniscroller'],
	            ['16', 'miniscroller'],
	            ['37', 'miniscroller'],
	            ['15', 'miniscroller'],
	            ['18', 'native'],
	            ['36', 'native'],
	            ['46', 'native'],
	            ['10', 'native'],
	            ['6', 'native'],
	        ]);
	        this._adOptionsMap = new Map([
	            ['100000', { id: '2626064683911553041', isOutstream: false }],
	            ['110000', { id: '2626064684062547986', isOutstream: true }],
	            ['111000', { id: '2626064684196765715', isOutstream: true }],
	            ['110100', { id: '2626064684339372052', isOutstream: true }],
	            ['110010', { id: '2626064684498755605', isOutstream: true }],
	            ['111100', { id: '2626064684632973334', isOutstream: true }],
	            ['111010', { id: '2626064684775579671', isOutstream: true }],
	            ['111110', { id: '2626064684934963224', isOutstream: true }],
	            ['101000', { id: '2626064685069180953', isOutstream: false }],
	            ['101100', { id: '2626064685203398682', isOutstream: false }],
	            ['101010', { id: '2626064685337616411', isOutstream: true }],
	            ['101110', { id: '2626064685471834140', isOutstream: true }],
	            ['100100', { id: '2626064685606051869', isOutstream: false }],
	            ['100110', { id: '2626064685740269598', isOutstream: true }],
	            ['100010', { id: '2626064685882875935', isOutstream: true }],
	            ['110110', { id: '2626807131797397582', isOutstream: true }],
	            ['110001', { id: '2820437600580345895', isOutstream: true }],
	        ]);
	        this._bannerMap = [
	            'Below_Post_1',
	            'Content',
	            'Content_1',
	            'Content_2',
	            'Content_3',
	            'Content_4',
	            'Content_5',
	            'Content_6',
	            'Content_7',
	            'Content_8',
	            'Content_9',
	            'Footer_1',
	            'Header_1',
	            'Header_2',
	            'Recipe_1',
	            'Recipe_2',
	            'Recipe_3',
	            'Recipe_4',
	            'Recipe_5',
	            'Sidebar_1',
	            'Sidebar_2',
	            'Sidebar_3',
	            'Sidebar_4',
	            'Sidebar_5',
	            'Sidebar_9',
	            'Video_StickyOutstream_1',
	        ];
	    }
	    getCreativeFormatId(ad) {
	        const matches = /creative_format_id":([0-9]*)/.exec(ad);
	        if (matches !== null) {
	            return matches[1];
	        }
	    }
	    get enabled() {
	        return this._config.partners.yieldmo;
	    }
	    isMiniScroller(slot) {
	        return slot.sequence && this._config.adTypes.has('miniscroller') && (slot.location === 'Content' || slot.location === 'Recipe');
	    }
	    isNative(slot) {
	        const deviceAdTypes = {
	            mobile: new Map([
	                ['Content', 'nativeMobileContent'],
	                ['Recipe', 'nativeMobileRecipe'],
	            ]),
	            desktop: new Map([
	                ['Content', 'nativeDesktopContent'],
	                ['Recipe', 'nativeDesktopRecipe'],
	                ['Sidebar', 'nativeDesktopSidebar'],
	            ]),
	        };
	        const nativeAdTypes = isMobile() ? deviceAdTypes.mobile : deviceAdTypes.desktop;
	        return slot.sequence && nativeAdTypes.has(slot.location) && this._config.adTypes.has(nativeAdTypes.get(slot.location));
	    }
	    isOutstream(slot) {
	        return this._mediaType.outstreamEnabled(slot).currentlyActive;
	    }
	    isStickyOutstream(slot) {
	        return slot.location === 'Video_StickyOutstream';
	    }
	    isMobileOustreamSingleInstance(slot) {
	        return (isMobile() &&
	            slot.placementMapName === 'Content_1' &&
	            this._mediaType.outstreamEnabled(slot).currentlyActive &&
	            this._config.adTypes.has('outstreamMobile') &&
	            !this._config.video.mobileStickyPlayerOnPage);
	    }
	    updateBidParams(slot, _adUnit, bid) {
	        if (slot.refreshCount === 1) {
	            const bitStringAdOptions = this.createBitStringAdOptions(slot);
	            const placementObject = this._adOptionsMap.get(bitStringAdOptions);
	            if (this._adOptionsMap.has(bitStringAdOptions)) {
	                bid.params.placementId = placementObject.id;
	                const existingLabels = bid.labelAny || [];
	                const label = `outstreamEnabled_${slot.placementMapName}`;
	                if (existingLabels.indexOf(label) === -1 && placementObject.isOutstream) {
	                    existingLabels.push(label);
	                    bid.labelAny = existingLabels;
	                }
	            }
	        }
	        return bid;
	    }
	    createBitStringAdOptions(slot) {
	        let bitStringAdOptions = this._bannerMap.indexOf(slot.placementMapName) !== -1 ? '1' : '0';
	        bitStringAdOptions += this.isOutstream(slot) ? '1' : '0';
	        bitStringAdOptions += this.isMiniScroller(slot) ? '1' : '0';
	        bitStringAdOptions += this.isNative(slot) ? '1' : '0';
	        bitStringAdOptions += this.isMobileOustreamSingleInstance(slot) ? '1' : '0';
	        bitStringAdOptions += this.isStickyOutstream(slot) ? '1' : '0';
	        return bitStringAdOptions;
	    }
	    getSlotBidRequests(slot) {
	        const bitStringAdOptions = this.createBitStringAdOptions(slot);
	        if (this._adOptionsMap.has(bitStringAdOptions)) {
	            const placementObject = this._adOptionsMap.get(bitStringAdOptions);
	            return [
	                {
	                    bidder: this.name,
	                    ...this.getLabels(placementObject.isOutstream, slot.placementMapName),
	                    params: {
	                        placementId: placementObject.id,
	                        ...(slot.location === 'Video_StickyOutstream' && {
	                            video: {
	                                placement: 2,
	                            },
	                        }),
	                    },
	                },
	            ];
	        }
	    }
	    getLabels(isOutstream, placementMapName) {
	        const labels = [];
	        if (isOutstream) {
	            labels.push(`outstreamEnabled_${placementMapName}`);
	        }
	        return labels.length ? { labelAny: labels } : {};
	    }
	};
	YieldmoBidder = __decorate([
	    log('YieldmoBidder'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, MediaType])
	], YieldmoBidder);

	let BidderSetup = class BidderSetup {
	    constructor(_config, appNexusBidder, brightRollBidder, concertBidder, conversantBidder, criteoBidder, deepIntentBidder, districtMBidder, districtMDMXBidder, districtMDMXVideoBidder, mediaGridVideoBidder, gumGumBidder, indexExchangeBidder, kargoBidder, mediaGridBidder, openXBidder, pubMaticBidder, roundelBidder, rubiconBidder, nativoBidder, sharethroughBidder, spotxBidder, teadsBidder, telariaBidder, thirtyThreeAcrossBidder, tripleLiftBidder, ttdBidder, undertoneBidder, unrulyBidder, verizonBidder, yahooSSPBidder, verizonVideoBidder, yieldmoBidder) {
	        this._config = _config;
	        this._biddersParams = new Map();
	        this._orderedDisplayBidders = [
	            tripleLiftBidder,
	            indexExchangeBidder,
	            teadsBidder,
	            verizonBidder,
	            yahooSSPBidder,
	            appNexusBidder,
	            rubiconBidder,
	            pubMaticBidder,
	            criteoBidder,
	            openXBidder,
	            sharethroughBidder,
	            kargoBidder,
	            brightRollBidder,
	            conversantBidder,
	            ttdBidder,
	            districtMBidder,
	            districtMDMXBidder,
	            mediaGridBidder,
	            unrulyBidder,
	            gumGumBidder,
	            undertoneBidder,
	            roundelBidder,
	            thirtyThreeAcrossBidder,
	            yieldmoBidder,
	            deepIntentBidder,
	            concertBidder,
	            nativoBidder,
	            verizonVideoBidder,
	        ].filter(bidder => this._bidderFilter(bidder));
	        this._orderedVideoBidders = [
	            appNexusBidder,
	            verizonVideoBidder,
	            yahooSSPBidder,
	            conversantBidder,
	            districtMBidder,
	            districtMDMXVideoBidder,
	            gumGumBidder,
	            sharethroughBidder,
	            mediaGridVideoBidder,
	            indexExchangeBidder,
	            openXBidder,
	            roundelBidder,
	            rubiconBidder,
	            ttdBidder,
	            pubMaticBidder,
	            criteoBidder,
	            spotxBidder,
	            telariaBidder,
	            tripleLiftBidder,
	        ].filter(bidder => this._bidderFilter(bidder, true));
	    }
	    get orderedDisplayBidders() {
	        return this._orderedDisplayBidders;
	    }
	    get orderedVideoBidders() {
	        return this._orderedVideoBidders;
	    }
	    get biddersParams() {
	        return this._biddersParams;
	    }
	    _bidderFilter(bidder, isVideo = false) {
	        const config = this._config;
	        const bidderName = bidder.name;
	        const holdout = isVideo ? config.vbho.bidders : config.hbho.bidders;
	        const enabled = isVideo ? 'videoEnabled' : 'enabled';
	        const canUpdateBidParams = isVideo || !bidder.updateBidParams;
	        return (bidder[enabled] &&
	            this._holdoutValidation(holdout, bidderName) &&
	            this._ccpaValidation(config.ccpa, bidderName) &&
	            this._gdprValidation(config.gdpr, bidderName) &&
	            (canUpdateBidParams || this._biddersParams.set(bidderName, bidder)));
	    }
	    _holdoutValidation(holdout, bidderName) {
	        return !holdout.length || holdout.indexOf(bidderName) === -1;
	    }
	    _ccpaValidation(ccpa, bidderName) {
	        return !ccpa.enabled || ccpa.nonCompliantBidders.indexOf(bidderName) === -1;
	    }
	    _gdprValidation(gdpr, bidderName) {
	        return !gdpr.enabled || gdpr.nonCompliantBidders.indexOf(bidderName) === -1;
	    }
	};
	BidderSetup = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [Config, AppNexusBidder, BrightRollBidder, ConcertBidder, ConversantBidder, CriteoBidder, DeepIntentBidder, DistrictMBidder, DistrictMDMXBidder, DistrictMDMXVideoBidder, MediaGridVideoBidder, GumGumBidder, IndexExchangeBidder, KargoBidder, MediaGridBidder, OpenXBidder, PubMaticBidder, RoundelBidder, RubiconBidder, NativoBidder, SharethroughBidder, SpotXBidder, TeadsBidder, TelariaBidder, ThirtyThreeAcrossBidder, TripleLiftBidder, TTDBidder, UndertoneBidder, UnrulyBidder, VerizonBidder, YahooSSPBidder, VerizonVideoBidder, YieldmoBidder])
	], BidderSetup);

	let CreativeMonitoringExperiment = class CreativeMonitoringExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'crtvmon';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	CreativeMonitoringExperiment = __decorate([
	    log('CreativeMonitoringExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], CreativeMonitoringExperiment);

	let CreativeMonitoring = class CreativeMonitoring {
	    constructor(_config, _gam, _prebidMethods, _creativeMonitoringExperiment) {
	        this._config = _config;
	        this._gam = _gam;
	        this._prebidMethods = _prebidMethods;
	        this._creativeMonitoringExperiment = _creativeMonitoringExperiment;
	        this._auctionData = new Set();
	        this._prebidAdvertiserId = 413678576;
	    }
	    setupCreativeEventListeners() {
	        this._prebidMethods.onEvent('auctionInit', this._storeAuctionData.bind(this));
	        this._prebidMethods.onEvent('adRenderFailed', this._renderFailedHandler.bind(this));
	        this._prebidMethods.onEvent('adRenderSucceeded', this._renderSucceededHandler.bind(this));
	        this._prebidMethods.onEvent('staleRender', this._staleRenderHandler.bind(this));
	        if (this._creativeMonitoringExperiment.result) {
	            this._gam.slotRenderEnded.on(this._checkSlotRender.bind(this));
	        }
	    }
	    _storeAuctionData(auctionData) {
	        auctionData.adUnitCodes.forEach(code => this._auctionData.add(`${auctionData.auctionId}-${code}`));
	    }
	    _deleteStoredAuction(auctionId, code) {
	        this._auctionData.delete(`${auctionId}-${code}`);
	    }
	    _renderFailedHandler(renderFailData) {
	        const bid = renderFailData.bid;
	        if (bid)
	            this._deleteStoredAuction(bid.auctionId, bid.adUnitCode);
	        const logData = {
	            message: renderFailData.message,
	            reason: renderFailData.reason,
	        };
	        if (bid && bid.meta && Object.keys(bid.meta).length > 0) {
	            logData.buyerInformation = bid.meta;
	        }
	        else {
	            logData.markup = bid && bid.ad;
	        }
	        logger.error('PrebidAuctionManager', 'init', 'adRenderFailed', logData);
	    }
	    _staleRenderHandler(prebidBidResponse) {
	        if (prebidBidResponse)
	            this._deleteStoredAuction(prebidBidResponse.auctionId, prebidBidResponse.adUnitCode);
	    }
	    _renderSucceededHandler(renderSuccessData) {
	        const bid = renderSuccessData.bid;
	        if (bid)
	            this._deleteStoredAuction(bid.auctionId, bid.adUnitCode);
	    }
	    _isSafeFrame(slot) {
	        const frame = slot.element.querySelector('iframe');
	        return !!(frame && frame.src);
	    }
	    _checkSlotRender(slotRenderData) {
	        const gam = slotRenderData.event;
	        if (this._isSafeFrame(slotRenderData.slot) || gam.advertiserId !== this._prebidAdvertiserId)
	            return;
	        setTimeout(() => {
	            this._logUnknownFailure(slotRenderData);
	        }, 2000);
	    }
	    _getHeightWidth(sizes) {
	        if (!sizes)
	            return {};
	        const sizeArray = sizes.split('x').map(Number);
	        return {
	            ...(Array.isArray(sizeArray) && sizeArray.length === 2 && { height: sizeArray[1], width: sizeArray[0] }),
	        };
	    }
	    _getPrebidCreativeWindowData(win) {
	        return { adId: win.bidderAdId, bidder: win.bidder, size: win.bidderSize, adserverTargeting: win.targeting };
	    }
	    _getPrebidBidderData(slot) {
	        const iframe = slot.element.querySelector('iframe');
	        const win = iframe.contentWindow;
	        if (!win)
	            return {};
	        const { adId, adserverTargeting, bidder, size } = this._getPrebidCreativeWindowData(win);
	        const { height, width } = this._getHeightWidth(win && win.bidderSize);
	        return {
	            adId,
	            adserverTargeting,
	            adUnitCode: slot.id,
	            bidder,
	            height,
	            size,
	            width,
	        };
	    }
	    _logUnknownFailure(slotRenderData) {
	        const context = this._config.context;
	        const slotData = slotRenderData.slot;
	        const gam = slotRenderData.event;
	        const { adId, adserverTargeting, auctionId, adUnitCode, bidder, height, meta, size, width } = slotData.servedPrebidBidResponse || this._getPrebidBidderData(slotData);
	        if (auctionId && adUnitCode && !this._auctionData.has(`${auctionId}-${adUnitCode}`))
	            return;
	        const creativeFailureData = {
	            adId,
	            advertiserDomains: (meta && meta.advertiserDomains) || (adserverTargeting && adserverTargeting['hb_adomain']),
	            bidderSize: size || (adserverTargeting && adserverTargeting['hb_size']),
	            bidder,
	            branch: context.branch,
	            bucket: context.bucket,
	            campaignId: gam.campaignId,
	            creativeId: gam.creativeId || gam.sourceAgnosticCreativeId,
	            lineItemId: gam.lineItemId || gam.sourceAgnosticLineItemId,
	            message: 'An unknown error occurred rendering the Prebid creative',
	            slotSizes: slotData.sizes,
	            slot: slotData.location,
	            ...(width && height && { size: [width, height] }),
	            ...(meta && ((meta.dchain && { dchain: meta.dchain }) || (meta.networkId && { networkId: meta.networkId }))),
	            ...((!adId || adId.length < 2) && adserverTargeting && { hbAdId: adserverTargeting['hb_adid'] }),
	        };
	        logger.error('PrebidAuctionManager', 'init', 'prebidCreativeFailure', creativeFailureData);
	        if (auctionId && adUnitCode)
	            this._deleteStoredAuction(auctionId, adUnitCode);
	    }
	};
	CreativeMonitoring = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [Config,
	        GoogleAdManager,
	        PrebidMethods,
	        CreativeMonitoringExperiment])
	], CreativeMonitoring);

	let JwBoostExperiment = class JwBoostExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'jwb';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.95).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], JwBoostExperiment.prototype, "run", null);
	JwBoostExperiment = __decorate([
	    log('JwBoostExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], JwBoostExperiment);

	let Ortb2 = class Ortb2 {
	    constructor(_config, _prebidMethods, _jwBoostExperiment) {
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._jwBoostExperiment = _jwBoostExperiment;
	        this._data = {};
	        this._highViewabilityThreshold = 0.6;
	        this._staticFirstPartyData = {
	            mcmp: this._config.marmalade.mcmp.filter(filterUnique),
	            site_code: this._config.marmalade.siteCodes.filter(filterUnique),
	            site_id: [this._config.site.id],
	            sens: this._config.site.sensitiveCategories,
	            verticals: this._config.site.verticals,
	            pmp_elig: [this._config.adOptions.pmp],
	        };
	        this._userSegments = this._config.marmalade.ortbSegments.get('iaba') || [];
	        this._siteSegments = this._config.marmalade.ortbSegments.get('iabc') || [];
	        this._data = {
	            ...(this._userSegments.length && {
	                user: {
	                    data: this.buildSegmentData(this._userSegments, 4),
	                },
	            }),
	            ...(this._siteSegments.length && {
	                site: {
	                    content: {
	                        data: this.buildSegmentData(this._siteSegments, 6),
	                    },
	                },
	            }),
	        };
	    }
	    get data() {
	        return this._data;
	    }
	    buildSegmentData(data, segtaxId, name = 'cafemedia.com') {
	        return [
	            {
	                name,
	                segment: data,
	                ext: {
	                    segtax: segtaxId,
	                },
	            },
	        ];
	    }
	    buildSegmentDataFromArray(contextualData, segtaxId, name) {
	        return this.buildSegmentData(contextualData.map((segmentId) => {
	            return { id: segmentId };
	        }), segtaxId, name);
	    }
	    setOrtb2Imp(impData, ortb2Imp, isExtData = true) {
	        if (!ortb2Imp)
	            return;
	        for (const key of Object.keys(impData)) {
	            const setExtData = isExtData && ortb2Imp.ext && ortb2Imp.ext.data;
	            setExtData ? (ortb2Imp.ext.data[key] = impData[key]) : (ortb2Imp[key] = impData[key]);
	        }
	    }
	    _setVideoOrtb2ImpData(ortb2Imp, video) {
	        this.setOrtb2Imp({
	            adserver: {
	                name: 'gam',
	                adslot: `/${this._config.gam.account}/${this._config.gam.prefix}_${video.name}/${this._config.site.id}`,
	            },
	        }, ortb2Imp);
	        if (this._jwBoostExperiment.result) {
	            this.setOrtb2Imp({ jwTargeting: video.getJwBoostTargeting() }, ortb2Imp);
	        }
	    }
	    addOrtb2Imp(slotRequest, interstitialEnabled = false) {
	        const { slot, video } = slotRequest;
	        const ortb2Imp = { ext: { data: {} } };
	        if (slot && isHighlyViewableSlot(slot, this._config.marmalade.hvThreshold)) {
	            this.setOrtb2Imp({ pos: 'atf' }, ortb2Imp);
	        }
	        if (video) {
	            this._setVideoOrtb2ImpData(ortb2Imp, video);
	        }
	        if (slot && interstitialEnabled) {
	            this.setOrtb2Imp({ instl: 1 }, ortb2Imp);
	        }
	        return ortb2Imp;
	    }
	};
	Ortb2 = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods, JwBoostExperiment])
	], Ortb2);

	let BidLimitExperiment = class BidLimitExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'sab';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(1).get();
	    }
	};
	BidLimitExperiment = __decorate([
	    log('BidLimitExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], BidLimitExperiment);

	let MaxRequestsExperiment = class MaxRequestsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'mxrpog';
	        this._choices = [
	            { choice: 4, weight: 50 },
	            { choice: 5, weight: 20 },
	            { choice: 6, weight: 20 },
	            { choice: 7, weight: 10 },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, String(this._result));
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], MaxRequestsExperiment.prototype, "run", null);
	MaxRequestsExperiment = __decorate([
	    log('MaxRequestsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], MaxRequestsExperiment);

	let DisableAjaxTimeoutExperiment = class DisableAjaxTimeoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'dajto';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	DisableAjaxTimeoutExperiment = __decorate([
	    log('DisableAjaxTimeoutExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], DisableAjaxTimeoutExperiment);

	const priceGranularity = {
	    buckets: [
	        {
	            precision: 2,
	            max: 0.1,
	            increment: 0.01,
	        },
	        {
	            precision: 2,
	            max: 5,
	            increment: 0.05,
	        },
	        {
	            precision: 2,
	            max: 20,
	            increment: 0.1,
	        },
	        {
	            precision: 2,
	            max: 100,
	            increment: 0.5,
	        },
	    ],
	};

	let StandardPrebidBidderSetting = class StandardPrebidBidderSetting {
	    constructor(_config) {
	        this._config = _config;
	        this._configuration = {
	            suppressEmptyKeys: true,
	            adserverTargeting: [
	                {
	                    key: 'hb_bidder',
	                    val: bidResponse => bidResponse.bidderCode,
	                },
	                {
	                    key: 'hb_adid',
	                    val: bidResponse => bidResponse.adId,
	                },
	                {
	                    key: 'hb_pb',
	                    val: bidResponse => bidResponse.pbCg,
	                },
	                {
	                    key: 'hb_size',
	                    val: bidResponse => (this._config.video.instreamAdUnits.has(bidResponse.adUnitCode) ? '' : bidResponse.size),
	                },
	                {
	                    key: 'hb_deal',
	                    val: bidResponse => bidResponse.dealId,
	                },
	                {
	                    key: 'hb_format',
	                    val: bidResponse => bidResponse.mediaType,
	                },
	                {
	                    key: 'hb_adomain',
	                    val: bidResponse => { var _a, _b; return (((_a = bidResponse.meta) === null || _a === void 0 ? void 0 : _a.advertiserDomains) ? (_b = bidResponse.meta) === null || _b === void 0 ? void 0 : _b.advertiserDomains[0] : ''); },
	                },
	            ],
	        };
	    }
	    get configuration() {
	        return this._configuration;
	    }
	};
	StandardPrebidBidderSetting = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [Config])
	], StandardPrebidBidderSetting);

	let PrebidConfiguration = class PrebidConfiguration {
	    constructor(_config, _prebidMethods, _bidLimitExperiment, _maxRequestsExperiment, _disableAjaxTimeoutExperiment, _ortb2, _standardPrebidBidderSetting) {
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._bidLimitExperiment = _bidLimitExperiment;
	        this._maxRequestsExperiment = _maxRequestsExperiment;
	        this._disableAjaxTimeoutExperiment = _disableAjaxTimeoutExperiment;
	        this._ortb2 = _ortb2;
	        this._standardPrebidBidderSetting = _standardPrebidBidderSetting;
	        this._uspConfig = {
	            usp: {
	                cmpApi: 'iab',
	                timeout: 0,
	            },
	        };
	        this._gdprConfig = {
	            gdpr: {
	                cmpApi: 'iab',
	                timeout: 10000,
	                defaultGdprScope: true,
	                rules: [
	                    {
	                        purpose: 'storage',
	                        enforcePurpose: true,
	                        enforceVendor: true,
	                    },
	                    {
	                        purpose: 'basicAds',
	                        enforcePurpose: true,
	                        enforceVendor: true,
	                    },
	                    {
	                        purpose: 'measurement',
	                        enforcePurpose: true,
	                        enforceVendor: true,
	                    },
	                ],
	            },
	        };
	        this._defaultConfig = {
	            maxRequestsPerOrigin: this._maxRequestsExperiment.result,
	            auctionOptions: {
	                secondaryBidders: this._config.auctionOptions.bidders,
	            },
	            bidderSequence: 'fixed',
	            ...(this._bidLimitExperiment.result && {
	                sendBidsControl: {
	                    bidLimit: 3,
	                },
	            }),
	            useBidCache: true,
	            enableSendAllBids: this._bidLimitExperiment.result,
	            disableAjaxTimeout: this._disableAjaxTimeoutExperiment.result,
	            userSync: {
	                syncsPerBidder: 1,
	                aliasSyncEnabled: true,
	                enableOverride: true,
	                filterSettings: {
	                    iframe: {
	                        bidders: '*',
	                        filter: 'include',
	                    },
	                },
	            },
	            gptPreAuction: {
	                mcmEnabled: true,
	            },
	            priceGranularity,
	            cache: {
	                url: 'https://prebid.adnxs.com/pbc/v1/cache',
	            },
	            consentManagement: {},
	            targetingControls: {
	                allowTargetingKeys: this._config.prebid.targetingKeys,
	                allowSendAllBidsTargetingKeys: this._config.prebid.sendAllBidsTargetingKeys,
	            },
	            schain: {
	                validation: 'strict',
	                config: new SupplyChain().getSupplyChainConfig(this._config.site.id),
	            },
	            ortb2: this._ortb2.data,
	        };
	    }
	    setDefaultConfig() {
	        const consentConfig = this.addPrebidConsent();
	        const defaultConfiguration = this._defaultConfig;
	        defaultConfiguration.consentManagement = consentConfig;
	        this._prebidMethods.setConfig(defaultConfiguration);
	    }
	    applyClientAndServerBidderSettings(bidders) {
	        this._prebidMethods.setBidderSettings(bidders.reduce((bidderSettings, bidder) => this._setupBidderSettings(bidderSettings, bidder), {
	            standard: this._standardPrebidBidderSetting.configuration,
	        }));
	    }
	    aliasBidders(bidders) {
	        bidders.forEach(bidder => {
	            if (!bidder.adapterName)
	                return;
	            if (bidder.adapterName !== bidder.name) {
	                this._prebidMethods.setAliasBidder(bidder.adapterName, bidder.name);
	            }
	            if (bidder.serverBidderName) {
	                this._prebidMethods.setAliasBidder(bidder.adapterName, bidder.serverBidderName);
	            }
	        });
	    }
	    _setupBidderSettings(bidderSettings, bidder) {
	        bidderSettings[bidder.name] = this.getBidderSettings(bidder, bidder.name);
	        if (bidder.serverBidderName) {
	            bidderSettings[bidder.serverBidderName] = this.getBidderSettings(bidder, bidder.serverBidderName);
	        }
	        if (bidderSettings.standard.adserverTargeting && bidder.adServerTargeting) {
	            bidderSettings.standard.adserverTargeting.push(...bidder.adServerTargeting);
	        }
	        return bidderSettings;
	    }
	    addPrebidConsent() {
	        return this._config.gdpr.enabled === true ? this._gdprConfig : this._uspConfig;
	    }
	    getBidderSettings(bidder, bidderName) {
	        return {
	            bidCpmAdjustment: (bidCpm, bidResponse) => adjustCpmFromBidResponse(this._config, bidCpm, bidderName, bidResponse),
	            ...bidder.settings,
	        };
	    }
	};
	PrebidConfiguration = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [Config,
	        PrebidMethods,
	        BidLimitExperiment,
	        MaxRequestsExperiment,
	        DisableAjaxTimeoutExperiment,
	        Ortb2,
	        StandardPrebidBidderSetting])
	], PrebidConfiguration);

	let PredictiveAnalysisExperiment = class PredictiveAnalysisExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'vpred';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.99).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], PredictiveAnalysisExperiment.prototype, "run", null);
	PredictiveAnalysisExperiment = __decorate([
	    log('PredictiveAnalysisExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], PredictiveAnalysisExperiment);

	let S2S = class S2S {
	    constructor(_config, _prebidMethods) {
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._s2sConfig = [
	            {
	                accountId: '9262',
	                enabled: true,
	                bidders: this._config.prebid.s2s.bidders,
	                defaultTtl: 300,
	                timeout: this._config.timeouts.initialBidsRequest - 200,
	                adapter: 'prebidServer',
	                endpoint: {
	                    p1Consent: 'https://prebid-server.rubiconproject.com/openrtb2/auction',
	                    noP1Consent: 'https://prebid-server.rubiconproject.com/openrtb2/auction',
	                },
	                syncEndpoint: {
	                    p1Consent: 'https://prebid-server.rubiconproject.com/cookie_sync',
	                    noP1Consent: 'https://prebid-server.rubiconproject.com/cookie_sync',
	                },
	            },
	        ];
	    }
	    init() {
	        this._prebidMethods.setConfig({
	            s2sConfig: this._s2sConfig.filter(obj => obj.bidders.length),
	        });
	    }
	};
	S2S = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods])
	], S2S);

	let PrebidAuctionManager = class PrebidAuctionManager extends AuctionManager {
	    constructor(_adthrive, _config, _gam, _s2s, _bidderSetup, _mediaType, _prebidMethods, _prebidConfiguration, _predictiveAnalysisExperiment, _slots, _creativeMonitoring, _ortb2, roxotAnalytics, rubiconAnalytics) {
	        super();
	        this._adthrive = _adthrive;
	        this._config = _config;
	        this._gam = _gam;
	        this._s2s = _s2s;
	        this._bidderSetup = _bidderSetup;
	        this._mediaType = _mediaType;
	        this._prebidMethods = _prebidMethods;
	        this._prebidConfiguration = _prebidConfiguration;
	        this._predictiveAnalysisExperiment = _predictiveAnalysisExperiment;
	        this._slots = _slots;
	        this._creativeMonitoring = _creativeMonitoring;
	        this._ortb2 = _ortb2;
	        this.videoAdUnits = [];
	        this.bidsRequested = new Emitter();
	        this._orderedDisplayBidders = this._bidderSetup.orderedDisplayBidders;
	        this._orderedVideoBidders = this._bidderSetup.orderedVideoBidders;
	        this._analytics = [roxotAnalytics, rubiconAnalytics].filter(analytics => analytics.enabled);
	    }
	    init() {
	        const prebidConfiguration = this._prebidConfiguration;
	        const orderedDisplayBidders = this._orderedDisplayBidders;
	        const orderedVideoBidders = this._orderedVideoBidders;
	        const bidders = [...orderedDisplayBidders, ...orderedVideoBidders];
	        prebidConfiguration.setDefaultConfig();
	        prebidConfiguration.aliasBidders(bidders);
	        this._s2s.init();
	        this._analytics.forEach(analytics => analytics.init !== undefined && analytics.init());
	        orderedDisplayBidders.forEach(bidder => bidder.init !== undefined && bidder.init());
	        prebidConfiguration.applyClientAndServerBidderSettings(bidders);
	        pageLoaded()
	            .then(() => this._prebidMethods.triggerUserSyncs())
	            .catch(reason => {
	            logger.error('PrebidAuctionManager', 'init', 'pageLoaded', reason);
	        });
	        this._setEvents();
	        if (this._predictiveAnalysisExperiment.result) {
	            this._setVideoBidsFilter();
	        }
	    }
	    _setEvents() {
	        this._creativeMonitoring.setupCreativeEventListeners();
	        this._prebidMethods.onEvent('bidWon', bidResponse => {
	            const slot = this._slots.get(bidResponse.adUnitCode);
	            if (slot) {
	                slot.servedPrebidBidResponse = bidResponse;
	                this._slots.bidServed.emit(slot).catch(() => { });
	            }
	        });
	        const beforeRequestEvent = () => {
	            if (this._mediaType.oneStreamExpResult || !this._mediaType.isOutstreamAllowed()) {
	                this._updateHighImpactUnitTargeting();
	            }
	            this._prebidMethods.offEvent('beforeRequestBids', beforeRequestEvent);
	        };
	        this._prebidMethods.onEvent('beforeRequestBids', beforeRequestEvent);
	        if (this._predictiveAnalysisExperiment.result) {
	            this._setVideoBidsFilter();
	        }
	        this._prebidMethods.onEvent('bidRequested', () => {
	            void this.bidsRequested.emit();
	        });
	    }
	    _setVideoBidsFilter() {
	        this._adthrive.core = this._adthrive.core || {};
	        this._adthrive.core.predictiveAnalysis = this._adthrive.core.predictiveAnalysis || [];
	        if (!this._adthrive.core.predictiveAnalysis.length) {
	            return;
	        }
	        const validBrowser = (browser) => (browser === '1') === isChrome();
	        const validDevice = (mobile) => {
	            const currentDevice = this._config.context.device;
	            if (mobile === '1') {
	                return currentDevice === 'phone';
	            }
	            else {
	                return currentDevice === 'tablet' || currentDevice === 'desktop';
	            }
	        };
	        const filteredObjects = this._adthrive.core.predictiveAnalysis.filter(analysisObject => validBrowser(analysisObject.chrome) && validDevice(analysisObject.mobile));
	        const invalidBidMap = {};
	        filteredObjects.forEach(filteredObject => {
	            const key = `${filteredObject.adomain},${filteredObject.bidder}`;
	            invalidBidMap[key] = true;
	        });
	        this._prebidMethods.setBidsReceivedFilter(bids => {
	            if (!bids.length || !this._config.video.instreamAdUnits.has(bids[0].adUnitCode)) {
	                return bids;
	            }
	            return bids.filter(bid => {
	                var _a, _b;
	                let validBid = true;
	                (_b = (_a = bid.meta) === null || _a === void 0 ? void 0 : _a.advertiserDomains) === null || _b === void 0 ? void 0 : _b.forEach(adomain => {
	                    const key = adomain + ',' + bid.bidder;
	                    if (invalidBidMap[key]) {
	                        logger.info('PrebidAuctionManager', '_setVideoBidsFilter', 'bid filtered: ', bid);
	                        validBid = false;
	                    }
	                });
	                return validBid;
	            });
	        });
	    }
	    _updateSlotTargeting(slot) {
	        const mediaType = this._mediaType;
	        if (!mediaType.outstreamSlots.has(`${slot.placementMapName}`)) {
	            return;
	        }
	        const targeting = this._config.adTypes.enabledMinified.map(value => value.toLowerCase()).filter(value => value === 'od' || value === 'om');
	        if (targeting.length) {
	            this._gam.setSlotTargeting({ key: 'hi_au', value: targeting }, slot.googleTagSlot);
	        }
	    }
	    instlEnabled(slotLocation) {
	        return slotLocation === 'Interstitial' && this._config.adOptions.interstitial.prebid;
	    }
	    addSlots(slots) {
	        const bidderBidRequests = this._orderedDisplayBidders.map(bidder => bidder.getBidRequests(slots));
	        const adUnits = slots
	            .filter(slot => slot.location !== 'Interstitial' || this.instlEnabled(slot.location))
	            .sort((a, b) => {
	            return a.auctionPriority - b.auctionPriority;
	        })
	            .map(slot => {
	            const interSlot = this.instlEnabled(slot.location);
	            const ortb2Imp = this._ortb2.addOrtb2Imp({ slot }, interSlot);
	            if (this._mediaType.oneStreamExpResult) {
	                this._updateSlotTargeting(slot);
	            }
	            return {
	                code: interSlot ? this._config.prebid.interstitialAdUnitCode : slot.element.id,
	                mediaTypes: this._mediaType.getMediaType({ slot }),
	                ...(ortb2Imp ? { ortb2Imp } : {}),
	                bids: bidderBidRequests
	                    .map(bidRequests => bidRequests.get(slot.id))
	                    .filter(defined)
	                    .reduce((acc, val) => acc.concat(val), []),
	            };
	        });
	        this._prebidMethods.addAdUnits(adUnits);
	        return adUnits;
	    }
	    _updateAdUnitParams(slot) {
	        var _a;
	        if ((_a = pbjs.adUnits) === null || _a === void 0 ? void 0 : _a.length) {
	            pbjs.adUnits
	                .filter(adUnit => adUnit.code === slot.element.id)
	                .forEach(adUnit => {
	                const ortb2Imp = this._ortb2.addOrtb2Imp({ slot });
	                adUnit.ortb2Imp = ortb2Imp;
	                adUnit.mediaTypes = this._mediaType.getMediaType({ slot });
	            });
	        }
	    }
	    _updateBidParams(slot) {
	        var _a;
	        if ((_a = pbjs.adUnits) === null || _a === void 0 ? void 0 : _a.length) {
	            pbjs.adUnits
	                .filter(adUnit => { var _a; return adUnit.code === slot.element.id && ((_a = adUnit.bids) === null || _a === void 0 ? void 0 : _a.length); })
	                .forEach(adUnit => {
	                adUnit.bids.forEach(bid => {
	                    var _a, _b;
	                    bid = (_b = (_a = this._bidderSetup.biddersParams.get(bid.bidder)) === null || _a === void 0 ? void 0 : _a.updateBidParams(slot, adUnit, bid)) !== null && _b !== void 0 ? _b : bid;
	                });
	            });
	        }
	    }
	    _updateHighImpactUnitTargeting() {
	        const gam = this._gam;
	        GoogleAdManager.pushToQueue(() => {
	            const key = 'hi_au';
	            const targeting = gam.getTargetingValuesForKey(key).filter(value => value !== 'od' && value !== 'om');
	            if (targeting.length) {
	                gam.setTargeting({ key, value: targeting });
	            }
	            else {
	                gam.clearTargetingForKey(key);
	            }
	        });
	    }
	    _includeOutstreamWhenNoInstreamVideo(slots, labels) {
	        if (this._mediaType.isOutstreamAllowed()) {
	            slots.forEach(slot => {
	                if (this._mediaType.outstreamEnabled(slot).outstreamCapable) {
	                    labels.push(`outstreamEnabled_${slot.placementMapName}`);
	                }
	            });
	        }
	        return labels;
	    }
	    requestBids(slots, timeout = this._config.timeouts.initialBidsRequest, labels = []) {
	        return new Promise(resolve => {
	            const adUnitCodes = slots.map(slot => (this.instlEnabled(slot.location) ? this._config.prebid.interstitialAdUnitCode : slot.element.id));
	            labels = this._includeOutstreamWhenNoInstreamVideo(slots, labels);
	            slots.forEach(slot => this._updateBidParams(slot));
	            slots.forEach(slot => this._updateAdUnitParams(slot));
	            this._prebidMethods.requestBids({
	                adUnitCodes,
	                timeout,
	                bidsBackHandler: () => {
	                    GoogleAdManager.pushToQueue(() => {
	                        this._prebidMethods.setTargetingForGPTAsync(adUnitCodes);
	                        resolve();
	                    });
	                },
	                labels,
	            });
	        });
	    }
	    addVideoSlots(videos) {
	        const bidderBidRequests = this._orderedVideoBidders.map(bidder => bidder.getVideoBidRequests(videos));
	        const adUnits = videos.map(video => {
	            const ortb2Imp = this._ortb2.addOrtb2Imp({ video });
	            const adUnit = {
	                code: video.name,
	                ortb2Imp,
	                mediaTypes: this._mediaType.getMediaType({ video }),
	                bids: bidderBidRequests
	                    .map(bidRequests => bidRequests.get(video.name))
	                    .filter(defined)
	                    .reduce((acc, val) => acc.concat(val), []),
	            };
	            video.videoAdUnit = adUnit;
	            return adUnit;
	        });
	        this._prebidMethods.addAdUnits(adUnits);
	    }
	    requestVideoBids(videos, timeout = this._config.timeouts.initialBidsRequest) {
	        const adUnitCodes = videos.map(({ name: adUnitName }) => adUnitName);
	        if (adUnitCodes.length > 0) {
	            return new Promise(resolve => {
	                this._prebidMethods.requestBids({
	                    adUnitCodes,
	                    timeout,
	                    bidsBackHandler: () => {
	                        GoogleAdManager.pushToQueue(() => {
	                            this._prebidMethods.setTargetingForGPTAsync(adUnitCodes);
	                            resolve();
	                        });
	                    },
	                });
	            });
	        }
	    }
	    refreshBids(slots) {
	        return this.requestBids(slots, this._config.timeouts.refreshBidsRequest, ['refresh']);
	    }
	    get enabled() {
	        return this._prebidMethods.isPrebidLoaded();
	    }
	};
	PrebidAuctionManager = __decorate([
	    log('PrebidAuctionManager'),
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object, Config,
	        GoogleAdManager,
	        S2S,
	        BidderSetup,
	        MediaType,
	        PrebidMethods,
	        PrebidConfiguration,
	        PredictiveAnalysisExperiment,
	        Slots,
	        CreativeMonitoring,
	        Ortb2,
	        RoxotAnalytics,
	        RubiconAnalytics])
	], PrebidAuctionManager);

	let AuctionManagers = class AuctionManagers {
	    constructor(_config, prebid, amazon) {
	        this._config = _config;
	        this._auctionManagers = [amazon, prebid];
	        this._auctionManagers = this._auctionManagers.filter(auctionManager => auctionManager.enabled);
	    }
	    init() {
	        this._auctionManagers.forEach(auctionManager => auctionManager.init !== undefined && auctionManager.init());
	    }
	    requestBids(slots) {
	        return Promise.all(this._auctionManagers.map(auctionManager => auctionManager.requestBids(slots)));
	    }
	    refreshBids(slots) {
	        return Promise.all(this._auctionManagers.map(auctionManager => auctionManager.refreshBids(slots)));
	    }
	    addSlots(slots) {
	        this._auctionManagers.forEach(auctionManager => {
	            if (auctionManager.addSlots !== undefined) {
	                auctionManager.addSlots(slots);
	            }
	        });
	    }
	    addVideoSlots(videos) {
	        this._auctionManagers
	            .filter(auctionManager => auctionManager.videoEnabled && auctionManager.addVideoSlots)
	            .forEach(auctionManager => auctionManager.addVideoSlots(videos));
	    }
	    requestVideoBids(videos, timeout) {
	        return Promise.all(this._auctionManagers
	            .filter(auctionManager => auctionManager.videoEnabled)
	            .map(auctionManager => auctionManager.requestVideoBids(videos, timeout)));
	    }
	    getAmazonAuctionManager() {
	        for (const am of this._auctionManagers) {
	            if (am instanceof AmazonAuctionManager) {
	                return am;
	            }
	        }
	    }
	};
	AuctionManagers = __decorate([
	    log('AuctionManagers'),
	    singleton(),
	    __metadata("design:paramtypes", [Config, PrebidAuctionManager, AmazonAuctionManager])
	], AuctionManagers);

	let CommandQueue = class CommandQueue {
	    constructor(adthrive) {
	        this._commands = adthrive.cmd || [];
	    }
	    init() {
	        if (this._commands.length > 0) {
	            for (const command of this._commands) {
	                const isGamMethod = this._isGamMethod(command.toString());
	                if (isGamMethod) {
	                    this._addToGamQueue(command);
	                }
	                else {
	                    this._call(command);
	                }
	            }
	            this._commands = [];
	        }
	    }
	    push(command) {
	        if (this._commands.length > 0) {
	            this._commands.push(command);
	        }
	        else {
	            const isGamMethod = this._isGamMethod(command.toString());
	            if (isGamMethod) {
	                this._addToGamQueue(command);
	            }
	            else {
	                this._call(command);
	            }
	        }
	    }
	    _call(command) {
	        command.call(undefined);
	    }
	    _isGamMethod(stringCommand) {
	        return (stringCommand &&
	            (stringCommand.indexOf('setTargeting(') !== -1 || stringCommand.indexOf('googletag') !== -1 || stringCommand.indexOf('pubads') !== -1));
	    }
	    _addToGamQueue(command) {
	        GoogleAdManager.pushToQueue(() => {
	            this._call(command);
	        });
	    }
	};
	CommandQueue = __decorate([
	    singleton(),
	    __param(0, inject('AdThrive')),
	    __metadata("design:paramtypes", [Object])
	], CommandQueue);

	class Component {
	    get enabled() {
	        return true;
	    }
	}

	let SlotManager = class SlotManager {
	    constructor(_auctionManagers, _config, _googleAdManager, _slots) {
	        this._auctionManagers = _auctionManagers;
	        this._config = _config;
	        this._googleAdManager = _googleAdManager;
	        this._slots = _slots;
	        this.added = new Emitter();
	        this.cleared = new Emitter();
	        this.displayed = new Emitter();
	        this.displaying = new Emitter();
	        this.refreshed = new Emitter();
	        this.refreshing = new Emitter();
	        this.refreshingBids = new Emitter();
	        this.refreshedBids = new Emitter();
	        this.requestingBids = new Emitter();
	        this.requestedBids = new Emitter();
	        this.refreshInterval = 25000;
	    }
	    async add(slot) {
	        await this._googleAdManager.waitForQueue();
	        const slots = this._googleAdManager.defineSlots(this.castArray(slot));
	        slots.forEach(s => {
	            s.setViewability(this._config.marmalade);
	            this._config.clsOptimizedAds.setStyle(s.element, s.location);
	        });
	        this._auctionManagers.addSlots(slots);
	        this._slots.add(slots);
	        await this.added.emit(slots);
	        return slots;
	    }
	    async clear(slot) {
	        const slots = this.castArray(slot);
	        slots.forEach(s => {
	            s.displayed = false;
	            this.setMinDimensions(s.element);
	        });
	        this._googleAdManager.clearSlots(slots);
	        await this.cleared.emit(slots);
	        return slots;
	    }
	    destroy(slot) {
	        const slots = this.castArray(slot);
	        this.pauseRefresh(slots);
	        this._slots.remove(slots);
	        this._googleAdManager.destroySlots(slots);
	        return slots;
	    }
	    rebuild(slot) {
	        const slots = this.castArray(slot);
	        const gam = this._googleAdManager;
	        for (const rslot of slots) {
	            GoogleAdManager.pushToQueue(() => {
	                const targeting = ['refresh', 'inf_scroll', 'decref', 'nref', 'hvp', 'lazy'].reduce((t, key) => {
	                    const value = rslot.getTargeting(key);
	                    if (value.length) {
	                        t.push({ key, value });
	                    }
	                    return t;
	                }, []);
	                gam.destroySlots(this.castArray(rslot));
	                gam.defineSlots(this.castArray(rslot));
	                rslot.setTargeting(targeting);
	            });
	        }
	        return slots;
	    }
	    async refresh(slot, delayEnabled = true) {
	        const slots = this.castArray(slot);
	        for (const s of slots) {
	            s.refreshCount = s.refreshCount + 1;
	            s.servedPrebidBidResponse = undefined;
	        }
	        await this.refreshing.emit(slots);
	        await Promise.all([delayEnabled ? delay(this._config.timeouts.refreshBidsRequest) : true, this.refreshBids(slots)]).then(() => this._googleAdManager.refreshSlots(slots));
	        await this.refreshed.emit(slots);
	        return slots;
	    }
	    async display(slot) {
	        const slots = this.castArray(slot);
	        await this.displaying.emit(slots);
	        await this.requestBids(slots).then(() => this._googleAdManager.displaySlots(slots));
	        slots.forEach(s => {
	            s.displayed = true;
	        });
	        await this.displayed.emit(slots);
	        return slots;
	    }
	    inView(slot) {
	        const slots = this.castArray(slot);
	        slots.forEach(s => this.setRefreshTimeout(s));
	        return slots;
	    }
	    outOfView(slot) {
	        logger.info('SlotManager', 'outOfView', 'verify outOfView:', JSON.parse(JSON.stringify(slot)));
	        const slots = this.castArray(slot);
	        slots
	            .filter(s => !s.alwaysInView)
	            .filter(s => ('IntersectionObserver' in window ? s.outOfViewGPT && s.outOfViewIO : s.outOfViewGPT))
	            .forEach(s => {
	            const iframe = s.element.querySelector('div > iframe');
	            if (isVisible(s.element) && iframe && isVisible(iframe)) {
	                this.clearRefreshTimeout(s);
	            }
	            else {
	                logger.info('SlotManager', 'outOfView', 'Ignoring hidden iframe');
	            }
	        });
	        return slots;
	    }
	    pauseRefresh(slot) {
	        const slots = this.castArray(slot);
	        slots
	            .filter(s => s.refreshTimeout)
	            .forEach(s => {
	            s.refreshPaused = true;
	            this.clearRefreshTimeout(s);
	        });
	        return slots;
	    }
	    resumeRefresh(slot) {
	        const slots = this.castArray(slot);
	        slots
	            .filter(s => s.refreshPaused)
	            .forEach(s => {
	            s.refreshPaused = false;
	            this.setRefreshTimeout(s);
	        });
	        return slots;
	    }
	    updateRefreshTimeout(slot, refreshInterval) {
	        const slots = this.castArray(slot);
	        slots.forEach(s => {
	            s.refreshInterval = refreshInterval;
	            if (s.refreshTimeout) {
	                this.clearRefreshTimeout(s);
	                this.setRefreshTimeout(s);
	            }
	        });
	        return slots;
	    }
	    clearRefreshTimeout(slot, clearDuration = false) {
	        const slots = this.castArray(slot);
	        slots
	            .filter(s => s.refreshTimeout)
	            .forEach(s => {
	            window.clearTimeout(s.refreshTimeout);
	            s.refreshTimeout = undefined;
	            if (clearDuration) {
	                s.viewableDuration = 0;
	            }
	            else if (s.viewableSince) {
	                s.viewableDuration += new Date().getTime() - s.viewableSince.getTime();
	            }
	        });
	    }
	    setRefreshTimeout(slot) {
	        const slots = this.castArray(slot);
	        slots
	            .filter(s => !s.refreshTimeout)
	            .forEach(s => {
	            const refreshInterval = defaultTo(s.refreshInterval, this.refreshInterval);
	            if (refreshInterval > 0) {
	                s.viewableSince = new Date();
	                s.refreshTimeout = window.setTimeout(() => {
	                    s.viewableDuration = 0;
	                    s.refreshInterval = undefined;
	                    s.refreshTimeout = undefined;
	                    this.refresh(s).catch(err => logger.warn('SlotManager', 'setRefreshTimeout', err));
	                }, refreshInterval - s.viewableDuration);
	            }
	        });
	    }
	    async requestBids(slot) {
	        const slots = this.castArray(slot).filter(s => s.enabledForAuction && (!s.lazy || this._config.lazyLoad.lzhb));
	        if (slots.length > 0) {
	            await this.requestingBids.emit(slots);
	            await this._auctionManagers.requestBids(slots);
	            await this.requestedBids.emit(slots);
	        }
	        return slots;
	    }
	    async refreshBids(slot) {
	        const slots = this.castArray(slot).filter(s => s.enabledForAuction);
	        if (slots.length > 0) {
	            await this.refreshingBids.emit(slots);
	            await this._auctionManagers.refreshBids(slots);
	            await this.refreshedBids.emit(slots);
	        }
	        return slots;
	    }
	    castArray(lookup) {
	        if (typeof lookup === 'string') {
	            const slot = this._slots.get(lookup);
	            return slot !== undefined ? [slot] : [];
	        }
	        return Array.isArray(lookup) ? lookup : [lookup];
	    }
	    setMinDimensions(element) {
	        const style = getComputedStyle(element, null);
	        element.style.minHeight = style.getPropertyValue('height');
	        element.style.minWidth = style.getPropertyValue('width');
	    }
	};
	SlotManager = __decorate([
	    log('SlotManager'),
	    singleton(),
	    __metadata("design:paramtypes", [AuctionManagers,
	        Config,
	        GoogleAdManager,
	        Slots])
	], SlotManager);

	let CollapsibleVideoLoggingStore = class CollapsibleVideoLoggingStore {
	    constructor() {
	        this.wasClosed = false;
	        this.wasStarted = false;
	        this.totalTimeCollapsed = 0;
	    }
	};
	CollapsibleVideoLoggingStore = __decorate([
	    log('CollapsibleVideoLoggingStore'),
	    singleton()
	], CollapsibleVideoLoggingStore);

	let UserPageDataLoggingExperiment = class UserPageDataLoggingExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'UserPageDataLoggingExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set('upl', this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.25).get();
	    }
	};
	UserPageDataLoggingExperiment = __decorate([
	    log('UserPageDataLoggingExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], UserPageDataLoggingExperiment);

	let UserPageDataPrivacyLoggingExperiment = class UserPageDataPrivacyLoggingExperiment extends Experiment {
	    constructor() {
	        super();
	        this.key = 'UserPageDataPrivacyLoggingExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	UserPageDataPrivacyLoggingExperiment = __decorate([
	    log('UserPageDataPrivacyLoggingExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], UserPageDataPrivacyLoggingExperiment);

	let UserPageDataLoggingComponent = class UserPageDataLoggingComponent extends Component {
	    constructor(_config, _pageManager, _prebidMethods, _slotManager, _userPageDataLoggingExperiment, _userPageDataPrivacyLoggingExperiment, _userPageDataLogEvents, _collapsibleVideoLoggingStore) {
	        super();
	        this._config = _config;
	        this._pageManager = _pageManager;
	        this._prebidMethods = _prebidMethods;
	        this._slotManager = _slotManager;
	        this._userPageDataLoggingExperiment = _userPageDataLoggingExperiment;
	        this._userPageDataPrivacyLoggingExperiment = _userPageDataPrivacyLoggingExperiment;
	        this._userPageDataLogEvents = _userPageDataLogEvents;
	        this._collapsibleVideoLoggingStore = _collapsibleVideoLoggingStore;
	        this._userPrivacyData = {};
	        this._getUserData = () => {
	            return {
	                device: this._config.context.device,
	                timePageOpen: now$2() - this._config.timing.started,
	                timeOnPage: this._config.timing.totalTimeOnPage,
	                viewportWidth: window.innerWidth,
	                viewportHeight: window.innerHeight,
	                video: {
	                    nonclose: !this._collapsibleVideoLoggingStore.wasClosed,
	                    playerName: this._collapsibleVideoLoggingStore.playerName,
	                    totalTimeCollapsed: this._collapsibleVideoLoggingStore.totalTimeCollapsed,
	                    wasStarted: this._collapsibleVideoLoggingStore.wasStarted,
	                },
	                ...this._userPrivacyData,
	                ...(!this._config.gdpr.enabled &&
	                    !this._config.ccpa.userOptedOut && {
	                    uid1: getUIDForSource('adserver.org', this._prebidMethods.isPrebidLoaded()),
	                }),
	            };
	        };
	        this._legacy = this._config.impressionLog.enabled === 1;
	    }
	    init() {
	        if (!this._legacy) {
	            const { reasons: disableAds } = this._config.disableAds;
	            Promise.all([
	                disableAds.size !== 0 ? 0 : this._slotManager.requestingBids.once().then(() => now$2()),
	                disableAds.size !== 0 ? 0 : this._slotManager.requestedBids.once().then(() => now$2()),
	                disableAds.size !== 0 ? 0 : this._slotManager.displayed.once().then(() => now$2()),
	                pageLoaded(),
	            ])
	                .then(([requestingBids, requestedBids, displayed]) => this._setTimingData(requestingBids, requestedBids, displayed))
	                .catch(err => logger.error('UserPageDataComponent', 'init', err));
	        }
	        if (isMobile()) {
	            this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.visibilityChange], () => {
	                if (document.visibilityState === 'hidden') {
	                    this._logUserData();
	                }
	            });
	        }
	        this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload, this._pageManager.pageHide], () => this._logUserData());
	        this._logUserPrivacyData().catch(() => {
	            logger.error('_logUserPrivacyData: ', 'Could not log user privacy.');
	        });
	    }
	    get enabled() {
	        return this._userPageDataLoggingExperiment.result;
	    }
	    _setTimingData(auctionStarted, auctionFinished, displayed) {
	        if (window.performance && window.performance.timing) {
	            const t = window.performance.timing;
	            if (t && t.navigationStart !== 0) {
	                const timing = {
	                    pageLoad: t.loadEventStart - t.navigationStart,
	                    domainLookup: t.domainLookupEnd - t.domainLookupStart,
	                    connect: t.connectEnd - t.connectStart,
	                    request: t.responseStart - t.requestStart,
	                    response: t.responseEnd - t.responseStart,
	                    navigation: t.fetchStart - t.navigationStart,
	                    domInteractive: t.domInteractive - t.navigationStart,
	                    domContentLoaded: t.domContentLoadedEventStart - t.navigationStart,
	                };
	                const valid = Object.keys(timing)
	                    .map(key => timing[key])
	                    .every((metric) => !isNaN(metric) && metric >= 0 && metric < 3600000);
	                if (valid) {
	                    const { reasons: disableAds } = this._config.disableAds;
	                    this._timingData = {
	                        ...timing,
	                        ...this._config.timing.timingData,
	                        disableAds: disableAds.size > 0 ? [...disableAds].join(',') : 'none',
	                        auctionStarted,
	                        auctionFinished,
	                        displayed,
	                    };
	                }
	            }
	        }
	    }
	    _logUserData() {
	        this._userPageDataLogEvents.loggingData.emit().catch(null);
	        this._userPageDataLogEvents.setUserPageData({
	            ...(!this._legacy && this._timingData && { UserPageTimingData: this._timingData }),
	            UserPageDataLoggingComponent: this._getUserData(),
	        });
	    }
	    async _logUserPrivacyData() {
	        if (this._userPageDataPrivacyLoggingExperiment.result) {
	            this._userPrivacyData = await this._getUserPrivacyData();
	            logger.info('UserPrivacyData: ', '_logUserPrivacyData: ', this._userPrivacyData);
	        }
	    }
	    async _getUserPrivacyData() {
	        return {
	            gpc: 'navigator' in window && 'globalPrivacyControl' in window.navigator ? window.navigator.globalPrivacyControl : null,
	            dcp: await this._getDataConsent(),
	        };
	    }
	    async _getDataConsent() {
	        if ('dataConsentPreference' in document) {
	            try {
	                return await document.dataConsentPreference();
	            }
	            catch (err) {
	                logger.info('UserPageDataLoggingComponent', '_getDataConsent', 'User data privacy unknown, promise rejected. Returning null.');
	                return null;
	            }
	        }
	        return null;
	    }
	};
	UserPageDataLoggingComponent = __decorate([
	    log('UserPageDataLoggingComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        PageManager,
	        PrebidMethods,
	        SlotManager,
	        UserPageDataLoggingExperiment,
	        UserPageDataPrivacyLoggingExperiment,
	        UserPageDataLoggingEvents,
	        CollapsibleVideoLoggingStore])
	], UserPageDataLoggingComponent);

	let AdDensityExperiment = class AdDensityExperiment extends Experiment {
	    constructor() {
	        super();
	        this.key = 'AdDensityExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.25).get();
	    }
	};
	AdDensityExperiment = __decorate([
	    log('AdDensityExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], AdDensityExperiment);

	const isFrontpage = () => {
	    return window.location.origin + '/' === trimQueryStringFromUrl(window.location.href);
	};
	const trimQueryStringFromUrl = (url) => {
	    return url.split('?')[0];
	};

	let AdDensityComponent = class AdDensityComponent extends Component {
	    constructor(_gam, _config, _adDensityExperiment, _slots, _slotManager, _pageManager, _userPageDataLogEvents) {
	        super();
	        this._gam = _gam;
	        this._config = _config;
	        this._adDensityExperiment = _adDensityExperiment;
	        this._slots = _slots;
	        this._slotManager = _slotManager;
	        this._pageManager = _pageManager;
	        this._userPageDataLogEvents = _userPageDataLogEvents;
	        this._initialSlotsTimeout = 10000;
	        this._addToMainContent = new Set(['Below_Post']);
	        this._slotsForAdDensity = new Set(['Content', 'Recipe', 'Native_Recipe', 'Sponsor_Tile', 'Below_Post', 'Footer']);
	        this._mainContent = null;
	        this._commentElem = null;
	        this._heightsRegistered = false;
	        this._initMainContentHeight = null;
	        this._endMainContentHeight = null;
	        this._slotsHeightLoad = null;
	        this._slotsHeightEnd = null;
	        this._slotsHeightVideo = null;
	        this._slotsForInitial = new Set();
	        this._slotsForMainContent = new Set();
	        this._slotsForEnd = new Set();
	    }
	    init() {
	        this._mainContent = getMainArticle();
	        if (this._mainContent === null) {
	            logger.info('AdDensityComponent', 'init', 'main content not found');
	            return;
	        }
	        else {
	            this._initObserver(this._mainContent);
	            logger.info('AdDensityComponent', 'init', 'mainContent', this._mainContent.offsetHeight, this._mainContent);
	        }
	        this._gam.slotOnload.on(() => {
	            if (!this._heightsRegistered) {
	                logger.info('AdDensityComponent', 'slotOnload', 'slotsAddedInitial', this._slotsForInitial);
	                logger.info('AdDensityComponent', 'slotOnload', 'slotsAddedEnd', this._slotsForEnd);
	                setTimeout(() => {
	                    this._getSlotHeights();
	                }, this._initialSlotsTimeout);
	                this._heightsRegistered = true;
	            }
	        });
	        this._slotManager.added.on(slots => {
	            if (!slots.some(slot => slot.infinite)) {
	                this._addSlots(slots);
	            }
	        });
	        this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload], () => this._logAdDensity());
	    }
	    _logAdDensity() {
	        const adDensity = {
	            ...(this._initMainContentHeight &&
	                this._slotsHeightLoad && {
	                addensload: Math.round((this._slotsHeightLoad / this._initMainContentHeight) * 100),
	            }),
	            ...(this._endMainContentHeight &&
	                this._slotsHeightEnd && {
	                addensend: Math.round((this._slotsHeightEnd / this._endMainContentHeight) * 100),
	            }),
	            ...(this._endMainContentHeight &&
	                this._slotsHeightVideo && {
	                addensvid: Math.round((this._slotsHeightVideo / this._endMainContentHeight) * 100),
	            }),
	        };
	        if (Object.keys(adDensity).length > 0) {
	            this._userPageDataLogEvents.setUserPageData({ AdDensityComponent: adDensity });
	        }
	    }
	    _addSlots(slots) {
	        slots
	            .filter(slot => this._slotsForAdDensity.has(slot.location))
	            .forEach(slot => {
	            if (!slot.lazy) {
	                this._slotsForInitial.add(slot.name);
	                if (this._addToMainContent.has(slot.location)) {
	                    this._slotsForMainContent.add(slot.name);
	                }
	            }
	            this._slotsForEnd.add(slot.name);
	        });
	    }
	    isSlotInMainContent(slot) {
	        var _a;
	        if (((_a = this._mainContent) === null || _a === void 0 ? void 0 : _a.querySelector(`#${slot.id}`)) && !this.isSlotInComment(slot)) {
	            return true;
	        }
	        return false;
	    }
	    isSlotInComment(slot) {
	        if (this._commentElem && this._commentElem.querySelector(`#${slot.id}`)) {
	            return true;
	        }
	        return false;
	    }
	    _getSlotHeights() {
	        let initialSlotHeights = 0;
	        let mainContentSlotsTotal = 0;
	        this._slots.get().forEach(slot => {
	            if (this._slotsForInitial.has(slot.name) && (slot.location !== 'Content' || this.isSlotInMainContent(slot))) {
	                logger.info('AdDensityComponent', 'getSlotHeights', 'slotsForInitial', slot.name, slot.element.offsetHeight);
	                initialSlotHeights += slot.element.offsetHeight;
	            }
	            if (this._slotsForMainContent.has(slot.name)) {
	                mainContentSlotsTotal += slot.element.offsetHeight;
	            }
	        });
	        this._slotsHeightLoad = initialSlotHeights;
	        if (this._mainContent) {
	            this._initMainContentHeight =
	                this._commentElem !== null ? this._mainContent.offsetHeight - this._commentElem.offsetHeight : this._mainContent.offsetHeight;
	            this._initMainContentHeight += mainContentSlotsTotal;
	        }
	        logger.info('AdDensityComponent', 'slotsHeightLoad', 'config', this._slotsHeightLoad);
	        logger.info('AdDensityComponent', 'initMainContentHeightHeight', 'config', this._initMainContentHeight);
	    }
	    _initObserver(articleContent) {
	        const comment = articleContent.querySelector('div #comments, section .comments');
	        this._observer = this.getIntersectionObserver(comment);
	        if (comment !== null) {
	            logger.info('AdDensityComponent', 'getMainContent', 'comment found in main content', comment.offsetHeight, comment);
	            this._commentElem = comment;
	            this._observer.observe(this._commentElem);
	        }
	        else {
	            this._observer.observe(articleContent);
	        }
	    }
	    getIntersectionObserver(comment) {
	        const callback = (entries) => {
	            var _a, _b;
	            for (const entry of entries) {
	                if (this._initMainContentHeight !== null) {
	                    if (comment === null && entry.boundingClientRect.top < 0) {
	                        logger.info('AdDensityComponent', 'getIntersectionObserver', 'reached end of main content');
	                        this._calculateSlotHeightsAtEnd();
	                        (_a = this._observer) === null || _a === void 0 ? void 0 : _a.unobserve(this._mainContent);
	                    }
	                    if (comment !== null && entry.boundingClientRect.top > 0) {
	                        logger.info('AdDensityComponent', 'getIntersectionObserver', 'reached top of comment', entry);
	                        this._calculateSlotHeightsAtEnd();
	                        (_b = this._observer) === null || _b === void 0 ? void 0 : _b.unobserve(comment);
	                    }
	                }
	            }
	        };
	        return new IntersectionObserver(callback, {});
	    }
	    _calculateSlotHeightsAtEnd() {
	        let totalHeight = 0;
	        let mainContentSlotsTotal = 0;
	        this._slots.get().forEach(slot => {
	            if (this._slotsForEnd.has(slot.name) && (slot.location !== 'Content' || this.isSlotInMainContent(slot))) {
	                logger.info('AdDensityComponent', 'calculateSlotHeightsAtEnd', 'slotsForEnd', slot.name, slot.element.offsetHeight);
	                totalHeight += slot.element.offsetHeight;
	            }
	            if (this._slotsForMainContent.has(slot.name)) {
	                mainContentSlotsTotal += slot.element.offsetHeight;
	            }
	        });
	        this._slotsHeightEnd = totalHeight;
	        if (this._mainContent) {
	            this._endMainContentHeight =
	                this._commentElem !== null ? this._mainContent.offsetHeight - this._commentElem.offsetHeight : this._mainContent.offsetHeight;
	            this._endMainContentHeight += mainContentSlotsTotal;
	            logger.info('AdDensityComponent', '_calculateSlotHeightsAtEnd', '_endMainContentHeight', this._endMainContentHeight);
	        }
	        logger.info('AdDensityComponent', '_calculateSlotHeightsAtEnd', totalHeight, {
	            'playlistPlayer:': this._config.video.playlistPlayerAdded,
	            'contextualPlayer:': this._config.video.contextualPlayerAdded,
	            'sekindoPlayer:': this._config.video.sekindoPlayerAdded,
	        });
	        if (this._config.video.playlistPlayerAdded) {
	            const collapseElement = document.querySelector('.adthrive-collapse-player');
	            totalHeight += collapseElement ? collapseElement.offsetHeight : 0;
	        }
	        if (this._config.video.contextualPlayerAdded) {
	            const contextualElements = document.querySelectorAll('.adthrive-video-player');
	            contextualElements.forEach((contextualElement) => {
	                totalHeight += contextualElement.offsetHeight;
	            });
	        }
	        if (this._config.video.sekindoPlayerAdded) {
	            const sekindoElement = document.querySelector('.adthrive-sekindo-player');
	            totalHeight += sekindoElement ? sekindoElement.offsetHeight : 0;
	        }
	        this._slotsHeightVideo = totalHeight;
	        logger.info('AdDensityComponent', '_calculateSlotHeightsAtEnd', 'slotsHeightEnd', 'config', totalHeight);
	    }
	    get enabled() {
	        return (this._adDensityExperiment.result &&
	            'IntersectionObserver' in window &&
	            !(document.querySelector('body.home') !== null || document.querySelector('body.archive') !== null) &&
	            !isFrontpage());
	    }
	};
	AdDensityComponent = __decorate([
	    log('AdDensityComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager,
	        Config,
	        AdDensityExperiment,
	        Slots,
	        SlotManager,
	        PageManager,
	        UserPageDataLoggingEvents])
	], AdDensityComponent);

	let AdTestComponent = class AdTestComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	    }
	    init() {
	        if (this._config.context.querystring.has('ad_test')) {
	            const adTest = this._config.context.querystring.get('ad_test');
	            this._gam.setTargeting({ key: 'sec', value: adTest.split(',').map(val => `test${val}`) });
	        }
	    }
	};
	AdTestComponent = __decorate([
	    log('AdTestComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], AdTestComponent);

	let BrandMetricsExperiment = class BrandMetricsExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'bmetrics';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.99).get();
	    }
	};
	BrandMetricsExperiment = __decorate([
	    log('BrandMetricsExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], BrandMetricsExperiment);

	let BrandMetricsComponent = class BrandMetricsComponent extends Component {
	    constructor(_brandMetricsExperiment, _gam, _prebidAuctionManager) {
	        super();
	        this._brandMetricsExperiment = _brandMetricsExperiment;
	        this._gam = _gam;
	        this._prebidAuctionManager = _prebidAuctionManager;
	        this._url = 'https://cdn.brandmetrics.com/tag/aa466d868b2742ffa2cc31bb6341dc12/cafemedia.js';
	    }
	    init() {
	        void this._prebidAuctionManager.bidsRequested.once().then(() => {
	            this._load();
	        });
	    }
	    get enabled() {
	        return this._brandMetricsExperiment.result;
	    }
	    _load() {
	        importScript(this._url)
	            .then(() => this._monitorSurvey())
	            .catch(() => { });
	    }
	    _monitorSurvey() {
	        window._brandmetrics = window._brandmetrics || [];
	        window._brandmetrics.push({
	            cmd: '_querySurvey',
	            val: {
	                callback: (surveyAvailable, survey) => {
	                    if (surveyAvailable && survey && survey.measurementId) {
	                        this._gam.setTargeting({ key: 'bms', value: [survey.measurementId.toString()] });
	                    }
	                },
	            },
	        });
	    }
	};
	BrandMetricsComponent = __decorate([
	    log('BrandMetrics'),
	    injectable(),
	    __metadata("design:paramtypes", [BrandMetricsExperiment,
	        GoogleAdManager,
	        PrebidAuctionManager])
	], BrandMetricsComponent);

	const addBodyClass = (device) => {
	    const body = document.body;
	    const className = `adthrive-device-${device}`;
	    if (!body.classList.contains(className)) {
	        try {
	            body.classList.add(className);
	        }
	        catch (err) {
	            logger.error('BodyDeviceClassComponent', 'init', { message: err.message });
	            const support = 'classList' in document.createElement('_');
	            logger.error('BodyDeviceClassComponent', 'init.support', { support });
	        }
	    }
	};

	let BodyDeviceClassComponent = class BodyDeviceClassComponent extends Component {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    init() {
	        addBodyClass(this._config.context.device);
	    }
	};
	BodyDeviceClassComponent = __decorate([
	    log('BodyDeviceClassComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], BodyDeviceClassComponent);

	let CCPAComponent = class CCPAComponent extends Component {
	    constructor(_config, _prebidMethods) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this.ccpaRequired = this._config.ccpa.required;
	        this.privacyString = this._config.ccpa.privacyString;
	        this.ccpaNotApplicable = this._config.ccpa.ccpaNotApplicable;
	        this.ccpaOptIn = this._config.ccpa.ccpaOptIn;
	        this.ccpaOptOut = this._config.ccpa.ccpaOptOut;
	        this.gpcEnabled = !!this._config.ccpa.gpcEnabled;
	        this.gpcUpdated = false;
	        this.globalPrivacyControl = window.navigator.globalPrivacyControl;
	    }
	    init() {
	        window.__uspapi = this.uspapi.bind(this);
	        this.addLocatorFrame();
	        if (this.ccpaRequired) {
	            this.setGpcString();
	            if (this.gpcEnabled === true) {
	                this.setPrivacyString(this.ccpaOptOut);
	            }
	            else {
	                this.setPrivacyString(this.ccpaOptIn);
	            }
	            this.addOptOutLink();
	            this.setDeviceAccess();
	        }
	        else {
	            this.setPrivacyString(this.ccpaNotApplicable);
	        }
	    }
	    setPrivacyString(privacyString, linkClick = false) {
	        const nowApplicable = this.ccpaRequired && this.privacyString === this.ccpaNotApplicable;
	        const nowNotApplicable = !this.ccpaRequired && this.privacyString !== this.ccpaNotApplicable;
	        if (this.privacyString === '' || linkClick === true || nowApplicable || nowNotApplicable || this.gpcUpdated) {
	            document.cookie = `usprivacy=${privacyString}`;
	            this.privacyString = privacyString;
	        }
	    }
	    setGpcString() {
	        if ((this.gpcEnabled === null || this.gpcEnabled === false) && this.globalPrivacyControl) {
	            localStorage.setItem('adthrive_gpc', `${this.globalPrivacyControl}`);
	            this.gpcEnabled = !!`${this.globalPrivacyControl}`;
	            this.gpcUpdated = true;
	        }
	        else if (this.gpcEnabled === true && !this.globalPrivacyControl) {
	            localStorage.removeItem('adthrive_gpc');
	            this.gpcEnabled = this.globalPrivacyControl;
	            this.gpcUpdated = true;
	        }
	    }
	    setDeviceAccess() {
	        const deviceAccess = this.privacyString === this.ccpaOptIn ? true : false;
	        this._prebidMethods.setConfig({ deviceAccess });
	    }
	    addOptOutLink() {
	        const optOutText = 'Do not sell my personal information.';
	        const optInText = 'Customize my ad experience.';
	        const ccpaLinkText = this.privacyString === this.ccpaOptIn ? optOutText : optInText;
	        const ccpaOptOutDiv = document.createElement('div');
	        ccpaOptOutDiv.className = 'adthrive-ccpa-link';
	        ccpaOptOutDiv.innerHTML = 'Information from your device can be used to personalize your ad experience. <br> ';
	        const ccpaATag = document.createElement('a');
	        ccpaATag.innerHTML = ccpaLinkText;
	        ccpaATag.addEventListener('click', (() => {
	            if (this.privacyString === this.ccpaOptIn) {
	                this.setPrivacyString(this.ccpaOptOut, true);
	                ccpaATag.textContent = optInText;
	            }
	            else {
	                this.setPrivacyString(this.ccpaOptIn, true);
	                ccpaATag.textContent = optOutText;
	            }
	            this.setDeviceAccess();
	        }).bind(this));
	        ccpaOptOutDiv.appendChild(ccpaATag);
	        this._config.footer.elements.push({
	            order: 1,
	            element: ccpaOptOutDiv,
	        });
	    }
	    uspapi(command, version, callback) {
	        const uspDataObj = {
	            command,
	            version,
	            uspString: readCookie('usprivacy'),
	        };
	        callback(uspDataObj, true);
	    }
	    addLocatorFrame() {
	        if (document.getElementById('__uspapiLocator') === null) {
	            const frame = document.createElement('iframe');
	            frame.style.display = 'none';
	            frame.id = '__uspapiLocator';
	            frame.name = '__uspapiLocator';
	            document.body.appendChild(frame);
	        }
	    }
	};
	CCPAComponent = __decorate([
	    log('CCPAComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods])
	], CCPAComponent);

	let ComscoreComponent = class ComscoreComponent extends Component {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    init() {
	        const { comscore, comscoreMessage } = this._config.comscore;
	        if (comscore) {
	            this._config.footer.elements.push({
	                order: 2,
	                element: `<span>An Elite ${comscoreMessage} Publisher</span>`,
	            });
	        }
	    }
	};
	ComscoreComponent = __decorate([
	    log('ComscoreFooterComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], ComscoreComponent);

	let ConfiantRefreshExperiment = class ConfiantRefreshExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'confiant';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'exp' : 'prod');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], ConfiantRefreshExperiment.prototype, "run", null);
	ConfiantRefreshExperiment = __decorate([
	    log('ConfiantRefreshExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], ConfiantRefreshExperiment);

	let ConfiantEndpointExperiment = class ConfiantEndpointExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'cnfep';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(1).get();
	    }
	};
	ConfiantEndpointExperiment = __decorate([
	    log('ConfiantEndpointExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], ConfiantEndpointExperiment);

	let ConfiantComponent = class ConfiantComponent extends Component {
	    constructor(_config, _confiantRefreshExperiment, _confiantEndpointExperiment) {
	        super();
	        this._config = _config;
	        this._confiantRefreshExperiment = _confiantRefreshExperiment;
	        this._confiantEndpointExperiment = _confiantEndpointExperiment;
	        this._prodPropertyId = 'mOinGM9MTu5v-Lto835XLhlrSPY';
	        this._expPropertyId = 'wyN88rwU6FImxcXgha7IWE-FzsE';
	        this._trackerHoldoutKey = 'conf';
	    }
	    init() {
	        const id = this._confiantRefreshExperiment.result ? this._expPropertyId : this._prodPropertyId;
	        const path = this._confiantEndpointExperiment.result ? 'gpt_and_prebid/config.js' : 'gpt_and_prebid_v3l/config.js';
	        const url = `https://confiant-integrations.global.ssl.fastly.net/${id}/${path}`;
	        return importScript(url);
	    }
	    get enabled() {
	        return this._config.tkho.tracker !== this._trackerHoldoutKey;
	    }
	};
	ConfiantComponent = __decorate([
	    log('ConfiantComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        ConfiantRefreshExperiment,
	        ConfiantEndpointExperiment])
	], ConfiantComponent);

	let ConfigTargetingComponent = class ConfigTargetingComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this.debug = false;
	        this.debug = this._config.context.debug;
	    }
	    getConfigTargeting() {
	        const config = this._config;
	        const context = this._config.context;
	        const debug = this.debug;
	        return [
	            ...config.gam.targeting,
	            { key: 'abgroup', value: config.abGroup.groups },
	            { key: 'bucket', value: debug ? 'unsupported' : context.bucket },
	            { key: 'sens', value: config.site.sensitiveCategories },
	            { key: 'domain', value: context.domain },
	            { key: 'plugin', value: context.plugin },
	            { key: 'hi_au', value: config.adTypes.enabledMinified },
	            { key: 'vpwxvph', value: `${window.innerWidth}x${window.innerHeight}` },
	            {
	                key: 'ri',
	                value: context.querystring.has('ri') ? context.querystring.get('ri') : String(Math.floor(Math.random() * 100)),
	            },
	            { key: 'pvk', value: context.pageviewKey },
	            { key: 'sess', value: context.sessionKey },
	            { key: 'branch', value: context.branch },
	            { key: 'deployment', value: debug || context.invalidTraffic ? 'unsupported' : context.deployment },
	            { key: 'hbho', value: config.hbho.bidders },
	            { key: 'vbho', value: config.vbho.bidders },
	            { key: 'gptv', value: googletag.getVersion() },
	        ];
	    }
	    getConditionalTargeting() {
	        const conditionalTargeting = [];
	        const context = this._config.context;
	        const site = this._config.site;
	        const ccpa = this._config.ccpa;
	        if (site.sensCategoriesOff.length) {
	            conditionalTargeting.push({ key: 'sens_off', value: site.sensCategoriesOff });
	        }
	        if (context.connectionTargeting.length) {
	            conditionalTargeting.push({
	                key: 'connection',
	                value: context.connectionTargeting,
	            });
	        }
	        if (ccpa.required) {
	            conditionalTargeting.push({ key: 'ccpaOptOut', value: ccpa.userOptedOut ? '1' : '0' });
	        }
	        return conditionalTargeting;
	    }
	    setConditionalFlagTargeting() {
	        const context = this._config.context;
	        if (context.invalidTraffic) {
	            this._gam.setTargetingFlag('bot', context.invalidTraffic);
	        }
	        if (context.adsMinLoadDuration) {
	            this._gam.setTargetingFlag('adsmnche', context.adsMinLoadDuration);
	        }
	        if (this._config.adOptions.pmp) {
	            this._gam.setTargetingFlag('pmp_elig', ['1']);
	        }
	        if (this._config.clsOptions) {
	            this._gam.setTargetingFlag('clson', [this._config.clsOptions.injectedFromPlugin ? 'true' : 'false']);
	            this._gam.setTargetingFlag('clsBranch', [this._config.clsOptions.branch ? this._config.clsOptions.branch : '']);
	            this._gam.setTargetingFlag('clsBucket', [this._config.clsOptions.bucket ? this._config.clsOptions.bucket : '']);
	        }
	        if (context.integration) {
	            this._gam.setTargetingFlag('integration', [context.integration]);
	        }
	    }
	    init() {
	        GoogleAdManager.pushToQueue(() => {
	            this._gam.setTargeting([...this.getConfigTargeting(), ...this.getConditionalTargeting()]);
	            this.setConditionalFlagTargeting();
	        });
	    }
	};
	ConfigTargetingComponent = __decorate([
	    log('ConfigTargetingComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], ConfigTargetingComponent);

	let ConfirmedClicksComponent = class ConfirmedClicksComponent extends Component {
	    constructor(_gam, _slots) {
	        super();
	        this._gam = _gam;
	        this._slots = _slots;
	    }
	    init() {
	        this._gam.slotRenderEnded.on(event => this.confirmedClickOverlay(event));
	    }
	    confirmedClickOverlay({ event, slot }) {
	        GoogleAdManager.pushToQueue(() => {
	            const { id, location, sequence, nref } = slot.getTargetingMap();
	            const confirmedClick = this.confirmedClickStatus(this._slots.get(event.slot.getSlotElementId()));
	            if (isAdXAd({ event, ignoreOtherCompanyIds: true }) && confirmedClick) {
	                logger.event('confirmedClickOverlay', 'status', {
	                    id,
	                    location,
	                    sequence,
	                    nref,
	                    confirmedClick,
	                });
	            }
	        });
	    }
	    confirmedClickStatus(slot) {
	        const confirmedClickElements = ['common_15click_overlay', 'common_15click_anchor'];
	        try {
	            const nodes = slot === null || slot === void 0 ? void 0 : slot.element.querySelectorAll('iframe[id^=google_ads_iframe]');
	            let gamAdIframe;
	            if (nodes && (nodes === null || nodes === void 0 ? void 0 : nodes.length) > 0) {
	                gamAdIframe = nodes[0];
	            }
	            return confirmedClickElements.some(elm => { var _a; return ((_a = gamAdIframe === null || gamAdIframe === void 0 ? void 0 : gamAdIframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementById(elm)) != null; });
	        }
	        catch (err) {
	            logger.error('ConfirmedClickComponent', 'confirmedClickStatus', err);
	        }
	        return false;
	    }
	};
	ConfirmedClicksComponent = __decorate([
	    log('ConfirmedClicksComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, Slots])
	], ConfirmedClicksComponent);

	let DeclaredRefreshComponent = class DeclaredRefreshComponent extends Component {
	    constructor(_config, _gam, _slotManager) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._slotManager = _slotManager;
	        this._device = this._config.context.device;
	    }
	    init() {
	        const slotManager = this._slotManager;
	        this._gam.slotRenderEnded.on(({ event, slot }) => {
	            if (this.isDeclaredRefreshCompliantSlot(slot)) {
	                if (isAdXAd({ event })) {
	                    slotManager.updateRefreshTimeout(slot.id, 240000);
	                }
	            }
	        });
	        slotManager.added.on(slots => slots.forEach(slot => {
	            if (this.isDeclaredRefreshCompliantSlot(slot)) {
	                GoogleAdManager.pushToQueue(() => {
	                    slot.setTargeting({ key: 'decref', value: '240' });
	                });
	            }
	        }));
	    }
	    isDeclaredRefreshCompliantSlot(slot) {
	        return ((slot.location === 'Sidebar' && (this._device === 'phone' || this._device === 'tablet')) ||
	            (slot.location === 'Header' && slot.sequence === 2 && (this._device === 'phone' || this._device === 'tablet')));
	    }
	};
	DeclaredRefreshComponent = __decorate([
	    log('DeclaredRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager, SlotManager])
	], DeclaredRefreshComponent);

	let StickyOutstreamExperiment = class StickyOutstreamExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'stkyos';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.95).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], StickyOutstreamExperiment.prototype, "run", null);
	StickyOutstreamExperiment = __decorate([
	    log('StickyOutstreamExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], StickyOutstreamExperiment);

	class BaseDynamicAdsInjector {
	    constructor() {
	        this._totalContentInserted = 0;
	        this._recipeCount = 0;
	        this._mainContentHeight = 0;
	        this._mainContentDiv = null;
	        this._firstContentDiv = null;
	        this._totalAvailableElements = 0;
	        this._densityDevice = DensityDevice.Desktop;
	        this._pubLog = { onePerViewport: false, targetDensity: 0, targetDensityUnits: 0, combinedMax: 0 };
	        this._densityMax = 0.99;
	        this.locationMaxLazySequence = new Map([
	            ['Recipe', 5],
	            ['Below_Post', 1],
	        ]);
	    }
	    inject(dynamicAds, target = document) {
	        if (window.adthriveCLS && window.adthriveCLS.targetDensityLog) {
	            logger.event('BaseDynamicAdsInjector', '_logDensityInfo', window.adthriveCLS.targetDensityLog);
	        }
	        const targetDensityEnabled = this._config.targetDensity.enabled;
	        const nonDensitySlots = dynamicAds.filter(dynamicAd => (targetDensityEnabled ? dynamicAd.location !== 'Content' : dynamicAd));
	        const densitySlots = dynamicAds.filter(dynamicAd => (targetDensityEnabled ? dynamicAd.location === 'Content' : null));
	        return [
	            ...(nonDensitySlots.length ? this._injectNonDensitySlots(nonDensitySlots, target) : []),
	            ...(densitySlots.length ? this._injectDensitySlots(densitySlots, target) : []),
	        ];
	    }
	    _injectNonDensitySlots(dynamicAds, target = document) {
	        const slots = [];
	        for (const dynamicAd of dynamicAds) {
	            let spacing = 0;
	            let nextAfter = 0;
	            let totalAds = 0;
	            if (dynamicAd.spacing > 0) {
	                spacing = window.innerHeight * dynamicAd.spacing;
	                nextAfter = spacing;
	            }
	            const repeatedDynamicAds = this._repeatDynamicAds(dynamicAd);
	            const elements = this.getElements(dynamicAd.elementSelector, target);
	            logger.info('BaseDynamicAdsInjector', '_injectNonDensitySlots', `${dynamicAd.location} - Found ${elements.length} elements for selector ${dynamicAd.pageSelector} ${dynamicAd.elementSelector}`, dynamicAd);
	            if (dynamicAd.skip > 0) {
	                logger.info('BaseDynamicAdsInjector', '_injectNonDensitySlots', 'Skipping %d element(s)', dynamicAd.skip);
	            }
	            for (let elementIndex = dynamicAd.skip; elementIndex < elements.length; elementIndex += dynamicAd.every) {
	                if (totalAds + 1 > repeatedDynamicAds.length) {
	                    logger.info('BaseDynamicAdsInjector', '_injectNonDensitySlots', 'Max ads displayed %d', totalAds);
	                    break;
	                }
	                let element = elements[elementIndex];
	                if (spacing > 0) {
	                    const { bottom } = elementOffset(element);
	                    if (bottom <= nextAfter) {
	                        continue;
	                    }
	                    logger.info('BaseDynamicAdsInjector', '_injectNonDensitySlots', 'Current element is after next spacing (%d > %d)', bottom, nextAfter);
	                    nextAfter = bottom + spacing;
	                }
	                const repeatedDynamicAd = repeatedDynamicAds[totalAds];
	                const name = `${repeatedDynamicAd.location}_${repeatedDynamicAd.sequence}`;
	                if (slots.some(slot => slot.name === name)) {
	                    totalAds += 1;
	                    logger.warn('BaseDynamicAdsInjector', '_injectNonDensitySlots', `Skipping duplicate slot ${name}`);
	                    continue;
	                }
	                const dynamicElementId = this.getDynamicElementId(repeatedDynamicAd);
	                const locationClassName = `adthrive-${dynamicAd.location.replace('_', '-').toLowerCase()}`;
	                const locationSequenceClassName = `${locationClassName}-${dynamicAd.sequence}`;
	                const classNames = [locationClassName, locationSequenceClassName, ...dynamicAd.classNames];
	                const dynamicElement = this.addAd(element, dynamicElementId, dynamicAd.position, classNames, dynamicAd.location);
	                if (dynamicElement) {
	                    const sizes = this._filterAdUnitSizes(repeatedDynamicAd, dynamicElement);
	                    if (sizes.length) {
	                        slots.push(this.createSlot(repeatedDynamicAd, dynamicElement, sizes, target !== document));
	                        if (dynamicAd.location === 'Recipe') {
	                            ++this._recipeCount;
	                        }
	                        totalAds += 1;
	                    }
	                    else {
	                        logger.info('BaseDynamicAdsInjector', '_injectNonDensitySlots', `Skipped ad unit ${repeatedDynamicAd.location}_${repeatedDynamicAd.sequence}. It does not fit in the element.`);
	                    }
	                    element = dynamicElement;
	                }
	            }
	        }
	        return slots;
	    }
	    _getMinDivHeight(location = 'Content') {
	        return this._config.clsOptimizedAds.getDivHeight(location, this._config.context.device);
	    }
	    _shouldTargetAllElgibile(density) {
	        return density === this._densityMax;
	    }
	    _injectDensitySlots(dynamicAds, target = document) {
	        try {
	            this._calculateMainContentHeightAndAllElements(dynamicAds);
	        }
	        catch (e) {
	            logger.warn('BaseDynamicAdsInjector', 'injectDensitySlots', e);
	            return [];
	        }
	        this._densityDevice = this._config.context.device === 'desktop' ? DensityDevice.Desktop : DensityDevice.Mobile;
	        const slots = [];
	        const { adDensity: targetDensity, onePerViewport } = this._getDensitySettings();
	        const targetAll = this._shouldTargetAllElgibile(targetDensity);
	        const targetDensityUnits = this._getTargetDensityUnits(targetDensity);
	        const combinedMax = this._getCombinedMax(dynamicAds);
	        const numberOfUnits = Math.min(...[this._totalAvailableElements, targetDensityUnits, ...(combinedMax > 0 ? [combinedMax] : [])]);
	        this._pubLog = { onePerViewport, targetDensity, targetDensityUnits, combinedMax };
	        if (!numberOfUnits) {
	            logger.warn('BaseDynamicAdsInjector', 'injectDensitySlots', 'No Content Units To Inject', {
	                ...this._pubLog,
	                mainContentDiv: this._mainContentDiv,
	                mainContentHeight: this._mainContentHeight,
	                totalAvailableElements: this._totalAvailableElements,
	            });
	            return [];
	        }
	        let contentInsertedThisPage = 0;
	        let insertNext = 0;
	        for (const dynamicAd of dynamicAds) {
	            const elements = this.getElements(dynamicAd.elementSelector, target);
	            const insertEvery = this._getInsertEvery(numberOfUnits, onePerViewport);
	            this._logDensityInfo(elements, dynamicAd.elementSelector, insertEvery);
	            const dynamicInsertion = (element) => {
	                let slot = null;
	                ({ insertNext, slot } = this._attemptInsertion({
	                    dynamicAd,
	                    element,
	                    insertNext,
	                    onePerViewport,
	                    contentInsertedThisPage,
	                    target,
	                    insertEvery,
	                    targetAll,
	                }));
	                if (slot) {
	                    slots.push(slot);
	                    ++contentInsertedThisPage;
	                }
	            };
	            if (dynamicAd.skip > 0) {
	                logger.info('BaseDynamicAdsInjector', '_injectDensitySlots', 'Skipping %d element(s)', dynamicAd.skip);
	            }
	            for (let t = dynamicAd.skip; t < elements.length; t++) {
	                const element = elements[t];
	                if (element.offsetHeight >= this._mainContentHeight && this._totalAvailableElements > 1) {
	                    continue;
	                }
	                else if (contentInsertedThisPage < combinedMax && contentInsertedThisPage < targetDensityUnits) {
	                    dynamicInsertion(element);
	                }
	                else {
	                    logger.info('BaseDynamicAdsInjector', '_injectDensitySlots', 'Content Inserted >= Number of Units to Inject, breaking');
	                    break;
	                }
	            }
	        }
	        logger.info('BaseDynamicAdsInjector', '_injectDensitySlots', 'Ad Density: contentInsertedThisPage', contentInsertedThisPage);
	        return slots;
	    }
	    _getInsertEvery(numberOfUnits, onePerViewport) {
	        const trimContentFraction = 0.43;
	        const insert = (this._mainContentHeight * trimContentFraction) / numberOfUnits;
	        return onePerViewport && window.innerHeight > insert ? window.innerHeight : insert;
	    }
	    _getDensitySettings() {
	        const densitySettings = this._config.targetDensity.settings;
	        const overrides = this._determineOverrides(densitySettings.pageOverrides);
	        return overrides.length ? overrides[0] : densitySettings[this._densityDevice];
	    }
	    _determineOverrides(pageOverrides) {
	        return pageOverrides
	            .filter(pageOverride => {
	            const selector = allowablePageSelector(pageOverride.pageSelector);
	            return pageOverride.pageSelector === '' || (selector.elements && selector.elements.length);
	        })
	            .map(pageOverride => pageOverride[this._densityDevice]);
	    }
	    _getTargetDensityUnits(targetDensity) {
	        return Math.floor((targetDensity * this._mainContentHeight) / (1 - targetDensity) / this._getMinDivHeight()) - this._recipeCount;
	    }
	    _getCombinedMax(dynamicAds) {
	        return defaultTo(dynamicAds
	            .filter(dynamicAd => {
	            let el;
	            try {
	                el = document.querySelector(dynamicAd.elementSelector);
	            }
	            catch (err) {
	                logger.info('BaseDynamicAdsInjector', '_getCombinedMax', 'Invalid Query Selector: ', dynamicAd.elementSelector);
	            }
	            return el;
	        })
	            .map(dynamicAd => dynamicAd.max + (dynamicAd.lazyMaxDefaulted ? 0 : dynamicAd.lazyMax))
	            .sort((a, b) => b - a)[0], 0);
	    }
	    _logDensityInfo(elements, elementSelector, insertEvery) {
	        const { onePerViewport, targetDensity, targetDensityUnits, combinedMax } = this._pubLog;
	        logger.info('BaseDynamicAdsInjector', '_logDensityInfo', 'Ad Density: Top Level Report', `\nOnePerViewport: ${onePerViewport}`, `\nTarget Density: ${targetDensity}`, `\nMain Content Height ${this._mainContentHeight}px`, `\nRecipe Units: ${this._recipeCount}`, `\nAvailable Elements based on Selectors: ${elements.length}`, `\nNumber of Units to Hit Density: ${targetDensityUnits}`, `\nNumber of pixels between each ad (relevant for onePerViewport setting): ${insertEvery}px`, `\nCombined max calculated from Admin Dash: ${combinedMax}`, '\nElement Selector: ', elementSelector, '\nActual elements we are working with: ', elements);
	        if (this._totalAvailableElements < targetDensityUnits) {
	            logger.info('BaseDynamicAdsInjector', '_logDensityInfo', `Only ${this._totalAvailableElements} available elements. Target density would yield: ${targetDensityUnits}`);
	        }
	        logger.event('BaseDynamicAdsInjector', '_logDensityInfo', {
	            onePerViewport,
	            combinedMax,
	            targetDensityUnits,
	            targetDensityPercentage: targetDensity,
	            mainContentHeight: this._mainContentHeight,
	            recipeCount: this._recipeCount,
	            numberOfEls: elements.length,
	        });
	    }
	    _attemptInsertion({ dynamicAd, element, insertNext, onePerViewport, contentInsertedThisPage, target, insertEvery, targetAll, }) {
	        let slot = null;
	        const elementSpacedCorrectly = this._isElementSpacedCorrectly(element, insertNext, onePerViewport, dynamicAd, targetAll, insertEvery);
	        logger.info('BaseDynamicAdsInjector', '_attemptInsertion', 'Ad Density: _isElementSpacedCorrectly', element, elementSpacedCorrectly);
	        if (elementSpacedCorrectly) {
	            const newDynamicAd = {
	                ...dynamicAd,
	                sequence: this._totalContentInserted + 1,
	                lazy: dynamicAd.lazy && contentInsertedThisPage >= dynamicAd.max,
	            };
	            ({ insertedSlot: slot, insertNext } = this._addContentAd(element, newDynamicAd, target, insertEvery));
	        }
	        return { insertNext, slot };
	    }
	    _isElementSpacedCorrectly(element, insertNext, onePerViewport, dynamicAd, targetAll, insertEvery) {
	        const shouldInsertAtTop = dynamicAd.position === 'beforebegin' || dynamicAd.position === 'afterbegin';
	        const shouldSkipRowCheck = dynamicAd.position === 'beforeend' || dynamicAd.position === 'afterbegin';
	        const isFarEnoughFromPreviousInjection = targetAll || this._isElementFarEnough(onePerViewport, element, insertNext, shouldInsertAtTop, insertEvery);
	        const isNotInSameRowAsNextElement = shouldSkipRowCheck || this._isElementNotInRow(element, shouldInsertAtTop);
	        const isElementSpacedCorrectly = isFarEnoughFromPreviousInjection && isNotInSameRowAsNextElement;
	        if (isElementSpacedCorrectly) {
	            this._lastElement = element;
	            this._lastAdPosition = dynamicAd.position === 'beforebegin' || dynamicAd.position === 'afterbegin' ? 'top' : 'bottom';
	        }
	        logger.info('BaseDynamicAdsInjector', '_isElementSpacedCorrectly', 'Ad Density: _isElementSpacedCorrectly', element, isElementSpacedCorrectly);
	        return isElementSpacedCorrectly;
	    }
	    _getMinimumSpacingByLastInjection(insertEvery) {
	        return this._lastAdPosition && this._lastAdPosition === 'bottom' && insertEvery < this._getMinDivHeight() ? this._getMinDivHeight() : 0;
	    }
	    _isElementFarEnough(onePerViewport, element, insertNext, shouldInsertAtTop, insertEvery) {
	        const offset = elementOffset(element);
	        const spacing = this._getMinimumSpacingByLastInjection(insertEvery);
	        const lastOffset = this._lastElement ? elementOffset(this._lastElement)['bottom'] : 0;
	        const elementEdge = shouldInsertAtTop ? offset.top : offset.bottom;
	        const isFarEnough = elementEdge > insertNext && (lastOffset === 0 || elementEdge - lastOffset >= insertEvery + spacing);
	        if (!onePerViewport && !isFarEnough) {
	            logger.info('BaseDynamicAdsInjector', '_isElementFarEnough', `Ad Density: The onePerViewport setting is false, and the element edge at ${elementEdge}px is less than our next minimum insertion point located at ${insertNext}.`, element);
	        }
	        return isFarEnough;
	    }
	    _isElementNotInRow(element, shouldInsertAtTop) {
	        const prevSibling = element.previousElementSibling;
	        const nextSibling = element.nextElementSibling;
	        const sibling = shouldInsertAtTop
	            ? (!prevSibling && nextSibling) || (prevSibling && element.tagName !== prevSibling.tagName)
	                ? nextSibling
	                : prevSibling
	            : nextSibling;
	        return sibling && element.getBoundingClientRect().height === 0
	            ? true
	            : sibling
	                ? element.getBoundingClientRect().top !== sibling.getBoundingClientRect().top
	                : true;
	    }
	    _calculateMainContentHeightAndAllElements(dynamicAds) {
	        const { mainContentDiv, firstContentDiv } = this._setMainContentAndElements(dynamicAds);
	        this._mainContentDiv = mainContentDiv;
	        this._firstContentDiv = firstContentDiv;
	        const commentElem = this._mainContentDiv.querySelector('div #comments, section .comments');
	        this._mainContentHeight = commentElem ? this._mainContentDiv.offsetHeight - commentElem.offsetHeight : this._mainContentDiv.offsetHeight;
	    }
	    _setMainContentAndElements(dynamicAds) {
	        const potentialMainContentElements = this._getPotentialElements(dynamicAds);
	        if (potentialMainContentElements.length === 0) {
	            throw Error('No Main Content Elements Found');
	        }
	        const mainContentDiv = Array.from(potentialMainContentElements).reduce((previous, current) => (current.offsetHeight > previous.offsetHeight ? current : previous)) ||
	            document.body;
	        const firstContentDiv = Array.from(potentialMainContentElements).reduce((previous, current) => elementOffset(current).top < elementOffset(previous).top ? current : previous);
	        return { mainContentDiv, firstContentDiv };
	    }
	    _getPotentialElements(dynamicAds) {
	        const article = this._attemptArticleLookup();
	        const potentialMainContentElements = article ? [article] : [];
	        dynamicAds.forEach(dynamicAd => {
	            return this._getSelectors(dynamicAd.elementSelector).forEach(selector => {
	                const els = document.querySelectorAll(selector);
	                for (let k = 0; k < els.length; k++) {
	                    if (els[k] && els[k].parentElement && els[k].parentElement !== document.body) {
	                        potentialMainContentElements.push(els[k].parentElement);
	                    }
	                    else {
	                        potentialMainContentElements.push(els[k]);
	                    }
	                    ++this._totalAvailableElements;
	                }
	            });
	        });
	        return potentialMainContentElements;
	    }
	    _attemptArticleLookup() {
	        const articles = document.querySelectorAll('article');
	        if (articles.length === 0) {
	            return null;
	        }
	        const content = Array.from(articles).reduce((previous, current) => (current.offsetHeight > previous.offsetHeight ? current : previous));
	        const oneAndAHalfViewports = 1.5;
	        if (content && content.offsetHeight > window.innerHeight * oneAndAHalfViewports) {
	            logger.info('BaseDynamicAdsInjector', '_attemptArticleLookup', 'mainContent', content.offsetHeight, content);
	            return content;
	        }
	        return null;
	    }
	    _getSelectors(elementSelector) {
	        return elementSelector.indexOf(',') > -1 ? elementSelector.split(',') : [elementSelector];
	    }
	    _addContentAd(element, dynamicAd, target = document, insertEvery) {
	        let insertedSlot = null;
	        const locationClassName = `adthrive-${dynamicAd.location.replace('_', '-').toLowerCase()}`;
	        const locationSequenceClassName = `${locationClassName}-${dynamicAd.sequence}`;
	        const adElement = this.addAd(element, this.getDynamicElementId(dynamicAd), dynamicAd.position, [locationClassName, locationSequenceClassName, ...dynamicAd.classNames], dynamicAd.location);
	        const insertNext = this._getNextInsertPosition(dynamicAd.position, adElement, insertEvery);
	        if (adElement) {
	            const sizes = this._filterAdUnitSizes(dynamicAd, adElement);
	            if (sizes.length) {
	                insertedSlot = this.createSlot(dynamicAd, adElement, sizes, target !== document);
	                ++this._totalContentInserted;
	            }
	            else {
	                logger.info('BaseDynamicAdsInjector', '_addContentAd', 'Skipped ad unit..... It does not fit in the element.');
	            }
	        }
	        return { insertedSlot, insertNext };
	    }
	    _getNextInsertPosition(position, element, insertEvery) {
	        const rect = element.getBoundingClientRect();
	        const pageHeight = window.pageYOffset;
	        const pos = (position === 'beforebegin' || position === 'afterbegin' ? rect.top : rect.bottom) + pageHeight;
	        return pos + insertEvery - this._getMinDivHeight();
	    }
	    getElements(selector, target = document) {
	        return target.querySelectorAll(selector);
	    }
	    _filterAdUnitSizes(dynamicAd, element) {
	        const width = elementInnerWidth(element);
	        const stickySidebar = dynamicAd.sticky && dynamicAd.location === 'Sidebar';
	        return dynamicAd.sizes.filter(size => {
	            const autosize = dynamicAd.autosize ? size[0] <= width || size[0] <= 320 : true;
	            const stickyFit = stickySidebar ? size[1] <= window.innerHeight - 100 : true;
	            return autosize && stickyFit;
	        });
	    }
	    createSlot({ location, sequence, sticky, lazy, stickyOverlapSelector, special, auctionPriority }, element, sizes, infinite) {
	        return new Slot(location, sequence, sizes, element, sticky, lazy, auctionPriority, stickyOverlapSelector, special, true, infinite);
	    }
	    _repeatDynamicAds(dynamicAd) {
	        const repeatedDynamicAds = [];
	        const maxLazySequence = dynamicAd.lazy ? defaultTo(this.locationMaxLazySequence.get(dynamicAd.location), 0) : 0;
	        const initialMax = dynamicAd.max;
	        const lazyMax = maxLazySequence === 0 && dynamicAd.lazy
	            ? initialMax + dynamicAd.lazyMax
	            : Math.min(Math.max(maxLazySequence - dynamicAd.sequence + 1, 0), initialMax + dynamicAd.lazyMax);
	        const max = Math.max(initialMax, lazyMax);
	        for (let dynamicSequence = 0; dynamicSequence < max; dynamicSequence++) {
	            const sequence = dynamicAd.sequence + dynamicSequence;
	            const lazy = dynamicAd.lazy && dynamicSequence >= initialMax;
	            repeatedDynamicAds.push({ ...dynamicAd, ...{ sequence, lazy } });
	        }
	        return repeatedDynamicAds;
	    }
	    addAd(element, id, position, classNames = [], location) {
	        var _a;
	        let tag = `<div id="${id}" class="adthrive-ad ${classNames.join(' ')}"></div>`;
	        if (location === 'Video_StickyOutstream') {
	            const deviceClass = id.indexOf('phone') > -1 ? 'mobile' : 'desktop';
	            tag = `<div class="adthrive-sticky-outstream adthrive-sticky-outstream-${deviceClass}">` + tag + '</div>';
	        }
	        if ((_a = window.adthriveCLS) === null || _a === void 0 ? void 0 : _a.injectedSlots.some(slot => slot.element.id === id)) {
	            logger.info('BaseDynamicAdsInjector', 'addAd', `Skipped ${id}. Element already exists on page.`);
	        }
	        else {
	            element.insertAdjacentHTML(position, tag);
	        }
	        return document.getElementById(id);
	    }
	}

	let DynamicAdsInjector = class DynamicAdsInjector extends BaseDynamicAdsInjector {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    getDynamicElementId(dynamicAd) {
	        return `${this._config.gam.prefix}_${dynamicAd.location}_${dynamicAd.sequence}_${this._config.context.device}`;
	    }
	};
	DynamicAdsInjector = __decorate([
	    log('DynamicAdsInjector'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], DynamicAdsInjector);

	let DynamicAdsComponent = class DynamicAdsComponent extends Component {
	    constructor(_config, _injector, _slotManager, _gam) {
	        super();
	        this._config = _config;
	        this._injector = _injector;
	        this._slotManager = _slotManager;
	        this._gam = _gam;
	        this._stickyOutstreamExperimentResult = false;
	    }
	    hasClsInjectedContent() {
	        if (window.adthriveCLS && window.adthriveCLS.injectedSlots.length) {
	            for (const slot of window.adthriveCLS.injectedSlots) {
	                if (slot.name.indexOf('Content') !== -1) {
	                    return true;
	                }
	            }
	        }
	        return false;
	    }
	    start() {
	        this.runStickyOutstreamExperiment();
	        const hasClsInjectedContent = this.hasClsInjectedContent();
	        const dynamicAds = this._config.dynamicAds
	            .filter(dynamicAd => this.locationEnabled(dynamicAd))
	            .filter(dynamicAd => this.forDevice(dynamicAd, this._config.context.device))
	            .filter(dynamicAd => !hasClsInjectedContent || (hasClsInjectedContent && dynamicAd.location !== 'Content'))
	            .filter(dynamicAd => dynamicAd.location === 'Interstitial' || dynamicAd.location === 'Video_StickyOutstream'
	            ? this.forPageBlocks(dynamicAd.pageSelector)
	            : this.forPage(dynamicAd))
	            .filter(dynamicAd => !this.pluginInjected(dynamicAd))
	            .filter(dynamicAd => dynamicAd.location !== 'Video_StickyOutstream' || !this.shouldFilterStickyOutstream());
	        let dynamicSlots = this._injector.inject(dynamicAds);
	        if (this._config.clsOptions && this._config.clsOptions.enabled) {
	            const clsSlots = [];
	            this._config.clsOptions.injectedSlots.forEach(slot => {
	                if (!dynamicSlots.some(dynamicSlot => dynamicSlot.name === slot.name)) {
	                    logger.info('DynamicAdsComponent', 'start', 'CLS Injection: created slot from plugin data', slot);
	                    clsSlots.push(this._injector.createSlot(slot.dynamicAd, slot.element, slot.sizes, slot.infinite));
	                }
	            });
	            dynamicSlots = dynamicSlots.concat(clsSlots);
	        }
	        this._slotManager.add(dynamicSlots).catch(reason => {
	            logger.error('DynamicAdsComponent', 'start', 'add', reason);
	        });
	    }
	    get enabled() {
	        return this._config.dynamicAds.length > 0;
	    }
	    runStickyOutstreamExperiment() {
	        if (!this._config.video.preventStickyOutstream) {
	            this._stickyOutstreamExperimentResult = instance.resolve(StickyOutstreamExperiment).result;
	            this._gam.setTargeting({ key: 'abgroup', value: this._config.abGroup.groups.join(',') });
	        }
	    }
	    shouldFilterStickyOutstream() {
	        this.runStickyOutstreamExperiment();
	        if (!this._stickyOutstreamExperimentResult || this._config.disableAds.video || isFrontpage()) {
	            return true;
	        }
	        this._config.video.hasStickyOutstream = true;
	        return false;
	    }
	    pluginInjected(dynamicAd) {
	        const stringifiedDynamicAd = JSON.stringify(dynamicAd);
	        return this._config.clsOptions && this._config.clsOptions.injectedSlots.some(slot => JSON.stringify(slot.clsDynamicAd) === stringifiedDynamicAd);
	    }
	    forDevice(dynamicAdUnit, device) {
	        return dynamicAdUnit.devices.indexOf(device) !== -1;
	    }
	    forPage(dynamicAdUnit) {
	        return dynamicAdUnit.pageSelector.length === 0 || document.querySelector(dynamicAdUnit.pageSelector) !== null;
	    }
	    forPageBlocks(blockedSelectors) {
	        return blockedSelectors.length === 0 || !blockedSelectors.split(',').some(selector => document.querySelector(selector) !== null);
	    }
	    locationEnabled(dynamicAdUnit) {
	        return !this._config.disableAds.locations.has(dynamicAdUnit.location) && !this._config.disableAds.all;
	    }
	};
	DynamicAdsComponent = __decorate([
	    log('DynamicAdsComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        DynamicAdsInjector,
	        SlotManager,
	        GoogleAdManager])
	], DynamicAdsComponent);

	let ExternalSlotsComponent = class ExternalSlotsComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.refreshExternal())
	            .catch(reason => {
	            logger.error('ExternalSlotsComponent', 'init', reason);
	        });
	    }
	    refreshExternal() {
	        GoogleAdManager.pushToQueue(() => {
	            const { account } = this._config.gam;
	            const slots = googletag.pubads().getSlots();
	            const external = slots
	                .filter(slot => RegExp(`^\/?${account}\/`).exec(slot.getAdUnitPath()) === null)
	                .filter(slot => document.getElementById(slot.getSlotElementId()) !== null);
	            if (external.length) {
	                googletag.pubads().refresh(external);
	            }
	        });
	    }
	};
	ExternalSlotsComponent = __decorate([
	    log('ExternalSlotsComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], ExternalSlotsComponent);

	let FirstPageviewComponent = class FirstPageviewComponent extends Component {
	    constructor(_gam) {
	        super();
	        this._gam = _gam;
	    }
	    init() {
	        const fpv = this.isFirstPageview() ? '1' : '0';
	        this._gam.setTargeting({ key: 'fpv', value: fpv });
	    }
	    isFirstPageview() {
	        let elapsed = 0;
	        try {
	            const fpv = localStorage.getItem('adthrive_fpv');
	            if (fpv) {
	                elapsed = Date.now() - Date.parse(fpv);
	            }
	            if (!fpv || elapsed > 1000 * 60 * 60 * 24) {
	                localStorage.setItem('adthrive_fpv', new Date().toString());
	                return true;
	            }
	        }
	        catch (err) {
	            logger.warn('FirstPageviewComponent', 'isFirstPageview', 'Unable to set adthrive_fpv', err);
	        }
	        return false;
	    }
	};
	FirstPageviewComponent = __decorate([
	    log('FirstPageviewComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager])
	], FirstPageviewComponent);

	let VideoRequestManager = class VideoRequestManager {
	    constructor(_auctionManagers) {
	        this._auctionManagers = _auctionManagers;
	        this.refreshingVideoBids = new Emitter();
	        this.requestingVideoBids = new Emitter();
	        this.requestingSekindoBids = new Emitter();
	    }
	    addVideoSlots(videos) {
	        this._auctionManagers.addVideoSlots(videos);
	    }
	    async requestVideoBids(videos, timeout) {
	        await this.requestingVideoBids.emit(videos).catch();
	        await this._determineIsRefreshing(videos).catch();
	        await this._auctionManagers.requestVideoBids(videos, timeout);
	    }
	    async _determineIsRefreshing(videos) {
	        const multiplePrerolls = videos.filter(video => video._prerollNum > 0);
	        if (multiplePrerolls.length) {
	            await this.refreshingVideoBids.emit(multiplePrerolls);
	        }
	    }
	};
	VideoRequestManager = __decorate([
	    log('VideoRequestManager'),
	    singleton(),
	    __metadata("design:paramtypes", [AuctionManagers])
	], VideoRequestManager);

	let FirstPartyDataComponent = class FirstPartyDataComponent extends Component {
	    constructor(_slotManager, _config, _prebidMethods, _videoRequestManager, _ortb2, _irisTv) {
	        super();
	        this._slotManager = _slotManager;
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._videoRequestManager = _videoRequestManager;
	        this._ortb2 = _ortb2;
	        this._irisTv = _irisTv;
	    }
	    init() {
	        this._slotManager.added
	            .once()
	            .then(() => {
	            this.setBidderSpecificFpd({
	                bidders: ['rubicon'],
	                fpdData: { refresh: ['false'], vp: '0' },
	            });
	            if (this._config.site.sensitiveCategories.length) {
	                this.setBidderSpecificFpd({
	                    bidders: ['triplelift', 'tripl_ss'],
	                    fpdData: { sens: this._config.site.filteredSensitiveCategories },
	                    addStaticFpd: false,
	                });
	            }
	            if (this._config.site.filteredSensitiveCategories.length) {
	                this.setBidderSpecificFpd({
	                    bidders: ['yahoossp'],
	                    fpdData: { sens: this._config.site.filteredSensitiveCategories },
	                    addStaticFpd: false,
	                });
	            }
	            if (this._config.site.filteredSensitiveCategories.length) {
	                this.setBidderSpecificFpd({
	                    bidders: ['yahoossp'],
	                    fpdData: { sens: this._config.site.filteredSensitiveCategories },
	                    addStaticFpd: false,
	                });
	            }
	        })
	            .catch(() => { });
	        this._slotManager.refreshing
	            .once()
	            .then(() => {
	            this.setBidderSpecificFpd({
	                bidders: ['rubicon'],
	                fpdData: { refresh: ['true'], vp: '0' },
	            });
	            this._prebidMethods.addToQueue(() => {
	                this.setIXRefresh();
	            });
	        })
	            .catch(() => { });
	        this._videoRequestManager.requestingVideoBids.on(videoPlayers => {
	            videoPlayers.forEach(() => {
	                const irisTv = this._irisTv;
	                const irisContextual = irisTv.irisContextualData;
	                if (irisContextual && irisContextual.length) {
	                    this.setBidderSpecificFpd({
	                        bidders: ['pubmatic', 'pubm_ss'],
	                        fpdData: {
	                            content: {
	                                id: irisTv.irisId,
	                            },
	                        },
	                        addStaticFpd: false,
	                        isExtData: false,
	                    });
	                }
	            });
	        });
	        this._videoRequestManager.refreshingVideoBids.on(videoPlayers => {
	            videoPlayers.forEach(videoPlayer => {
	                if (videoPlayer.vp > 0 && videoPlayer._prerollNum <= 10) {
	                    this.setBidderSpecificFpd({
	                        bidders: ['rubicon'],
	                        fpdData: { refresh: ['true'], vp: videoPlayer.vp.toString() },
	                    });
	                    this._prebidMethods.addToQueue(() => {
	                        this.setIXVPParam(videoPlayer.vp);
	                    });
	                }
	            });
	        });
	    }
	    setBidderSpecificFpd({ bidders, fpdData, addStaticFpd = true, location = 'site', isExtData = true }) {
	        const data = {
	            ...(addStaticFpd && {
	                ...this._ortb2._staticFirstPartyData,
	            }),
	            ...fpdData,
	        };
	        const fpd = isExtData
	            ? {
	                ext: {
	                    data,
	                },
	            }
	            : data;
	        this._prebidMethods.setBidderConfig({
	            bidders,
	            config: {
	                ortb2: {
	                    [location]: fpd,
	                },
	            },
	        });
	    }
	    setIXRefresh() {
	        const ix = this._prebidMethods.getConfig('ix');
	        if (ix && ix.firstPartyData && ix.firstPartyData.Refresh !== 'True') {
	            setIXFirstPartyData({ Refresh: 'True' }, this._prebidMethods);
	        }
	    }
	    setIXVPParam(vp) {
	        const ix = this._prebidMethods.getConfig('ix');
	        if (ix && ix.firstPartyData && vp > 0) {
	            setIXFirstPartyData({ vp: vp.toString() }, this._prebidMethods);
	        }
	    }
	};
	FirstPartyDataComponent = __decorate([
	    log('FirstPartyDataComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager,
	        Config,
	        PrebidMethods,
	        VideoRequestManager,
	        Ortb2,
	        IrisTv])
	], FirstPartyDataComponent);

	let FloorsLazyContentComponent = class FloorsLazyContentComponent extends Component {
	    constructor(_slotManager, _prebidMethods, _floors, _floorsExperiment) {
	        super();
	        this._slotManager = _slotManager;
	        this._prebidMethods = _prebidMethods;
	        this._floors = _floors;
	        this._floorsExperiment = _floorsExperiment;
	        this._percentile = 0;
	        this._sessionPercentile = 0;
	        this._contentCpms = [];
	        this._percentile = this._floorsExperiment.result.percentile.lazy;
	        this._sessionPercentile = this._floorsExperiment.result.percentile.session;
	    }
	    init() {
	        this._slotManager.requestingBids.on(slots => {
	            const lazyContentFloorData = this._floors.getDefaultFloorConfig();
	            slots
	                .filter(slot => slot.location === 'Content' && slot.lazy)
	                .forEach(slot => {
	                const floor = linearInterpolation(this._contentCpms, this._percentile);
	                this._floors.setValues(lazyContentFloorData, slot.id, floor);
	                logger.info('FloorsLazyContentComponent', 'requestingBids', `Set floor for ${slot.id} with percentile ${this._percentile} and value ${floor}`);
	            });
	            this._floors.setLegacyFloorsConfig(lazyContentFloorData);
	        });
	        this._slotManager.requestedBids.on(slots => {
	            slots
	                .filter(slot => slot.location === 'Content')
	                .forEach(slot => {
	                this._prebidMethods.addToQueue(() => {
	                    this.saveBids(slot);
	                });
	            });
	        });
	    }
	    saveBids(slot) {
	        const bidResponses = this._prebidMethods.getBidResponsesForAdUnitCode(slot.id);
	        bidResponses.bids.forEach(bid => {
	            this._contentCpms.push(bid.cpm);
	        });
	    }
	    get enabled() {
	        return (Boolean(this._percentile) &&
	            (getSessionValue('session_fpv') === true || !this._sessionPercentile) &&
	            this._floorsExperiment.result.legacy === true);
	    }
	};
	FloorsLazyContentComponent = __decorate([
	    log('FloorsLazyContentComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager,
	        PrebidMethods,
	        Floors,
	        FloorsExperimentHandler])
	], FloorsLazyContentComponent);

	let FloorsRefreshComponent = class FloorsRefreshComponent extends Component {
	    constructor(_slotManager, _floors, _prebidMethods, _videoRequestManager, _floorsExperiment) {
	        super();
	        this._slotManager = _slotManager;
	        this._floors = _floors;
	        this._prebidMethods = _prebidMethods;
	        this._videoRequestManager = _videoRequestManager;
	        this._floorsExperiment = _floorsExperiment;
	    }
	    init() {
	        this._slotManager.refreshing.on(slots => {
	            this._prebidMethods.addToQueue(() => {
	                this._setRefreshFloors(slots.map(slot => slot.id));
	            });
	        });
	        this._videoRequestManager.refreshingVideoBids.on(videoPlayers => {
	            this._prebidMethods.addToQueue(() => {
	                this._setRefreshFloors(videoPlayers.map(videoPlayer => { var _a; return (_a = videoPlayer.videoAdUnit) === null || _a === void 0 ? void 0 : _a.code; }));
	            });
	        });
	    }
	    _setRefreshFloors(adUnitCodes) {
	        const refreshFloorData = this._floors.getDefaultFloorConfig();
	        for (const adUnitCode of adUnitCodes) {
	            const [highestCPMBid] = this._prebidMethods.getHighestCpmBids(adUnitCode);
	            const floor = highestCPMBid === null || highestCPMBid === void 0 ? void 0 : highestCPMBid.cpm;
	            if (floor) {
	                this._floors.setValues(refreshFloorData, adUnitCode, floor);
	                logger.info('FloorsRefreshComponent', '_setRefreshFloors', adUnitCode, floor);
	            }
	        }
	        this._floors.setLegacyFloorsConfig(refreshFloorData);
	    }
	    get enabled() {
	        return this._floorsExperiment.result.legacy === true;
	    }
	};
	FloorsRefreshComponent = __decorate([
	    log('FloorsRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager,
	        Floors,
	        PrebidMethods,
	        VideoRequestManager,
	        FloorsExperimentHandler])
	], FloorsRefreshComponent);

	let FloorsRubiconComponent = class FloorsRubiconComponent extends Component {
	    constructor(_floors, _floorsExperiment, _gam, _prebidMethods, _slots) {
	        super();
	        this._floors = _floors;
	        this._floorsExperiment = _floorsExperiment;
	        this._gam = _gam;
	        this._prebidMethods = _prebidMethods;
	        this._slots = _slots;
	        this.baseUrl = 'https://ads.adthrive.com/api/v2/host/floors/';
	        this._modalVersionMap = new Map([]);
	    }
	    init() {
	        this.setSlotTargeting();
	        this.getRubiconFloorData()
	            .then((resp) => {
	            this.buildFloorsMap(resp.modelGroups);
	            this._floors.rubiconData = resp;
	            this._floors.setPrebidFloors(resp);
	            logger.info('RubiconFloorsComponent', 'getRubiconFloorData', resp);
	        })
	            .catch(err => {
	            logger.error('RubiconFloorsComponent', 'getRubiconFloorData', err);
	        });
	    }
	    buildFloorsMap(modelGroups) {
	        modelGroups.forEach((modelGroup, index) => {
	            this._modalVersionMap.set(modelGroup.modelVersion, index);
	        });
	    }
	    async getRubiconFloorData() {
	        return new Promise((resolve, reject) => {
	            const request = new XMLHttpRequest();
	            request.open('get', `${this.baseUrl}${window.location.hostname}`);
	            request.addEventListener('load', () => {
	                if (request.status !== 200) {
	                    return reject(new Error(`Error status: ${request.status} response: ${request.responseText}`));
	                }
	                return resolve(JSON.parse(request.responseText));
	            });
	            request.addEventListener('error', () => {
	                return reject(new Error('Request failed'));
	            });
	            request.send();
	        });
	    }
	    setSlotTargeting() {
	        this._prebidMethods.onEvent('auctionEnd', auctionDetails => {
	            const adUnitCode = auctionDetails.adUnitCodes[0];
	            const adUnitFloorData = auctionDetails.adUnits[0].bids[0].floorData;
	            if (adUnitFloorData) {
	                const slots = this._slots.get();
	                const skipped = adUnitFloorData.skipped;
	                const modelVersion = adUnitFloorData.modelVersion;
	                const targetingValue = skipped ? 's' : `${this._modalVersionMap.get(modelVersion)}`;
	                slots.forEach(slot => {
	                    if (slot.id === adUnitCode) {
	                        slot.setSlotTargetingFlag('rfmv', [targetingValue], slot.googleTagSlot, true);
	                    }
	                });
	            }
	        });
	    }
	    get enabled() {
	        return this._floorsExperiment.result.rubicon === true;
	    }
	};
	FloorsRubiconComponent = __decorate([
	    log('FloorsRubiconComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Floors,
	        FloorsExperimentHandler,
	        GoogleAdManager,
	        PrebidMethods,
	        Slots])
	], FloorsRubiconComponent);

	let FloorsSessionComponent = class FloorsSessionComponent extends Component {
	    constructor(_slotManager, _floors, _prebidMethods, _floorsExperiment) {
	        super();
	        this._slotManager = _slotManager;
	        this._floors = _floors;
	        this._prebidMethods = _prebidMethods;
	        this._floorsExperiment = _floorsExperiment;
	        this._percentile = 0;
	        this._rdx = 33;
	        const bidCpmSessionVal = getSessionValue('bc');
	        if (!bidCpmSessionVal) {
	            this._savedBids = {
	                Content: [],
	                Recipe: [],
	                Header: [],
	                Below_Post: [],
	                Sidebar: [],
	                Footer: [],
	            };
	        }
	        else {
	            this._savedBids = deobfuscateBidCpms(bidCpmSessionVal, this._rdx);
	        }
	    }
	    init() {
	        this._percentile = this._floorsExperiment.result.percentile.session;
	        if (getSessionValue('session_fpv') === false) {
	            const sessionFloorData = this._floors.getDefaultFloorConfig();
	            this._slotManager.requestingBids.on(slots => {
	                slots
	                    .filter(slot => Object.keys(this._savedBids).indexOf(slot.location) !== -1)
	                    .forEach(slot => {
	                    const floor = linearInterpolation(this._savedBids[slot.location], this._percentile);
	                    this._floors.setValues(sessionFloorData, slot.id, floor);
	                    logger.info('FloorsSessionComponent', 'requestingBids', `Set floor for ${slot.id} with percentile ${this._percentile} and value ${floor}`);
	                });
	                this._floors.setLegacyFloorsConfig(sessionFloorData);
	            });
	        }
	        this.saveBids();
	    }
	    saveBids() {
	        this._slotManager.requestedBids.on(slots => {
	            slots
	                .filter(slot => {
	                return Object.keys(this._savedBids).indexOf(slot.location) !== -1;
	            })
	                .forEach(slot => {
	                this._prebidMethods.addToQueue(() => {
	                    this.saveSlotBids(slot);
	                });
	            });
	            setSessionValue('bc', obfuscateBidCpms(this._savedBids, this._rdx));
	        });
	    }
	    saveSlotBids(slot) {
	        const bidResponses = this._prebidMethods.getBidResponsesForAdUnitCode(slot.id);
	        bidResponses.bids.forEach(bid => {
	            removeRandomElement(this._savedBids[slot.location], 1000);
	            this._savedBids[slot.location].push(bid.cpm);
	        });
	    }
	    get enabled() {
	        return Boolean(this._percentile) && this._floorsExperiment.result.legacy === true;
	    }
	};
	FloorsSessionComponent = __decorate([
	    log('FloorsSessionComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager,
	        Floors,
	        PrebidMethods,
	        FloorsExperimentHandler])
	], FloorsSessionComponent);

	let FloorsComponent = class FloorsComponent extends Component {
	    constructor(lazyContentComponent, refreshComponent, rubiconComponent, sessionComponent, _prebidMethods) {
	        super();
	        this._prebidMethods = _prebidMethods;
	        this._floorsComponents = [lazyContentComponent, refreshComponent, rubiconComponent, sessionComponent].filter(floorsComponent => floorsComponent.enabled);
	    }
	    init() {
	        this._floorsComponents.forEach(floorsComponent => floorsComponent.init !== undefined && floorsComponent.init());
	    }
	};
	FloorsComponent = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [FloorsLazyContentComponent,
	        FloorsRefreshComponent,
	        FloorsRubiconComponent,
	        FloorsSessionComponent,
	        PrebidMethods])
	], FloorsComponent);

	let FooterComponent = class FooterComponent extends Component {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    start() {
	        if (this._config.footer.elements.length) {
	            const footer = document.createElement('div');
	            footer.className = 'adthrive-comscore adthrive-footer-message';
	            this._config.footer.elements
	                .sort((a, b) => a.order - b.order)
	                .forEach(({ element }) => {
	                if (element instanceof Element) {
	                    footer.insertAdjacentElement('beforeend', element);
	                }
	                else {
	                    footer.insertAdjacentHTML('beforeend', element);
	                }
	            });
	            const footerSelector = this._config.adOptions.footerSelector === '' ? '.adthrive-mobile #page-wrapper' : this._config.adOptions.footerSelector;
	            const parent = document.querySelector(footerSelector) || document.body;
	            parent.insertAdjacentElement('beforeend', footer);
	        }
	    }
	};
	FooterComponent = __decorate([
	    log('FooterComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], FooterComponent);

	let GumGumInScreenComponent = class GumGumInScreenComponent extends Component {
	    constructor(_slotManager) {
	        super();
	        this._slotManager = _slotManager;
	    }
	    init() {
	        this._slotManager.refreshing.on(slots => {
	            const footer = slots.filter(slot => slot.location === 'Footer');
	            const gumgum = window.GUMGUM && window.GUMGUM.isad;
	            if (footer && gumgum) {
	                logger.info('GumGumInScreenComponent', 'init', 'RemoveISAd');
	                window.GUMGUM.removeISAd();
	            }
	        });
	    }
	};
	GumGumInScreenComponent = __decorate([
	    log('GumGumInScreenComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager])
	], GumGumInScreenComponent);

	let EmailCaptureHandler = class EmailCaptureHandler {
	    constructor() {
	        this._elements = [];
	        this._emailProviderOnPage = false;
	        this._emailProviders = [
	            { divSelector: 'div[id$="-optin"]' },
	            { divSelector: 'div[class^="cb-form-group"]' },
	            { divSelector: 'div.sumo-form-wrapper.listbuilder-popup' },
	        ];
	        this.emailCaptured = new Emitter();
	        this._emailCheckTimeout = 1500;
	        this._eventMap = new Map([
	            ['mousemove', window],
	            ['scroll', window],
	            ['mouseleave', document],
	            ['om.Campaign.startShow', document],
	        ]);
	        this._boundCallEventHandler = this.callCheckEmailProviders.bind(this);
	        this._boundProcessEventHandler = this.processInputChange.bind(this);
	        this.addElementListeners();
	        this.addEmailProviderListeners();
	    }
	    addEmailProviderListeners() {
	        this._eventMap.forEach((target, eventType) => {
	            target.addEventListener(eventType, this._boundCallEventHandler);
	        });
	    }
	    removeEmailProviderListeners() {
	        this._eventMap.forEach((target, eventType) => {
	            target.removeEventListener(eventType, this._boundCallEventHandler);
	        });
	    }
	    callCheckEmailProviders(event) {
	        if (event.type !== 'mouseleave' || event.clientY <= 0) {
	            setTimeout(() => {
	                if (!this._emailProviderOnPage)
	                    this.emailProviderHandler();
	            }, this._emailCheckTimeout);
	        }
	    }
	    emailProviderHandler() {
	        for (const provider of this._emailProviders) {
	            const divs = document.querySelectorAll(provider.divSelector);
	            if (divs.length) {
	                this.removeEmailProviderListeners();
	                this._emailProviderOnPage = true;
	                this.addElementListeners();
	                break;
	            }
	        }
	    }
	    setElements() {
	        this._elements = Array.prototype.slice.call(document.querySelectorAll('input[type=text], input[type=email], input[name=email]'));
	    }
	    addElementListeners() {
	        this.setElements();
	        for (const input of this._elements) {
	            input.addEventListener('blur', this._boundProcessEventHandler);
	            input.addEventListener('change', this._boundProcessEventHandler);
	        }
	    }
	    removeElementListeners() {
	        for (const input of this._elements) {
	            input.removeEventListener('blur', this._boundProcessEventHandler);
	            input.removeEventListener('change', this._boundProcessEventHandler);
	        }
	    }
	    processInputChange(event) {
	        const target = event.target;
	        const value = target.value;
	        const email = validateEmail(value);
	        if (email) {
	            logger.info('EmailCaptureHandler', '_processInputChange', 'Valid Email: ', email);
	            this.emailCaptured.emit({ email, source: 'ecc' }).catch(() => { });
	            this.removeElementListeners();
	        }
	    }
	};
	EmailCaptureHandler = __decorate([
	    log('EmailCaptureHandler'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], EmailCaptureHandler);

	let GDPRComponent = class GDPRComponent extends Component {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    init() {
	        this.addPrivacyPreferencesFooter();
	    }
	    addPrivacyPreferencesFooter() {
	        const privacyPreferences = `
      <div class="adthrive-privacy-preferences">
        <a href="javascript:adthrive.cmd.push(adthrive.showPrivacyPreferences);">Update Privacy Preferences</a>
      </div>
    `;
	        this._config.footer.elements.push({
	            order: 1,
	            element: privacyPreferences,
	        });
	    }
	};
	GDPRComponent = __decorate([
	    log('GDPRComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], GDPRComponent);

	let GDPREvents = class GDPREvents {
	    constructor() {
	        this.consentCaptured = new Emitter();
	    }
	};
	GDPREvents = __decorate([
	    singleton()
	], GDPREvents);

	let GDPREnforcementComponent = class GDPREnforcementComponent extends Component {
	    constructor(_events, _config) {
	        super();
	        this._events = _events;
	        this._config = _config;
	    }
	    init() {
	        logger.queueLogs = true;
	        this.checkConsent()
	            .then(tcString => {
	            if (tcString) {
	                this._events.consentCaptured.emit(tcString).catch(() => { });
	                this.checkConsentForVendor(this._config.gdpr.cafeMediaVendorId, [7])
	                    .then(vendorConsent => {
	                    if (!vendorConsent) {
	                        logger.info('GDPREnforcementComponent', 'disabling logger');
	                        logger.disableLogging = true;
	                    }
	                    else {
	                        if (logger.queueLogs)
	                            logger.clearLogQueue(true);
	                        logger.info('GDPREnforcementComponent', 'none enforced');
	                    }
	                })
	                    .catch(err => {
	                    logger.error('init', 'checkConsentForVendor', err);
	                });
	            }
	            else {
	                logger.info('GDPREnforcementComponent', 'start queueing logs');
	                this.listenForConsentSubmit().catch(err => {
	                    logger.error('init', 'listenForConsentSubmit', err);
	                });
	            }
	        })
	            .catch(err => {
	            logger.error('init', 'checkConsent', err);
	        });
	    }
	    checkConsent() {
	        return new Promise(resolve => {
	            window.__tcfapi('getTCData', 2, (tcData, success) => {
	                if (success && tcData && tcData.tcString) {
	                    return resolve(tcData.tcString);
	                }
	                return resolve('');
	            });
	        });
	    }
	    checkConsentForVendor(vendorId, purposeIds) {
	        return new Promise(resolve => {
	            window.__tcfapi('checkConsent', 2, (data, success) => {
	                if (success) {
	                    return resolve(data);
	                }
	                return resolve(false);
	            }, {
	                data: [
	                    {
	                        vendorId,
	                        purposeIds,
	                    },
	                ],
	            });
	        });
	    }
	    listenForConsentSubmit() {
	        return new Promise(resolve => {
	            window.__tcfapi('addEventListener', 2, (tcData, success) => {
	                if (success) {
	                    if (tcData && tcData.eventStatus === 'useractioncomplete') {
	                        this._events.consentCaptured.emit(tcData.tcString).catch(() => { });
	                        this.checkConsentForVendor(this._config.gdpr.cafeMediaVendorId, [7])
	                            .then(vendorConsent => {
	                            logger.info('GDPREnforcementComponent', 'listenForConsentSubmit', 'useractioncomplete', 'checkConsentForVendor', vendorConsent);
	                            if (vendorConsent) {
	                                if (logger.queueLogs) {
	                                    logger.clearLogQueue(true);
	                                }
	                            }
	                            else {
	                                logger.disableLogging = true;
	                                logger.clearLogQueue(false);
	                                logger.info('GDPREnforcementComponent', 'listenForConsentSubmit', 'logging disabled and queue clearing without sending');
	                            }
	                        })
	                            .catch(err => {
	                            logger.error('listenForConsentSubmit', 'checkConsentForVendor', err);
	                        });
	                        window.__tcfapi('removeEventListener', 2, removed => {
	                            if (removed) {
	                                logger.info('GDPREnforcementComponent', 'listenForConsentSubmit', 'removeEventListener');
	                            }
	                        }, tcData.listenerId);
	                    }
	                    resolve(true);
	                }
	                resolve(false);
	            });
	        });
	    }
	    get enabled() {
	        return typeof window.__tcfapi === 'function';
	    }
	};
	GDPREnforcementComponent = __decorate([
	    log('GDPREnforcementComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GDPREvents, Config])
	], GDPREnforcementComponent);

	let IdentityAPI = class IdentityAPI extends Component {
	    constructor(_emailCaptureHandler, _config, _gdprEnforcement) {
	        super();
	        this._emailCaptureHandler = _emailCaptureHandler;
	        this._config = _config;
	        this._gdprEnforcement = _gdprEnforcement;
	        this._hasRun = false;
	    }
	    init() {
	        this._config.identityApi.optIn.on(({ data, cb }) => this.identityOptIn(data, cb).catch(() => { }));
	        window.addEventListener('message', e => {
	            if (window === window.top && e && e.origin === window.origin && e.data && e.data.message === 'adthriveIdentityAPI' && e.data.info) {
	                const identityData = {
	                    message: 'adthriveIdentityFinished',
	                    response: {},
	                };
	                this.identityOptIn(e.data.info, (response) => {
	                    var _a;
	                    if (!(e.source instanceof MessagePort) && !(e.source instanceof ServiceWorker)) {
	                        identityData.response = response;
	                        (_a = e.source) === null || _a === void 0 ? void 0 : _a.postMessage(identityData, e.origin);
	                    }
	                }).catch(() => { });
	            }
	        }, false);
	    }
	    start() {
	        this._config.identityApi.apiReady.emit().catch(() => { });
	    }
	    validateData(data) {
	        if (!data.source || typeof data.source !== 'string' || data.source.length > 20) {
	            throw Error(`source required with 20 characters or less`);
	        }
	        if (!data.plainText && !data.sha256) {
	            throw Error(`plainText or sha256 required`);
	        }
	        if (data.plainText && (typeof data.plainText !== 'string' || !validateEmail(data.plainText))) {
	            throw Error(`plainText not string or not valid email: ${data.plainText}`);
	        }
	        if (data.sha256 && (typeof data.sha256 !== 'string' || data.sha256.length !== 64)) {
	            throw Error(`sha256 not string or not encoded properly: ${data.sha256}`);
	        }
	    }
	    buildPII(data) {
	        const piiData = {
	            source: data.source,
	        };
	        if (data.plainText) {
	            piiData.email = data.plainText;
	        }
	        if (data.sha256) {
	            piiData.hash = data.sha256;
	        }
	        return piiData;
	    }
	    async identityOptIn(data, callback) {
	        try {
	            if (!this._config.identityApi.enabled) {
	                throw Error('Identity API not enabled');
	            }
	            if (this._hasRun) {
	                throw Error(`Identity API Already Successfully Called`);
	            }
	            if (this._config.ccpa.userOptedOut) {
	                throw Error(`User has opted out of CCPA`);
	            }
	            if (this._config.gdpr.enabled) {
	                const vendorConsent = await this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.cafeMediaVendorId, [1]);
	                if (!vendorConsent) {
	                    throw Error('CafeMedia not given Purpose 1 consent to process identity data.');
	                }
	            }
	            this.validateData(data);
	            const piiData = this.buildPII(data);
	            this._emailCaptureHandler.emailCaptured.emit(piiData).catch(() => { });
	            callback({ success: true, data: { message: 'OK' } });
	            this._hasRun = true;
	        }
	        catch (err) {
	            callback({ success: false, data: { message: err.message } });
	        }
	    }
	};
	IdentityAPI = __decorate([
	    log('IdentityAPIComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [EmailCaptureHandler, Config, GDPREnforcementComponent])
	], IdentityAPI);

	let ImpressionLogComponent = class ImpressionLogComponent extends Component {
	    constructor(_config, _gam, _slotManager) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._slotManager = _slotManager;
	        this._renderedSlotKey = new Map();
	        this._filterKeys = new Set(['abgroup', 'pvk', 'bucket', 'branch', 'deployment', 'siteName', 'siteId']);
	        this._host = 'dev-track.adthrive.com';
	        this._enabled = this._config.impressionLog.enabled;
	    }
	    init() {
	        this._gam.slotRenderEnded.on(event => this.slotRenderEnded(event));
	        if (this._enabled === 1) {
	            const { reasons: disableAds } = this._config.disableAds;
	            Promise.all([
	                disableAds.size !== 0 ? 0 : this._slotManager.requestingBids.once().then(() => now$2()),
	                disableAds.size !== 0 ? 0 : this._slotManager.requestedBids.once().then(() => now$2()),
	                disableAds.size !== 0 ? 0 : this._slotManager.displayed.once().then(() => now$2()),
	                pageLoaded(),
	            ])
	                .then(([requestingBids, requestedBids, displayed]) => this.logTiming(requestingBids, requestedBids, displayed))
	                .catch(err => logger.error('EventLogComponent', 'init', err));
	        }
	    }
	    get enabled() {
	        return !!this._enabled;
	    }
	    slotRenderEnded({ event, slot }) {
	        const legacy = this._enabled === 1;
	        const adUnitPath = event.slot.getAdUnitPath();
	        const slotKey = ulid();
	        this._renderedSlotKey.set(adUnitPath, slotKey);
	        const output = {
	            adUnitPath,
	            advertiserId: event.advertiserId,
	            agnosticCreativeId: event.sourceAgnosticCreativeId,
	            agnosticLineItemId: event.sourceAgnosticLineItemId,
	            campaignId: event.campaignId,
	            companyIds: event.companyIds,
	            creativeId: event.creativeId,
	            isEmpty: event.isEmpty,
	            lineItemId: event.lineItemId,
	            serviceName: event.serviceName,
	            siteTargeting: legacy ? JSON.stringify(this._gam.getTargetingMap()) : this.filterTargeting(this._gam.getTargetingMap()),
	            size: event.size,
	            slotElementId: slot.id,
	            slotKey,
	            slotTargeting: legacy ? JSON.stringify(slot.getTargetingMap()) : this.filterTargeting(slot.getTargetingMap()),
	            yieldGroupIds: event.yieldGroupIds,
	        };
	        legacy ? this.pixel(this._host, '/impression.gif', output) : this.logImpressionEvent(output);
	    }
	    filterTargeting(data) {
	        return Object.keys(data)
	            .filter(key => !this._filterKeys.has(key) && data[key].length)
	            .reduce((result, key) => {
	            result[key] = data[key];
	            return result;
	        }, {});
	    }
	    logImpressionEvent(impData) {
	        logger.event('SlotRenderEnded', 'adImpression', impData);
	    }
	    logTiming(auctionStarted, auctionFinished, displayed) {
	        if (window.performance && window.performance.timing) {
	            setTimeout(() => {
	                const t = window.performance.timing;
	                if (t && t.navigationStart !== 0) {
	                    const timing = {
	                        pageLoad: t.loadEventStart - t.navigationStart,
	                        domainLookup: t.domainLookupEnd - t.domainLookupStart,
	                        connect: t.connectEnd - t.connectStart,
	                        request: t.responseStart - t.requestStart,
	                        response: t.responseEnd - t.responseStart,
	                        navigation: t.fetchStart - t.navigationStart,
	                        domInteractive: t.domInteractive - t.navigationStart,
	                        domContentLoaded: t.domContentLoadedEventStart - t.navigationStart,
	                    };
	                    const valid = Object.keys(timing)
	                        .map(key => timing[key])
	                        .every((metric) => !isNaN(metric) && metric >= 0 && metric < 3600000);
	                    if (valid) {
	                        const { reasons: disableAds } = this._config.disableAds;
	                        this.pixel(this._host, '/timing.gif', {
	                            ...timing,
	                            ...this._config.timing,
	                            disableAds: disableAds.size > 0 ? [...disableAds].join(',') : 'none',
	                            auctionStarted,
	                            auctionFinished,
	                            displayed,
	                        });
	                    }
	                }
	            }, 0);
	        }
	    }
	    pixel(host, path, params) {
	        params.abgroup = this._config.abGroup.groups.join(',');
	        params.bucket = this._config.context.bucket;
	        params.branch = this._config.context.branch;
	        params.deployment = this._config.context.deployment;
	        params.siteId = this._config.site.id;
	        params.pageviewKey = this._config.context.pageviewKey;
	        params.sessionKey = this._config.context.sessionKey;
	        const query = createQueryString(params);
	        return (new Image().src = `https://${host}${path}?${query}`);
	    }
	};
	ImpressionLogComponent = __decorate([
	    log('ImpressionLogComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager, SlotManager])
	], ImpressionLogComponent);

	let CloseButtonComponent = class CloseButtonComponent extends Component {
	    constructor(_googleAdManager, _config, _slotManager) {
	        super();
	        this._googleAdManager = _googleAdManager;
	        this._config = _config;
	        this._slotManager = _slotManager;
	        this._locations = ['Footer'];
	    }
	    init() {
	        this._googleAdManager.slotRenderEnded.on(({ slot, event }) => {
	            this.slotRenderEnded(slot, event);
	        });
	    }
	    slotRenderEnded(slot, event) {
	        var _a;
	        if (!event.isEmpty && ((_a = event.size) === null || _a === void 0 ? void 0 : _a.length) === 2) {
	            if (slot.element && this._locations.indexOf(slot.location) !== -1 && slot.sticky) {
	                slot.element.setAttribute('closable', 'true');
	                this._addCloseButton(slot.element, slot.location);
	            }
	        }
	    }
	    _addCloseButton(element, location) {
	        const closable = element.hasAttribute('closable');
	        const hasButton = element.querySelector('.adthrive-close');
	        if (closable && !hasButton) {
	            const button = document.createElement('span');
	            button.innerHTML = '&times;';
	            button.className = 'adthrive-close';
	            button.addEventListener('click', () => {
	                const closeEvent = document.createEvent('Event');
	                closeEvent.initEvent(`adthrive${location}Close`, true, true);
	                if (element.parentElement) {
	                    window.dispatchEvent(closeEvent);
	                    element.parentElement.removeChild(element);
	                    this._slotManager.destroy(element.id);
	                }
	            });
	            element.appendChild(button);
	        }
	    }
	    get enabled() {
	        if (this._config.adOptions.footerCloseButtonMigrated) {
	            return this._config.context.device === 'phone'
	                ? this._config.adOptions.footerCloseButtonMobile
	                : this._config.adOptions.footerCloseButtonDesktop;
	        }
	        return this._config.adOptions.footerCloseButton;
	    }
	};
	CloseButtonComponent = __decorate([
	    log('CloseButtonComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, Config, SlotManager])
	], CloseButtonComponent);

	function isObject(value) {
	  var type = typeof value;
	  return value != null && (type == 'object' || type == 'function');
	}

	var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;
	var freeGlobal$1 = freeGlobal;

	var freeSelf = typeof self == 'object' && self && self.Object === Object && self;
	var root = freeGlobal$1 || freeSelf || Function('return this')();
	var root$1 = root;

	var now = function() {
	  return root$1.Date.now();
	};
	var now$1 = now;

	var Symbol$1 = root$1.Symbol;
	var Symbol$2 = Symbol$1;

	var objectProto$1 = Object.prototype;
	var hasOwnProperty = objectProto$1.hasOwnProperty;
	var nativeObjectToString$1 = objectProto$1.toString;
	var symToStringTag$1 = Symbol$2 ? Symbol$2.toStringTag : undefined;
	function getRawTag(value) {
	  var isOwn = hasOwnProperty.call(value, symToStringTag$1),
	      tag = value[symToStringTag$1];
	  try {
	    value[symToStringTag$1] = undefined;
	    var unmasked = true;
	  } catch (e) {}
	  var result = nativeObjectToString$1.call(value);
	  if (unmasked) {
	    if (isOwn) {
	      value[symToStringTag$1] = tag;
	    } else {
	      delete value[symToStringTag$1];
	    }
	  }
	  return result;
	}

	var objectProto = Object.prototype;
	var nativeObjectToString = objectProto.toString;
	function objectToString(value) {
	  return nativeObjectToString.call(value);
	}

	var nullTag = '[object Null]',
	    undefinedTag = '[object Undefined]';
	var symToStringTag = Symbol$2 ? Symbol$2.toStringTag : undefined;
	function baseGetTag(value) {
	  if (value == null) {
	    return value === undefined ? undefinedTag : nullTag;
	  }
	  return (symToStringTag && symToStringTag in Object(value))
	    ? getRawTag(value)
	    : objectToString(value);
	}

	function isObjectLike(value) {
	  return value != null && typeof value == 'object';
	}

	var symbolTag = '[object Symbol]';
	function isSymbol(value) {
	  return typeof value == 'symbol' ||
	    (isObjectLike(value) && baseGetTag(value) == symbolTag);
	}

	var NAN = 0 / 0;
	var reTrim = /^\s+|\s+$/g;
	var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
	var reIsBinary = /^0b[01]+$/i;
	var reIsOctal = /^0o[0-7]+$/i;
	var freeParseInt = parseInt;
	function toNumber(value) {
	  if (typeof value == 'number') {
	    return value;
	  }
	  if (isSymbol(value)) {
	    return NAN;
	  }
	  if (isObject(value)) {
	    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
	    value = isObject(other) ? (other + '') : other;
	  }
	  if (typeof value != 'string') {
	    return value === 0 ? value : +value;
	  }
	  value = value.replace(reTrim, '');
	  var isBinary = reIsBinary.test(value);
	  return (isBinary || reIsOctal.test(value))
	    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
	    : (reIsBadHex.test(value) ? NAN : +value);
	}

	var FUNC_ERROR_TEXT$1 = 'Expected a function';
	var nativeMax = Math.max,
	    nativeMin = Math.min;
	function debounce(func, wait, options) {
	  var lastArgs,
	      lastThis,
	      maxWait,
	      result,
	      timerId,
	      lastCallTime,
	      lastInvokeTime = 0,
	      leading = false,
	      maxing = false,
	      trailing = true;
	  if (typeof func != 'function') {
	    throw new TypeError(FUNC_ERROR_TEXT$1);
	  }
	  wait = toNumber(wait) || 0;
	  if (isObject(options)) {
	    leading = !!options.leading;
	    maxing = 'maxWait' in options;
	    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
	    trailing = 'trailing' in options ? !!options.trailing : trailing;
	  }
	  function invokeFunc(time) {
	    var args = lastArgs,
	        thisArg = lastThis;
	    lastArgs = lastThis = undefined;
	    lastInvokeTime = time;
	    result = func.apply(thisArg, args);
	    return result;
	  }
	  function leadingEdge(time) {
	    lastInvokeTime = time;
	    timerId = setTimeout(timerExpired, wait);
	    return leading ? invokeFunc(time) : result;
	  }
	  function remainingWait(time) {
	    var timeSinceLastCall = time - lastCallTime,
	        timeSinceLastInvoke = time - lastInvokeTime,
	        timeWaiting = wait - timeSinceLastCall;
	    return maxing
	      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
	      : timeWaiting;
	  }
	  function shouldInvoke(time) {
	    var timeSinceLastCall = time - lastCallTime,
	        timeSinceLastInvoke = time - lastInvokeTime;
	    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
	      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
	  }
	  function timerExpired() {
	    var time = now$1();
	    if (shouldInvoke(time)) {
	      return trailingEdge(time);
	    }
	    timerId = setTimeout(timerExpired, remainingWait(time));
	  }
	  function trailingEdge(time) {
	    timerId = undefined;
	    if (trailing && lastArgs) {
	      return invokeFunc(time);
	    }
	    lastArgs = lastThis = undefined;
	    return result;
	  }
	  function cancel() {
	    if (timerId !== undefined) {
	      clearTimeout(timerId);
	    }
	    lastInvokeTime = 0;
	    lastArgs = lastCallTime = lastThis = timerId = undefined;
	  }
	  function flush() {
	    return timerId === undefined ? result : trailingEdge(now$1());
	  }
	  function debounced() {
	    var time = now$1(),
	        isInvoking = shouldInvoke(time);
	    lastArgs = arguments;
	    lastThis = this;
	    lastCallTime = time;
	    if (isInvoking) {
	      if (timerId === undefined) {
	        return leadingEdge(lastCallTime);
	      }
	      if (maxing) {
	        clearTimeout(timerId);
	        timerId = setTimeout(timerExpired, wait);
	        return invokeFunc(lastCallTime);
	      }
	    }
	    if (timerId === undefined) {
	      timerId = setTimeout(timerExpired, wait);
	    }
	    return result;
	  }
	  debounced.cancel = cancel;
	  debounced.flush = flush;
	  return debounced;
	}

	var FUNC_ERROR_TEXT = 'Expected a function';
	function throttle(func, wait, options) {
	  var leading = true,
	      trailing = true;
	  if (typeof func != 'function') {
	    throw new TypeError(FUNC_ERROR_TEXT);
	  }
	  if (isObject(options)) {
	    leading = 'leading' in options ? !!options.leading : leading;
	    trailing = 'trailing' in options ? !!options.trailing : trailing;
	  }
	  return debounce(func, wait, {
	    'leading': leading,
	    'maxWait': wait,
	    'trailing': trailing
	  });
	}

	class Sticky {
	    constructor(slot, preventOverlap) {
	        this._overlap = null;
	        this._stuck = false;
	        this._start = 0;
	        this._cutoff = 0;
	        this._cutoffBuffer = 20;
	        this._element = slot.element;
	        if (preventOverlap) {
	            if (slot.stickyOverlapSelector) {
	                logger.info('Sticky', 'constructor', 'Attempting to use sticky overlap selector override %s', slot.stickyOverlapSelector);
	                this._overlap = document.querySelector(slot.stickyOverlapSelector);
	            }
	            else {
	                logger.info('Sticky', 'constructor', 'Attempting to find the best sticky overlap selector');
	                this._overlap = this.findOverlap(this._element);
	            }
	            if (this._overlap) {
	                logger.info('Sticky', 'constructor', 'Using sticky overlap at %d', this._overlap.offsetTop, this._overlap);
	            }
	            else {
	                logger.info('Sticky', 'constructor', 'No sticky overlap found');
	            }
	        }
	        window.addEventListener('scroll', throttle(() => this.update(), 500));
	        window.addEventListener('resize', throttle(() => {
	            this.unstick();
	            this.update();
	            this.check();
	        }, 500));
	        window.addEventListener('scroll', () => this.check());
	    }
	    update() {
	        if (this._element) {
	            if (!this._stuck) {
	                this._start = this.getTop(this._element);
	            }
	            if (this._overlap) {
	                this._cutoff = this.getTop(this._overlap);
	            }
	        }
	    }
	    check() {
	        if (this._start !== 0) {
	            const scrollTop = window.pageYOffset;
	            const elementHeight = this._element.offsetHeight + this._cutoffBuffer;
	            const overlaps = this._cutoff !== 0 && scrollTop + elementHeight > this._cutoff;
	            if (this._start < scrollTop && !overlaps) {
	                this.stick();
	            }
	            else {
	                this.unstick();
	            }
	        }
	    }
	    stick() {
	        if (!this._stuck) {
	            const style = getComputedStyle(this._element, null);
	            const parent = this._element.parentElement;
	            if (parent) {
	                const parentStyle = getComputedStyle(parent, null);
	                parent.style.minHeight = parentStyle.getPropertyValue('height');
	            }
	            if (!this._element.style.width) {
	                this._element.style.width = style.getPropertyValue('width');
	            }
	            this._element.classList.add('adthrive-stuck');
	            this._stuck = true;
	        }
	    }
	    unstick() {
	        if (this._stuck) {
	            this._element.classList.remove('adthrive-stuck');
	            this._stuck = false;
	        }
	    }
	    getTop(element) {
	        const elementRect = element.getBoundingClientRect();
	        return elementRect.top + window.pageYOffset;
	    }
	    findOverlap(element) {
	        let overlap = null;
	        while (element.parentElement) {
	            element = element.parentElement;
	            let next = element.nextElementSibling;
	            while (next && isHidden(next)) {
	                next = next.nextElementSibling;
	            }
	            if (next && next.offsetTop > 0) {
	                if (!overlap || next.offsetTop < overlap.offsetTop) {
	                    overlap = next;
	                }
	            }
	        }
	        return overlap;
	    }
	}

	class StickyOutstream {
	    constructor(_config, _slotManager, _slot, _stickyCloseButtonExperiment, _eventProxy, _videoCloseButton) {
	        this._config = _config;
	        this._slotManager = _slotManager;
	        this._slot = _slot;
	        this._stickyCloseButtonExperiment = _stickyCloseButtonExperiment;
	        this._eventProxy = _eventProxy;
	        this._videoCloseButton = _videoCloseButton;
	        this._isRendered = false;
	    }
	    setup() {
	        if (!this._isRendered) {
	            this._isRendered = true;
	            this._appendCloseButton();
	            this._activate();
	        }
	    }
	    get renderState() {
	        return this._isRendered;
	    }
	    _activate() {
	        this._handleWidthBreak();
	        this._eventProxy.videoPlaying.on(this._handleRelatedPlayClose.bind(this));
	        this._slot.element.parentElement.classList.add('adthrive-sticky-outstream-active');
	    }
	    _appendCloseButton() {
	        const element = this._slot.element;
	        const closeButton = this._videoCloseButton.createPlayerCloseButton(this._handleCloseClick.bind(this), this._stickyCloseButtonExperiment.result, 'adthrive-sticky-outstream-close');
	        element.parentNode.insertBefore(closeButton, element);
	        setTimeout(() => {
	            closeButton.style.display = 'inline-flex';
	        }, this._config.video.closeButtonTimeout);
	    }
	    _logPlayerClose(closeReason) {
	        StickyOutstream.closeEvent.emit().catch(() => { });
	        logger.event('StickyOutstream', 'handleClose', {
	            device: isDesktop() ? 'desktop' : 'mobile',
	            closeReason,
	        });
	    }
	    _handleRelatedPlayClose() {
	        this._handleClose('relatedPlay');
	    }
	    _handleCloseClick() {
	        this._handleClose('closeClick');
	    }
	    _handleClose(closeReason) {
	        const element = this._slot.element;
	        const parent = element.parentElement;
	        this._logPlayerClose(closeReason);
	        if (parent) {
	            parent.removeChild(element);
	            parent.classList.remove('adthrive-sticky-outstream-active');
	            this._slotManager.destroy(element.id);
	            this._removeListener();
	        }
	    }
	    _handleWidthBreak() {
	        this._removeListener = this._eventProxy.footerRefreshed.on(this._handleFooterRefreshedEvent.bind(this));
	        this._repositionCollapseBottom();
	    }
	    _handleFooterRefreshedEvent() {
	        this._repositionCollapseBottom();
	    }
	    _repositionCollapseBottom() {
	        if (this._config.context.device !== 'desktop') {
	            const footerBottom = calculateFooterBottom();
	            this._slot.element.parentElement.style.setProperty('top', 'auto', 'important');
	            this._slot.element.parentElement.style.setProperty('bottom', `${footerBottom}px`, 'important');
	        }
	    }
	}
	StickyOutstream.closeEvent = new Emitter();

	let StickyCloseButtonExperiment = class StickyCloseButtonExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this.key = 'socbe';
	        this._choices = [
	            { choice: 'sovpcc', weight: 0 },
	            { choice: 'sovpct1', weight: 0 },
	            { choice: 'sovpct2', weight: 100 },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, this._result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], StickyCloseButtonExperiment.prototype, "run", null);
	StickyCloseButtonExperiment = __decorate([
	    log('StickyCloseButtonExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], StickyCloseButtonExperiment);

	let VideoCloseButtonComponent = class VideoCloseButtonComponent extends Component {
	    constructor() {
	        super(...arguments);
	        this._hasTitleBar = false;
	        this._isInstreamExperiment = false;
	        this._isButtonOutsideContainer = false;
	        this._isButtonInsideContainer = false;
	        this._isDefaultPosition = false;
	        this._experimentResult = '';
	    }
	    createDefaultButton(handleCloseClick) {
	        const closeButton = document.createElement('div');
	        closeButton.innerHTML = '<span>&times;</span>';
	        closeButton.className = 'adthrive-wrapper-close';
	        closeButton.style.display = 'none';
	        closeButton.id = 'adthrive-collapse-close';
	        closeButton.onclick = handleCloseClick;
	        return closeButton;
	    }
	    createPlayerCloseButton(handleCloseClick, experimentResult, buttonID, hasTitleBar = false) {
	        this._hasTitleBar = hasTitleBar;
	        this._isInstreamExperiment = experimentResult === 'tlo' || experimentResult === 'tlw';
	        this._isButtonOutsideContainer = experimentResult === 'sovpct1' || experimentResult === 'tlo';
	        this._isButtonInsideContainer = experimentResult === 'sovpct2' || experimentResult === 'tlw';
	        this._isDefaultPosition = experimentResult === 'sovpcc' || experimentResult === 'off';
	        this._experimentResult = experimentResult;
	        const classes = this._getButtonClasses();
	        const svgOptions = this._getSvgOptions();
	        const closeButton = this._createCloseButton(classes, buttonID, svgOptions);
	        closeButton.onclick = handleCloseClick;
	        return this._isButtonInsideContainer ? this.applyCloseButtonWrapper(closeButton) : closeButton;
	    }
	    _getButtonClasses() {
	        const classes = [];
	        if (this._isButtonOutsideContainer || this._isDefaultPosition) {
	            classes.push('adthrive-wrapper-float-close');
	        }
	        if (this._isInstreamExperiment) {
	            classes.push('adthrive-instream-close');
	            if (this._isButtonOutsideContainer) {
	                classes.push('adthrive-top-left-outer', 'adthrive-float-left');
	            }
	        }
	        else if (this._experimentResult !== 'sovpcc') {
	            classes.push('adthrive-wrapper-close-outside-left');
	        }
	        return classes;
	    }
	    _getSvgOptions() {
	        return this._isButtonInsideContainer ? { fillColor: 'transparent', strokeColor: 'white' } : { fillColor: 'white', strokeColor: 'black' };
	    }
	    _createCloseButton(classes, id, svgOptions) {
	        const { fillColor, strokeColor } = svgOptions !== null && svgOptions !== void 0 ? svgOptions : { fillColor: 'white', strokeColor: 'black' };
	        const closeButton = this._createButtonHtml(classes, id);
	        const svg = this._createSvg(fillColor);
	        const path = this._createPath(strokeColor);
	        svg.appendChild(path);
	        closeButton.appendChild(svg);
	        return closeButton;
	    }
	    _createButtonHtml(classes, id) {
	        const closeButton = document.createElement('div');
	        closeButton.className = classes.join(' ');
	        closeButton.id = id;
	        return closeButton;
	    }
	    _createSvg(fillColor) {
	        const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
	        svg.setAttribute('width', '18');
	        svg.setAttribute('height', '18');
	        svg.setAttribute('fill', fillColor);
	        return svg;
	    }
	    _createPath(strokeColor) {
	        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
	        path.setAttribute('d', 'M 0.5 9 A 5 5 0 0 0 17.5 9 A 5 5 0 0 0 0.5 9 M 9 9 L 7 7 L 11 11 M 9 9 L 7 11 L 11 7');
	        path.setAttribute('stroke', strokeColor);
	        path.setAttribute('stroke-width', '1');
	        return path;
	    }
	    applyCloseButtonWrapper(closeButton) {
	        const wrapper = document.createElement('div');
	        const classes = ['adthrive-wrapper-float-close', 'adthrive-wrapper-close-bkgd-50'];
	        if (this._hasTitleBar) {
	            classes.push('adthrive-top-left-inner-wrapper');
	        }
	        else {
	            classes.push('adthrive-top-left-inner');
	        }
	        wrapper.classList.add(...classes);
	        wrapper.appendChild(closeButton);
	        return wrapper;
	    }
	};
	VideoCloseButtonComponent = __decorate([
	    log('VideoCloseButtonComponent'),
	    injectable()
	], VideoCloseButtonComponent);

	let VideoEventProxy = class VideoEventProxy {
	    constructor(_gam, _pageManager) {
	        this._gam = _gam;
	        this._pageManager = _pageManager;
	        this.scroll = new Emitter();
	        this.resize = new Emitter();
	        this.pageVisibility = new Emitter();
	        this.videoPlaying = new Emitter();
	        this.footerRefreshed = new Emitter();
	        this.addEventListeners();
	        this._gam.slotRenderEnded.on(({ slot }) => {
	            if (slot.location === 'Footer') {
	                void this.footerRefreshed.emit();
	            }
	        });
	    }
	    addEventListeners() {
	        let isScrollTimeout = false;
	        let isResizeTimeout = false;
	        const scrollTimeout = 100;
	        const resizeTimeout = 100;
	        const scrollListener = () => {
	            if (isScrollTimeout) {
	                return;
	            }
	            isScrollTimeout = true;
	            setTimeout(() => {
	                void this.scroll.emit();
	                isScrollTimeout = false;
	            }, scrollTimeout);
	        };
	        const resizeListener = () => {
	            if (isResizeTimeout) {
	                return;
	            }
	            isResizeTimeout = true;
	            setTimeout(() => {
	                void this.resize.emit();
	                isResizeTimeout = false;
	            }, resizeTimeout);
	        };
	        this._pageManager.scroll.on(() => scrollListener());
	        this._pageManager.resize.on(() => resizeListener());
	        this._pageManager.visibilityChange.on(() => {
	            void this.pageVisibility.emit(document.hidden);
	        });
	    }
	    emitVideoPlayingEvent(playerId) {
	        this.videoPlaying.emit(playerId).catch(() => { });
	    }
	};
	VideoEventProxy = __decorate([
	    singleton(),
	    __metadata("design:paramtypes", [GoogleAdManager, PageManager])
	], VideoEventProxy);

	let StickyComponent = class StickyComponent extends Component {
	    constructor(_slots, _config, _slotManager, _stickyCloseButtonExperiment, _eventProxy, _videoCloseButton) {
	        super();
	        this._slots = _slots;
	        this._config = _config;
	        this._slotManager = _slotManager;
	        this._stickyCloseButtonExperiment = _stickyCloseButtonExperiment;
	        this._eventProxy = _eventProxy;
	        this._videoCloseButton = _videoCloseButton;
	        this._sticky = [];
	        this._slots.added.on((slot) => {
	            if (slot && slot.sticky) {
	                slot.element.classList.add('adthrive-sticky');
	                if (slot.location === 'Sidebar') {
	                    this._sticky.push(new Sticky(slot, true));
	                }
	                if (slot.location === 'Video_StickyOutstream') {
	                    this._stickyOutstream = new StickyOutstream(this._config, this._slotManager, slot, this._stickyCloseButtonExperiment, this._eventProxy, this._videoCloseButton);
	                }
	            }
	        });
	    }
	    stickyOutstreamReady() {
	        if (this._stickyOutstream && !this._stickyOutstream.renderState) {
	            this._stickyOutstream.setup();
	        }
	    }
	};
	StickyComponent = __decorate([
	    log('StickyComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Slots,
	        Config,
	        SlotManager,
	        StickyCloseButtonExperiment,
	        VideoEventProxy,
	        VideoCloseButtonComponent])
	], StickyComponent);

	let LazyLoadComponent = class LazyLoadComponent extends Component {
	    constructor(_config, _pageManager, _slots, _slotManager, _sticky) {
	        super();
	        this._config = _config;
	        this._pageManager = _pageManager;
	        this._slots = _slots;
	        this._slotManager = _slotManager;
	        this._sticky = _sticky;
	        this._debounce = new DebounceByKey(1000);
	        this._viewports = this._config.lazyLoad.viewports;
	    }
	    init() {
	        const _viewportMap = new Map([
	            ['Below_Post', this._viewports.belowPost],
	            ['Content', this._viewports.content],
	            ['Default', this._viewports.default],
	        ]);
	        this._slotManager.added.on(slots => {
	            for (const slot of slots) {
	                if (slot.lazy) {
	                    const viewport = this._config.adOptions.infiniteScroll
	                        ? this._viewports.infScroll
	                        : defaultTo(_viewportMap.get(slot.location), _viewportMap.get('Default'));
	                    this.getIntersectionObserver(viewport).observe(slot.element);
	                }
	                else if (slot.location === 'Video_StickyOutstream') {
	                    this._pageManager.setupOnceEvent('scroll', () => {
	                        this._sticky.stickyOutstreamReady();
	                        this._slotManager.display([slot]).catch(reason => {
	                            logger.error('LazyLoadComponent', 'scroll', 'display stickyOutstream slot', reason);
	                        });
	                    });
	                }
	                else {
	                    this._slotManager.display([slot]).catch(reason => {
	                        logger.error('LazyLoadComponent', 'init', 'display', reason);
	                    });
	                }
	            }
	        });
	    }
	    getIntersectionObserver(viewport) {
	        const margin = window.innerHeight * viewport;
	        const callback = (entries) => {
	            for (const entry of entries) {
	                const slot = this._slots.get(entry.target.id);
	                if (slot) {
	                    this._debounce
	                        .limit(entry.target.id)
	                        .then(() => this.processEvent(entry, slot))
	                        .catch(reason => {
	                        logger.error('LazyLoadComponent', 'getIntersectionObserver', reason);
	                    });
	                }
	            }
	        };
	        return new IntersectionObserver(callback, {
	            rootMargin: `${margin}px 0px`,
	            threshold: [0, 1],
	        });
	    }
	    processEvent(entry, slot) {
	        if (entry.isIntersecting && !slot.displayed) {
	            this._slotManager.display(slot).catch(reason => {
	                logger.error('LazyLoadComponent', 'processEvent', 'display', reason);
	            });
	        }
	        else if (!entry.isIntersecting && slot.displayed) {
	            this._slotManager.clear(slot).catch(reason => {
	                logger.error('LazyLoadComponent', 'processEvent', 'clear', reason);
	            });
	        }
	    }
	    get enabled() {
	        return false;
	    }
	};
	LazyLoadComponent = __decorate([
	    log('LazyLoadComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        PageManager,
	        Slots,
	        SlotManager,
	        StickyComponent])
	], LazyLoadComponent);

	let GoogleLazyLoadComponent = class GoogleLazyLoadComponent extends Component {
	    constructor(_config, _gam, _pageManager, _slots, _slotManager, _sticky) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._pageManager = _pageManager;
	        this._slots = _slots;
	        this._slotManager = _slotManager;
	        this._sticky = _sticky;
	        this._debounce = new DebounceByKey(1000);
	    }
	    init() {
	        const slotManager = this._slotManager;
	        this._slotManager.added.on(slots => {
	            for (const slot of slots) {
	                if (slot.lazy) {
	                    GoogleAdManager.pushToQueue(() => {
	                        slot.googleTagSlot.setTargeting('lazy', 'true');
	                    });
	                    this.getIntersectionObserver().observe(slot.element);
	                }
	                else if (slot.location === 'Video_StickyOutstream') {
	                    this._pageManager.setupOnceEvent('scroll', () => {
	                        this._sticky.stickyOutstreamReady();
	                        slotManager.display([slot]).catch(reason => {
	                            logger.error('GoogleLazyLoadComponent', 'scroll', 'display stickyOutstream slot', reason);
	                        });
	                    });
	                }
	                else {
	                    GoogleAdManager.pushToQueue(() => {
	                        slot.googleTagSlot.setTargeting('lazy', 'false');
	                    });
	                    slotManager.display(slot).catch(reason => {
	                        logger.error('GoogleLazyLoadComponent', 'init', 'display non lazy slot', reason);
	                    });
	                }
	            }
	        });
	    }
	    getIntersectionObserver() {
	        const margin = window.innerHeight * (this._config.lazyLoad.googleLazyLoadSettings.hbMarginPercent / 100);
	        const callback = (entries, observer) => {
	            for (const entry of entries) {
	                this.processEntry(entry, observer);
	            }
	        };
	        return new IntersectionObserver(callback, {
	            rootMargin: `${margin}px 0px`,
	            threshold: [0],
	        });
	    }
	    processEntry(entry, observer) {
	        const slot = this._slots.get(entry.target.id);
	        if (slot && entry.intersectionRatio > 0) {
	            this._debounce
	                .limit(entry.target.id)
	                .then(() => this._slotManager.display(slot))
	                .catch(reason => {
	                logger.error('GoogleLazyLoadComponent', 'callback', 'display lazy slot', reason);
	            });
	            observer.unobserve(slot.element);
	        }
	    }
	};
	GoogleLazyLoadComponent = __decorate([
	    log('GoogleLazyLoadComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        GoogleAdManager,
	        PageManager,
	        Slots,
	        SlotManager,
	        StickyComponent])
	], GoogleLazyLoadComponent);

	let HvpComponent = class HvpComponent extends Component {
	    constructor(_gam, _slotManager) {
	        super();
	        this._gam = _gam;
	        this._slotManager = _slotManager;
	        this._isMobile = isMobile();
	    }
	    _isCustomHVP(location) {
	        return this._isMobile && location === 'Content';
	    }
	    init() {
	        this._slotManager.added.on(slots => {
	            GoogleAdManager.pushToQueue(() => {
	                for (const slot of slots) {
	                    const hvp = Math.min(Math.floor((slot.viewability * 100) / 10) * 10, 80);
	                    if (hvp >= 50) {
	                        slot.setTargeting({ key: 'hvp', value: hvp.toString() });
	                    }
	                }
	            });
	        });
	        this._slotManager.refreshing.on(slots => {
	            GoogleAdManager.pushToQueue(() => {
	                for (const slot of slots) {
	                    const customSlots = this._isCustomHVP(slot.location);
	                    if (slot.refreshCount === 1) {
	                        slot.setTargeting({ key: 'hvp', value: customSlots ? '60' : '80' });
	                    }
	                    else if (slot.refreshCount === 2 && customSlots) {
	                        slot.setTargeting({ key: 'hvp', value: '80' });
	                    }
	                }
	            });
	        });
	    }
	};
	HvpComponent = __decorate([
	    log('HvpComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, SlotManager])
	], HvpComponent);

	let MarmaladeInjector = class MarmaladeInjector {
	    constructor(_config) {
	        this._config = _config;
	    }
	    inject() {
	        try {
	            return this._config.marmalade.selectorMatches.reduce(this.processMatch.bind(this), []);
	        }
	        catch (err) {
	            logger.error('MarmaladeInjector', 'inject', err);
	        }
	        return [];
	    }
	    processMatch(slots, marmaladeSelectorMatch) {
	        const { adUnit, match } = marmaladeSelectorMatch;
	        logger.info('MarmaladeInjector', 'processMatch', 'AdUnit', adUnit);
	        logger.info('MarmaladeInjector', 'processMatch', 'Element', match);
	        const elementId = this.getElementId(adUnit.location, adUnit.sequence);
	        const exists = slots.some(slot => {
	            return slot.location === adUnit.location && slot.sequence === adUnit.sequence;
	        });
	        if (!exists) {
	            const adElement = this.addAd(match, elementId, adUnit.position, adUnit.classNames);
	            if (adElement) {
	                logger.info('MarmaladeInjector', 'processMatch', `ID ${elementId}`, match);
	                const slot = new Slot(adUnit.location, adUnit.sequence, adUnit.size, adElement, false, adUnit.lazy);
	                slots.push(slot);
	            }
	        }
	        return slots;
	    }
	    getElementId(location, sequence) {
	        return [this._config.gam.prefix, location, sequence].filter(defined).join('_');
	    }
	    addAd(element, id, position, classNames = []) {
	        const tag = `<div id="${id}" class="adthrive-ad ${classNames.join(' ')}"></div>`;
	        element.insertAdjacentHTML(position, tag);
	        return document.getElementById(id);
	    }
	};
	MarmaladeInjector = __decorate([
	    log('MarmaladeInjector'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], MarmaladeInjector);

	let MarmaladeComponent = class MarmaladeComponent extends Component {
	    constructor(_config, _marmaladeInjector, _slotManager, _gam, _prebidMethods) {
	        super();
	        this._config = _config;
	        this._marmaladeInjector = _marmaladeInjector;
	        this._slotManager = _slotManager;
	        this._gam = _gam;
	        this._prebidMethods = _prebidMethods;
	    }
	    init() {
	        const dynamicSlots = this._marmaladeInjector.inject();
	        dynamicSlots.forEach(dynamicSlot => (dynamicSlot.refreshInterval = 0));
	        const siteCodes = this._config.marmalade.siteCodes.filter(filterUnique);
	        const mcmp = this._config.marmalade.mcmp.filter(filterUnique);
	        const flpProdIds = this._config.marmalade.flpProdIds.filter(filterUnique);
	        const marmaladeLoaded = this._config.marmalade.loaded ? 'true' : 'false';
	        this._gam.setTargeting({ key: 'mcmp', value: mcmp });
	        this._gam.setTargeting({ key: 'site_code', value: siteCodes });
	        this._gam.setTargeting({ key: 'marmalade', value: marmaladeLoaded });
	        const siteCodeObject = siteCodes.reduce((obj, code) => {
	            obj[code] = 'True';
	            return obj;
	        }, {});
	        setIXFirstPartyData({
	            MCMP: mcmp.join('#MCMP:'),
	            ...siteCodeObject,
	        }, this._prebidMethods);
	        if (dynamicSlots.length > 0) {
	            this._gam.started.on(() => this._slotManager.add(dynamicSlots).catch(reason => {
	                logger.error('MarmaladeComponent', 'init', reason);
	            }));
	        }
	        if (flpProdIds) {
	            const expectedOrigin = /https:\/\/\S*\.safeframe.googlesyndication.com/i;
	            setCrossDomainMessaging(expectedOrigin, {
	                message: 'adthriveFlippData',
	                flippData: flpProdIds,
	            });
	        }
	    }
	    get enabled() {
	        return !this._config.disableAds.all;
	    }
	};
	MarmaladeComponent = __decorate([
	    log('MarmaladeComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        MarmaladeInjector,
	        SlotManager,
	        GoogleAdManager,
	        PrebidMethods])
	], MarmaladeComponent);

	let PiiManager = class PiiManager {
	    constructor(_emailCaptureHandler, _gdprEvents, _config) {
	        this._emailCaptureHandler = _emailCaptureHandler;
	        this._gdprEvents = _gdprEvents;
	        this._config = _config;
	        this._email = '';
	        this._consent = '';
	        this._hash = '';
	        this._source = '';
	        this._consentReceived = false;
	        this._emailCounted = false;
	        this.piiCaptured = new Emitter();
	    }
	    init() {
	        this._emailCaptureHandler.emailCaptured.on(data => this._handleEmailCapture(data));
	        this._gdprEvents.consentCaptured.on(consent => this._handleConsentCapture(consent));
	    }
	    async _handleEmailCapture(data) {
	        const { email, hash, source } = data;
	        this._hash = hash || (await this._hashEmail(email));
	        this._email = email;
	        this._source = source;
	        if (!this._config.gdpr.enabled || this._consentReceived) {
	            this._sendPii();
	        }
	    }
	    _handleConsentCapture(consent) {
	        this._consentReceived = true;
	        this._consent = consent;
	        if (this._email && this._hash) {
	            this._sendPii();
	        }
	    }
	    _sendPii() {
	        if (!this._emailCounted) {
	            this._emailCounted = true;
	            logger.event('PiiManager', '_sendPii', this._source);
	        }
	        this.piiCaptured.emit({ email: this._email, hash: this._hash, consent: this._consent, source: this._source }).catch(() => { });
	    }
	    async _hashEmail(email) {
	        if (!('msCrypto' in window) && location.protocol === 'https:' && 'crypto' in window && 'TextEncoder' in window) {
	            const msgUint8 = new TextEncoder().encode(email);
	            const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);
	            const hashArray = Array.from(new Uint8Array(hashBuffer));
	            const hashHex = hashArray.map(b => ('00' + b.toString(16)).slice(-2)).join('');
	            return hashHex;
	        }
	        return '';
	    }
	};
	PiiManager = __decorate([
	    log('PiiManager'),
	    singleton(),
	    __metadata("design:paramtypes", [EmailCaptureHandler, GDPREvents, Config])
	], PiiManager);

	class PiiPartner {
	    get enabled() {
	        return true;
	    }
	}

	let LiveRampPiiPartner = class LiveRampPiiPartner extends PiiPartner {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._liveRampBaseUrl = 'https://api.rlcdn.com/api/identity/envelope';
	        this._pid = 111;
	        this._it = 4;
	        this._localKey = '_lr_env';
	    }
	    get enabled() {
	        var _a;
	        return ((_a = this._config.liveRampAts) === null || _a === void 0 ? void 0 : _a.enabled) && 'localStorage' in window;
	    }
	    init() {
	        if (window.localStorage.getItem(this._localKey)) {
	            this._gam.setTargetingFlag('idp', ['ats']);
	        }
	    }
	    async processPii(pii) {
	        if (localStorage.getItem(this._localKey)) {
	            logger.info('LiveRampPiiPartner', 'processPii', 'LiveRamp exists in localStorage; not sending.');
	            return;
	        }
	        let requestUrl = `${this._liveRampBaseUrl}?pid=${this._pid}&it=${this._it}&iv=${pii.hash ? pii.hash : pii.email}`;
	        if (this._config.gdpr.enabled) {
	            requestUrl += `&ct=4&cv=${pii.consent}`;
	        }
	        else if (this._config.ccpa.required) {
	            requestUrl += `&ct=4&cv=${readCookie('usprivacy')}`;
	        }
	        try {
	            logger.info('LiveRampPiiPartner', 'Requesting LiveRamp envelope');
	            const response = await fetch(requestUrl, { method: 'GET', keepalive: true });
	            const responseBody = await response.text();
	            if (responseBody) {
	                const { envelope } = JSON.parse(responseBody);
	                localStorage.setItem(this._localKey, btoa(JSON.stringify({
	                    envelope,
	                    timestamp: +new Date(),
	                })));
	                logger.info('LiveRampPiiPartner', 'Successful Envelope Response: ', envelope);
	                return;
	            }
	            logger.info('LiveRampPiiPartner', 'LiveRamp ATS did not return an envelope.');
	        }
	        catch (requestError) {
	            logger.info('LiveRampPiiPartner', requestError);
	        }
	    }
	};
	LiveRampPiiPartner = __decorate([
	    log('LiveRampPiiPartner'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], LiveRampPiiPartner);

	const idhoNotApplied = (_config, name) => !_config.idho.subModule || _config.idho.subModule.name !== name;
	const userIdConfigs = new Map([
	    [
	        'connectId',
	        {
	            id: {
	                name: 'connectId',
	                params: {
	                    pixelId: 58404,
	                },
	                storage: {
	                    name: 'connectid',
	                    type: 'html5',
	                    expires: 15,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name) && _config.liveRampAts.enabled;
	            },
	            targetingKey: 'cid',
	        },
	    ],
	    [
	        'unifiedId',
	        {
	            id: {
	                name: 'unifiedId',
	                params: {
	                    url: 'https://match.adsrvr.org/track/rid?ttd_pid=iowij76&fmt=json',
	                },
	                storage: {
	                    type: 'html5',
	                    name: 'pbjs-unifiedid',
	                    expires: 60,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name);
	            },
	            targetingKey: 'uid1',
	        },
	    ],
	    [
	        'id5Id',
	        {
	            id: {
	                name: 'id5Id',
	                params: {
	                    partner: 367,
	                },
	                storage: {
	                    type: 'html5',
	                    name: 'pbjs-id5id',
	                    expires: 60,
	                    refreshInSeconds: 8 * 3600,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name);
	            },
	            targetingKey: 'id5',
	        },
	    ],
	    [
	        'identityLink',
	        {
	            id: {
	                name: 'identityLink',
	                params: {
	                    pid: '111',
	                },
	                storage: {
	                    type: 'html5',
	                    name: 'pbjs-identitylink',
	                    expires: 60,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name);
	            },
	            targetingKey: 'idl',
	        },
	    ],
	    [
	        'pubCommonId',
	        {
	            id: {
	                name: 'pubCommonId',
	                storage: {
	                    type: 'html5',
	                    name: 'pbjs-pubcommonid',
	                    expires: 60,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name);
	            },
	            targetingKey: 'pc',
	        },
	    ],
	    [
	        'criteo',
	        {
	            id: {
	                name: 'criteo',
	                storage: {
	                    type: 'html5',
	                    name: 'pbjs-criteo',
	                    expires: 60,
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name);
	            },
	            targetingKey: 'cri',
	        },
	    ],
	    [
	        'parrableId',
	        {
	            id: {
	                name: 'parrableId',
	                params: {
	                    partner: '9fde8b8d-49db-4c9e-b841-0e777ab8d343',
	                },
	            },
	            enabled(_config) {
	                return idhoNotApplied(_config, this.id.name) && (isNewZealand() || isHawaii() || isPhoenix() || isPacific());
	            },
	            targetingKey: 'par',
	        },
	    ],
	]);

	let YahooPiiPartner = class YahooPiiPartner extends PiiPartner {
	    constructor(_config, _prebidMethods) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._submitted = false;
	        this.userId = userIdConfigs.get('connectId').id;
	    }
	    get enabled() {
	        return userIdConfigs.get('connectId').enabled(this._config);
	    }
	    updateUserIds() {
	        const userIdsFromConfig = this._prebidMethods.getConfig('userSync.userIds');
	        return userIdsFromConfig.map((userId) => {
	            if (userId.name === this.userId.name) {
	                userId = this.userId;
	            }
	            return userId;
	        });
	    }
	    processPii(pii) {
	        this._prebidMethods.addToQueue(() => {
	            this.run(pii);
	        });
	    }
	    run(pii) {
	        if (pii.hash && this.userId.params && !this._submitted) {
	            this.userId.params.he = pii.hash;
	            this._submitted = true;
	            const updatedUserIds = this.updateUserIds();
	            this._prebidMethods.setConfig({
	                userSync: {
	                    userIds: updatedUserIds,
	                },
	            });
	            this._prebidMethods.refreshUserIds({ submoduleNames: [this.userId.name] }, () => logger.info('YahooPiiPartner', 'processPii', '_PiiManager', 'emailCaptured', 'Sync complete'));
	        }
	    }
	};
	YahooPiiPartner = __decorate([
	    log('YahooPiiPartner'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods])
	], YahooPiiPartner);

	let PiiCaptureComponent = class PiiCaptureComponent extends Component {
	    constructor(_piiManager, liveRampPiiPartner, yahooPiiPartner) {
	        super();
	        this._piiManager = _piiManager;
	        this._partners = [liveRampPiiPartner, yahooPiiPartner].filter(piiPartner => piiPartner.enabled);
	    }
	    init() {
	        this._piiManager.init();
	        this._partners.forEach(piiPartner => piiPartner.init && piiPartner.init());
	        this._piiManager.piiCaptured.on(piiData => {
	            this._partners.forEach(partner => {
	                partner.processPii(piiData);
	            });
	        });
	    }
	};
	PiiCaptureComponent = __decorate([
	    log('PiiCaptureComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [PiiManager, LiveRampPiiPartner, YahooPiiPartner])
	], PiiCaptureComponent);

	let RefreshCountComponent = class RefreshCountComponent extends Component {
	    constructor(_slotManager) {
	        super();
	        this._slotManager = _slotManager;
	        this._maxSlotRefreshCount = 4;
	    }
	    init() {
	        this._slotManager.displaying.on(slots => {
	            GoogleAdManager.pushToQueue(() => {
	                slots.forEach(slot => slot.setTargeting({ key: 'refresh', value: '00' }));
	                slots.forEach(slot => slot.setTargeting({ key: 'nref', value: '0' }));
	            });
	        });
	        this._slotManager.refreshing.on(slots => {
	            GoogleAdManager.pushToQueue(() => {
	                for (const slot of slots) {
	                    const value = `0${Math.min(slot.refreshCount, this._maxSlotRefreshCount)}`.slice(-2);
	                    slot.setTargeting({ key: 'refresh', value });
	                    slot.setTargeting({ key: 'nref', value: slot.refreshCount.toString() });
	                }
	            });
	        });
	    }
	};
	RefreshCountComponent = __decorate([
	    log('RefreshCountComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager])
	], RefreshCountComponent);

	let RefreshRebuildExperiment = class RefreshRebuildExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.key = 'rebuildslot';
	        this._choices = [{ choice: true }, { choice: false }];
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.95).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], RefreshRebuildExperiment.prototype, "run", null);
	RefreshRebuildExperiment = __decorate([
	    log('RefreshRebuildExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], RefreshRebuildExperiment);

	let RefreshRebuildComponent = class RefreshRebuildComponent extends Component {
	    constructor(_slotManager, _refreshRebuildExperiment) {
	        super();
	        this._slotManager = _slotManager;
	        this._refreshRebuildExperiment = _refreshRebuildExperiment;
	    }
	    init() {
	        this._slotManager.refreshing.on(slots => {
	            slots.filter(this.slotHasHighRefreshCountIncrement).forEach(slot => this._slotManager.rebuild(slot));
	        });
	    }
	    slotHasHighRefreshCountIncrement(slot) {
	        const highRefreshCount = 100;
	        return slot.refreshCount % highRefreshCount === 0;
	    }
	    get enabled() {
	        return this._refreshRebuildExperiment.result;
	    }
	};
	RefreshRebuildComponent = __decorate([
	    log('RefreshRebuildComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager, RefreshRebuildExperiment])
	], RefreshRebuildComponent);

	function styleInject(css, ref) {
	  if ( ref === void 0 ) ref = {};
	  var insertAt = ref.insertAt;
	  if (!css || typeof document === 'undefined') { return; }
	  var head = document.head || document.getElementsByTagName('head')[0];
	  var style = document.createElement('style');
	  style.type = 'text/css';
	  if (insertAt === 'top') {
	    if (head.firstChild) {
	      head.insertBefore(style, head.firstChild);
	    } else {
	      head.appendChild(style);
	    }
	  } else {
	    head.appendChild(style);
	  }
	  if (style.styleSheet) {
	    style.styleSheet.cssText = css;
	  } else {
	    style.appendChild(document.createTextNode(css));
	  }
	}

	let SiteStyleComponent = class SiteStyleComponent extends Component {
	    constructor(_config) {
	        super();
	        this._config = _config;
	    }
	    start() {
	        if (this._config.site.style && this._config.site.style.length > 0) {
	            styleInject(this._config.site.style);
	        }
	        else if (this._config.context.styleUrl) {
	            importStyle(this._config.context.styleUrl);
	        }
	    }
	};
	SiteStyleComponent = __decorate([
	    log('SiteStyleComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], SiteStyleComponent);

	let TrafficSourceComponent = class TrafficSourceComponent extends Component {
	    constructor(_gam) {
	        super();
	        this._gam = _gam;
	    }
	    init() {
	        const referrer = this.getReferrer();
	        if (referrer !== null) {
	            this._gam.setTargeting({ key: 'doc_ref', value: referrer });
	        }
	    }
	    getReferrer() {
	        const referrer = getReferrer();
	        if (referrer && referrer.length) {
	            setSessionValue('referrer', referrer);
	        }
	        return referrer;
	    }
	};
	TrafficSourceComponent = __decorate([
	    log('TrafficSourceComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager])
	], TrafficSourceComponent);

	let UserIdTargeting = class UserIdTargeting {
	    constructor(_gam) {
	        this._gam = _gam;
	    }
	    getStoredIdValue(storage) {
	        let storedValue;
	        if (storage.type === 'cookie' && window.navigator.cookieEnabled) {
	            storedValue = readCookie(storage.name);
	        }
	        else if (storage.type === 'html5') {
	            storedValue = window.localStorage.getItem(storage.name);
	        }
	        return storedValue;
	    }
	    getSyncedIdModules(userIds) {
	        return [...userIds].reduce((acc, idModule) => {
	            if (idModule.storage !== undefined && this.getStoredIdValue(idModule.storage)) {
	                acc.push(idModule.name);
	                return acc;
	            }
	            return acc;
	        }, []);
	    }
	    setTargeting(userIds) {
	        const syncedPartners = this.getSyncedIdModules(userIds).map(partner => { var _a; return ((_a = userIdConfigs.get(partner)) === null || _a === void 0 ? void 0 : _a.targetingKey) || partner; });
	        this._gam.setTargetingFlag('idp', syncedPartners);
	    }
	};
	UserIdTargeting = __decorate([
	    log('UserIdTargeting'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager])
	], UserIdTargeting);

	let UserIdComponent = class UserIdComponent extends Component {
	    constructor(_config, _prebidMethods, userIdTargeting) {
	        super();
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this.userIdTargeting = userIdTargeting;
	        this._enabledUserIds = [];
	        this._ppid = null;
	        this._enabledUserIds = [...userIdConfigs.values()]
	            .filter(userIdConfig => userIdConfig.enabled(this._config))
	            .map(userIdConfig => {
	            if (userIdConfig.id.name === 'pubCommonId') {
	                const storageName = (userIdConfig.id.storage && userIdConfig.id.storage.name) || '';
	                this._ppid = localStorage.getItem(storageName);
	                if (this._ppid) {
	                    userIdConfig.id.name = 'sharedId';
	                    userIdConfig.id.value = { pubcid: this._ppid };
	                }
	            }
	            return userIdConfig.id;
	        });
	    }
	    init() {
	        let userSync = { userIds: this._enabledUserIds };
	        if (this._ppid) {
	            userSync = { ppid: 'pubcid.org', ...userSync };
	        }
	        this._prebidMethods.setConfig({ userSync });
	        this.userIdTargeting.setTargeting([...userIdConfigs.values()].map(userIdConfig => userIdConfig.id));
	    }
	};
	UserIdComponent = __decorate([
	    log('UserIdComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, PrebidMethods, UserIdTargeting])
	], UserIdComponent);

	let UTMComponent = class UTMComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	    }
	    init() {
	        const utm = defaultTo(getSessionValue('utm', 1800000), {});
	        ['utm_medium', 'utm_campaign', 'utm_session', 'utm_source'].forEach(key => {
	            const current = this._config.context.querystring.get(key);
	            const value = defaultTo(current, utm[key]);
	            this._gam.setTargeting({ key, value });
	            if (value) {
	                utm[key] = value;
	            }
	        });
	        setSessionValue('utm', utm);
	    }
	};
	UTMComponent = __decorate([
	    log('UTMComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], UTMComponent);

	var CollapseUtils_1;
	let CollapseUtils = CollapseUtils_1 = class CollapseUtils {
	    static changeState(collapseCollection, event) {
	        const { mediaStarted, playerContainer, playerElement, playerInstance, playerState } = collapseCollection;
	        logger.info(`CollapseUtils`, `changeState`, `Current player state: ${playerState} ... Player event: ${event}`);
	        if (event === 7 ) {
	            this.uncollapse(collapseCollection);
	            playerInstance.pause(true);
	            return 7 ;
	        }
	        switch (playerState) {
	            case 0 :
	                if (event === 4 ) {
	                    if (!collapseCollection.collapseTimer.firstInView) {
	                        collapseCollection.collapseTimer.firstInView = new Date();
	                    }
	                    CollapseUtils_1.startEvent.emit().catch(() => { });
	                    if (this._shouldCollapse(playerContainer, mediaStarted)) {
	                        this.collapse(collapseCollection);
	                        playerInstance.getViewable() && playerInstance.play(true);
	                        return playerInstance._nonLinearAd ? 8  : 2 ;
	                    }
	                    else {
	                        return playerInstance._nonLinearAd ? 8  : 1 ;
	                    }
	                }
	                break;
	            case 1 :
	                if (event === 4 ) {
	                    if (this._shouldCollapse(playerContainer, mediaStarted)) {
	                        this.collapse(collapseCollection);
	                        playerInstance.play(true);
	                        return 2 ;
	                    }
	                    else {
	                        playerInstance.play(true);
	                    }
	                }
	                else if (event === 3 ) {
	                    playerInstance.pause(true);
	                    return 5 ;
	                }
	                else if (event === 1 ) {
	                    return 3 ;
	                }
	                break;
	            case 2 :
	                if (event === 4 ) {
	                    if (!this._shouldCollapse(playerContainer, mediaStarted)) {
	                        this.uncollapse(collapseCollection);
	                        playerInstance.play(true);
	                        return 1 ;
	                    }
	                    else {
	                        playerInstance.play(true);
	                    }
	                }
	                else if (event === 1 ) {
	                    return 4 ;
	                }
	                else if (event === 6 ) {
	                    collapseCollection.lastCollapsedClasses = playerElement.className;
	                    this.uncollapse(collapseCollection);
	                    playerInstance.pause(true);
	                    return 6 ;
	                }
	                else if (event === 5 ) {
	                    this.uncollapse(collapseCollection);
	                    playerInstance.pause(true);
	                    return 7 ;
	                }
	                break;
	            case 8 :
	                if (event === 4 ) {
	                    if (this._shouldCollapse(playerContainer, mediaStarted)) {
	                        this.collapse(collapseCollection);
	                    }
	                }
	                else if (event === 3 ) {
	                    playerInstance.pauseAd(true);
	                    return 9 ;
	                }
	                else if (event === 6 ) {
	                    this.uncollapse(collapseCollection);
	                    playerInstance.pauseAd(true);
	                    return 10 ;
	                }
	                break;
	            case 4 :
	                if (event === 4  && !this._shouldCollapse(playerContainer, mediaStarted)) {
	                    this.uncollapse(collapseCollection);
	                    return 3 ;
	                }
	                else if (event === 1 ) {
	                    return 2 ;
	                }
	                else if (event === 5 ) {
	                    this.uncollapse(collapseCollection);
	                    playerInstance.pause(true);
	                    return 7 ;
	                }
	                break;
	            case 3 :
	                if (event === 4  && this._shouldCollapse(playerContainer, mediaStarted)) {
	                    this.collapse(collapseCollection);
	                    return 4 ;
	                }
	                else if (event === 1 ) {
	                    return 1 ;
	                }
	                break;
	            case 5 :
	                if (event === 4 ) {
	                    playerInstance.play(true);
	                    return 1 ;
	                }
	            case 9 :
	                if (event === 4 ) {
	                    playerInstance.pauseAd(false);
	                    return 8 ;
	                }
	                else if (this.playerWouldOverlapFooter(collapseCollection)) {
	                    return 10 ;
	                }
	                break;
	            case 6 :
	                if (this._shouldCollapse(playerElement, mediaStarted) && !this.playerWouldOverlapFooter(collapseCollection)) {
	                    this.collapse(collapseCollection);
	                    playerInstance.play(true);
	                    return 2 ;
	                }
	                else {
	                    return 6 ;
	                }
	            case 10 :
	                if (this._shouldCollapse(playerElement, mediaStarted) && !this.playerWouldOverlapFooter(collapseCollection)) {
	                    this.collapse(collapseCollection);
	                    playerInstance.pauseAd(false);
	                    return 8 ;
	                }
	                else {
	                    playerInstance.pauseAd(true);
	                    return 10 ;
	                }
	            default:
	                return playerState;
	        }
	        return playerState;
	    }
	    static handleResize(collapseCollection) {
	        if (!this._isCollapsed(collapseCollection.playerState)) {
	            this.resizeContainer(collapseCollection);
	        }
	        else {
	            if (!collapseCollection.forceMobile && collapseCollection.collapseType === "adthrive-collapse-sticky" ) {
	                this._stickToSidebar(collapseCollection);
	            }
	        }
	    }
	    static handleScroll(collapseCollection) {
	        if (!VideoUtils.playerInView(collapseCollection.playerElement)) {
	            collapseCollection.playerState = this.changeState(collapseCollection, 3 );
	        }
	        else {
	            if (this.playerWouldOverlapFooter(collapseCollection)) {
	                collapseCollection.playerState = this.changeState(collapseCollection, 6 );
	            }
	            else {
	                collapseCollection.playerState = this.changeState(collapseCollection, 4 );
	            }
	        }
	        if (collapseCollection.playerState === 2  || collapseCollection.playerState === 4 ) {
	            CollapseUtils_1.startCollapseTimer(collapseCollection);
	        }
	        else {
	            CollapseUtils_1.stopCollapseTimer(collapseCollection);
	        }
	    }
	    static handleOtherVideoPlaying(collapseCollection) {
	        collapseCollection.playerState = this.changeState(collapseCollection, 7 );
	    }
	    static handlePageVisibilityChange(hidden, collapseCollection) {
	        if (collapseCollection.playerState !== 7  &&
	            collapseCollection.playerState !== 0  &&
	            collapseCollection.playerState !== 3  &&
	            collapseCollection.playerState !== 4  &&
	            collapseCollection.playerState !== 5  &&
	            collapseCollection.playerState !== 6 ) {
	            if (hidden) {
	                logger.info('CollapsePlayer', 'handlePageVisibilityChange', 'Video > Pausing player due to page not being visible');
	                collapseCollection.playerInstance.pause(true);
	            }
	            else {
	                logger.info('CollapsePlayer', 'handlePageVisibilityChange', 'Video > Playing player due to page being visible');
	                collapseCollection.playerInstance.play(true);
	            }
	        }
	    }
	    static handleWidthBreak(event, collapseCollection) {
	        if (collapseCollection.playerState === 7  || collapseCollection.playerState === 0 ) {
	            return;
	        }
	        if (event.matches) {
	            logger.info('CollapsePlayer', 'handleWidthBreak', `Video > JW Collapse forcing mobile`);
	            if (this._isCollapsed(collapseCollection.playerState)) {
	                this.toggleCollapsedPlayerClasses(false, collapseCollection);
	                if (collapseCollection.collapseType === "adthrive-collapse-sticky" ) {
	                    this._unstickFromSidebar(collapseCollection.playerElement);
	                }
	                collapseCollection.forceMobile = true;
	                this.toggleCollapsedPlayerClasses(true, collapseCollection);
	            }
	            collapseCollection.forceMobile = true;
	        }
	        else {
	            logger.info('CollapsePlayer', 'handleWidthBreak', `Video > JW Collapse not mobile`);
	            this.toggleCollapsedPlayerClasses(false, collapseCollection);
	            collapseCollection.forceMobile = false;
	            if (this._isCollapsed(collapseCollection.playerState)) {
	                this.toggleCollapsedPlayerClasses(true, collapseCollection);
	                if (collapseCollection.collapseType === "adthrive-collapse-sticky" ) {
	                    this._stickToSidebar(collapseCollection);
	                }
	            }
	        }
	    }
	    static handleClose(collapseCollection) {
	        CollapseUtils_1.closeEvent.emit().catch(() => { });
	        collapseCollection.playerState = this.changeState(collapseCollection, 5 );
	        CollapseUtils_1.stopCollapseTimer(collapseCollection);
	        logger.event('jw-player', 'handleClose', {
	            timeElapsed: collapseCollection.collapseTimer.timeCollapsed,
	            device: isDesktop() ? 'desktop' : 'mobile',
	            playerType: collapseCollection.playerType,
	        });
	    }
	    static handleUserClick(collapseCollection) {
	        collapseCollection.playerState = this.changeState(collapseCollection, 1 );
	    }
	    static collapse(collapseCollection) {
	        // if (this.disableCollapse) {
	        //     logger.info('CollapseUtils', 'Trying to collapse a player, but collapse disabled.');
	        //     return;
	        // }
	        // this.collapseEvent.emit().catch(() => { });
	        // //this.toggleCollapsedPlayerClasses(true, collapseCollection);
	        // if (!collapseCollection.forceMobile && collapseCollection.collapseType === "adthrive-collapse-sticky" ) {
	        //     this._stickToSidebar(collapseCollection);
	        // }
	        // collapseCollection.playerInstance.resize();
	        // setTimeout((collapseColl) => {
	        //     this.displayCloseButton(collapseColl);
	        // }, collapseCollection.closeButtonTimeout, collapseCollection);
            console.warn('collapse it no toggle at all');
	    }
	    static displayCloseButton(collapseCollection) {
	        if (this._isCollapsed(collapseCollection.playerState)) {
	            collapseCollection.closeButton.style.display = 'inline-flex';
	        }
	    }
	    static uncollapse(collapseCollection) {
	        CollapseUtils_1.uncollapseEvent.emit().catch(() => { });
	        this.toggleCollapsedPlayerClasses(false, collapseCollection);
	        this._unstickFromSidebar(collapseCollection.playerElement);
	        collapseCollection.closeButton.style.display = 'none';
	        this.resizeContainer(collapseCollection);
	    }
	    static _shouldCollapse(el, mediaStarted) {
	        return mediaStarted && VideoUtils.getScrollTop() >= elementOffset(el).top + el.offsetHeight / 2;
	    }
	    static _isCollapsed(playerState) {
	        return playerState === 2  || playerState === 4 ;
	    }
	    static _stickToSidebar(collapseCollection) {
	        if (collapseCollection.stickyElement) {
	            collapseCollection.playerElement.style.left = `${collapseCollection.stickyElement.getBoundingClientRect().left}px`;
	            collapseCollection.playerElement.style.width = `${collapseCollection.stickyElement.clientWidth}px`;
	        }
	        collapseCollection.playerElement.style.top = `${collapseCollection.topMargin}px`;
	    }
	    static _unstickFromSidebar(playerElement) {
	        playerElement.style.cssText = '';
	    }
	    static playerWouldOverlapFooter(collapseCollection) {
	        if (!collapseCollection.footerElement) {
	            return false;
	        }
	        if (collapseCollection.playerElement.className.indexOf('adthrive-collapse-bottom') >= 0 ||
	            (collapseCollection.lastCollapsedClasses && collapseCollection.lastCollapsedClasses.indexOf('adthrive-collapse-bottom') >= 0)) {
	            const footerBottom = calculateFooterBottom();
	            return !(window.innerHeight - footerBottom < collapseCollection.footerElement.getBoundingClientRect().top);
	        }
	        return !((collapseCollection.topMargin || 0) + collapseCollection.playerElement.getBoundingClientRect().height <
	            collapseCollection.footerElement.getBoundingClientRect().top);
	    }
	    static toggleCollapsedPlayerClasses(toggleOn, collapseCollection) {
	        const utils = collapseCollection.playerInstance.utils;
	        const toggleClass = hasProperty(utils, 'toggleClass') && typeof utils.toggleClass === 'function' ? utils.toggleClass : () => { };
	        if (collapseCollection.forceMobile) {
	            toggleClass(collapseCollection.playerElement, "adthrive-collapse-mobile" , toggleOn);
	            toggleClass(collapseCollection.playerElement, collapseCollection.collapseMobileSizeType, toggleOn);
	            toggleClass(collapseCollection.playerElement, collapseCollection.collapseMobileSubType, toggleOn);
	            if (collapseCollection.collapseMobileSubType === "adthrive-collapse-bottom-left"  ||
	                collapseCollection.collapseMobileSubType === "adthrive-collapse-bottom-right" ) {
	                this.repositionCollapseMobileBottom(collapseCollection);
	            }
	        }
	        else {
	            toggleClass(collapseCollection.playerElement, collapseCollection.collapseType, toggleOn);
	            if (collapseCollection.collapseSubType) {
	                toggleClass(collapseCollection.playerElement, collapseCollection.collapseSubType, toggleOn);
	            }
	            if (collapseCollection.collapseMobileSizeType) {
	                toggleClass(collapseCollection.playerElement, collapseCollection.collapseMobileSizeType, toggleOn);
	            }
	            if (collapseCollection.collapseType === "adthrive-collapse-mobile" ) {
	                toggleClass(collapseCollection.playerElement, collapseCollection.collapseMobileSubType, toggleOn);
	                if (collapseCollection.collapseMobileSubType === "adthrive-collapse-bottom-left"  ||
	                    collapseCollection.collapseMobileSubType === "adthrive-collapse-bottom-right" ) {
	                    this.repositionCollapseMobileBottom(collapseCollection);
	                }
	            }
	        }
	    }
	    static repositionCollapseMobileBottom(collapseCollection) {
	        if (collapseCollection.playerElement.className.indexOf('adthrive-collapse-bottom') >= 0) {
	            const footerBottom = calculateFooterBottom();
	            collapseCollection.playerElement.style.setProperty('top', 'auto', 'important');
	            collapseCollection.playerElement.style.setProperty('bottom', `${footerBottom}px`, 'important');
	        }
	    }
	    static resizeContainer(collapseCollection) {
	        collapseCollection.playerContainer.style.height = `${collapseCollection.playerElement.offsetHeight + 30}px`;
	    }
	    static startCollapseTimer(collapseCollection) {
	        if (collapseCollection.collapseTimer.isRunning) {
	            return;
	        }
	        if (!collapseCollection.collapseTimer.startTime) {
	            collapseCollection.collapseTimer.startTime = new Date();
	            collapseCollection.collapseTimer.lastCollapsedTime = collapseCollection.collapseTimer.startTime;
	        }
	        else {
	            collapseCollection.collapseTimer.lastCollapsedTime = new Date();
	        }
	        collapseCollection.collapseTimer.isRunning = true;
	    }
	    static stopCollapseTimer(collapseCollection) {
	        if (!collapseCollection.collapseTimer.isRunning) {
	            return;
	        }
	        if (collapseCollection.collapseTimer.lastCollapsedTime) {
	            collapseCollection.collapseTimer.timeCollapsed += new Date().getTime() - collapseCollection.collapseTimer.lastCollapsedTime.getTime();
	        }
	        collapseCollection.collapseTimer.isRunning = false;
	    }
	};
	CollapseUtils.collapseEvent = new Emitter();
	CollapseUtils.uncollapseEvent = new Emitter();
	CollapseUtils.closeEvent = new Emitter();
	CollapseUtils.startEvent = new Emitter();
	CollapseUtils.disableCollapse = false;
	CollapseUtils = CollapseUtils_1 = __decorate([
	    log('CollapseUtils')
	], CollapseUtils);

	class VideoPlayer {
	    constructor() { }
	    init(prerollAdUrl) {
	        this.setup(prerollAdUrl);
	    }
	}

	let StickyInstreamCloseButtonExperiment = class StickyInstreamCloseButtonExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this.key = 'sicb';
	        this._choices = [
	            { choice: 'off', weight: 80 },
	            { choice: 'tlo', weight: 10 },
	            { choice: 'tlw', weight: 10 },
	        ];
	        this._result = this.run();
	        abgroup.set(this.key, this._result);
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", void 0)
	], StickyInstreamCloseButtonExperiment.prototype, "run", null);
	StickyInstreamCloseButtonExperiment = __decorate([
	    log('StickyInstreamCloseButtonExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], StickyInstreamCloseButtonExperiment);

	let TearDownPlayerExperiment = class TearDownPlayerExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.tearDownOnCrash = 'tdoc';
	        this._choices = [
	            { choice: 900000, weight: 5 },
	            { choice: 600000, weight: 5 },
	            { choice: 300000, weight: 5 },
	            { choice: -1, weight: 5 },
	            { choice: 0, weight: 80 },
	        ];
	        this.key = 'mgtdtw';
	        this._result = this.run();
	        abgroup.set(this.key, this._result === -1 ? this.tearDownOnCrash : (this._result / 1000).toString());
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new WeightedChoice(this._choices).get();
	    }
	};
	TearDownPlayerExperiment = __decorate([
	    log('TearDownPlayerExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], TearDownPlayerExperiment);

	class JwPlayer extends VideoPlayer {
	    constructor(_playerId, _playlistId, _name, _size, _pageElement, _eventProxy, _vastLoadTimeout, _config, _collapseType = "adthrive-collapse-float" , _collapseMobileSizeType, _prebidMethods, _playerType, _isCollapsible, _saveVideoCloseState) {
	        super();
	        this._playerId = _playerId;
	        this._playlistId = _playlistId;
	        this._name = _name;
	        this._size = _size;
	        this._pageElement = _pageElement;
	        this._eventProxy = _eventProxy;
	        this._vastLoadTimeout = _vastLoadTimeout;
	        this._config = _config;
	        this._collapseType = _collapseType;
	        this._collapseMobileSizeType = _collapseMobileSizeType;
	        this._prebidMethods = _prebidMethods;
	        this._playerType = _playerType;
	        this._isCollapsible = _isCollapsible;
	        this._saveVideoCloseState = _saveVideoCloseState;
	        this.initialAuctionPlayer = false;
	        this._prerollAdUrl = '';
	        this._prerollNum = 0;
	        this.requestVideoBids = () => {
	            throw new Error('Request video bids not set');
	        };
	        this.buildVideoUrl = () => {
	            throw new Error('Build video url not set');
	        };
	        this.setPlayerInstance = () => {
	            throw new Error('Reset player not set');
	        };
	        this._defaults = {};
	        this._state = 0 ;
	        this._collapseCollection = null;
	        this._videoAdUnit = null;
	        this._adPlayed = false;
	        this._nextAdFetched = false;
	        this._adDurationLogged = false;
	        this._isFirstPlay = true;
	        this._createdSkipContainer = false;
	        this._calledNextVideo = false;
	        this._wasClicked = false;
	        this._canSkip = true;
	        this._isAdvancePlaylist = false;
	        this._adDetails = null;
	        this._canTearDown = false;
	        this._tearDownAfterNextAd = false;
	        this._tearDownTimer = null;
	        this._tearDownPlayerTimeout = 0;
	        this._stalePlayerTimer = null;
	        this._currentAdTime = 0;
	        this._currentAdDurationWithBuffer = 0;
	        this._adTimingBuffer = 10;
	        this._defaultAdDuration = 30;
	        this._autoplayBehaviorConfig = {
	            autostart: 'viewable',
	            mute: true,
	        };
	        this._baseConfig = {
	            advertising: {
	                adscheduleid: 'DmULPHgQ',
	                client: 'googima',
	                maxRedirects: this._config.video.maxRedirect,
	                requestTimeout: this._config.video.jwRequestTimeout,
	                vastLoadTimeout: this._vastLoadTimeout,
	                vpaidmode: 'insecure',
	            },
	        };
	        this._stickyInstreamCloseButtonExperiment = instance.resolve(StickyInstreamCloseButtonExperiment);
	        this._videoCloseButtonComponent = instance.resolve(VideoCloseButtonComponent);
	        if (window.matchMedia) {
	            const mediaQuery = window.matchMedia(`only screen and (max-width: ${this._config.site.breakpoints.desktop - 1}px)`);
	            mediaQuery.addListener(this.handleWidthBreak.bind(this));
	            this.handleWidthBreak(mediaQuery);
	        }
	        const advancePlayListSettings = this._config.video.advancePlaylist;
	        this._isAdvancePlaylist =
	            this._playerType === 'playlist' ? advancePlayListSettings.playlistPlayer.enabled : advancePlayListSettings.relatedPlayer.enabled;
	        if (this._playerType !== 'contextual' || (this._isCollapsible && advancePlayListSettings)) {
	            this._tearDownPlayerTimeout = instance.resolve(TearDownPlayerExperiment).result;
	            this._canTearDown = this._tearDownPlayerTimeout !== 0 && this._tearDownPlayerTimeout !== -1;
	        }
	    }
	    get name() {
	        return `${this._name}`;
	    }
	    get collapsible() {
	        return this._isCollapsible;
	    }
	    get size() {
	        return this._size;
	    }
	    get vp() {
	        if (this._prerollNum <= 1) {
	            return this._prerollNum;
	        }
	        else if (this._prerollNum <= 9) {
	            return 2;
	        }
	        return 3;
	    }
	    get isPlayerType() {
	        return this._playerType;
	    }
	    init() {
	        this.setup();
	    }
	    getDefaults() {
	        return this._defaults;
	    }
	    setDefaults(defaults) {
	        this._defaults = defaults;
	    }
	    resetAdVars() {
	        this._adPlayed = false;
	        this._nextAdFetched = false;
	        this._adDurationLogged = false;
	        this._currentAdTime = 0;
	        this._currentAdDurationWithBuffer = 0;
	        this._clearStaleTimers();
	    }
	    handleNextAdFetch() {
	        var _a;
	        if (!this._nextAdFetched) {
	            this._nextAdFetched = true;
	            this._prerollNum++;
	            (_a = this.requestVideoBids([this])) === null || _a === void 0 ? void 0 : _a.then(() => (this._prerollAdUrl = this.buildVideoUrl(this)));
	        }
	    }
	    preventCollapse() {
	        CollapseUtils.disableCollapse = true;
	        logger.info('JwPlayer', 'preventCollapse', 'Setting disableCollapse to true');
	        if (this._collapseCollection) {
	            logger.info('JwPlayer', 'preventCollapse', 'Uncollapsing player');
	            CollapseUtils.uncollapse(this._collapseCollection);
	        }
	    }
	    playLinearAd() {
	        this._playerInstance._nonLinearAd = false;
	        this._playerInstance.playAd(this._prerollAdUrl);
	        this._prebidMethods.markWinningBidAsUsed({ adUnitCode: this.name });
	        this._adPlayed = true;
	    }
	    _setPlayerVersions() {
	        const regex = new RegExp('^[0-9]+.[0-9]+.[0-9]+', 'i');
	        const player = this._playerInstance;
	        const version = regex.exec(player.version);
	        this.jwVersion = version && version[0];
	        this.imaVersion = player.plugins && player.plugins.googima && player.plugins.googima.version;
	    }
	    _getPlayerVersions() {
	        return {
	            imaSDKVersion: this.imaVersion,
	            jwVersion: this.jwVersion,
	        };
	    }
	    _tearDownPlayer() {
	        if (this._tearDownAfterNextAd) {
	            logger.info('JwPlayer', 'tearDownPlayer', 'Tear down initiated');
	            this._tearDownAfterNextAd = false;
	            if (this._tearDownTimer) {
	                clearTimeout(this._tearDownTimer);
	            }
	            this._playerInstance.remove();
	            this.addToPage();
	            this.setPlayerInstance(this);
	            this.handleScroll();
	        }
	    }
	    _enableTearDown() {
	        this._tearDownAfterNextAd = true;
	        logger.info('JwPlayer', 'enableTearDown', 'Tear down player after next ad');
	    }
	    _startTearDownTimer() {
	        const tearDownPlayerTimeout = this._tearDownPlayerTimeout;
	        const canTearDown = this._canTearDown;
	        const message = canTearDown ? `Tear down player after ${tearDownPlayerTimeout / 1000} seconds` : 'Tear down player disabled';
	        logger.info('JwPlayer', 'startTearDownTimer', message);
	        if (canTearDown) {
	            this._tearDownTimer = setTimeout(this._enableTearDown.bind(this), tearDownPlayerTimeout);
	        }
	    }
	    _handleErrors() {
	        ['adError', 'setupError', 'error'].forEach(eventType => {
	            const isAdError = eventType === 'adError';
	            this._playerInstance.on(eventType, error => {
	                this._clearStaleTimers();
	                if (eventType === 'setupError') {
	                    this.preventCollapse();
	                }
	                logger.error('JwPlayer', eventType, {
	                    code: error.code,
	                    ...(isAdError && { message: error.message }),
	                    ...this.getJwEventLog(error),
	                });
	                if (eventType === 'adError') {
	                    const vastErrorDetails = {
	                        imaSDKVersion: this._playerInstance.plugins.googima.version,
	                        message: error.message,
	                        jwVersion: this._playerInstance.version,
	                        code: error.code,
	                        ...this._adDetails,
	                    };
	                    logger.error('JwPlayer', 'vastError', vastErrorDetails);
	                    this._tearDownPlayer();
	                }
	            });
	        });
	    }
	    _handleTimeEvents() {
	        this._playerInstance.on('beforeComplete', () => {
	            this.resetAdVars();
	            this._playerInstance._nonLinearAd = false;
	        });
	        this._playerInstance.on('time', ({ position, duration }) => {
	            if (!this._nextAdFetched && duration - position < 5) {
	                this.handleNextAdFetch();
	            }
	        });
	        this._playerInstance.on('adTime', jwEvent => {
	            this._currentAdTime = jwEvent.position;
	            if (this._config.video.logAdDuration && !this._adDurationLogged) {
	                const adDurationObject = { adDuration: jwEvent.duration, roundedAdDuration: Math.round(jwEvent.duration) };
	                logger.event('VideoManager', 'VideoAdDuration', adDurationObject);
	                this._adDurationLogged = true;
	            }
	        });
	        this._playerInstance.on('adComplete', () => {
	            this._tearDownPlayer();
	        });
	    }
	    _handlePlayingEvents() {
	        ['play', 'firstFrame'].forEach(eventType => {
	            this._playerInstance.on(eventType, () => {
	                this._clearStaleTimers();
	                if (eventType === 'firstFrame' && this._isAdvancePlaylist) {
	                    !this._adPlayed && this.playLinearAd();
	                }
	            });
	        });
	        this._playerInstance.on('beforePlay', async () => {
	            if (!this._adPlayed) {
	                if (!this._collapseCollection && this._isFirstPlay) {
	                    await this.requestVideoBids([this]);
	                    this._prerollAdUrl = this.buildVideoUrl(this);
	                }
	                this.playLinearAd();
	                this._isFirstPlay = false;
	            }
	        });
	        ['adSkipped', 'adPause'].forEach(eventType => {
	            this._playerInstance.on(eventType, () => {
	                this._clearStaleTimers();
	                if (eventType === 'adPause') {
	                    this._playerInstance.once('adPlay', () => {
	                        if (this._currentAdTime !== 0) {
	                            this._setStaleAdDetection();
	                        }
	                    });
	                }
	            });
	        });
	        if (this._collapseCollection) {
	            ['play', 'adPlay'].forEach(eventType => {
	                this._playerInstance.once(eventType, () => {
	                    this._collapseCollection.mediaStarted = true;
	                    CollapseUtils.handleScroll(this._collapseCollection);
	                });
	            });
	        }
	    }
	    _handleAdTrackingEvents() {
	        this._playerInstance.on('adLoaded', data => {
	            const adDetails = data.ima && data.ima.ad && data.ima.ad.h;
	            const currentAdDuration = (adDetails && adDetails.duration) || data.duration || this._defaultAdDuration;
	            this._currentAdDurationWithBuffer = currentAdDuration + this._adTimingBuffer;
	            if (adDetails) {
	                this._adDetails = {
	                    gamLineItem: adDetails.adWrapperIds,
	                    gamCreativeId: adDetails.adWrapperCreativeIds,
	                    vastCreativeId: adDetails.creativeId,
	                    mediaFileURL: adDetails.mediaUrl,
	                };
	            }
	            this._setStaleAdDetection();
	        });
	        if (this._config.video.logAdLifeCycle) {
	            ['adRequest', 'adImpression', 'adStarted', 'adViewableImpression'].forEach(eventType => {
	                this._playerInstance.on(eventType, event => {
	                    logger.event('JwPlayer', eventType, this.getJwEventLog(event));
	                });
	            });
	        }
	    }
	    _setupEventListeners() {
	        this._handleErrors();
	        this._handleTimeEvents();
	        this._handlePlayingEvents();
	        this._handleAdTrackingEvents();
	        this._playerInstance.on('ready', () => {
	            this._startTearDownTimer();
	        });
	    }
	    jwSetup(playerConfig) {
	        const config = { ...this._defaults, ...this._baseConfig, ...playerConfig };
	        this._playerInstance.setup(config);
	        this.handleNonLinearAd();
	        this._setupEventListeners();
	        this._playerInstance.on('adLoaded', data => {
	            const adDetails = data.ima && data.ima.ad && data.ima.ad.h;
	            const currentAdDuration = (adDetails && adDetails.duration) || data.duration || this._defaultAdDuration;
	            this._currentAdDurationWithBuffer = currentAdDuration + this._adTimingBuffer;
	            if (adDetails) {
	                this._adDetails = {
	                    gamLineItem: adDetails.adWrapperIds,
	                    gamCreativeId: adDetails.adWrapperCreativeIds,
	                    vastCreativeId: adDetails.creativeId,
	                    mediaFileURL: adDetails.mediaUrl,
	                };
	            }
	            this._setStaleAdDetection();
	        });
	    }
	    _clearStaleTimers() {
	        if (this._stalePlayerTimer) {
	            clearTimeout(this._stalePlayerTimer);
	            this._stalePlayerTimer = null;
	        }
	    }
	    _setStaleAdDetection() {
	        const currentAdDuration = this._currentAdDurationWithBuffer - this._currentAdTime;
	        if (!this._stalePlayerTimer) {
	            this._stalePlayerTimer = setTimeout(() => {
	                logger.error('JwPlayer', 'stalePlayer', {
	                    message: 'JwPlayer encountered an unknown error during ad play',
	                    ...this._getPlayerVersions(),
	                    ...this._adDetails,
	                });
	                if (this._tearDownPlayerTimeout === -1) {
	                    this._enableTearDown();
	                    this._tearDownPlayer();
	                }
	                else {
	                    this._playerInstance.playlistItem(this._playerInstance.getPlaylistIndex());
	                }
	            }, currentAdDuration * 1000);
	        }
	    }
	    getJwEventLog(event) {
	        return {
	            playerName: this._name,
	            rawData: this.trimEventData(event),
	        };
	    }
	    set videoAdUnit(videoAdUnit) {
	        this._videoAdUnit = videoAdUnit;
	    }
	    get videoAdUnit() {
	        return this._videoAdUnit;
	    }
	    handleNonLinearAd() {
	        this._playerInstance.on('adImpression', event => {
	            const maybeAd = hasProperty(event.ima, 'ad') ? event.ima.ad : null;
	            const imaAd = tryToAccessProperty(maybeAd, 'g') || hasProperty(maybeAd, 'h');
	            if ((imaAd && hasProperty(imaAd, 'linear') && imaAd.linear === false) || event.linear === 'nonlinear') {
	                this._playerInstance._nonLinearAd = true;
	                this._playerInstance.pause();
	                const containerElement = document.getElementById(`${this._playlistId}`);
	                const playerElement = containerElement.querySelector('div > div.jw-overlays.jw-reset');
	                playerElement.style.backgroundColor = 'black';
	                const playerControls = containerElement.querySelector('div.jw-wrapper.jw-reset > div.jw-controls.jw-reset');
	                playerControls.style.zIndex = '-1';
	                this._playerInstance.once('adComplete', () => {
	                    this._playerInstance._nonLinearAd = false;
	                    playerElement.style.backgroundColor = 'transparent';
	                    playerControls.style.zIndex = '';
	                    this._playerInstance.play();
	                });
	            }
	        });
	    }
	    getJwBoostTargeting() {
	        return {
	            playerID: this._playlistId,
	            ...((this.name === VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn || this.name === VideoAdUnit.Video_Individual_Autoplay_SOff) && {
	                mediaID: this._playlistId,
	            }),
	        };
	    }
	    handleScroll() {
	        if (this._collapseCollection) {
	            CollapseUtils.handleScroll(this._collapseCollection);
	        }
	    }
	    handleResize() {
	        if (this._collapseCollection) {
	            CollapseUtils.handleResize(this._collapseCollection);
	        }
	    }
	    handlePageVisibilityChange(hidden) {
	        if (this._collapseCollection) {
	            CollapseUtils.handlePageVisibilityChange(hidden, this._collapseCollection);
	        }
	    }
	    displayCloseButton() {
	        if (this._collapseCollection) {
	            CollapseUtils.displayCloseButton(this._collapseCollection);
	        }
	    }
	    handleClose() {
	        if (this._collapseCollection) {
	            if (this._saveVideoCloseState) {
	                setSessionValue('video_closed', true);
	            }
	            CollapseUtils.handleClose(this._collapseCollection);
	        }
	    }
	    handleUserClick() {
	        if (this._collapseCollection) {
	            CollapseUtils.handleUserClick(this._collapseCollection);
	        }
	    }
	    handleWidthBreak(event) {
	        if (this._collapseCollection) {
	            CollapseUtils.handleWidthBreak(event, this._collapseCollection);
	        }
	    }
	    handleVideoPlayingEvent(playlistId) {
	        if (this._collapseCollection) {
	            if (playlistId === this._playlistId) {
	                return;
	            }
	            else {
	                CollapseUtils.handleOtherVideoPlaying(this._collapseCollection);
	            }
	        }
	    }
	    handleTitleClick(event) {
	        if (this._collapseCollection.collapseTimer.firstInView) {
	            logger.event('jw-player', 'handleTitleClick', {
	                timeElapsed: Date.now() - this._collapseCollection.collapseTimer.firstInView.valueOf(),
	                link: event.currentTarget.getAttribute('href'),
	            });
	        }
	    }
	    handleFooterRefreshedEvent() {
	        if (this._collapseCollection) {
	            CollapseUtils.repositionCollapseMobileBottom(this._collapseCollection);
	        }
	    }
	    configureQuality() {
	        if (!isDesktop()) {
	            this._playerInstance.on('levels', levels => {
	                this._playerInstance.setCurrentQuality(levels.levels.length - 1);
	            });
	        }
	    }
	    getCollapseSubType(collapseType, stickyElement) {
	        return "adthrive-collapse-bottom-right" ;
	    }
	    createDefaultButton() {
	        return this._videoCloseButtonComponent.createDefaultButton(this.handleClose.bind(this));
	    }
	    createPlayerCloseButton() {
	        const hasTitleBar = this._wrapperTitleWrapperElement || this._videoTitleElement;
	        this._closeButton = this._videoCloseButtonComponent.createPlayerCloseButton(this.handleClose.bind(this), this._stickyInstreamCloseButtonExperiment.result, 'adthrive-collapse-close', !!hasTitleBar);
	        return this._closeButton;
	    }
	    createPlayerWrapper(isTitleLink) {
	        if (isTitleLink) {
	            this._wrapperTitleWrapperElement = document.createElement('a');
	            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
	            svg.setAttribute('width', '24');
	            svg.setAttribute('height', '24');
	            svg.setAttribute('style', 'vertical-align: top;');
	            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
	            path.setAttribute('d', 'M 16 1 H 23 V 8 Z M 19.5 12.5 V 23 H 1 V 4.5 H 12 l 1 1 H 2 V 22 H 18.5 V 11.5 l 1 1 v 1 M 19 4 L 11.5 11.5 l 1 1 L 20 5');
	            path.setAttribute('stroke', 'white');
	            path.setAttribute('stroke-width', '2');
	            path.setAttribute('stroke-linejoin', 'round');
	            svg.appendChild(path);
	            this._wrapperTitleWrapperElement.appendChild(svg);
	        }
	        else {
	            this._wrapperTitleWrapperElement = document.createElement('div');
	        }
	        this._videoTitleElement = document.createElement('span');
	        const playerHeaderBar = document.createElement('div');
	        const videoTitleWrapper = document.createElement('div');
	        videoTitleWrapper.className = 'adthrive-wrapper-title-wrapper';
	        this._videoTitleElement.classList.add('adthrive-video-text-cutoff');
	        this._videoTitleElement.classList.add('adthrive-video-title');
	        this._wrapperTitleWrapperElement.className = 'adthrive-video-text-cutoff';
	        this._wrapperTitleWrapperElement.appendChild(this._videoTitleElement);
	        this._wrapperTitleWrapperElement.target = '_blank';
	        this._wrapperTitleWrapperElement.onclick = this.handleTitleClick.bind(this);
	        this._closeButton = this._stickyInstreamCloseButtonExperiment.result !== 'off' ? this.createPlayerCloseButton() : this.createDefaultButton();
	        videoTitleWrapper.appendChild(this._wrapperTitleWrapperElement);
	        playerHeaderBar.className = 'adthrive-wrapper-bar';
	        playerHeaderBar.appendChild(videoTitleWrapper);
	        playerHeaderBar.appendChild(this._closeButton);
	        return playerHeaderBar;
	    }
	    trimEventData(event) {
	        var _a, _b, _c, _d, _e;
	        const cloned = { ...event };
	        if (cloned === null || cloned === void 0 ? void 0 : cloned.tag) {
	            delete cloned.tag;
	        }
	        if ((_c = (_b = (_a = cloned === null || cloned === void 0 ? void 0 : cloned.ima) === null || _a === void 0 ? void 0 : _a.ad) === null || _b === void 0 ? void 0 : _b.g) === null || _c === void 0 ? void 0 : _c.traffickingParameters) {
	            delete cloned.ima.ad.g.traffickingParameters;
	        }
	        if ((_e = (_d = cloned === null || cloned === void 0 ? void 0 : cloned.ima) === null || _d === void 0 ? void 0 : _d.userRequestContext) === null || _e === void 0 ? void 0 : _e.adTagUrl) {
	            delete cloned.ima.userRequestContext.adTagUrl;
	        }
	        if (cloned === null || cloned === void 0 ? void 0 : cloned.mediaFile) {
	            delete cloned.mediaFile;
	        }
	        return cloned;
	    }
	    handleNextButton() {
	        this._calledNextVideo = true;
	        this.removeSkipContainer();
	        this.resetAdVars();
	        if (this._isAdvancePlaylist && this._playerInstance.getPlaylist().length === 1) {
	            this._playerInstance.pause();
	            this._playerInstance.seek(0);
	            this._playerInstance.trigger('firstFrame', { loadTime: 0, viewable: 1 });
	        }
	        else {
	            this._playerInstance.next();
	        }
	    }
	    createSkipContainer() {
	        const container = document.createElement('div');
	        container.id = 'next-stay-container';
	        const nextButton = document.createElement('div');
	        nextButton.onclick = this.handleNextButton.bind(this);
	        nextButton.id = 'next-video';
	        nextButton.textContent = 'Next';
	        container.appendChild(nextButton);
	        const stayButton = document.createElement('div');
	        stayButton.id = 'stay-video';
	        stayButton.textContent = 'Stay';
	        container.appendChild(stayButton);
	        return container;
	    }
	    initSkipContainer() {
	        const startNextVideo = 5;
	        const showContainer = 25;
	        const jwPlayerNextPopup = 10;
	        const minVideoDuration = startNextVideo + showContainer + jwPlayerNextPopup;
	        this._playerInstance.on('time', ({ position, duration }) => {
	            if (!this._canSkip || this._playerInstance._nonLinearAd || this._wasClicked || duration < minVideoDuration) {
	                return;
	            }
	            if (!this._createdSkipContainer && position >= showContainer) {
	                this._createdSkipContainer = true;
	                this.handleNextAdFetch();
	                this._skipContainer = this.createSkipContainer();
	                this._playerInstance.getContainer().appendChild(this._skipContainer);
	                if (getComputedStyle(this._skipContainer).backgroundColor) {
	                    this._skipContainer.classList.add('loaded');
	                }
	            }
	            else if (this._createdSkipContainer && !this._calledNextVideo && position >= showContainer + startNextVideo) {
	                this.handleNextButton();
	            }
	        });
	    }
	    handleVideoPlayerClicked() {
	        this._wasClicked = true;
	        this.removeSkipContainer();
	    }
	    removeSkipContainer() {
	        var _a, _b;
	        (_b = (_a = this._skipContainer) === null || _a === void 0 ? void 0 : _a.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(this._skipContainer);
	        this._skipContainer = undefined;
	    }
	    handleFirstFrame() {
	        this._calledNextVideo = false;
	        this._createdSkipContainer = false;
	        this._wasClicked = false;
	    }
	}

	let ContextualPlayer = class ContextualPlayer extends JwPlayer {
	    constructor(_playerId, _playlistId, _name, _size, _pageElement, _eventProxy, _config, _isCollapsible, _collapseType, _collapseMobileSizeType, _prebidMethods, _mobileLocation) {
	        super(_playerId, _playlistId, _name, _size, _pageElement, _eventProxy, 10000, _config, _collapseType, _collapseMobileSizeType, _prebidMethods, 'contextual', _isCollapsible);
	        this._mobileLocation = _mobileLocation;
	        this._playerConfig = {
	            repeat: true,
	            nextupoffset: -0.01,
	            playlist: `https://cdn.jwplayer.com/v2/media/${this._playlistId}`,
	        };
	        this._wrapperBarRemoved = false;
	        this._playerElement = document.createElement('div');
	        this._canSkip = false;
	        this._autoplayStationaryPlayer = this._shouldStationaryAutoplay();
	        if (_isCollapsible || this._autoplayStationaryPlayer) {
	            this._playerConfig = { ...this._playerConfig, ...this._autoplayBehaviorConfig };
	            this.initialAuctionPlayer = true;
	            this._stickyElement = null;
	            if (this._collapseType === "adthrive-collapse-mobile" ) {
	                this._eventProxy.footerRefreshed.on(this.handleFooterRefreshedEvent.bind(this));
	            }
	            this._playerContainer = this._pageElement;
	            this._eventProxy.scroll.on(this.handleScroll.bind(this));
	            this._eventProxy.resize.on(this.handleResize.bind(this));
	            this._eventProxy.pageVisibility.on(this.handlePageVisibilityChange.bind(this));
	        }
	    }
	    addToPage() { }
	    _appendPlayer() {
	        const player = document.createElement('div');
	        player.id = this._playlistId;
	        player.className = 'adthrive-jw-static-player';
	        if (this._isCollapsible) {
	            this._pageElement.id = 'adthrive-contextual-container';
	            this._playerElement.className = 'adthrive-player-position';
	            this._playerElement.id = 'adthrive-contextual-position';
	            if (this._config.video.removeVideoTitleWrapper) {
	                this._playerElement.appendChild(this.createPlayerCloseButton());
	            }
	            else {
	                this._playerElement.appendChild(this.createPlayerWrapper(false));
	            }
	            this._playerElement.appendChild(player);
	            this._pageElement.appendChild(this._playerElement);
	        }
	        else {
	            this._pageElement.appendChild(player);
	        }
	    }
	    setup() {
	        if (this._isFirstPlay) {
	            this._appendPlayer();
	        }
	        this._playerInstance = window.jwplayer(this._playlistId);
	        if (this._isCollapsible) {
	            this._collapseCollection = {
	                playerInstance: this._playerInstance,
	                playerType: 'contextualCollapse',
	                playerState: this._state,
	                playerContainer: this._pageElement,
	                playerElement: this._playerElement,
	                footerElement: this._config.video.footerSelector ? document.querySelector(this._config.video.footerSelector) : null,
	                stickyElement: this._stickyElement,
	                closeButton: this._closeButton,
	                closeButtonTimeout: this._config.video.closeButtonTimeout,
	                forceMobile: this._config.context.device !== 'desktop',
	                collapseType: this._collapseType,
	                collapseMobileSizeType: this._collapseMobileSizeType,
	                collapseSubType: this.getCollapseSubType(this._collapseType, this._stickyElement),
	                collapseMobileSubType: this._getCollapseMobileSubType(),
	                collapseTimer: {
	                    timeCollapsed: 0,
	                    isRunning: false,
	                },
	                mediaStarted: false,
	            };
	        }
	        this.jwSetup(this._playerConfig);
	        this._playerInstance.on('play', () => {
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        this._playerInstance.on('adPlay', () => {
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        if (this._isCollapsible) {
	            this._eventProxy.videoPlaying.on(this.handleVideoPlayingEvent.bind(this));
	        }
	        else {
	            this._eventProxy.videoPlaying.on(this.contextualHandleVideoPlayingEvent.bind(this));
	        }
	        this._config.video.contextualPlayerAdded = true;
	        logger.info('StaticPlayer', 'jwPlayer', `Video > Embedded video ${this._playlistId}`);
	        this._playerInstance.on('ready', () => {
	            this.configureQuality();
	            this.initRelatedPlaylist();
	            this._setPlayerVersions();
	            this._prerollAdUrl = this.buildVideoUrl(this);
	            if (this._autoplayStationaryPlayer) {
	                if (VideoUtils.playerInView(this._pageElement)) {
	                    this._playerInstance.play(true);
	                }
	                this._logStationaryAutoplay();
	            }
	            if (this._isCollapsible) {
	                this.playerReady();
	            }
	        });
	    }
	    _logStationaryAutoplay() {
	        if (this._config.video.logAdLifeCycle) {
	            logger.event('JwPlayer', 'StaticPlayer', {
	                message: `Static Player set to autoplay for playlist id ${this._playlistId}`,
	                ...this._getPlayerVersions(),
	            });
	        }
	    }
	    loadPlaylistPlayerVideos() {
	        const jwPromise = this._config.video.jwPlaylist;
	        jwPromise
	            .then((result) => {
	            if (result.playlist && result.playlist.length) {
	                const newPlaylist = this._playerInstance.getPlaylist().concat(VideoUtils.shufflePlaylist(result.playlist));
	                this._playerInstance.once('userInactive', () => { var _a; return !((_a = this._collapseCollection) === null || _a === void 0 ? void 0 : _a.mediaStarted) && this.handleScroll(); });
	                this._playerInstance.load(newPlaylist);
	                this.handleScroll();
	            }
	        })
	            .catch(() => false);
	    }
	    setupAllowSkip() {
	        if (this._config.video.advancePlaylist.relatedPlayer.applyToFirst) {
	            this._canSkip = true;
	        }
	        this._playerInstance.once('complete', () => {
	            this.hideWrapperBar();
	            this._canSkip = true;
	        });
	    }
	    handleNextButton() {
	        this.hideWrapperBar();
	        super.handleNextButton();
	    }
	    _shouldStationaryAutoplay() {
	        return !this._config.video.playlistPlayerAdded && !!document.querySelector('body.adthrive-video-autoplay');
	    }
	    setWrapperBar() {
	        this._wrapperBar = this._playerElement.querySelector('.adthrive-wrapper-bar');
	    }
	    hideWrapperBar() {
	        const wrapperBar = this._wrapperBar;
	        const playerElement = this._playerElement;
	        if (this._wrapperBarRemoved || !wrapperBar) {
	            return;
	        }
	        this._wrapperBarRemoved = true;
	        wrapperBar.parentNode && wrapperBar.parentNode.removeChild(wrapperBar);
	        this._wrapperBar = null;
	        playerElement.insertBefore(this.createPlayerCloseButton(), playerElement.firstChild);
	        if (this._collapseCollection) {
	            this._collapseCollection.closeButton = this._closeButton;
	            this.displayCloseButton();
	        }
	    }
	    initRelatedPlaylist() {
	        const videoConfig = this._config.video;
	        const advancePlayConfig = videoConfig.advancePlaylist.relatedPlayer;
	        advancePlayConfig.shouldRun
	            .then(result => {
	            if (result) {
	                this.loadPlaylistPlayerVideos();
	                this.setupAllowSkip();
	                this._playerInstance.on('firstFrame', () => this.handleFirstFrame());
	                this._playerInstance.getContainer().addEventListener('click', () => this.handleVideoPlayerClicked());
	                this.initSkipContainer();
	            }
	        })
	            .catch(() => false);
	    }
	    playerReady() {
	        this.setWrapperBar();
	        if (this._wrapperBar) {
	            this._wrapperBar.style.setProperty('display', 'flex');
	        }
	        if (this._videoTitleElement) {
	            const maybePlaylistItem = this._playerInstance.getPlaylistItem(0);
	            const title = tryToAccessProperty(maybePlaylistItem, 'title');
	            this._videoTitleElement.innerText = typeof title === 'string' ? title : '';
	        }
	        this._playerInstance.on('pause', pauseEvent => {
	            if (pauseEvent.pauseReason === 'interaction') {
	                this.handleUserClick();
	            }
	        });
	        this._playerInstance.on('play', playEvent => {
	            if (playEvent.playReason === 'interaction') {
	                this.handleUserClick();
	            }
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        this._playerInstance.on('adPlay', () => {
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        this.handleResize();
	    }
	    contextualHandleVideoPlayingEvent(playlistId) {
	        if (playlistId === this._playlistId) {
	            return;
	        }
	        this._playerInstance.pause(true);
	    }
	    _getCollapseMobileSubType() {
	        return this._mobileLocation ? this._mobileLocation : undefined;
	    }
	};
	ContextualPlayer = __decorate([
	    log('ContextualPlayer'),
	    __metadata("design:paramtypes", [Object, String, String, Array, HTMLElement,
	        VideoEventProxy,
	        Config, Boolean, String, String, PrebidMethods, String])
	], ContextualPlayer);

	let PlaylistPlayer = class PlaylistPlayer extends JwPlayer {
	    constructor(_playerId, _playlistId, _name, _size, _sharedVideoSettings, _pageElement, _eventProxy, _config, _collapseType = "adthrive-collapse-float" , _collapseMobileSizeType, _prebidMethods, _mobileLocation, _saveVideoCloseState, _title, _shuffle) {
	        super(_playerId, _playlistId, _name, _size, _pageElement, _eventProxy, _config.video.vastTimeout, _config, _collapseType, _collapseMobileSizeType, _prebidMethods, 'playlist', true, _saveVideoCloseState);
	        this._sharedVideoSettings = _sharedVideoSettings;
	        this._mobileLocation = _mobileLocation;
	        this._title = _title;
	        this._shuffle = _shuffle;
	        this._isCollapsible = true;
	        this._playerConfig = {
	            playlist: `https://cdn.jwplayer.com/v2/playlists/${this._playlistId}`,
	            related: {
	                autoplaytimer: 0,
	            },
	        };
	        this._playerConfig = { ...this._playerConfig, ...this._autoplayBehaviorConfig };
	        this.initialAuctionPlayer = true;
	        this._stickyElement = null;
	        if (this._checkVideoClose()) {
	            this._state = 7 ;
	        }
	        if (this._config.video.footerSelector) {
	            this._footerElement = document.querySelector(this._config.video.footerSelector);
	        }
	        else {
	            this._footerElement = null;
	        }
	        if (this._collapseType === "adthrive-collapse-mobile" ) {
	            this._eventProxy.footerRefreshed.on(this.handleFooterRefreshedEvent.bind(this));
	        }
	        this.clsPlayerContainer = document.querySelector(`#cls-video-container-${this._playlistId} > div`);
	        this._playerContainer = this.clsPlayerContainer ? this.clsPlayerContainer : document.createElement('div');
	        this._playerElement = document.createElement('div');
	        this._collapseCollection = {
	            playerInstance: this._playerInstance,
	            playerType: 'playlist',
	            playerState: this._state,
	            playerContainer: this._playerContainer,
	            playerElement: this._playerElement,
	            stickyElement: this._stickyElement,
	            footerElement: this._footerElement,
	            closeButton: this._closeButton,
	            closeButtonTimeout: this._config.video.closeButtonTimeout,
	            forceMobile: this._config.context.device !== 'desktop',
	            collapseType: this._collapseType,
	            collapseSubType: this.getCollapseSubType(this._collapseType, this._stickyElement),
	            collapseMobileSizeType: this._collapseMobileSizeType,
	            collapseMobileSubType: this._getCollapseMobileSubType(),
	            collapseTimer: {
	                timeCollapsed: 0,
	                isRunning: false,
	            },
	            mediaStarted: false,
	        };
	    }
	    setup() {
	        this._eventProxy.scroll.on(this.handleScroll.bind(this));
	        this._eventProxy.resize.on(this.handleResize.bind(this));
	        this._eventProxy.pageVisibility.on(this.handlePageVisibilityChange.bind(this));
	        this._eventProxy.videoPlaying.on(this.handleVideoPlayingEvent.bind(this));
	    }
	    _appendPlayer() {
	        const player = document.createElement('div');
	        const title = document.createElement('h3');
	        this._playerContainer.classList.add('adthrive-player-container');
	        this._playerContainer.classList.add('adthrive-collapse-player');
	        this._playerContainer.id = 'adthrive-collapse-container';
	        this._playerElement.className = 'adthrive-player-position';
	        this._playerElement.id = 'adthrive-collapse-position';
	        player.id = this._playlistId;
	        title.innerText = this._getTitle();
	        title.className = 'adthrive-player-title';
	        title.id = 'adthrive-collapse-title';
	        this._playerElement.appendChild(title);
	        if (this._config.video.removeVideoTitleWrapper) {
	            this._playerElement.appendChild(this.createPlayerCloseButton());
	        }
	        else {
	            this._playerElement.appendChild(this.createPlayerWrapper(true));
	        }
	        this._collapseCollection.closeButton = this._closeButton;
	        this._playerElement.appendChild(player);
	        this._playerContainer.appendChild(this._playerElement);
	        if (!this.clsPlayerContainer) {
	            this._pageElement.insertAdjacentElement(this._sharedVideoSettings.position, this._playerContainer);
	        }
	    }
	    addToPage() {
	        if (this._isFirstPlay) {
	            this._appendPlayer();
	        }
	        this._playerInstance = window.jwplayer(this._playlistId);
	        if (this._collapseCollection) {
	            this._collapseCollection.playerInstance = this._playerInstance;
	            this._collapseCollection.playerContainer = this._playerContainer;
	            this._collapseCollection.playerElement = this._playerElement;
	        }
	        this.jwSetup(this._playerConfig);
	        this._playerInstance.on('ready', this.playerReady.bind(this));
	        this._config.video.playlistPlayerAdded = true;
	        logger.info('CollapsePlayer', 'addToPage', `Video > JW Collapse ${this._playerId} added`);
	    }
	    playerReady() {
	        var _a;
	        this._setPlayerVersions();
	        this._prerollAdUrl = this.buildVideoUrl(this);
	        (_a = this._playerElement.querySelector('.adthrive-wrapper-bar')) === null || _a === void 0 ? void 0 : _a.style.setProperty('display', 'flex');
	        const shuffle = this._getShuffle();
	        if (shuffle) {
	            const playlistObj = this._playerInstance.getPlaylist();
	            this._playerInstance.load(VideoUtils.shufflePlaylist(playlistObj));
	        }
	        if (this._config.video.advancePlaylist.playlistPlayer.enabled) {
	            this._playerInstance.on('firstFrame', () => this.handleFirstFrame());
	            this._playerInstance.getContainer().addEventListener('click', () => this.handleVideoPlayerClicked());
	            this.initSkipContainer();
	        }
	        this._playerInstance.on('pause', pauseEvent => {
	            if (pauseEvent.pauseReason === 'interaction') {
	                this.handleUserClick();
	            }
	        });
	        this._playerInstance.on('play', playEvent => {
	            if (playEvent.playReason === 'interaction' && !this._calledNextVideo) {
	                this.handleUserClick();
	            }
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        this._playerInstance.on('adPlay', () => {
	            this._eventProxy.emitVideoPlayingEvent(this._playlistId);
	        });
	        this._playerInstance.on('playlistItem', playlistItemEvent => {
	            const item = playlistItemEvent.item;
	            if (this._videoTitleElement && hasProperty(item, 'title') && typeof item.title === 'string') {
	                this._videoTitleElement.innerText = item.title;
	            }
	            if (this._wrapperTitleWrapperElement && hasProperty(item, 'link') && typeof item.link === 'string') {
	                this._wrapperTitleWrapperElement.href = item.link;
	            }
	        });
	        this.configureQuality();
	        this.handleResize();
	    }
	    _getShuffle() {
	        return this._shuffle ? this._shuffle : false;
	    }
	    _getTitle() {
	        return this._title ? this._title : '';
	    }
	    _getCollapseMobileSubType() {
	        return this._mobileLocation ? this._mobileLocation : undefined;
	    }
	    _checkVideoClose() {
	        return this._saveVideoCloseState && this._config.video.videoWasClosed;
	    }
	};
	PlaylistPlayer = __decorate([
	    log('PlaylistPlayer'),
	    __metadata("design:paramtypes", [String, String, String, Array, Object, HTMLElement,
	        VideoEventProxy,
	        Config, String, String, PrebidMethods, String, Boolean, String, Boolean])
	], PlaylistPlayer);

	let SekindoPlayer = class SekindoPlayer extends VideoPlayer {
	    constructor(_playlistId, _portalSettings, _pageElement, _device, _width, _height, _isCollapse, _config, _videoRequestManager) {
	        super();
	        this._playlistId = _playlistId;
	        this._portalSettings = _portalSettings;
	        this._pageElement = _pageElement;
	        this._device = _device;
	        this._width = _width;
	        this._height = _height;
	        this._isCollapse = _isCollapse;
	        this._config = _config;
	        this._videoRequestManager = _videoRequestManager;
	        this.API_ID = 'sekindoPlayer';
	        this._clsContainer = null;
	        this._hasTitle = this._portalSettings.title && (this._portalSettings.title !== null || this._portalSettings.title !== '') ? true : false;
	    }
	    addToPage() {
	        this.setup();
	        this._config.video.sekindoPlayerAdded = true;
	    }
	    setup() {
	        window.addEventListener('primisPlayerInit', ((e) => {
	            if (e.detail.playerApiId === this.API_ID) {
	                logger.event('sekindo-player', 'init', 'Sekindo player initialized');
	                this._videoRequestManager.requestingSekindoBids.emit(this).catch(() => { });
	            }
	        }));
	        this._clsContainer = document.querySelector(`#cls-video-container-${this._playlistId}`);
	        const div = document.createElement('div');
	        div.className = 'adthrive-sekindo-player';
	        div.id = 'adthrive-sekindo-container';
	        const script = document.createElement('script');
	        const params = VideoUtils.createQueryString({
	            s: this._isCollapse ? 98876 : 87493,
	            cbuster: '%%CACHEBUSTER%%',
	            pubUrl: '%%REFERRER_URL_ESC_ESC%%',
	            x: this._width,
	            y: this._height,
	            vp_contentFeedId: this._playlistId,
	            subId: this._config.site.id,
	            playerApiId: this.API_ID,
	        });
	        script.async = true;
	        script.defer = true;
	        script.type = 'text/javascript';
	        script.src = `https://live.primis.tech/live/liveView.php?${params}`;
	        if (this._device === 'desktop') {
	            this._desktopSetup(div, script);
	        }
	        else {
	            this._mobileSetup(div, script);
	        }
	    }
	    _desktopSetup(div, script) {
	        if (this._hasTitle) {
	            const title = document.createElement('h4');
	            title.innerText = this._portalSettings.title;
	            title.classList.add('widgettitle');
	            title.id = 'adthrive-sekindo-desktop-title';
	            div.appendChild(title);
	        }
	        div.appendChild(script);
	        if (this._clsContainer) {
	            this._clsContainer.appendChild(div);
	        }
	        else {
	            this._pageElement.insertAdjacentElement(this._portalSettings.position, div);
	        }
	    }
	    _mobileSetup(div, script) {
	        if (this._hasTitle) {
	            const title = document.createElement('strong');
	            title.innerText = this._portalSettings.title;
	            title.id = 'adthrive-sekindo-mobile-title';
	            div.appendChild(title);
	        }
	        div.appendChild(script);
	        const wrapperDiv = document.createElement('div');
	        wrapperDiv.className = 'adthrive-sekindo-mobile-center';
	        wrapperDiv.id = 'adthrive-sekindo-mobile-wrapper';
	        wrapperDiv.appendChild(div);
	        if (this._clsContainer) {
	            this._clsContainer.appendChild(wrapperDiv);
	        }
	        else {
	            this._pageElement.insertAdjacentElement(this._portalSettings.position, wrapperDiv);
	        }
	    }
	};
	SekindoPlayer = __decorate([
	    log('SekindoPlayer'),
	    __metadata("design:paramtypes", [String, Object, HTMLElement, String, Number, Number, Boolean, Config,
	        VideoRequestManager])
	], SekindoPlayer);

	class VideoBase extends Component {
	    constructor(_videoConfig, sekindoHoldoutExperimentResult, _component) {
	        super();
	        this._videoConfig = _videoConfig;
	        this._component = _component;
	        this._stickyRelatedOnPage = false;
	        this._contextualMediaIds = [];
	        const players = this._videoConfig.players || [];
	        this._device = isDesktop() ? 'desktop' : 'mobile';
	        this._potentialPlayerMap = this._setPotentialPlayerMap(sekindoHoldoutExperimentResult);
	        const stationaryRelated = players.filter(player => player.type === "stationaryRelated"  && player.enabled);
	        this._potentialPlayerMap.stationaryRelated = stationaryRelated;
	    }
	    _setPotentialPlayerMap(sekindoHoldoutExperimentResult) {
	        const players = this._videoConfig.players;
	        const defaultMap = {
	            stickyRelated: [],
	            stickyPlaylist: [],
	            sekindo: [],
	            stationaryRelated: [],
	        };
	        return players && players.length
	            ? players
	                .filter((player) => { var _a; return ((_a = player.devices) === null || _a === void 0 ? void 0 : _a.indexOf(this._device)) > -1; })
	                .reduce((accumulator, player) => {
	                if (!accumulator[player.type]) {
	                    logger.event(this._component, 'constructor', 'Unknown Video Player Type detected', player.type);
	                    accumulator[player.type] = [];
	                }
	                if (player.enabled) {
	                    if (!sekindoHoldoutExperimentResult || player.type !== "sekindo" ) {
	                        accumulator[player.type].push(player);
	                    }
	                }
	                return accumulator;
	            }, defaultMap)
	            : defaultMap;
	    }
	    _checkPlayerSelectorOnPage(playerType) {
	        const players = this._potentialPlayerMap[playerType].map((player) => {
	            return {
	                player,
	                playerElement: this._getPlacementElement(player),
	            };
	        });
	        if (!players.length) {
	            return { player: null, playerElement: null };
	        }
	        return players[0];
	    }
	    _getOverrideElement(player, playerElement, publisherPageElement) {
	        if (player && playerElement) {
	            const div = document.createElement('div');
	            playerElement.insertAdjacentElement(player.position, div);
	            publisherPageElement = div;
	            logger.info(this._component, '_initializeRelatedPlayers', 'Changing injection element', publisherPageElement);
	        }
	        else {
	            const { player: stickyPlaylistPlayer, playerElement: stickyPlaylistElement } = this._checkPlayerSelectorOnPage("stickyPlaylist" );
	            if (stickyPlaylistPlayer && stickyPlaylistElement) {
	                const div = document.createElement('div');
	                stickyPlaylistElement.insertAdjacentElement(stickyPlaylistPlayer.position, div);
	                publisherPageElement = div;
	                logger.info(this._component, '_initializeRelatedPlayers', 'Changing injection element', publisherPageElement);
	            }
	        }
	        return publisherPageElement;
	    }
	    _shouldOverrideElement(element) {
	        const overrideEmbed = element.getAttribute('override-embed');
	        if (overrideEmbed === 'true' || overrideEmbed === 'false') {
	            return overrideEmbed === 'true';
	        }
	        return this._videoConfig.contextualSettings ? this._videoConfig.contextualSettings.overrideEmbedLocation : false;
	    }
	    _getPlacementElement(settings) {
	        const pageSelectorEl = allowablePageSelector(settings.pageSelector);
	        const elementSelectorEl = validCssSelector(settings.elementSelector);
	        if (!pageSelectorEl.valid) {
	            logger.error('VideoUtils', 'getPlacementElement', new Error(`${settings.pageSelector} is not a valid selector`));
	            return null;
	        }
	        if (settings.pageSelector && !pageSelectorEl.elements.length) {
	            logger.event('VideoUtils', 'getPlacementElement', new Error(`PSNF: ${settings.pageSelector} does not exist on the page`));
	            return null;
	        }
	        if (!elementSelectorEl.valid) {
	            logger.error('VideoUtils', 'getPlacementElement', new Error(`${settings.elementSelector} is not a valid selector`));
	            return null;
	        }
	        if (elementSelectorEl.elements.length > settings.skip) {
	            return elementSelectorEl.elements[settings.skip];
	        }
	        else {
	            logger.event('VideoUtils', 'getPlacementElement', new Error(`ESNF: ${settings.elementSelector} does not exist on the page`));
	            return null;
	        }
	    }
	    _getEmbeddedPlayerType(element) {
	        let embeddedPlayerType = element.getAttribute('data-player-type');
	        if (!embeddedPlayerType || embeddedPlayerType === 'default') {
	            embeddedPlayerType = this._videoConfig.contextualSettings ? this._videoConfig.contextualSettings.defaultPlayerType : 'static';
	        }
	        if (this._stickyRelatedOnPage) {
	            embeddedPlayerType = 'static';
	        }
	        return embeddedPlayerType;
	    }
	    _getUnusedMediaId(publisherPageElement) {
	        const mediaId = publisherPageElement.getAttribute('data-video-id');
	        if (mediaId && this._contextualMediaIds.indexOf(mediaId) === -1) {
	            this._contextualMediaIds.push(mediaId);
	            return mediaId;
	        }
	        else {
	            logger.info(this._component, '_getUnusedMediaId', 'No Unique MediaId');
	            return false;
	        }
	    }
	    _createRelatedPlayer(mediaId, embeddedPlayerType, publisherPageElement) {
	        if (embeddedPlayerType === 'collapse') {
	            this._createCollapsePlayer(mediaId, publisherPageElement);
	        }
	        else if (embeddedPlayerType === 'static') {
	            this._createStaticPlayer(mediaId, publisherPageElement);
	        }
	    }
	    _createCollapsePlayer(mediaId, publisherPageElement) {
	        const { player: stickyRelatedPlayer, playerElement: stickyRelatedElement } = this._checkPlayerSelectorOnPage("stickyRelated" );
	        const player = stickyRelatedPlayer ? stickyRelatedPlayer : this._potentialPlayerMap["stationaryRelated" ][0];
	        if (player && player.playerId) {
	            const shouldOverrideElement = this._shouldOverrideElement(publisherPageElement);
	            if (shouldOverrideElement) {
	                publisherPageElement = this._getOverrideElement(stickyRelatedPlayer, stickyRelatedElement, publisherPageElement);
	            }
	            publisherPageElement = document.querySelector(`#cls-video-container-${mediaId} > div`) || publisherPageElement;
	            this._createStickyRelatedPlayer({ ...player, mediaId }, publisherPageElement);
	        }
	        else {
	            logger.error(this._component, '_createCollapsePlayer', 'No video player found');
	        }
	    }
	    _createStaticPlayer(mediaId, publisherPageElement) {
	        if (this._potentialPlayerMap["stationaryRelated" ].length && this._potentialPlayerMap["stationaryRelated" ][0].playerId) {
	            const player = this._potentialPlayerMap["stationaryRelated" ][0];
	            this._createStationaryRelatedPlayer({ ...player, mediaId }, publisherPageElement);
	        }
	        else {
	            logger.error(this._component, '_createStaticPlayer', 'No video player found');
	        }
	    }
	    _shouldRunAutoplayPlayers() {
	        if (this._isVideoAllowedOnPage()) {
	            if (this._potentialPlayerMap["stickyRelated" ].length ||
	                this._potentialPlayerMap["stickyPlaylist" ].length ||
	                this._potentialPlayerMap["sekindo" ].length) {
	                return true;
	            }
	        }
	        return false;
	    }
	    _determineAutoplayPlayers() {
	        const componentName = this._component;
	        const isVideoManagerComponent = componentName === 'VideoManagerComponent';
	        const config = this._config;
	        if (this._stickyRelatedOnPage) {
	            logger.event(componentName, 'stickyRelatedOnPage', (isVideoManagerComponent && {
	                device: config && config.context.device,
	                isDesktop: this._device,
	            }) ||
	                {});
	            return;
	        }
	        const { player: stickyPlaylistPlayer, playerElement: stickyPlaylistElement } = this._checkPlayerSelectorOnPage("stickyPlaylist" );
	        const { player: sekindoPlayer, playerElement: sekindoElement } = this._checkPlayerSelectorOnPage("sekindo" );
	        if (stickyPlaylistPlayer && stickyPlaylistPlayer.playerId && stickyPlaylistPlayer.playlistId && stickyPlaylistElement) {
	            this._createPlaylistPlayer(stickyPlaylistPlayer, stickyPlaylistElement);
	        }
	        else if (sekindoPlayer && sekindoPlayer.playlistId && sekindoElement) {
	            this._createSekindoPlayer(sekindoPlayer, sekindoElement);
	        }
	        else {
	            logger.event(componentName, 'noStickyPlaylistOrSekindo', (isVideoManagerComponent && {
	                vendor: 'none',
	                device: config && config.context.device,
	                isDesktop: this._device,
	            }) ||
	                {});
	        }
	    }
	    _initializeRelatedPlayers(publisherPageElements) {
	        for (let t = 0; t < publisherPageElements.length; t++) {
	            const publisherPageElement = publisherPageElements[t];
	            const embeddedPlayerType = this._getEmbeddedPlayerType(publisherPageElement);
	            logger.info(this._component, '_initializeRelatedPlayers', 'embeddedPlayerType', embeddedPlayerType);
	            const mediaId = this._getUnusedMediaId(publisherPageElement);
	            if (mediaId) {
	                this._createRelatedPlayer(mediaId, embeddedPlayerType, publisherPageElement);
	            }
	        }
	    }
	}

	let VideoUrlBuilder = class VideoUrlBuilder {
	    constructor(_abgroup, _auctionManagers, _config, _gam, _irisTv) {
	        this._abgroup = _abgroup;
	        this._auctionManagers = _auctionManagers;
	        this._config = _config;
	        this._gam = _gam;
	        this._irisTv = _irisTv;
	        this.shouldPrebidRun = false;
	    }
	    getVideoTargeting(player, gamTargetingMap) {
	        const _VPRENUM = 'vprenum';
	        const playerVersion = 'jwv';
	        const imaVersion = 'imav';
	        const irisContextual = this._irisTv.irisContextualData;
	        const videoTargeting = {};
	        const rpExpKey = 'rvadv_ab';
	        Object.keys(gamTargetingMap).forEach(key => {
	            const relatedPlaylistExp = this._abgroup.get(rpExpKey);
	            if (key === 'abgroup' && relatedPlaylistExp) {
	                gamTargetingMap[key].push(`${rpExpKey}:${relatedPlaylistExp}`);
	            }
	            videoTargeting[key] = encodeURIComponent(gamTargetingMap[key].toString());
	        });
	        videoTargeting[_VPRENUM] = String(player._prerollNum);
	        videoTargeting[playerVersion] = player.jwVersion || '';
	        videoTargeting[imaVersion] = player.imaVersion || '';
	        if (irisContextual) {
	            const irisKey = 'iris_context';
	            videoTargeting[irisKey] = irisContextual.toString();
	        }
	        return videoTargeting;
	    }
	    getAmazonBidTargeting(amazonAm, playlistId) {
	        const amznBid = amazonAm && amazonAm.getVideoBid && amazonAm.getVideoBid(playlistId);
	        if (amznBid) {
	            return { amznbid: amznBid.amznbid, amzniid: amznBid.amzniid, amznp: amznBid.amznp };
	        }
	    }
	    getCustParams(player) {
	        const targetingMap = this._gam.getTargetingMap();
	        const amazonAm = this._auctionManagers.getAmazonAuctionManager();
	        return {
	            ...this.getVideoTargeting(player, targetingMap),
	            ...(amazonAm && this.getAmazonBidTargeting(amazonAm, player._playlistId)),
	        };
	    }
	    handleGdprConsent() {
	        const gdprConsent = {
	            gdpr: 1,
	            gdpr_consent: 'tcunavailable',
	        };
	        if (typeof window.__tcfapi === 'function') {
	            window.__tcfapi('getFullTCData', 2, tcData => {
	                if (tcData && tcData.tcString.length) {
	                    gdprConsent.gdpr_consent = tcData.tcString;
	                }
	                if (tcData && tcData.addtlConsent.length) {
	                    gdprConsent.addtl_consent = tcData.addtl_consent;
	                }
	            });
	        }
	        return gdprConsent;
	    }
	    getConsentParams() {
	        if (this._config.gdpr.enabled) {
	            this.handleGdprConsent();
	        }
	        else if (this._config.ccpa.privacyString) {
	            return { us_privacy: this._config.ccpa.privacyString };
	        }
	    }
	    getDefaultVideoUrlParams(player) {
	        return {
	            iu: `/${this._config.gam.account}/${this._config.gam.prefix}_${player.name}/${this._config.site.id}`,
	            sz: player.size.join('x'),
	            hl: 'en',
	            output: 'vast',
	            url: '__referrer__',
	            vad_type: 'linear',
	            description_url: '__domain__',
	            pp: '10_VAST%20redirects_video%2Fmp4_VPAID%20JavaScript',
	        };
	    }
	    buildGAMVideoUrl(player) {
	        const consentParams = this.getConsentParams();
	        const custParams = VideoUtils.createQueryString(this.getCustParams(player));
	        const encodedCustParams = VideoUtils.createEncodedQueryString({ cust_params: custParams });
	        const defaultParams = this.getDefaultVideoUrlParams(player);
	        const baseGamUrl = 'https://securepubads.g.doubleclick.net/gampad/ads';
	        const gamVideoUrlParams = {
	            env: 'vp',
	            gdfp_req: '1',
	            unviewed_position_start: '1',
	            correlator: Date.now(),
	            ...defaultParams,
	            ...consentParams,
	        };
	        return `${baseGamUrl}?${VideoUtils.createQueryString(gamVideoUrlParams)}&${encodedCustParams}`;
	    }
	    buildGAMVideoUrlPrebid(player) {
	        const custParams = this.getCustParams(player);
	        const defaultParams = this.getDefaultVideoUrlParams(player);
	        return pbjs.adServers.dfp.buildVideoUrl({
	            adUnit: player.videoAdUnit,
	            params: {
	                ...defaultParams,
	                cust_params: custParams,
	            },
	        });
	    }
	    buildVideoUrl(player) {
	        return this.shouldPrebidRun ? this.buildGAMVideoUrlPrebid(player) : this.buildGAMVideoUrl(player);
	    }
	};
	VideoUrlBuilder = __decorate([
	    log('VideoUrlBuilder'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup,
	        AuctionManagers,
	        Config,
	        GoogleAdManager,
	        IrisTv])
	], VideoUrlBuilder);

	let SekindoHoldoutExperiment = class SekindoHoldoutExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this.abgroup = abgroup;
	        this.key = 'sekho';
	        this._result = false;
	        this._choices = [{ choice: true }, { choice: false }];
	        const win = window;
	        const cls = win && win.adthriveCLS;
	        const exp = cls && cls.experiments;
	        const expVal = exp && this.key in exp;
	        this._result = exp && expVal ? exp[this.key] : this.run();
	        this.abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.05).get();
	    }
	};
	SekindoHoldoutExperiment = __decorate([
	    injectable(),
	    log('SekindoHoldoutExperiment'),
	    __metadata("design:paramtypes", [ABGroup])
	], SekindoHoldoutExperiment);

	let VideoManagerComponent = class VideoManagerComponent extends VideoBase {
	    constructor(_config, _prebidMethods, _jwBoostExperiment, _userPageDataLoggingEvent, _collapsibleVideoLoggingStore, _videoRequestManager, _eventProxy, _mediaType, _sekindoHoldoutExperiment, _videoUrlBuilder, _irisTv) {
	        super(_config.video, _sekindoHoldoutExperiment.result, 'VideoManagerComponent');
	        this._config = _config;
	        this._prebidMethods = _prebidMethods;
	        this._jwBoostExperiment = _jwBoostExperiment;
	        this._userPageDataLoggingEvent = _userPageDataLoggingEvent;
	        this._collapsibleVideoLoggingStore = _collapsibleVideoLoggingStore;
	        this._videoRequestManager = _videoRequestManager;
	        this._eventProxy = _eventProxy;
	        this._mediaType = _mediaType;
	        this._sekindoHoldoutExperiment = _sekindoHoldoutExperiment;
	        this._videoUrlBuilder = _videoUrlBuilder;
	        this._irisTv = _irisTv;
	        this._sekindoPlayers = [];
	        this._jwPlayers = [];
	        this._IN_POST_SELECTOR = '.adthrive-video-player';
	        logger.info('VideoManagerComponent', 'constructor', '_potentialPlayerMap', this._potentialPlayerMap);
	    }
	    init() {
	        this._handleCollapsibleVideoLogging();
	        this._initializePlayers();
	        this._mediaType.runOneStreamExperiment();
	    }
	    _initializePlayers() {
	        const publisherVideoElements = document.querySelectorAll(this._IN_POST_SELECTOR);
	        logger.info('VideoManagerComponent', '_initializePlayers', 'publisherVideoElements', publisherVideoElements);
	        if (publisherVideoElements.length) {
	            this._initializeRelatedPlayers(publisherVideoElements);
	        }
	        if (!this._shouldRunAutoplayPlayers()) {
	            logger.info('VideoManagerComponent', '_initializePlayers', 'disable autoplay players');
	            try {
	                this._importScripts();
	            }
	            catch (e) {
	                logger.error('VideoManagerComponent', 'initializePlayers', e);
	            }
	            return;
	        }
	        this._determineAutoplayPlayers();
	        try {
	            this._importScripts();
	        }
	        catch (e) {
	            logger.error('VideoManagerComponent', 'initializePlayers', e);
	        }
	    }
	    _createStationaryRelatedPlayer(player, element) {
	        const isCollapse = false;
	        const playerSize = this._device === 'mobile' ? [400, 225] : [640, 360];
	        const playerName = VideoAdUnit.Video_In_Post_ClicktoPlay_SoundOn;
	        const playerCollapseType = "adthrive-collapse-mobile" ;
	        const relatedPlayer = new ContextualPlayer(player.playerId, player.mediaId, playerName, playerSize, element, this._eventProxy, this._config, isCollapse, playerCollapseType, "adthrive-collapse-medium" , this._prebidMethods);
	        logger.info('VideoManagerComponent', '_createStationaryRelatedPlayer', 'related player created', relatedPlayer);
	        this._jwPlayers.push(relatedPlayer);
	    }
	    _createStickyRelatedPlayer(player, element) {
	        const isCollapse = true;
	        const playerSize = this._device === 'mobile' ? [400, 225] : [640, 360];
	        const playerName = VideoAdUnit.Video_Individual_Autoplay_SOff;
	        const playerCollapseType = this._getCollapseType();
	        this._collapsibleVideoLoggingStore.playerName = playerName;
	        this._stickyRelatedOnPage = true;
	        this._config.video.mobileStickyPlayerOnPage = this._device === 'mobile' ? true : false;
	        const relatedPlayer = new ContextualPlayer(player.playerId, player.mediaId, playerName, playerSize, element, this._eventProxy, this._config, isCollapse, playerCollapseType, "adthrive-collapse-medium" , this._prebidMethods, player.mobileLocation);
	        logger.info('VideoManagerComponent', '_createStickyRelatedPlayer', 'related player created', relatedPlayer);
	        this._jwPlayers.push(relatedPlayer);
	    }
	    _createSekindoPlayer(player, element) {
	        const playlistId = player.playlistId;
	        const playerSize = this._device === 'mobile' ? { width: 340, height: 260 } : { width: 320, height: 250 };
	        const playerSettings = { ...player, classNames: [] };
	        const isCollapse = false;
	        this._sekindoPlayers.push(new SekindoPlayer(playlistId, playerSettings, element, this._device, playerSize.width, playerSize.height, isCollapse, this._config, this._videoRequestManager));
	    }
	    _createPlaylistPlayer(player, element) {
	        const playerId = player.playerId;
	        const playlistId = player.playlistId;
	        const collapseType = this._getCollapseType();
	        const playerSize = collapseType === "adthrive-collapse-mobile"  ? [400, 225] : [640, 360];
	        const playerName = this._device === 'mobile' ? VideoAdUnit.Video_Coll_SOff_Smartphone : VideoAdUnit.Video_Collapse_Autoplay_SoundOff;
	        const settings = {
	            classNames: [],
	            enabled: true,
	            pageSelector: player.pageSelector,
	            elementSelector: player.elementSelector,
	            position: player.position,
	            skip: player.skip,
	        };
	        this._config.video.mobileStickyPlayerOnPage = true;
	        const playlistPlayer = new PlaylistPlayer(playerId, playlistId, playerName, playerSize, settings, element, this._eventProxy, this._config, collapseType, "adthrive-collapse-medium" , this._prebidMethods, player.mobileLocation, player.saveVideoCloseState, player.title, player.shuffle);
	        logger.info('VideoManagerComponent', '_createPlaylistPlayer', 'Playlist Player Created', playlistPlayer);
	        this._collapsibleVideoLoggingStore.playerName = playerName;
	        this._jwPlayers.push(playlistPlayer);
	    }
	    _initJwBoost() {
	        this._prebidMethods.setConfig({
	            ...(this._jwBoostExperiment.result &&
	                this._jwPlayers.length && {
	                realTimeData: {
	                    dataProviders: [
	                        {
	                            name: 'jwplayer',
	                            params: {
	                                mediaIDs: this._contextualMediaIds,
	                            },
	                        },
	                    ],
	                },
	            }),
	        });
	    }
	    _hasCollapsiblePlayer(players) {
	        return players.length ? players.some(player => player.collapsible) : false;
	    }
	    _hasInViewAutoplayStationaryPlayer(players) {
	        return players.length ? players.some(player => !player.collapsible && VideoUtils.playerInView(player._pageElement)) : false;
	    }
	    _setPlayerInstance(player) {
	        void this._resetPlayer(player);
	    }
	    _resetPlayer(player) {
	        logger.info('VideoManagerComponent', 'reset', `Video > JW player ${player._playerId}`);
	        player.init();
	    }
	    async _initializePlayer(player, isContextual) {
	        const videoRequestManager = this._videoRequestManager;
	        logger.info('VideoManagerComponent', 'import', `Video > Imported JW player ${player._playerId}`);
	        player.setDefaults(window.jwplayer.defaults);
	        window.jwplayer.defaults = {};
	        await this._prebidMethods
	            .waitForQueue()
	            .then(() => {
	            this._videoUrlBuilder.shouldPrebidRun = true;
	        })
	            .catch(() => { });
	        if (isContextual && this._contextualMediaIds[0]) {
	            await this._irisTv.setContextualData(this._contextualMediaIds[0]);
	        }
	        videoRequestManager.addVideoSlots([player]);
	        if (player.initialAuctionPlayer) {
	            await videoRequestManager.requestVideoBids([player]);
	        }
	        player.setPlayerInstance = this._setPlayerInstance.bind(this);
	        player.requestVideoBids = async (players) => {
	            return await videoRequestManager.requestVideoBids(players);
	        };
	        GoogleAdManager.pushToQueue(() => {
	            player.buildVideoUrl = this._videoUrlBuilder.buildVideoUrl.bind(this._videoUrlBuilder);
	            player.addToPage();
	            player.init();
	        });
	    }
	    _importScripts() {
	        const hasCollapsiblePlayer = this._hasCollapsiblePlayer(this._jwPlayers);
	        const hasInViewAutoplayStationaryPlayer = !hasCollapsiblePlayer && this._hasInViewAutoplayStationaryPlayer(this._jwPlayers);
	        if (hasCollapsiblePlayer || hasInViewAutoplayStationaryPlayer || this._sekindoPlayers.length) {
	            this._config.video.preventStickyOutstream = true;
	        }
	        this._initJwBoost();
	        if (this._jwPlayers.length) {
	            this._config.video.hasJwPlayer = true;
	        }
	        this._jwPlayers.forEach(player => {
	            const isContextual = player.isPlayerType === 'contextual';
	            if (isContextual) {
	                this._config.video.setupAdvanceRelatedExperiment(player.collapsible);
	            }
	            importScript(`https://content.jwplatform.com/libraries/${player._playerId}.js`)
	                .then(async () => this._initializePlayer(player, isContextual))
	                .catch(error => logger.error('VideoManagerComponent', 'importScripts', error));
	        });
	        this._sekindoPlayers.forEach(player => {
	            player.addToPage();
	        });
	    }
	    _isVideoAllowedOnPage() {
	        if (this._config.disableAds.video) {
	            logger.info('VideoManagerComponent', 'isVideoAllowedOnPage', 'Video > Non in post players are disabled on page');
	            if (this._config.disableAds.reasons.has('video_tag')) {
	                logger.error('VideoManagerComponent', 'isVideoAllowedOnPage', new Error('DBP: Disabled by publisher via video tag'));
	            }
	            else if (this._config.disableAds.reasons.has('video_plugin')) {
	                logger.error('VideoManagerComponent', 'isVideoAllowedOnPage', new Error('DBP: Disabled by publisher via video plugin'));
	            }
	            else if (this._config.disableAds.reasons.has('video_page')) {
	                logger.error('VideoManagerComponent', 'isVideoAllowedOnPage', new Error('DBP: Disabled by publisher via command queue'));
	            }
	            else {
	                logger.error('VideoManagerComponent', 'isVideoAllowedOnPage', new Error('DBP: Disabled by publisher via other'));
	            }
	            return false;
	        }
	        return true;
	    }
	    _getCollapseType() {
	        if (this._device === 'mobile') {
	            return "adthrive-collapse-mobile" ;
	        }
	        else {
	            return "adthrive-collapse-float" ;
	        }
	    }
	    _handleCollapsibleVideoLogging() {
	        CollapseUtils.collapseEvent.on(() => {
	            this._collapsibleVideoLoggingStore.startedCollapsedTime = now$2();
	        });
	        CollapseUtils.uncollapseEvent.on(() => {
	            this._collapsibleVideoLoggingStore.totalTimeCollapsed += this._collapsibleVideoLoggingStore.startedCollapsedTime
	                ? now$2() - this._collapsibleVideoLoggingStore.startedCollapsedTime
	                : 0;
	            this._collapsibleVideoLoggingStore.startedCollapsedTime = undefined;
	        });
	        CollapseUtils.closeEvent.on(() => {
	            this._collapsibleVideoLoggingStore.wasClosed = true;
	        });
	        CollapseUtils.startEvent
	            .once()
	            .then(() => {
	            this._collapsibleVideoLoggingStore.wasStarted = true;
	        })
	            .catch(() => { });
	        this._userPageDataLoggingEvent.loggingData.on(() => {
	            if (this._collapsibleVideoLoggingStore.startedCollapsedTime) {
	                this._collapsibleVideoLoggingStore.totalTimeCollapsed += now$2() - this._collapsibleVideoLoggingStore.startedCollapsedTime;
	            }
	        });
	    }
	};
	VideoManagerComponent = __decorate([
	    log('VideoManagerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        PrebidMethods,
	        JwBoostExperiment,
	        UserPageDataLoggingEvents,
	        CollapsibleVideoLoggingStore,
	        VideoRequestManager,
	        VideoEventProxy,
	        MediaType,
	        SekindoHoldoutExperiment,
	        VideoUrlBuilder,
	        IrisTv])
	], VideoManagerComponent);

	let WebVitalsComponent = class WebVitalsComponent extends Component {
	    constructor(_bootstrapConfig, _pageManager) {
	        super();
	        this._bootstrapConfig = _bootstrapConfig;
	        this._pageManager = _pageManager;
	        this._maxTimeOnPage = 3600000;
	        this._webVitals = [];
	        this._webVitalsSent = false;
	        this._visibilityChangeOff = this._pageManager.visibilityChange.on(() => this.logWebVitals());
	    }
	    init() {
	        domReady()
	            .then(() => {
	            const webVitals = window.webVitals;
	            const addWebVital = this.addWebVital;
	            webVitals.getFID(addWebVital);
	            webVitals.getCLS(addWebVital);
	            webVitals.getLCP(addWebVital);
	            webVitals.getFCP(addWebVital);
	            webVitals.getTTFB(addWebVital);
	        })
	            .catch(() => false);
	        window.addEventListener('LogWebVital', event => {
	            this._webVitals.push(event.detail);
	        });
	        setTimeout(() => {
	            this.logWebVitals();
	        }, this._maxTimeOnPage);
	    }
	    addWebVital({ name, delta, value, id }) {
	        const webVitalEvent = new CustomEvent('LogWebVital', { detail: { name, delta, value, id } });
	        window.dispatchEvent(webVitalEvent);
	    }
	    logWebVitals() {
	        if (this._webVitalsSent) {
	            return;
	        }
	        const webVitalsData = { webVitals: this._webVitals, gptLoad: true };
	        this._webVitalsSent = true;
	        this._visibilityChangeOff();
	        if (this._bootstrapConfig.gptLibFailed) {
	            webVitalsData.gptLoad = false;
	        }
	        logger.fetchEvent('WebVitalsComponent', 'logWebVital', webVitalsData);
	    }
	    get enabled() {
	        return this._bootstrapConfig.webVitalsEnabled;
	    }
	};
	WebVitalsComponent = __decorate([
	    log('WebVitalsComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [BootstrapConfig, PageManager])
	], WebVitalsComponent);

	let LayoutShiftExperiment = class LayoutShiftExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._result = false;
	        this.key = 'logcls';
	        this._choices = [{ choice: true }, { choice: false }];
	        if (isChrome()) {
	            this._result = this.run();
	            abgroup.set(this.key, this._result ? 'on' : 'off');
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.1).get();
	    }
	};
	LayoutShiftExperiment = __decorate([
	    log('LayoutShiftExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], LayoutShiftExperiment);

	let LayoutShiftComponent = class LayoutShiftComponent extends Component {
	    constructor(_gam, _slotManager, _slots, _videoRequestManager, _layoutShiftExperiment, _pageManager) {
	        super();
	        this._gam = _gam;
	        this._slotManager = _slotManager;
	        this._slots = _slots;
	        this._videoRequestManager = _videoRequestManager;
	        this._layoutShiftExperiment = _layoutShiftExperiment;
	        this._pageManager = _pageManager;
	        this._events = [];
	        this._maxTimeOnPage = 3600000;
	        this._screenHeightsWithin = 5;
	        this._previousSiblings = 3;
	        this._layoutShiftData = [];
	        this._slotResize = {};
	        this._loggedInitialLoadShift = false;
	        this._maxPayloadSize = 3062;
	    }
	    init() {
	        this.watchSlotShift();
	    }
	    get enabled() {
	        return (this._layoutShiftExperiment.result &&
	            'ResizeObserver' in window &&
	            'PerformanceObserver' in window &&
	            PerformanceObserver.supportedEntryTypes.indexOf('layout-shift') > -1);
	    }
	    watchSlotShift() {
	        this.setPerformanceObserver();
	        this.setResizeEvents();
	        this.setEventListeners();
	    }
	    setPerformanceObserver() {
	        if (!this._layoutObserver) {
	            try {
	                this._layoutObserver = new PerformanceObserver(list => {
	                    this.analyzeEntries(list.getEntries());
	                });
	                this._layoutObserver.observe({
	                    type: 'layout-shift',
	                    buffered: false,
	                });
	            }
	            catch (e) {
	                logger.error('LayoutShiftComponent', 'SetPerformanceObserver', e);
	            }
	        }
	    }
	    setResizeEvents() {
	        this._events.push(this._videoRequestManager.requestingSekindoBids.on(video => {
	            this.setResizeObservers(video._playlistId, video._pageElement);
	        }));
	        this._events.push(this._videoRequestManager.requestingVideoBids.on(videos => {
	            videos.forEach(video => {
	                this.setResizeObservers(video._playlistId, video._pageElement);
	            });
	        }));
	        this._events.push(this._gam.slotRequested.on(({ slot }) => {
	            this.setResizeObservers(slot.element.id, slot.element);
	        }));
	        this._slotManager.refreshing
	            .once()
	            .then(() => {
	            this.logLayoutShift();
	        })
	            .catch(() => { });
	    }
	    setEventListeners() {
	        this._events.push(this._pageManager.beforeUnload.on(() => this.logLayoutShift()));
	        this._events.push(this._pageManager.visibilityChange.on(() => this.logLayoutShift()));
	        setTimeout(() => {
	            this.logLayoutShift();
	        }, this._maxTimeOnPage);
	    }
	    setResizeObservers(id, element) {
	        if (!this._slotResize[id]) {
	            this._slotResize[id] = {
	                hasResized: false,
	                resizeObserver: new ResizeObserver((entries) => {
	                    entries.forEach(() => {
	                        this._slotResize[id].hasResized = true;
	                        this._slotResize[id].ro_ts = Date.now();
	                        this._slotResize[id].resizeObserver.disconnect();
	                    });
	                }),
	            };
	            this._slotResize[id].resizeObserver.observe(element);
	        }
	    }
	    analyzeEntries(entries) {
	        const performanceTimestamp = Date.now();
	        for (const entry of entries) {
	            const { value, sources, hadRecentInput } = entry;
	            if (!hadRecentInput) {
	                const data = {
	                    value,
	                    po_ts: performanceTimestamp,
	                    nodes: [],
	                };
	                for (const source of sources) {
	                    if (source.node) {
	                        const identifier = this.getIdentifier(source.node);
	                        const key = identifier.split(':')[1];
	                        data.nodes.push({
	                            identifier,
	                            posDiff: source.currentRect.top - source.previousRect.top,
	                            absPos: window.pageYOffset + source.currentRect.top,
	                            prevEls: this.getPreviousSibling(source.node, this._previousSiblings),
	                            parent: this.getIdentifier(source.node.parentNode),
	                            hasResized: this.checkResizes(source.node),
	                            ...(this._slotResize[key] && this._slotResize[key].ro_ts && { ro_ts: this._slotResize[key].ro_ts }),
	                        });
	                    }
	                }
	                this._layoutShiftData.push(data);
	            }
	        }
	    }
	    getIdentifier(element) {
	        return element.id
	            ? `id:${element.id}`
	            : element.classList && element.classList.value
	                ? `class:${element.classList.value.split(' ').join('.')}`
	                : `node:${element.nodeName.toLowerCase()}`;
	    }
	    getPreviousSibling(elem, siblingNum = 3) {
	        let sibling = elem.previousElementSibling;
	        let list = 0;
	        const sibs = [];
	        while (sibling && list < siblingNum) {
	            ++list;
	            sibs.push(this.getIdentifier(sibling));
	            sibling = sibling.previousElementSibling;
	        }
	        return sibs;
	    }
	    checkResizes(element) {
	        const identifier = this.getIdentifier(element).split(':')[1];
	        if (this._slotResize[identifier] && this._slotResize[identifier].hasResized) {
	            return this.checkIsSticky(identifier) || this.checkElementPlacement(element);
	        }
	        return false;
	    }
	    checkIsSticky(identifier) {
	        const slot = this._slots.get(identifier);
	        return slot && slot.isSticky;
	    }
	    checkElementPlacement(element) {
	        return ((isElementInViewport(element) || isElementOffScreenAboveScrolled(element)) && isElementWithinXScreenHeights(element, this._screenHeightsWithin));
	    }
	    logLayoutShift() {
	        if (this._loggedInitialLoadShift) {
	            return;
	        }
	        this._loggedInitialLoadShift = true;
	        this.checkAndTrim(this._layoutShiftData).forEach((layoutShiftDataRequestArray) => {
	            logger.event('LayoutShiftComponent', 'logLayoutShift', layoutShiftDataRequestArray);
	        });
	        this.cleanUp();
	    }
	    checkAndTrim(shiftData = []) {
	        if (!shiftData.length) {
	            logger.info('LayoutShiftComponent', 'logLayoutShift', 'No LayoutShift data detected');
	            return [];
	        }
	        const data = [...shiftData].sort((a, b) => {
	            return b.value - a.value;
	        });
	        const stringified = JSON.stringify(data);
	        if (stringified.length > this._maxPayloadSize) {
	            if (Math.ceil(stringified.length / this._maxPayloadSize) <= 2) {
	                return [data.slice(0, Math.ceil(data.length / 2)), data.slice(Math.ceil(data.length / 2))];
	            }
	            else {
	                const coeff = (this._maxPayloadSize / stringified.length) * (Math.ceil(stringified.length / this._maxPayloadSize) / 2);
	                const trimmedData = data.slice();
	                trimmedData.length = Math.floor(data.length * coeff);
	                return this.checkAndTrim(trimmedData);
	            }
	        }
	        return [data];
	    }
	    cleanUp() {
	        this.disconnectObservers();
	        this.removeEventListeners();
	    }
	    removeEventListeners() {
	        this._events.forEach(turnEventOff => {
	            turnEventOff();
	        });
	    }
	    disconnectObservers() {
	        this._layoutObserver.disconnect();
	        const resizeObserverIdentifiers = Object.keys(this._slotResize);
	        for (const resizeObserverIdentifier of resizeObserverIdentifiers) {
	            this._slotResize[resizeObserverIdentifier].resizeObserver.disconnect();
	        }
	    }
	};
	LayoutShiftComponent = __decorate([
	    log('LayoutShiftComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager,
	        SlotManager,
	        Slots,
	        VideoRequestManager,
	        LayoutShiftExperiment,
	        PageManager])
	], LayoutShiftComponent);

	let InfiniteScrollEvents = class InfiniteScrollEvents {
	    constructor() {
	        this.contentAdded = new Emitter();
	    }
	};
	InfiniteScrollEvents = __decorate([
	    log('InfiniteScrollEvents'),
	    singleton()
	], InfiniteScrollEvents);

	let InfiniteScrollDetectionComponent = class InfiniteScrollDetectionComponent extends Component {
	    constructor(_config, _events) {
	        super();
	        this._config = _config;
	        this._events = _events;
	        this._ajaxSelector = '#ajax-load-more';
	        this._heightThreshold = 1000;
	        this._infiniteScrollElement = null;
	    }
	    start() {
	        this.detectInfiniteScroll();
	    }
	    detectInfiniteScroll() {
	        const callback = (mutationsList, source) => {
	            mutationsList
	                .filter(({ type, addedNodes }) => type === 'childList' && addedNodes.length > 0)
	                .reduce((added, { addedNodes }) => [...added, ...Array.prototype.slice.call(addedNodes)], [])
	                .filter((node) => node instanceof HTMLElement && node.clientHeight > this._heightThreshold)
	                .forEach(div => {
	                if (div.parentElement) {
	                    source.disconnect();
	                    source.observe(div.parentElement, { childList: true });
	                }
	                this._events.contentAdded.emit(div).catch(reason => {
	                    logger.error('InfiniteScrollDetectionComponent', 'addMutationObserver', 'added', reason);
	                });
	            });
	        };
	        this.checkForCustomConfig();
	        const observer = new MutationObserver(callback);
	        if (this._infiniteScrollElement) {
	            observer.observe(this._infiniteScrollElement, { childList: true, subtree: true });
	            logger.info('InfiniteScrollDetectionComponent', 'detectInfiniteScroll', 'observing', this._infiniteScrollElement);
	        }
	        else {
	            logger.warn('InfiniteScrollDetectionComponent', 'detectInfiniteScroll', 'observing body, no custom or ajax element found');
	            Array.prototype.slice
	                .call(document.querySelectorAll('body *'))
	                .filter(e => e instanceof HTMLElement && e.offsetHeight > this._heightThreshold)
	                .forEach(e => {
	                observer.observe(e, { childList: true });
	            });
	        }
	    }
	    checkForCustomConfig() {
	        const { heightThreshold, selector } = this._config.adOptions.infiniteScrollOptions;
	        const customElement = selector ? document.querySelector(selector) : null;
	        if (customElement) {
	            this._infiniteScrollElement = customElement;
	        }
	        else {
	            const ajaxElement = document.querySelector(this._ajaxSelector);
	            if (ajaxElement) {
	                this._config.infiniteScroll.ajaxType = true;
	                this._infiniteScrollElement = ajaxElement;
	            }
	        }
	        if (heightThreshold && heightThreshold > 0) {
	            this._heightThreshold = heightThreshold;
	        }
	    }
	    get enabled() {
	        return this._config.adOptions.infiniteScroll && 'MutationObserver' in window;
	    }
	};
	InfiniteScrollDetectionComponent = __decorate([
	    log('InfiniteScrollDetectionComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, InfiniteScrollEvents])
	], InfiniteScrollDetectionComponent);

	let InfiniteScrollDynamicAdsInjector = class InfiniteScrollDynamicAdsInjector extends BaseDynamicAdsInjector {
	    constructor(_config) {
	        super();
	        this._config = _config;
	        this._count = 1;
	    }
	    getDynamicElementId() {
	        return `${this._config.gam.prefix}_Infinite_${this._count++}`;
	    }
	};
	InfiniteScrollDynamicAdsInjector = __decorate([
	    log('InfiniteScrollDynamicAdsInjector'),
	    injectable(),
	    __metadata("design:paramtypes", [Config])
	], InfiniteScrollDynamicAdsInjector);

	let InfiniteScrollDynamicAdsComponent = class InfiniteScrollDynamicAdsComponent extends Component {
	    constructor(_config, _events, _injector, _slotManager, _gam) {
	        super();
	        this._config = _config;
	        this._events = _events;
	        this._injector = _injector;
	        this._slotManager = _slotManager;
	        this._gam = _gam;
	        this._page = 1;
	    }
	    init() {
	        this._events.contentAdded.on(element => {
	            this._page++;
	            this._config.context.pageviewKey = ulid();
	            this._gam.setTargeting({ key: 'pvk', value: this._config.context.pageviewKey });
	            this.addSlots(element);
	        });
	        this._slotManager.added.on(slots => slots.forEach(slot => {
	            GoogleAdManager.pushToQueue(() => {
	                slot.setTargeting({ key: 'inf_scroll', value: this._page.toString() });
	            });
	        }));
	    }
	    addSlots(target) {
	        const lazyDynamicAds = this._config.dynamicAds
	            .filter(dynamicAd => !(this._config.infiniteScroll.ajaxType && dynamicAd.location === 'Sidebar'))
	            .filter(dynamicAd => this.locationEnabled(dynamicAd))
	            .filter(dynamicAd => this.forDevice(dynamicAd, this._config.context.device))
	            .filter(dynamicAd => this.forPage(dynamicAd));
	        const addedDynamicSlots = this._injector.inject(lazyDynamicAds, target);
	        this._slotManager.add(addedDynamicSlots).catch(reason => {
	            logger.error('InfiniteScrollDynamicAdsComponent', 'addSlots', reason);
	        });
	    }
	    get enabled() {
	        return this._config.adOptions.infiniteScroll;
	    }
	    forDevice(dynamicAdUnit, device) {
	        return dynamicAdUnit.devices.indexOf(device) !== -1;
	    }
	    forPage(dynamicAdUnit) {
	        return dynamicAdUnit.pageSelector.length === 0 || document.querySelector(dynamicAdUnit.pageSelector) !== null;
	    }
	    locationEnabled(dynamicAdUnit) {
	        return !this._config.disableAds.locations.has(dynamicAdUnit.location) && !this._config.disableAds.all;
	    }
	};
	InfiniteScrollDynamicAdsComponent = __decorate([
	    log('InfiniteScrollDynamicAdsComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        InfiniteScrollEvents,
	        InfiniteScrollDynamicAdsInjector,
	        SlotManager,
	        GoogleAdManager])
	], InfiniteScrollDynamicAdsComponent);

	let InfiniteScrollRefreshComponent = class InfiniteScrollRefreshComponent extends Component {
	    constructor(_config, _events, _slotManager, _slots) {
	        super();
	        this._config = _config;
	        this._events = _events;
	        this._slotManager = _slotManager;
	        this._slots = _slots;
	        this._debounce = new DebounceByKey(1000);
	    }
	    start() {
	        this._observer = this.getIntersectionObserver();
	        this._events.contentAdded.on(element => {
	            if (this._observer) {
	                this._observer.observe(element);
	            }
	        });
	    }
	    getIntersectionObserver() {
	        return new IntersectionObserver((entries) => {
	            for (const entry of entries) {
	                logger.info('InfiniteScrollRefreshComponent', 'getIntersectionObserver', entry);
	                if (entry.intersectionRatio > 0 && entry.isIntersecting) {
	                    this._debounce
	                        .limit(entry.target.id)
	                        .then(() => this.refresh())
	                        .catch(reason => {
	                        logger.error('InfiniteScrollRefreshComponent', 'getIntersectionObserver', 'refresh', reason);
	                    });
	                }
	            }
	        }, {
	            threshold: [0.08],
	        });
	    }
	    refresh() {
	        if (this._config.adOptions.infiniteScrollRefresh) {
	            const slots = this._slots.get().filter(slot => this._config.infiniteScroll.refreshSlots.has(slot.location) && slot.isSticky);
	            this._slotManager.refresh(slots).catch(reason => {
	                logger.error('InfiniteScrollRefreshComponent', 'refresh', reason);
	            });
	        }
	    }
	    get enabled() {
	        return this._config.adOptions.infiniteScroll && 'IntersectionObserver' in window;
	    }
	};
	InfiniteScrollRefreshComponent = __decorate([
	    log('InfiniteScrollRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, InfiniteScrollEvents, SlotManager, Slots])
	], InfiniteScrollRefreshComponent);

	let AlwaysInViewComponent = class AlwaysInViewComponent extends Component {
	    constructor(_googleAdManager) {
	        super();
	        this._googleAdManager = _googleAdManager;
	    }
	    init() {
	        this._googleAdManager.slotRenderEnded.on(({ slot }) => {
	            this.slotRenderEnded(slot);
	        });
	    }
	    slotRenderEnded(slot) {
	        slot.alwaysInView = slot.location === 'Footer' || slot.location === 'Video_StickyOutstream';
	    }
	};
	AlwaysInViewComponent = __decorate([
	    log('AlwaysInViewComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager])
	], AlwaysInViewComponent);

	let ChangeSlotRefreshComponent = class ChangeSlotRefreshComponent extends Component {
	    constructor(_slotManager) {
	        super();
	        this._slotManager = _slotManager;
	        const messageListener = (evt) => {
	            const isValidEventMessage = evt && evt.data && evt.data.message === 'set_adthrive_slot_timeout' && evt.data.slot_id && evt.data.refresh_interval >= 0;
	            if (isValidEventMessage) {
	                this._slotManager.updateRefreshTimeout(evt.data.slot_id, evt.data.refresh_interval);
	            }
	        };
	        window.addEventListener('message', messageListener, false);
	    }
	};
	ChangeSlotRefreshComponent = __decorate([
	    log('ChangeSlotRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager])
	], ChangeSlotRefreshComponent);

	let DocumentHiddenPauseRefreshComponent = class DocumentHiddenPauseRefreshComponent extends Component {
	    constructor(_slotManager, _slots, _pageManager) {
	        super();
	        this._slotManager = _slotManager;
	        this._slots = _slots;
	        this._pageManager = _pageManager;
	    }
	    init() {
	        this._pageManager.visibilityChange.on(() => this.documentVisibilityChanged());
	    }
	    documentVisibilityChanged() {
	        const visibilityState = document.visibilityState;
	        logger.info('ViewableRefreshComponent', 'documentVisibilityChanged', `Document Visibility Changed to ${visibilityState}`);
	        const slots = this._slots.get();
	        if (visibilityState === 'visible') {
	            this._slotManager.resumeRefresh(slots);
	        }
	        else if (visibilityState === 'hidden') {
	            this._slotManager.pauseRefresh(slots);
	        }
	    }
	};
	DocumentHiddenPauseRefreshComponent = __decorate([
	    log('DocumentHiddenPauseRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [SlotManager, Slots, PageManager])
	], DocumentHiddenPauseRefreshComponent);

	let ImpressionViewableRefreshComponent = class ImpressionViewableRefreshComponent extends Component {
	    constructor(_googleAdManager, _slotManager) {
	        super();
	        this._googleAdManager = _googleAdManager;
	        this._slotManager = _slotManager;
	        this._inViewPercentage = 50;
	    }
	    init() {
	        this._googleAdManager.impressionViewable.on(({ slot }) => {
	            this.processImpressionViewable(slot);
	        });
	        this._googleAdManager.slotVisibilityChanged.on(({ slot, event }) => {
	            this.processVisibilityChanged(slot, event);
	        });
	    }
	    processImpressionViewable(slot) {
	        slot.outOfViewGPT = false;
	        this._slotManager.inView(slot);
	    }
	    processVisibilityChanged(slot, event) {
	        this.check(slot, event.inViewPercentage);
	    }
	    check(slot, inViewPercentage) {
	        if ((inViewPercentage && inViewPercentage >= this._inViewPercentage) || slot.location === 'Video_StickyOutstream') {
	            slot.outOfViewGPT = false;
	            this._slotManager.inView(slot);
	        }
	        else {
	            slot.outOfViewGPT = true;
	            this._slotManager.outOfView(slot);
	        }
	    }
	};
	ImpressionViewableRefreshComponent = __decorate([
	    log('ImpressionViewableRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, SlotManager])
	], ImpressionViewableRefreshComponent);

	let IntersectionObserverRefreshComponent = class IntersectionObserverRefreshComponent extends Component {
	    constructor(_googleAdManager, _slotManager, _slots) {
	        super();
	        this._googleAdManager = _googleAdManager;
	        this._slotManager = _slotManager;
	        this._slots = _slots;
	        this._inViewPercentage = 50;
	    }
	    init() {
	        this._observer = this.getIntersectionObserver();
	        this._googleAdManager.slotRenderEnded.on(({ slot }) => {
	            this.slotRenderEnded(slot);
	        });
	        this._slotManager.refreshing.on(slots => {
	            this.refreshing(slots);
	        });
	    }
	    get enabled() {
	        return 'IntersectionObserver' in window;
	    }
	    slotRenderEnded(slot) {
	        if (this._observer && slot.element) {
	            this._observer.observe(slot.element);
	        }
	    }
	    refreshing(slots) {
	        if (this._observer) {
	            for (const slot of slots) {
	                if (slot.element) {
	                    this._observer.unobserve(slot.element);
	                }
	            }
	        }
	    }
	    getIntersectionObserver() {
	        return new IntersectionObserver((entries) => {
	            for (const entry of entries) {
	                const slot = this._slots.get(entry.target.id);
	                if (slot) {
	                    this.check(slot, entry.intersectionRatio * 100);
	                }
	            }
	        }, { threshold: [0, this._inViewPercentage / 100] });
	    }
	    check(slot, inViewPercentage) {
	        if (inViewPercentage >= this._inViewPercentage || slot.location === 'Video_StickyOutstream') {
	            slot.outOfViewIO = false;
	            this._slotManager.inView(slot);
	        }
	        else {
	            slot.outOfViewIO = true;
	            this._slotManager.outOfView(slot);
	        }
	    }
	};
	IntersectionObserverRefreshComponent = __decorate([
	    log('IntersectionObserverRefreshComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, SlotManager, Slots])
	], IntersectionObserverRefreshComponent);

	let ComscoreTrackerComponent = class ComscoreTrackerComponent extends Component {
	    constructor(_config, _gdprEvents) {
	        super();
	        this._config = _config;
	        this._gdprEvents = _gdprEvents;
	        this._comscoreId = '20567959';
	        this._gdprEnabled = false;
	        this._gdprEnabled = this._config.gdpr.enabled;
	    }
	    init() {
	        const consentParams = this._config.ccpa.comscoreParams || '0';
	        const comscoreData = { c1: '2', c2: this._comscoreId, ...((this._gdprEnabled || this._config.ccpa.required) && { cs_ucfr: consentParams }) };
	        window._comscore = window._comscore || [];
	        window._comscore.push(comscoreData);
	        const baseUrl = 'https://sb.scorecardresearch.com';
	        if (this._gdprEnabled) {
	            this._gdprEvents.consentCaptured.on(() => {
	                importScript(`${baseUrl}/cs/${this._comscoreId}/beacon.js`).catch(() => { });
	            });
	        }
	        else {
	            return importScript(`${baseUrl}/beacon.js`);
	        }
	    }
	    get enabled() {
	        return true;
	    }
	};
	ComscoreTrackerComponent = __decorate([
	    log('ComscoreTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GDPREvents])
	], ComscoreTrackerComponent);

	let HawkeyeTrackerComponent = class HawkeyeTrackerComponent extends Component {
	    constructor(_gam, _config) {
	        super();
	        this._gam = _gam;
	        this._config = _config;
	        this._trackerHoldoutKey = 'hawk';
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.import())
	            .then(() => this.syncData())
	            .catch(err => logger.error('HawkeyeTrackerComponent', 'init', 'slotOnload', err));
	    }
	    get enabled() {
	        return this._config.tkho.tracker !== this._trackerHoldoutKey;
	    }
	    async import() {
	        const url = 'https://pghub.io/js/pandg-sdk.js';
	        return await importScript(url, true);
	    }
	    syncData() {
	        const metadata = {
	            ccpa: this._config.ccpa.privacyString ? this._config.ccpa.privacyString : null,
	            bp_id: 'cafemedia',
	        };
	        const config = {
	            name: 'P&G',
	            pixelUrl: 'https://pandg.tapad.com/tag',
	        };
	        const tagger = window.Tapad.init(metadata, config);
	        tagger.sync({}).then((data) => logger.info('HawkeyeTrackerComponent', 'sync', JSON.stringify(data)));
	    }
	};
	HawkeyeTrackerComponent = __decorate([
	    log('HawkeyeTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager, Config])
	], HawkeyeTrackerComponent);

	let LiveRampAtsTrackerComponent = class LiveRampAtsTrackerComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._trackerHoldoutKey = 'ats';
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.import())
	            .catch(err => logger.error('LiveRampAtsTrackerComponent', 'init', err));
	    }
	    get enabled() {
	        return this._config.liveRampAts.enabled && !this._config.disableAds.all && this._config.tkho.tracker !== this._trackerHoldoutKey;
	    }
	    import() {
	        importScript(this._config.liveRampAts._url)
	            .then(() => window.ats.start(this._config.liveRampAts._config))
	            .catch(() => { });
	    }
	};
	LiveRampAtsTrackerComponent = __decorate([
	    log('LiveRampAtsTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], LiveRampAtsTrackerComponent);

	let MerkleTrackerComponent = class MerkleTrackerComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this.ptk = '17c1789b-e660-493b-aa74-3c8fb990dc5f';
	        this.pubid = 'CAFEMEDIA';
	        this.merkleStorageKey = 'IXWRAPPERMerkleIp';
	    }
	    init() {
	        if (window.localStorage.getItem(`${this.merkleStorageKey}`)) {
	            this.spoof();
	        }
	        else {
	            this._gam.slotOnload
	                .once()
	                .then(() => {
	                this.load()
	                    .then(response => {
	                    if (!(response instanceof Error) && Object.keys(response).length) {
	                        window.localStorage.setItem(`${this.merkleStorageKey}`, encodeURIComponent(JSON.stringify(response)));
	                        this.spoof();
	                    }
	                })
	                    .catch(() => { });
	            })
	                .catch(() => { });
	        }
	    }
	    async load() {
	        const url = `https://mid.rkdms.com/idsv2?ptk=${this.ptk}&pubid=${this.pubid}`;
	        return new Promise((resolve, reject) => {
	            const request = new XMLHttpRequest();
	            request.open('get', url);
	            request.withCredentials = true;
	            request.addEventListener('load', () => {
	                if (request.status !== 200) {
	                    return reject(new Error(`Error status: ${request.status} response: ${request.responseText}`));
	                }
	                return resolve(JSON.parse(request.responseText));
	            });
	            request.addEventListener('error', () => {
	                return reject(new Error('Request failed'));
	            });
	            request.send();
	        });
	    }
	    spoof() {
	        if (!window.headertag) {
	            window.headertag = {
	                getIdentityInfo: () => {
	                    var _a;
	                    const unifiedData = JSON.parse(decodeURIComponent(window.localStorage.getItem('pbjs-unifiedid') || ''));
	                    const merkleData = JSON.parse(decodeURIComponent(window.localStorage.getItem(`${this.merkleStorageKey}`) || '{}'));
	                    return {
	                        AdserverOrgIp: {
	                            data: {
	                                source: 'adserver.org',
	                                uids: Object.keys(unifiedData).map(name => {
	                                    return {
	                                        id: unifiedData[name],
	                                        ext: {
	                                            rtiPartner: name,
	                                        },
	                                    };
	                                }),
	                            },
	                            responsePending: false,
	                        },
	                        MerkleIp: {
	                            data: {
	                                source: 'merkleinc.com',
	                                uids: [
	                                    {
	                                        id: (_a = merkleData === null || merkleData === void 0 ? void 0 : merkleData.ppid) === null || _a === void 0 ? void 0 : _a.id,
	                                        ext: {
	                                            enc: 0,
	                                        },
	                                    },
	                                ],
	                            },
	                            responsePending: false,
	                        },
	                    };
	                },
	            };
	        }
	    }
	    get enabled() {
	        return !this._config.gdpr.enabled && !this._config.ccpa.enabled;
	    }
	};
	MerkleTrackerComponent = __decorate([
	    log('MerkleTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], MerkleTrackerComponent);

	let NielsenTrackerExperiment = class NielsenTrackerExperiment extends Experiment {
	    constructor() {
	        super();
	        this._result = false;
	        this.key = 'NielsenTrackerExperiment';
	        this._choices = [{ choice: true }, { choice: false }];
	        if (isChrome()) {
	            this._result = this.run();
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(1 / 300).get();
	    }
	};
	NielsenTrackerExperiment = __decorate([
	    log('NielsenTrackerExperiment'),
	    injectable(),
	    __metadata("design:paramtypes", [])
	], NielsenTrackerExperiment);

	let NielsenTrackerComponent = class NielsenTrackerComponent extends Component {
	    constructor(_config, _nielsenTrackerExperiment, _gam) {
	        super();
	        this._config = _config;
	        this._nielsenTrackerExperiment = _nielsenTrackerExperiment;
	        this._gam = _gam;
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.loadImage())
	            .catch(reason => {
	            logger.error('NielsenTrackerComponent', 'init', reason);
	        });
	    }
	    get enabled() {
	        return this._nielsenTrackerExperiment.result;
	    }
	    loadImage() {
	        const device = this._config.context.device;
	        let base = 'https://secure-gl.imrworldwide.com/cgi-bin/m?am=3&at=view&rt=banner&st=image&cr=adthrive&ce=cafemedia';
	        const ciParam = 'nlsnci542';
	        const campaignMap = {
	            phone: 'nlsn290957',
	            tablet: 'nlsn291137',
	            desktop: 'nlsn291136',
	        };
	        let campaign = campaignMap[device];
	        const pintAndInstaCampaignMap = {
	            phone: 'nlsn287186',
	            tablet: 'nlsn287188',
	            desktop: 'nlsn287187',
	        };
	        const referrer = getReferrer();
	        if (referrer && (referrer.toLowerCase().indexOf('instagram.com') >= 0 || referrer.toLowerCase().indexOf('pinterest.com') >= 0)) {
	            campaign = pintAndInstaCampaignMap[device];
	        }
	        base = base + `&ci=${ciParam}&ca=${campaign}&pc=${window.location.host}&r=${Date.now()}`;
	        new Image().src = `${base}`;
	    }
	};
	NielsenTrackerComponent = __decorate([
	    log('NielsenTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [Config, NielsenTrackerExperiment, GoogleAdManager])
	], NielsenTrackerComponent);

	let TargetRewriteTrackerComponent = class TargetRewriteTrackerComponent extends Component {
	    constructor(_config, _gam) {
	        super();
	        this._config = _config;
	        this._gam = _gam;
	        this._accountId = '2773249';
	        this._adId = '81938';
	        this._configId = '2092';
	        this._affDomain = 'goto.target.com';
	        this._targetDomain = 'www.target.com';
	        this._commonParams = '';
	        this._commonPath = '';
	        this._trackerHoldoutKey = 'tgtaff';
	        this._commonParams = createQueryString({
	            subid1: this._config.site.id,
	            subid2: location.href,
	            sharedid: this._config.site.name,
	        });
	        this._commonPath = `${this._accountId}/${this._adId}/${this._configId}`;
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.rewriteAllTargetLinksOnPage())
	            .catch(err => logger.error('TargetRewriteTrackerComponent', 'getAllTargetLinksOnPage', err));
	    }
	    rewriteAllTargetLinksOnPage() {
	        let rewriteCount = 0;
	        const anchors = Array.prototype.map.call(document.querySelectorAll(`a[href*="${this._targetDomain}"]`), (anchor) => {
	            return anchor;
	        });
	        anchors
	            .filter(anchor => this.isTargetLink(anchor))
	            .forEach(anchor => {
	            logger.info('TargetRewriteTrackerComponent', 'Target Link Found!', anchor.href);
	            this.fireImpression(anchor.href);
	            this.replaceTargetLink(anchor);
	            rewriteCount++;
	        });
	        if (rewriteCount) {
	            logger.event('TargetRewriteTrackerComponent', 'logTargetRewrite', {
	                message: 'targetRewrite',
	                countRewrite: rewriteCount,
	            });
	        }
	    }
	    fireImpression(anchorHref) {
	        const impPixel = this.getImpressionPixel(anchorHref);
	        logger.info('TargetRewriteTrackerComponent', 'fireImpression', impPixel);
	        return (new Image().src = impPixel);
	    }
	    getImpressionPixel(anchorHref) {
	        let url = `https://${this._affDomain}/i/${this._commonPath}?`;
	        const ir = `U1|${this.getUUID()}`;
	        url += `_ir=${encodeURIComponent(ir)}` + '&' + this._commonParams + '&subid3=' + encodeURIComponent(anchorHref);
	        const hrefParts = anchorHref.split('?');
	        if (hrefParts.length > 1) {
	            url += '&' + hrefParts[1];
	        }
	        return url;
	    }
	    getUUID() {
	        return new Date().getTime().toString() + '.' + Math.random().toString(36).substring(2, 15);
	    }
	    replaceTargetLink(anchor) {
	        const urlEncoded = encodeURIComponent(anchor.href);
	        const anchorClasses = ['noskimlinks', 'norewrite'];
	        anchor.classList.add(...anchorClasses);
	        anchor.href = `https://${this._affDomain}/c/${this._commonPath}?${this._commonParams}&subid3=${urlEncoded}&u=${urlEncoded}`;
	        logger.info('TargetRewriteTrackerComponent', 'replaceTargetLink', anchor.href);
	    }
	    isTargetLink(anchor) {
	        const domain = this.extractDomain(anchor.href);
	        return domain && domain.indexOf(this._affDomain) === -1;
	    }
	    extractDomain(url) {
	        const matches = /^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i.exec(url);
	        return (matches && matches[1]) || '';
	    }
	    get enabled() {
	        return this._config.tkho.tracker !== this._trackerHoldoutKey && !this._config.ccpa.enabled && this._config.adOptions.targetAff;
	    }
	};
	TargetRewriteTrackerComponent = __decorate([
	    injectable(),
	    __metadata("design:paramtypes", [Config, GoogleAdManager])
	], TargetRewriteTrackerComponent);

	let TheTradeDeskTrackerComponent = class TheTradeDeskTrackerComponent extends Component {
	    constructor(_gam) {
	        super();
	        this._gam = _gam;
	    }
	    init() {
	        this._gam.slotOnload
	            .once()
	            .then(() => this.loadImage())
	            .catch(err => logger.error('TheTradeDeskTrackerComponent', 'init', err));
	    }
	    get enabled() {
	        return true;
	    }
	    loadImage() {
	        const base = 'https://insight.adsrvr.org/track/evnt/?adv=z127r4i&ct=0:p21aj7j&fmt=3';
	        new Image().src = `${base}`;
	    }
	};
	TheTradeDeskTrackerComponent = __decorate([
	    log('TheTradeDeskTrackerComponent'),
	    injectable(),
	    __metadata("design:paramtypes", [GoogleAdManager])
	], TheTradeDeskTrackerComponent);

	let Components = class Components {
	    constructor(_config, adDensityComponent, adTestComponent, alwaysInViewComponent, brandMetricsComponent, bodyDeviceClassComponent, ccpaComponent, changeSlotRefreshComponent, closeButtonComponent, comscoreComponent, comscoreTrackerComponent, configTargetingComponent, confirmedClicksComponent, confiantComponent, declaredRefreshComponent, documentHiddenPauseRefreshComponent, dynamicAdsComponent, impressionLogComponent, externalSlotsComponent, firstPageviewComponent, firstPartyDataComponent, floorsComponent, footerComponent, googleLazyLoadComponent, gumGumInScreenComponent, identityAPI, hawkeyeTrackerComponent, hvpComponent, impressionViewableRefreshComponent, infiniteScrollDetectionComponent, infiniteScrollDynamicAdsComponent, infiniteScrollRefreshComponent, intersectionObserverRefreshComponent, layoutShiftComponent, lazyLoadComponent, liveRampAtsTrackerComponent, marmaladeComponent, merkleTrackerComponent, nielsenTrackerComponent, piiCaptureComponent, refreshCountComponent, refreshRebuildComponent, siteStyleComponent, stickyComponent, targetRewriteTrackerComponent, theTradeDeskTrackerComponent, trafficSourceComponent, userPageDataLoggingComponent, userIdComponent, utmComponent, videoManagerComponent, webVitalsComponent) {
	        this._config = _config;
	        this._components = [
	            adDensityComponent,
	            adTestComponent,
	            alwaysInViewComponent,
	            brandMetricsComponent,
	            bodyDeviceClassComponent,
	            ccpaComponent,
	            changeSlotRefreshComponent,
	            closeButtonComponent,
	            comscoreComponent,
	            comscoreTrackerComponent,
	            configTargetingComponent,
	            confirmedClicksComponent,
	            confiantComponent,
	            declaredRefreshComponent,
	            documentHiddenPauseRefreshComponent,
	            dynamicAdsComponent,
	            impressionLogComponent,
	            externalSlotsComponent,
	            firstPageviewComponent,
	            firstPartyDataComponent,
	            floorsComponent,
	            footerComponent,
	            googleLazyLoadComponent,
	            gumGumInScreenComponent,
	            hawkeyeTrackerComponent,
	            hvpComponent,
	            identityAPI,
	            impressionViewableRefreshComponent,
	            infiniteScrollDetectionComponent,
	            infiniteScrollDynamicAdsComponent,
	            infiniteScrollRefreshComponent,
	            intersectionObserverRefreshComponent,
	            liveRampAtsTrackerComponent,
	            layoutShiftComponent,
	            lazyLoadComponent,
	            marmaladeComponent,
	            merkleTrackerComponent,
	            nielsenTrackerComponent,
	            piiCaptureComponent,
	            refreshCountComponent,
	            refreshRebuildComponent,
	            siteStyleComponent,
	            stickyComponent,
	            targetRewriteTrackerComponent,
	            theTradeDeskTrackerComponent,
	            trafficSourceComponent,
	            userIdComponent,
	            userPageDataLoggingComponent,
	            utmComponent,
	            videoManagerComponent,
	            webVitalsComponent,
	        ];
	        this._nonCCPAComponents = [
	            impressionLogComponent,
	            merkleTrackerComponent,
	            nielsenTrackerComponent,
	            theTradeDeskTrackerComponent,
	            userIdComponent,
	        ];
	    }
	    init() {
	        const ccpa = this._config.ccpa;
	        this._components
	            .filter(component => !ccpa.enabled || (ccpa.enabled && this._nonCCPAComponents.indexOf(component) === -1))
	            .forEach(component => component.init !== undefined && component.enabled && component.init());
	    }
	    start() {
	        this._components.forEach(component => component.start !== undefined && component.enabled && component.start());
	    }
	};
	Components = __decorate([
	    log('Components'),
	    injectable(),
	    __metadata("design:paramtypes", [Config,
	        AdDensityComponent,
	        AdTestComponent,
	        AlwaysInViewComponent,
	        BrandMetricsComponent,
	        BodyDeviceClassComponent,
	        CCPAComponent,
	        ChangeSlotRefreshComponent,
	        CloseButtonComponent,
	        ComscoreComponent,
	        ComscoreTrackerComponent,
	        ConfigTargetingComponent,
	        ConfirmedClicksComponent,
	        ConfiantComponent,
	        DeclaredRefreshComponent,
	        DocumentHiddenPauseRefreshComponent,
	        DynamicAdsComponent,
	        ImpressionLogComponent,
	        ExternalSlotsComponent,
	        FirstPageviewComponent,
	        FirstPartyDataComponent,
	        FloorsComponent,
	        FooterComponent,
	        GoogleLazyLoadComponent,
	        GumGumInScreenComponent,
	        IdentityAPI,
	        HawkeyeTrackerComponent,
	        HvpComponent,
	        ImpressionViewableRefreshComponent,
	        InfiniteScrollDetectionComponent,
	        InfiniteScrollDynamicAdsComponent,
	        InfiniteScrollRefreshComponent,
	        IntersectionObserverRefreshComponent,
	        LayoutShiftComponent,
	        LazyLoadComponent,
	        LiveRampAtsTrackerComponent,
	        MarmaladeComponent,
	        MerkleTrackerComponent,
	        NielsenTrackerComponent,
	        PiiCaptureComponent,
	        RefreshCountComponent,
	        RefreshRebuildComponent,
	        SiteStyleComponent,
	        StickyComponent,
	        TargetRewriteTrackerComponent,
	        TheTradeDeskTrackerComponent,
	        TrafficSourceComponent,
	        UserPageDataLoggingComponent,
	        UserIdComponent,
	        UTMComponent,
	        VideoManagerComponent,
	        WebVitalsComponent])
	], Components);

	var css_248z = ".adthrive-ad{margin-top:10px;margin-bottom:10px;text-align:center;overflow-x:visible;clear:both;line-height:0}.jw-flag-small-player #next-stay-container{margin:0}.jw-flag-small-player #next-video,.jw-flag-small-player #stay-video{width:75px;height:30px;line-height:30px}#next-stay-container{bottom:25%;right:0;margin:12px;position:absolute}#next-video,#stay-video{box-shadow:0 0 10px rgba(0,0,0,.5);opacity:.9;width:100px;height:40px;line-height:40px;text-align:center;cursor:pointer;background-color:#333;color:#fff;margin:10px}#next-video{box-shadow:inset 0 0 0 0 #333;transition:box-shadow 5s linear}#next-stay-container.loaded #next-video{box-shadow:inset 100px 0 0 0 red}.adthrive-ad-cls{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.adthrive-ad-cls>div,.adthrive-ad-cls>iframe{flex-basis:100%}.adthrive-interstitial{margin-top:0;margin-bottom:0}.adthrive-native-recipe{display:inline-block}.adthrive-stuck.adthrive-sticky.adthrive-header,.adthrive-stuck.adthrive-sticky.adthrive-sidebar{position:fixed;top:0;z-index:9999}.adthrive-stuck.adthrive-header{margin-top:0}.adthrive-sticky.adthrive-footer{text-align:center;margin:0;width:100%;overflow:hidden;position:fixed;left:0;bottom:0;z-index:99999;background-color:hsla(0,0%,100%,.8);border-top:2px solid hsla(0,0%,88.2%,.8)}.adthrive-sticky.adthrive-footer>.adthrive-close{cursor:pointer;color:#b2b2b2;border:1px solid #b2b2b2;border-radius:20px;background:#fff;line-height:20px;display:inline-block;font-size:20px;font-family:arial,sans-serif;padding:0 5px;position:absolute;top:5px;right:5px}.adthrive-device-desktop .adthrive-sticky.adthrive-footer>.adthrive-close{top:10px;right:10px}#_inv_voicefive___{display:none}.adthrive-ccpa-link,.adthrive-footer-message,.adthrive-privacy-preferences{text-align:center;margin-top:5px}.adthrive-ccpa-link,.adthrive-ccpa-link span,.adthrive-footer-message span,.adthrive-privacy-preferences a{font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:13px;color:#b2b2b2}.adthrive-ccpa-link a{text-decoration:underline;cursor:pointer}.adthrive-device-phone .adthrive-footer-message{margin-bottom:60px}.adthrive-footer-message{margin-bottom:100px}.adthrive-footer-message>span{text-transform:uppercase;border-top:1px solid #b2b2b2;padding-top:5px}.adthrive-collapse-player{width:90%;border-top:1px solid #dbdbdb;border-bottom:1px solid #dbdbdb;padding:8px!important;margin-left:auto;margin-right:auto}.adthrive-player-position.adthrive-collapse-float{position:fixed;width:300px;z-index:2147483644}h3.adthrive-player-title{margin:10px 0}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-right{top:0;right:5px}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-right{bottom:100px;right:5px}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-left{bottom:100px;left:5px}.adthrive-player-position.adthrive-collapse-float>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-sticky{padding-top:20px;padding-bottom:20px;position:fixed;z-index:9999}.adthrive-player-position.adthrive-collapse-sticky>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-mobile{position:fixed;width:300px;z-index:99998}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-medium,.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-small{width:272px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-right{top:26px;right:10px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-left{top:26px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-left{bottom:52px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-right{bottom:52px;right:10px}.adthrive-player-position.adthrive-collapse-mobile>.adthrive-player-title{display:none}.adthrive-sekindo-mobile-center{display:flex;flex-direction:row;justify-content:center;text-align:center}.adthrive-wrapper-close{margin-left:auto;margin-right:0;height:36px;min-width:36px;justify-content:center;align-items:center;font-size:36px;color:#fff}.adthrive-wrapper-float-close{float:right;display:none;margin-bottom:5px;cursor:pointer}.adthrive-wrapper-bar{display:none;background-color:#595959;font-family:Arial,Helvetica,sans-serif;border-top-left-radius:5px;border-top-right-radius:5px;height:36px}.adthrive-video-title{font-size:13px;font-weight:700;text-decoration:none;color:#fff}.adthrive-wrapper-title-wrapper{display:inline-flex;min-width:0;margin-left:10px;margin-right:10px;justify-content:center;align-items:center}.adthrive-video-text-cutoff{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;color:#fff}.adthrive-wrapper-title-wrapper>a>svg,.adthrive-wrapper-title-wrapper>div>svg{vertical-align:middle;fill:#fff;margin-right:5px}.adthrive-wrapper-title-wrapper>a{text-decoration:none}.adthrive-sticky-outstream{padding-top:20px;position:fixed;z-index:2147483644;display:none;overflow:hidden}.adthrive-instream-close{pointer-events:all}.adthrive-instream-close.adthrive-float-left{float:left}.adthrive-top-left-outer{position:absolute;top:-20px}.adthrive-top-left-inner{position:absolute;top:0}.adthrive-top-left-inner-wrapper.adthrive-wrapper-float-close,.adthrive-top-left-inner.adthrive-wrapper-float-close{padding:2px;color:#fff;background:rgba(0,0,0,.5);pointer-events:none;z-index:99;width:100%}.adthrive-top-left-inner-wrapper.adthrive-wrapper-float-close{position:absolute;top:36px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close{position:absolute;top:32px;right:1px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-outside-left{left:2px}.adthrive-wrapper-close-bkgd-50>#adthrive-sticky-outstream-close{padding:2px 0 0 2px;pointer-events:all}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-bkgd-50{top:52px;left:0;padding:2px;color:#fff;background:rgba(0,0,0,.5);pointer-events:none}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile{bottom:52px;right:10px}.adthrive-sticky-outstream.adthrive-sticky-outstream-desktop{bottom:100px;right:5px}.adthrive-sticky-outstream.adthrive-sticky-outstream-active{display:block}.adthrive-video-stickyoutstream div:first-of-type{margin:-1px}";
	styleInject(css_248z);

	let AdThrive = class AdThrive {
	    constructor(config, cmd, slotManager, slots, _auctionManagers, _googleAdManager, _components) {
	        this.config = config;
	        this.cmd = cmd;
	        this.slotManager = slotManager;
	        this.slots = slots;
	        this._auctionManagers = _auctionManagers;
	        this._googleAdManager = _googleAdManager;
	        this._components = _components;
	        this.marmalade = {
	            mcmp: null,
	        };
	        this.marmaladeFinished = (data) => data;
	        this.siteAds = {
	            targeting: {
	                push: this._googleAdManager.setTargeting,
	            },
	        };
	        this._apiReady = new Promise(resolve => resolve(false));
	        this.bucket = this.config.context.bucket;
	        this.branch = this.config.context.branch;
	        this.invalidTraffic = this.config.context.invalidTraffic;
	        this.deployment = this.config.context.deployment;
	        this.abgroup = this.config.abGroup.groups;
	    }
	    init() {
	        this._apiReady = new Promise(resolve => this.config.identityApi.apiReady.on(() => resolve(true)));
	        logger.sending.on(() => {
	            logger.data = {
	                abgroup: this.config.abGroup.groupsAsObject,
	                sess: this.config.context.sessionKey,
	                pvk: this.config.context.pageviewKey,
	                hbho: this.config.hbho.bidders,
	                vbho: this.config.vbho.bidders,
	                ...(this.config.clsOptions &&
	                    this.config.clsOptions.branch && {
	                    clsBranch: this.config.clsOptions.branch,
	                }),
	                ...(this.config.clsOptions &&
	                    this.config.clsOptions.bucket && {
	                    clsBucket: this.config.clsOptions.bucket,
	                }),
	            };
	        });
	        setSessionValue('session_fpv', getSessionValue('session_fpv') === null ? true : false);
	        this.cmd.init();
	        this._auctionManagers.init();
	        this._googleAdManager.init();
	        this._components.init();
	        this._googleAdManager.start();
	        this._components.start();
	    }
	    identityApi(data, cb) {
	        return this._apiReady.then(() => {
	            this.config.identityApi.optIn.emit({ data, cb }).catch(() => { });
	        });
	    }
	    disableAds(patterns) {
	        this.config.disableAds.disableAllAds(patterns);
	    }
	    disableContentAds(patterns) {
	        this.config.disableAds.disableContentAds(patterns);
	    }
	    disablePlaylistPlayers(patterns) {
	        this.config.disableAds.disablePlaylistPlayers(patterns);
	    }
	    showPrivacyPreferences() {
	        if (window.__tcfapi) {
	            window.__tcfapi('showConsentManager', 2);
	        }
	    }
	    getConsentData() {
	        if (window.__tcfapi) {
	            window.__tcfapi('getFullTCData', 2, tcData => {
	                logger.info('AdThrive', 'getConsentData', 'tcData', tcData);
	            });
	        }
	    }
	    getAdthriveFlippData() {
	        return this.config.marmalade.flpProdIds.filter(filterUnique);
	    }
	    setTargetingFlag(flagKey, flagVals, overwrite = false) {
	        if (!flagKey || typeof flagKey !== 'string' || !flagVals || !Array.isArray(flagVals) || flagVals.length === 0) {
	            logger.warn('AdThrive', 'setTargetingFlag', 'Missing flag targeting key and/or values');
	            return;
	        }
	        this._googleAdManager.setTargetingFlag(flagKey, flagVals, overwrite);
	    }
	    setTargeting(targeting) {
	        this._googleAdManager.setTargeting(targeting);
	    }
	    getTargeting() {
	        return this._googleAdManager.getTargeting();
	    }
	    getTargetingMap() {
	        return this._googleAdManager.getTargetingMap();
	    }
	    logError(className, methodName, args) {
	        logger.error(className, methodName, args);
	    }
	    refreshSlots(slotIds) {
	        let slots = this.slots.get();
	        if (slotIds && slotIds.length) {
	            slots = slots.filter(slot => slotIds.indexOf(slot.id) !== -1);
	        }
	        slots.forEach(slot => {
	            this.slotManager
	                .refresh(slot, false)
	                .then(() => {
	                this.slotManager.clearRefreshTimeout(slot, true);
	            })
	                .catch(() => { });
	        });
	    }
	};
	AdThrive = __decorate([
	    log('AdThrive'),
	    singleton(),
	    __metadata("design:paramtypes", [Config,
	        CommandQueue,
	        SlotManager,
	        Slots,
	        AuctionManagers,
	        GoogleAdManager,
	        Components])
	], AdThrive);

	const build = {
	    domain: 'ads.adthrive.com',
	    branch: 'master',
	    bucket: 'prod',
	    cmp: true,
	};

	let DelayLoadingExperiment = class DelayLoadingExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._setAbGroup = true;
	        this._choices = [
	            { choice: 500, weight: 10 },
	            { choice: 1000, weight: 10 },
	            { choice: 2000, weight: 10 },
	            { choice: 3000, weight: 70 },
	        ];
	        this.key = 'deftimer1';
	        this._result = this.run();
	        if (this._setAbGroup) {
	            abgroup.set(this.key, this._result === 0 ? 'off' : String(this._result));
	        }
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        if (navigator.userAgent &&
	            (navigator.userAgent.search(/GTmetrix/i) > -1 ||
	                navigator.userAgent.search(/pingdom/i) > -1 ||
	                navigator.userAgent.search(/Google Page Speed Insights/i) > -1)) {
	            this._setAbGroup = false;
	            return 0;
	        }
	        else {
	            return new WeightedChoice(this._choices).get();
	        }
	    }
	};
	__decorate([
	    sticky(),
	    __metadata("design:type", Function),
	    __metadata("design:paramtypes", []),
	    __metadata("design:returntype", Number)
	], DelayLoadingExperiment.prototype, "run", null);
	DelayLoadingExperiment = __decorate([
	    log('DelayLoadingExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], DelayLoadingExperiment);

	let EnableDelayLoadingExperiment = class EnableDelayLoadingExperiment extends Experiment {
	    constructor(abgroup) {
	        super();
	        this._choices = [{ choice: true }, { choice: false }];
	        this.key = 'delload';
	        this._result = this.run();
	        abgroup.set(this.key, this._result ? 'on' : 'off');
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0.95).get();
	    }
	};
	EnableDelayLoadingExperiment = __decorate([
	    log('EnableDelayLoadingExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [ABGroup])
	], EnableDelayLoadingExperiment);

	let LoggerFilterExperiment = class LoggerFilterExperiment extends Experiment {
	    constructor() {
	        super();
	        this.classList = ['EmailCaptureHandler'];
	        this._result = false;
	        this._choices = [{ choice: true }, { choice: false }];
	        this.key = 'logfltr';
	        this._result = this.run();
	    }
	    get result() {
	        return this._result;
	    }
	    run() {
	        return new BernoulliTrial(0).get();
	    }
	};
	LoggerFilterExperiment = __decorate([
	    log('LoggerFilterExperiment'),
	    singleton(),
	    __metadata("design:paramtypes", [])
	], LoggerFilterExperiment);

	let StubCmp = class StubCmp {
	    init(gdpr) {
	        const stubOnPage = window.__tcfapi !== undefined && typeof window.__tcfapi === 'function';
	        if (!stubOnPage) {
	            logger.info('StubCmp', 'init', 'Stub not found on page');
	            return;
	        }
	        let adthriveStub = false;
	        window.__tcfapi('adthrive', 2, result => (adthriveStub = result));
	        if (!adthriveStub) {
	            logger.info('StubCmp', 'init', 'Stub found on page but not verified by Adthrive');
	            return;
	        }
	        logger.info('StubCmp', 'init', 'Valid Stub Found');
	        if (gdpr === 'true') {
	            logger.info('StubCmp', 'init', 'Set GDPR applies to true');
	            window.__tcfapi('setGdprApplies', 2, res => res, true);
	        }
	        else {
	            this.clearQueue();
	            this.stubCommands();
	        }
	    }
	    processTcfCommand(tcfCommand) {
	        const { command, callback } = tcfCommand;
	        if (!callback || (callback && typeof callback !== 'function')) {
	            return;
	        }
	        if (command === 'ping' || command === 'getTCData' || command === 'addEventListener') {
	            callback({
	                apiVersion: '2',
	                cmpLoaded: true,
	                cmpStatus: 'loaded',
	                cmpId: undefined,
	                cmpVersion: undefined,
	                displayStatus: 'disabled',
	                gdprApplies: false,
	                tcfPolicyVersion: undefined,
	                gvlVersion: undefined,
	            }, true);
	        }
	        else if (command === 'removeEventListener') {
	            callback(true);
	        }
	    }
	    clearQueue() {
	        logger.info('StubCmp', 'init', 'Processing existing CMP queue');
	        const existingCommandQueue = window.__tcfapi();
	        if (existingCommandQueue && Array.isArray(existingCommandQueue)) {
	            existingCommandQueue.forEach(eventItem => this.processTcfCommand(eventItem));
	        }
	    }
	    stubCommands() {
	        logger.info('StubCmp', 'init', 'Handle incoming stub CMP commands');
	        window.__tcfapi = (command, version, callback, parameter) => {
	            this.processTcfCommand({ command, version, callback, parameter });
	        };
	    }
	};
	StubCmp = __decorate([
	    log('StubCmp'),
	    singleton()
	], StubCmp);

	const isLoaded = (instance) => {
	    return instance instanceof AdThrive || instance instanceof Promise;
	};
	const timing = instance.resolve(Timing);
	const setTimingProperties = (loading, bootstrapFinished, amazon, gam, marmalade, prebid, webvitals) => {
	    timing.loading = loading;
	    timing.bootstrapFinished = bootstrapFinished;
	    timing.amazonStarted = amazon.started;
	    timing.amazonFinished = amazon.finished;
	    timing.amazonDuration = amazon.duration;
	    timing.gamStarted = gam.started;
	    timing.gamFinished = gam.finished;
	    timing.gamDuration = gam.duration;
	    timing.marmaladeStarted = marmalade.started;
	    timing.marmaladeFinished = marmalade.finished;
	    timing.marmaladeDuration = marmalade.duration;
	    timing.prebidStarted = prebid.started;
	    timing.prebidFinished = prebid.finished;
	    timing.prebidDuration = prebid.duration;
	    timing.webVitalsStarted = webvitals.started;
	    timing.webVitalsFinished = webvitals.finished;
	    timing.webVitalsDuration = webvitals.duration;
	};
	const setupAdthrive = (loading, amazon, gam, marmalade, prebid, webvitals) => {
	    const bootstrapFinished = now$2();
	    instance.register('MarmaladeResponse', { useValue: marmalade.result });
	    window.adthrive = instance.resolve(AdThrive);
	    setTimingProperties(loading, bootstrapFinished, amazon, gam, marmalade, prebid, webvitals);
	    return window.adthrive.init();
	};
	const handleBootstrapReject = (error) => {
	    const marmalade = error.marmalade;
	    const errorMessage = error.message || error;
	    if (marmalade && Object.prototype.hasOwnProperty.call(marmalade, 'result')) {
	        instance.register('MarmaladeResponse', { useValue: marmalade.result });
	        const layoutShift = instance.resolve(LayoutShiftComponent);
	        layoutShift.init();
	    }
	    const webVitals = instance.resolve(WebVitalsComponent);
	    webVitals.init();
	    return Promise.reject(errorMessage);
	};
	const load = async (published) => {
	    var _a;
	    const loading = now$2();
	    const currentBranch = window.adthrive.branch;
	    const enabled = currentBranch === ((_a = getSessionValue('branch')) === null || _a === void 0 ? void 0 : _a.branch);
	    setSessionValue('branch', { branch: currentBranch, enabled });
	    logger.init(published);
	    instance.register('Build', { useValue: build });
	    instance.register('AdThrive', { useValue: published });
	    const bootstrap = instance.resolve(Bootstrap);
	    return await bootstrap
	        .run()
	        .then(({ amazon, gam, marmalade, prebid, webvitals }) => setupAdthrive(loading, amazon, gam, marmalade, prebid, webvitals))
	        .catch((error) => handleBootstrapReject(error));
	};
	const getBaseUrl = ({ gdpr, baseUrl }) => {
	    return gdpr === 'true' ? `${baseUrl}/gdpr` : baseUrl;
	};
	const inheritAdthriveCLS = () => {
	    const adthriveSiteAds = window.adthrive.siteAds;
	    const adthriveCLS = window.adthriveCLS;
	    const adthriveCLSSiteAds = adthriveCLS && adthriveCLS.siteAds;
	    if (adthriveCLSSiteAds && typeof adthriveCLSSiteAds === 'object') {
	        adthriveSiteAds.adUnits = adthriveCLSSiteAds.adUnits;
	        adthriveSiteAds.video = adthriveCLSSiteAds.video;
	        adthriveSiteAds.videoPlayers = adthriveCLSSiteAds.videoPlayers;
	        adthriveSiteAds.breakpoints = adthriveCLSSiteAds.breakpoints;
	    }
	};
	const delayLoadEventListeners = (delayExperimentResult) => {
	    const pageManager = instance.resolve(PageManager);
	    const setupOnceEventWithPromise = pageManager.setupOnceEventWithPromise;
	    const defaultEvents = [setupOnceEventWithPromise('scroll'), setupOnceEventWithPromise('mousemove'), setupOnceEventWithPromise('keyup')];
	    const loadEvent = [setupOnceEventWithPromise('load').then(() => delay(delayExperimentResult))];
	    return delayExperimentResult === 0 ? defaultEvents : loadEvent.concat(defaultEvents);
	};
	const handleDelayLoadingExperiment = (published) => {
	    let ready;
	    const enableDelayLoadingExperiment = published.siteAds.adOptions.delayLoading === true
	        ? instance.resolve(EnableDelayLoadingExperiment)
	        : { result: false };
	    if (enableDelayLoadingExperiment.result) {
	        const delayLoadingExperiment = instance.resolve(DelayLoadingExperiment);
	        const delayLoadingPromises = delayLoadEventListeners(delayLoadingExperiment.result);
	        ready = Promise.race(delayLoadingPromises);
	    }
	    else {
	        ready = Promise.resolve();
	    }
	    return ready;
	};
	const run = () => {
	    const adthrive = window.adthrive;
	    inheritAdthriveCLS();
	    const baseUrl = getBaseUrl(adthrive);
	    const invalidTraffic = isBotTraffic();
	    const bucket = invalidTraffic ? 'unsupported' : adthrive.bucket;
	    const logFilterExperiment = instance.resolve(LoggerFilterExperiment);
	    const loggerFilters = logFilterExperiment.result ? [] : logFilterExperiment.classList;
	    const published = { ...adthrive, bucket, baseUrl, invalidTraffic, loggerFilters };
	    const startTime = now$2();
	    const stubCmp = instance.resolve(StubCmp);
	    stubCmp.init(published.gdpr);
	    handleDelayLoadingExperiment(published)
	        .then(() => {
	        logger.info('index', `Delayed loading by: ${now$2() - startTime} ms`);
	        return load(published);
	    })
	        .then(() => logger.info('index', 'load', 'Done'))
	        .catch(err => {
	        logger.error('index', 'load', err);
	    });
	};
	if (!isLoaded(window.adthrive)) {
	    run();
	}
	var index = window.adthrive;

	return index;

})();









/*
-------

adthrive.branch = adthrive.branch || "master e68bde1", adthrive.bucket = adthrive.bucket || "flex", adthrive.gdpr = "false", adthrive.deployment = adthrive.deployment || "X",
    function() {
        "use strict";
        var e = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};

        function t(e, t) {
            return e(t = {
                exports: {}
            }, t.exports), t.exports
        }
        var i = function(e) {
                return e && e.Math == Math && e
            },
            n = i("object" == typeof globalThis && globalThis) || i("object" == typeof window && window) || i("object" == typeof self && self) || i("object" == typeof e && e) || function() {
                return this
            }() || Function("return this")(),
            r = function(e) {
                try {
                    return !!e()
                } catch (e) {
                    return !0
                }
            },
            o = !r((function() {
                return 7 != Object.defineProperty({}, 1, {
                    get: function() {
                        return 7
                    }
                })[1]
            })),
            a = {}.propertyIsEnumerable,
            s = Object.getOwnPropertyDescriptor,
            c = {
                f: s && !a.call({
                    1: 2
                }, 1) ? function(e) {
                    var t = s(this, e);
                    return !!t && t.enumerable
                } : a
            },
            l = function(e, t) {
                return {
                    enumerable: !(1 & e),
                    configurable: !(2 & e),
                    writable: !(4 & e),
                    value: t
                }
            },
            u = {}.toString,
            d = function(e) {
                return u.call(e).slice(8, -1)
            },
            p = "".split,
            h = r((function() {
                return !Object("z").propertyIsEnumerable(0)
            })) ? function(e) {
                return "String" == d(e) ? p.call(e, "") : Object(e)
            } : Object,
            f = function(e) {
                if (null == e) throw TypeError("Can't call method on " + e);
                return e
            },
            g = function(e) {
                return h(f(e))
            },
            m = function(e) {
                return "object" == typeof e ? null !== e : "function" == typeof e
            },
            y = function(e, t) {
                if (!m(e)) return e;
                var i, n;
                if (t && "function" == typeof(i = e.toString) && !m(n = i.call(e))) return n;
                if ("function" == typeof(i = e.valueOf) && !m(n = i.call(e))) return n;
                if (!t && "function" == typeof(i = e.toString) && !m(n = i.call(e))) return n;
                throw TypeError("Can't convert object to primitive value")
            },
            _ = {}.hasOwnProperty,
            v = function(e, t) {
                return _.call(e, t)
            },
            b = n.document,
            w = m(b) && m(b.createElement),
            S = function(e) {
                return w ? b.createElement(e) : {}
            },
            C = !o && !r((function() {
                return 7 != Object.defineProperty(S("div"), "a", {
                    get: function() {
                        return 7
                    }
                }).a
            })),
            k = Object.getOwnPropertyDescriptor,
            P = {
                f: o ? k : function(e, t) {
                    if (e = g(e), t = y(t, !0), C) try {
                        return k(e, t)
                    } catch (e) {}
                    if (v(e, t)) return l(!c.f.call(e, t), e[t])
                }
            },
            E = function(e) {
                if (!m(e)) throw TypeError(String(e) + " is not an object");
                return e
            },
            O = Object.defineProperty,
            x = {
                f: o ? O : function(e, t, i) {
                    if (E(e), t = y(t, !0), E(i), C) try {
                        return O(e, t, i)
                    } catch (e) {}
                    if ("get" in i || "set" in i) throw TypeError("Accessors not supported");
                    return "value" in i && (e[t] = i.value), e
                }
            },
            T = o ? function(e, t, i) {
                return x.f(e, t, l(1, i))
            } : function(e, t, i) {
                return e[t] = i, e
            },
            I = function(e, t) {
                try {
                    T(n, e, t)
                } catch (i) {
                    n[e] = t
                }
                return t
            },
            M = "__core-js_shared__",
            A = n[M] || I(M, {}),
            z = Function.toString;
        "function" != typeof A.inspectSource && (A.inspectSource = function(e) {
            return z.call(e)
        });
        var R, j, D, B = A.inspectSource,
            V = n.WeakMap,
            L = "function" == typeof V && /native code/.test(B(V)),
            F = t((function(e) {
                (e.exports = function(e, t) {
                    return A[e] || (A[e] = void 0 !== t ? t : {})
                })("versions", []).push({
                    version: "3.8.0",
                    mode: "global",
                    copyright: " 2020 Denis Pushkarev (zloirock.ru)"
                })
            })),
            N = 0,
            q = Math.random(),
            U = function(e) {
                return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++N + q).toString(36)
            },
            H = F("keys"),
            W = function(e) {
                return H[e] || (H[e] = U(e))
            },
            G = {},
            Q = n.WeakMap;
        if (L) {
            var K = A.state || (A.state = new Q),
                X = K.get,
                J = K.has,
                Y = K.set;
            R = function(e, t) {
                return t.facade = e, Y.call(K, e, t), t
            }, j = function(e) {
                return X.call(K, e) || {}
            }, D = function(e) {
                return J.call(K, e)
            }
        } else {
            var Z = W("state");
            G[Z] = !0, R = function(e, t) {
                return t.facade = e, T(e, Z, t), t
            }, j = function(e) {
                return v(e, Z) ? e[Z] : {}
            }, D = function(e) {
                return v(e, Z)
            }
        }
        var $, ee = {
                set: R,
                get: j,
                has: D,
                enforce: function(e) {
                    return D(e) ? j(e) : R(e, {})
                },
                getterFor: function(e) {
                    return function(t) {
                        var i;
                        if (!m(t) || (i = j(t)).type !== e) throw TypeError("Incompatible receiver, " + e + " required");
                        return i
                    }
                }
            },
            te = t((function(e) {
                var t = ee.get,
                    i = ee.enforce,
                    r = String(String).split("String");
                (e.exports = function(e, t, o, a) {
                    var s, c = !!a && !!a.unsafe,
                        l = !!a && !!a.enumerable,
                        u = !!a && !!a.noTargetGet;
                    "function" == typeof o && ("string" != typeof t || v(o, "name") || T(o, "name", t), (s = i(o)).source || (s.source = r.join("string" == typeof t ? t : ""))), e !== n ? (c ? !u && e[t] && (l = !0) : delete e[t], l ? e[t] = o : T(e, t, o)) : l ? e[t] = o : I(t, o)
                })(Function.prototype, "toString", (function() {
                    return "function" == typeof this && t(this).source || B(this)
                }))
            })),
            ie = n,
            ne = function(e) {
                return "function" == typeof e ? e : void 0
            },
            re = function(e, t) {
                return arguments.length < 2 ? ne(ie[e]) || ne(n[e]) : ie[e] && ie[e][t] || n[e] && n[e][t]
            },
            oe = Math.ceil,
            ae = Math.floor,
            se = function(e) {
                return isNaN(e = +e) ? 0 : (e > 0 ? ae : oe)(e)
            },
            ce = Math.min,
            le = function(e) {
                return e > 0 ? ce(se(e), 9007199254740991) : 0
            },
            ue = Math.max,
            de = Math.min,
            pe = function(e) {
                return function(t, i, n) {
                    var r, o = g(t),
                        a = le(o.length),
                        s = function(e, t) {
                            var i = se(e);
                            return i < 0 ? ue(i + t, 0) : de(i, t)
                        }(n, a);
                    if (e && i != i) {
                        for (; a > s;)
                            if ((r = o[s++]) != r) return !0
                    } else
                        for (; a > s; s++)
                            if ((e || s in o) && o[s] === i) return e || s || 0;
                    return !e && -1
                }
            },
            he = {
                includes: pe(!0),
                indexOf: pe(!1)
            }.indexOf,
            fe = function(e, t) {
                var i, n = g(e),
                    r = 0,
                    o = [];
                for (i in n) !v(G, i) && v(n, i) && o.push(i);
                for (; t.length > r;) v(n, i = t[r++]) && (~he(o, i) || o.push(i));
                return o
            },
            ge = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"],
            me = ge.concat("length", "prototype"),
            ye = {
                f: Object.getOwnPropertyNames || function(e) {
                    return fe(e, me)
                }
            },
            _e = {
                f: Object.getOwnPropertySymbols
            },
            ve = re("Reflect", "ownKeys") || function(e) {
                var t = ye.f(E(e)),
                    i = _e.f;
                return i ? t.concat(i(e)) : t
            },
            be = function(e, t) {
                for (var i = ve(t), n = x.f, r = P.f, o = 0; o < i.length; o++) {
                    var a = i[o];
                    v(e, a) || n(e, a, r(t, a))
                }
            },
            we = /#|\.prototype\./,
            Se = function(e, t) {
                var i = ke[Ce(e)];
                return i == Ee || i != Pe && ("function" == typeof t ? r(t) : !!t)
            },
            Ce = Se.normalize = function(e) {
                return String(e).replace(we, ".").toLowerCase()
            },
            ke = Se.data = {},
            Pe = Se.NATIVE = "N",
            Ee = Se.POLYFILL = "P",
            Oe = Se,
            xe = P.f,
            Te = function(e, t) {
                var i, r, o, a, s, c = e.target,
                    l = e.global,
                    u = e.stat;
                if (i = l ? n : u ? n[c] || I(c, {}) : (n[c] || {}).prototype)
                    for (r in t) {
                        if (a = t[r], o = e.noTargetGet ? (s = xe(i, r)) && s.value : i[r], !Oe(l ? r : c + (u ? "." : "#") + r, e.forced) && void 0 !== o) {
                            if (typeof a == typeof o) continue;
                            be(a, o)
                        }(e.sham || o && o.sham) && T(a, "sham", !0), te(i, r, a, e)
                    }
            },
            Ie = function(e) {
                return Object(f(e))
            },
            Me = !r((function() {
                function e() {}
                return e.prototype.constructor = null, Object.getPrototypeOf(new e) !== e.prototype
            })),
            Ae = W("IE_PROTO"),
            ze = Object.prototype,
            Re = Me ? Object.getPrototypeOf : function(e) {
                return e = Ie(e), v(e, Ae) ? e[Ae] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? ze : null
            },
            je = Object.setPrototypeOf || ("__proto__" in {} ? function() {
                var e, t = !1,
                    i = {};
                try {
                    (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(i, []), t = i instanceof Array
                } catch (e) {}
                return function(i, n) {
                    return E(i),
                        function(e) {
                            if (!m(e) && null !== e) throw TypeError("Can't set " + String(e) + " as a prototype")
                        }(n), t ? e.call(i, n) : i.__proto__ = n, i
                }
            }() : void 0),
            De = Object.keys || function(e) {
                return fe(e, ge)
            },
            Be = o ? Object.defineProperties : function(e, t) {
                E(e);
                for (var i, n = De(t), r = n.length, o = 0; r > o;) x.f(e, i = n[o++], t[i]);
                return e
            },
            Ve = re("document", "documentElement"),
            Le = W("IE_PROTO"),
            Fe = function() {},
            Ne = function(e) {
                return "<script>" + e + "</" + "script>"
            },
            qe = function() {
                try {
                    $ = document.domain && new ActiveXObject("htmlfile")
                } catch (e) {}
                var e, t;
                qe = $ ? function(e) {
                    e.write(Ne("")), e.close();
                    var t = e.parentWindow.Object;
                    return e = null, t
                }($) : ((t = S("iframe")).style.display = "none", Ve.appendChild(t), t.src = String("javascript:"), (e = t.contentWindow.document).open(), e.write(Ne("document.F=Object")), e.close(), e.F);
                for (var i = ge.length; i--;) delete qe.prototype[ge[i]];
                return qe()
            };
        G[Le] = !0;
        var Ue = Object.create || function(e, t) {
                var i;
                return null !== e ? (Fe.prototype = E(e), i = new Fe, Fe.prototype = null, i[Le] = e) : i = qe(), void 0 === t ? i : Be(i, t)
            },
            He = !!Object.getOwnPropertySymbols && !r((function() {
                return !String(Symbol())
            })),
            We = He && !Symbol.sham && "symbol" == typeof Symbol.iterator,
            Ge = F("wks"),
            Qe = n.Symbol,
            Ke = We ? Qe : Qe && Qe.withoutSetter || U,
            Xe = function(e) {
                return v(Ge, e) || (He && v(Qe, e) ? Ge[e] = Qe[e] : Ge[e] = Ke("Symbol." + e)), Ge[e]
            },
            Je = {},
            Ye = Xe("iterator"),
            Ze = Array.prototype,
            $e = function(e) {
                if ("function" != typeof e) throw TypeError(String(e) + " is not a function");
                return e
            },
            et = function(e, t, i) {
                if ($e(e), void 0 === t) return e;
                switch (i) {
                    case 0:
                        return function() {
                            return e.call(t)
                        };
                    case 1:
                        return function(i) {
                            return e.call(t, i)
                        };
                    case 2:
                        return function(i, n) {
                            return e.call(t, i, n)
                        };
                    case 3:
                        return function(i, n, r) {
                            return e.call(t, i, n, r)
                        }
                }
                return function() {
                    return e.apply(t, arguments)
                }
            },
            tt = {};
        tt[Xe("toStringTag")] = "z";
        var it = "[object z]" === String(tt),
            nt = Xe("toStringTag"),
            rt = "Arguments" == d(function() {
                return arguments
            }()),
            ot = it ? d : function(e) {
                var t, i, n;
                return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(i = function(e, t) {
                    try {
                        return e[t]
                    } catch (e) {}
                }(t = Object(e), nt)) ? i : rt ? d(t) : "Object" == (n = d(t)) && "function" == typeof t.callee ? "Arguments" : n
            },
            at = Xe("iterator"),
            st = function(e) {
                var t = e.return;
                if (void 0 !== t) return E(t.call(e)).value
            },
            ct = function(e, t) {
                this.stopped = e, this.result = t
            },
            lt = function(e, t, i) {
                var n, r, o, a, s, c, l, u, d = i && i.that,
                    p = !(!i || !i.AS_ENTRIES),
                    h = !(!i || !i.IS_ITERATOR),
                    f = !(!i || !i.INTERRUPTED),
                    g = et(t, d, 1 + p + f),
                    m = function(e) {
                        return n && st(n), new ct(!0, e)
                    },
                    y = function(e) {
                        return p ? (E(e), f ? g(e[0], e[1], m) : g(e[0], e[1])) : f ? g(e, m) : g(e)
                    };
                if (h) n = e;
                else {
                    if ("function" != typeof(r = function(e) {
                            if (null != e) return e[at] || e["@@iterator"] || Je[ot(e)]
                        }(e))) throw TypeError("Target is not iterable");
                    if (void 0 !== (u = r) && (Je.Array === u || Ze[Ye] === u)) {
                        for (o = 0, a = le(e.length); a > o; o++)
                            if ((s = y(e[o])) && s instanceof ct) return s;
                        return new ct(!1)
                    }
                    n = r.call(e)
                }
                for (c = n.next; !(l = c.call(n)).done;) {
                    try {
                        s = y(l.value)
                    } catch (e) {
                        throw st(n), e
                    }
                    if ("object" == typeof s && s && s instanceof ct) return s
                }
                return new ct(!1)
            },
            ut = function(e, t) {
                var i = this;
                if (!(i instanceof ut)) return new ut(e, t);
                je && (i = je(new Error(void 0), Re(i))), void 0 !== t && T(i, "message", String(t));
                var n = [];
                return lt(e, n.push, {
                    that: n
                }), T(i, "errors", n), i
            };
        ut.prototype = Ue(Error.prototype, {
            constructor: l(5, ut),
            message: l(5, ""),
            name: l(5, "AggregateError")
        }), Te({
            global: !0
        }, {
            AggregateError: ut
        });
        var dt = it ? {}.toString : function() {
            return "[object " + ot(this) + "]"
        };
        it || te(Object.prototype, "toString", dt, {
            unsafe: !0
        });
        var pt = n.Promise,
            ht = function(e, t, i) {
                for (var n in t) te(e, n, t[n], i);
                return e
            },
            ft = x.f,
            gt = Xe("toStringTag"),
            mt = function(e, t, i) {
                e && !v(e = i ? e : e.prototype, gt) && ft(e, gt, {
                    configurable: !0,
                    value: t
                })
            },
            yt = Xe("species"),
            _t = function(e) {
                var t = re(e),
                    i = x.f;
                o && t && !t[yt] && i(t, yt, {
                    configurable: !0,
                    get: function() {
                        return this
                    }
                })
            },
            vt = function(e, t, i) {
                if (!(e instanceof t)) throw TypeError("Incorrect " + (i ? i + " " : "") + "invocation");
                return e
            },
            bt = Xe("iterator"),
            wt = !1;
        try {
            var St = 0,
                Ct = {
                    next: function() {
                        return {
                            done: !!St++
                        }
                    },
                    return: function() {
                        wt = !0
                    }
                };
            Ct[bt] = function() {
                return this
            }, Array.from(Ct, (function() {
                throw 2
            }))
        } catch (e) {}
        var kt, Pt, Et, Ot = function(e, t) {
                if (!t && !wt) return !1;
                var i = !1;
                try {
                    var n = {};
                    n[bt] = function() {
                        return {
                            next: function() {
                                return {
                                    done: i = !0
                                }
                            }
                        }
                    }, e(n)
                } catch (e) {}
                return i
            },
            xt = Xe("species"),
            Tt = function(e, t) {
                var i, n = E(e).constructor;
                return void 0 === n || null == (i = E(n)[xt]) ? t : $e(i)
            },
            It = re("navigator", "userAgent") || "",
            Mt = /(iphone|ipod|ipad).*applewebkit/i.test(It),
            At = "process" == d(n.process),
            zt = n.location,
            Rt = n.setImmediate,
            jt = n.clearImmediate,
            Dt = n.process,
            Bt = n.MessageChannel,
            Vt = n.Dispatch,
            Lt = 0,
            Ft = {},
            Nt = "onreadystatechange",
            qt = function(e) {
                if (Ft.hasOwnProperty(e)) {
                    var t = Ft[e];
                    delete Ft[e], t()
                }
            },
            Ut = function(e) {
                return function() {
                    qt(e)
                }
            },
            Ht = function(e) {
                qt(e.data)
            },
            Wt = function(e) {
                n.postMessage(e + "", zt.protocol + "//" + zt.host)
            };
        Rt && jt || (Rt = function(e) {
            for (var t = [], i = 1; arguments.length > i;) t.push(arguments[i++]);
            return Ft[++Lt] = function() {
                ("function" == typeof e ? e : Function(e)).apply(void 0, t)
            }, kt(Lt), Lt
        }, jt = function(e) {
            delete Ft[e]
        }, At ? kt = function(e) {
            Dt.nextTick(Ut(e))
        } : Vt && Vt.now ? kt = function(e) {
            Vt.now(Ut(e))
        } : Bt && !Mt ? (Et = (Pt = new Bt).port2, Pt.port1.onmessage = Ht, kt = et(Et.postMessage, Et, 1)) : n.addEventListener && "function" == typeof postMessage && !n.importScripts && zt && "file:" !== zt.protocol && !r(Wt) ? (kt = Wt, n.addEventListener("message", Ht, !1)) : kt = Nt in S("script") ? function(e) {
            Ve.appendChild(S("script")).onreadystatechange = function() {
                Ve.removeChild(this), qt(e)
            }
        } : function(e) {
            setTimeout(Ut(e), 0)
        });
        var Gt, Qt, Kt, Xt, Jt, Yt, Zt, $t, ei = {
                set: Rt,
                clear: jt
            },
            ti = P.f,
            ii = ei.set,
            ni = n.MutationObserver || n.WebKitMutationObserver,
            ri = n.document,
            oi = n.process,
            ai = n.Promise,
            si = ti(n, "queueMicrotask"),
            ci = si && si.value;
        ci || (Gt = function() {
            var e, t;
            for (At && (e = oi.domain) && e.exit(); Qt;) {
                t = Qt.fn, Qt = Qt.next;
                try {
                    t()
                } catch (e) {
                    throw Qt ? Xt() : Kt = void 0, e
                }
            }
            Kt = void 0, e && e.enter()
        }, !Mt && !At && ni && ri ? (Jt = !0, Yt = ri.createTextNode(""), new ni(Gt).observe(Yt, {
            characterData: !0
        }), Xt = function() {
            Yt.data = Jt = !Jt
        }) : ai && ai.resolve ? (Zt = ai.resolve(void 0), $t = Zt.then, Xt = function() {
            $t.call(Zt, Gt)
        }) : Xt = At ? function() {
            oi.nextTick(Gt)
        } : function() {
            ii.call(n, Gt)
        });
        var li, ui, di = ci || function(e) {
                var t = {
                    fn: e,
                    next: void 0
                };
                Kt && (Kt.next = t), Qt || (Qt = t, Xt()), Kt = t
            },
            pi = function(e) {
                var t, i;
                this.promise = new e((function(e, n) {
                    if (void 0 !== t || void 0 !== i) throw TypeError("Bad Promise constructor");
                    t = e, i = n
                })), this.resolve = $e(t), this.reject = $e(i)
            },
            hi = {
                f: function(e) {
                    return new pi(e)
                }
            },
            fi = function(e, t) {
                if (E(e), m(t) && t.constructor === e) return t;
                var i = hi.f(e);
                return (0, i.resolve)(t), i.promise
            },
            gi = function(e) {
                try {
                    return {
                        error: !1,
                        value: e()
                    }
                } catch (e) {
                    return {
                        error: !0,
                        value: e
                    }
                }
            },
            mi = n.process,
            yi = mi && mi.versions,
            _i = yi && yi.v8;
        _i ? ui = (li = _i.split("."))[0] + li[1] : It && (!(li = It.match(/Edge\/(\d+)/)) || li[1] >= 74) && (li = It.match(/Chrome\/(\d+)/)) && (ui = li[1]);
        var vi, bi, wi, Si, Ci = ui && +ui,
            ki = ei.set,
            Pi = Xe("species"),
            Ei = "Promise",
            Oi = ee.get,
            xi = ee.set,
            Ti = ee.getterFor(Ei),
            Ii = pt,
            Mi = n.TypeError,
            Ai = n.document,
            zi = n.process,
            Ri = re("fetch"),
            ji = hi.f,
            Di = ji,
            Bi = !!(Ai && Ai.createEvent && n.dispatchEvent),
            Vi = "function" == typeof PromiseRejectionEvent,
            Li = "unhandledrejection",
            Fi = Oe(Ei, (function() {
                if (!(B(Ii) !== String(Ii))) {
                    if (66 === Ci) return !0;
                    if (!At && !Vi) return !0
                }
                if (Ci >= 51 && /native code/.test(Ii)) return !1;
                var e = Ii.resolve(1),
                    t = function(e) {
                        e((function() {}), (function() {}))
                    };
                return (e.constructor = {})[Pi] = t, !(e.then((function() {})) instanceof t)
            })),
            Ni = Fi || !Ot((function(e) {
                Ii.all(e).catch((function() {}))
            })),
            qi = function(e) {
                var t;
                return !(!m(e) || "function" != typeof(t = e.then)) && t
            },
            Ui = function(e, t) {
                if (!e.notified) {
                    e.notified = !0;
                    var i = e.reactions;
                    di((function() {
                        for (var n = e.value, r = 1 == e.state, o = 0; i.length > o;) {
                            var a, s, c, l = i[o++],
                                u = r ? l.ok : l.fail,
                                d = l.resolve,
                                p = l.reject,
                                h = l.domain;
                            try {
                                u ? (r || (2 === e.rejection && Qi(e), e.rejection = 1), !0 === u ? a = n : (h && h.enter(), a = u(n), h && (h.exit(), c = !0)), a === l.promise ? p(Mi("Promise-chain cycle")) : (s = qi(a)) ? s.call(a, d, p) : d(a)) : p(n)
                            } catch (e) {
                                h && !c && h.exit(), p(e)
                            }
                        }
                        e.reactions = [], e.notified = !1, t && !e.rejection && Wi(e)
                    }))
                }
            },
            Hi = function(e, t, i) {
                var r, o;
                Bi ? ((r = Ai.createEvent("Event")).promise = t, r.reason = i, r.initEvent(e, !1, !0), n.dispatchEvent(r)) : r = {
                    promise: t,
                    reason: i
                }, !Vi && (o = n["on" + e]) ? o(r) : e === Li && function(e, t) {
                    var i = n.console;
                    i && i.error && (1 === arguments.length ? i.error(e) : i.error(e, t))
                }("Unhandled promise rejection", i)
            },
            Wi = function(e) {
                ki.call(n, (function() {
                    var t, i = e.facade,
                        n = e.value;
                    if (Gi(e) && (t = gi((function() {
                            At ? zi.emit("unhandledRejection", n, i) : Hi(Li, i, n)
                        })), e.rejection = At || Gi(e) ? 2 : 1, t.error)) throw t.value
                }))
            },
            Gi = function(e) {
                return 1 !== e.rejection && !e.parent
            },
            Qi = function(e) {
                ki.call(n, (function() {
                    var t = e.facade;
                    At ? zi.emit("rejectionHandled", t) : Hi("rejectionhandled", t, e.value)
                }))
            },
            Ki = function(e, t, i) {
                return function(n) {
                    e(t, n, i)
                }
            },
            Xi = function(e, t, i) {
                e.done || (e.done = !0, i && (e = i), e.value = t, e.state = 2, Ui(e, !0))
            },
            Ji = function(e, t, i) {
                if (!e.done) {
                    e.done = !0, i && (e = i);
                    try {
                        if (e.facade === t) throw Mi("Promise can't be resolved itself");
                        var n = qi(t);
                        n ? di((function() {
                            var i = {
                                done: !1
                            };
                            try {
                                n.call(t, Ki(Ji, i, e), Ki(Xi, i, e))
                            } catch (t) {
                                Xi(i, t, e)
                            }
                        })) : (e.value = t, e.state = 1, Ui(e, !1))
                    } catch (t) {
                        Xi({
                            done: !1
                        }, t, e)
                    }
                }
            };
        Fi && (Ii = function(e) {
            vt(this, Ii, Ei), $e(e), vi.call(this);
            var t = Oi(this);
            try {
                e(Ki(Ji, t), Ki(Xi, t))
            } catch (e) {
                Xi(t, e)
            }
        }, (vi = function(e) {
            xi(this, {
                type: Ei,
                done: !1,
                notified: !1,
                parent: !1,
                reactions: [],
                rejection: !1,
                state: 0,
                value: void 0
            })
        }).prototype = ht(Ii.prototype, {
            then: function(e, t) {
                var i = Ti(this),
                    n = ji(Tt(this, Ii));
                return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, n.domain = At ? zi.domain : void 0, i.parent = !0, i.reactions.push(n), 0 != i.state && Ui(i, !1), n.promise
            },
            catch: function(e) {
                return this.then(void 0, e)
            }
        }), bi = function() {
            var e = new vi,
                t = Oi(e);
            this.promise = e, this.resolve = Ki(Ji, t), this.reject = Ki(Xi, t)
        }, hi.f = ji = function(e) {
            return e === Ii || e === wi ? new bi(e) : Di(e)
        }, "function" == typeof pt && (Si = pt.prototype.then, te(pt.prototype, "then", (function(e, t) {
            var i = this;
            return new Ii((function(e, t) {
                Si.call(i, e, t)
            })).then(e, t)
        }), {
            unsafe: !0
        }), "function" == typeof Ri && Te({
            global: !0,
            enumerable: !0,
            forced: !0
        }, {
            fetch: function(e) {
                return fi(Ii, Ri.apply(n, arguments))
            }
        }))), Te({
            global: !0,
            wrap: !0,
            forced: Fi
        }, {
            Promise: Ii
        }), mt(Ii, Ei, !1), _t(Ei), wi = re(Ei), Te({
            target: Ei,
            stat: !0,
            forced: Fi
        }, {
            reject: function(e) {
                var t = ji(this);
                return t.reject.call(void 0, e), t.promise
            }
        }), Te({
            target: Ei,
            stat: !0,
            forced: Fi
        }, {
            resolve: function(e) {
                return fi(this, e)
            }
        }), Te({
            target: Ei,
            stat: !0,
            forced: Ni
        }, {
            all: function(e) {
                var t = this,
                    i = ji(t),
                    n = i.resolve,
                    r = i.reject,
                    o = gi((function() {
                        var i = $e(t.resolve),
                            o = [],
                            a = 0,
                            s = 1;
                        lt(e, (function(e) {
                            var c = a++,
                                l = !1;
                            o.push(void 0), s++, i.call(t, e).then((function(e) {
                                l || (l = !0, o[c] = e, --s || n(o))
                            }), r)
                        })), --s || n(o)
                    }));
                return o.error && r(o.value), i.promise
            },
            race: function(e) {
                var t = this,
                    i = ji(t),
                    n = i.reject,
                    r = gi((function() {
                        var r = $e(t.resolve);
                        lt(e, (function(e) {
                            r.call(t, e).then(i.resolve, n)
                        }))
                    }));
                return r.error && n(r.value), i.promise
            }
        }), Te({
            target: "Promise",
            stat: !0
        }, {
            allSettled: function(e) {
                var t = this,
                    i = hi.f(t),
                    n = i.resolve,
                    r = i.reject,
                    o = gi((function() {
                        var i = $e(t.resolve),
                            r = [],
                            o = 0,
                            a = 1;
                        lt(e, (function(e) {
                            var s = o++,
                                c = !1;
                            r.push(void 0), a++, i.call(t, e).then((function(e) {
                                c || (c = !0, r[s] = {
                                    status: "fulfilled",
                                    value: e
                                }, --a || n(r))
                            }), (function(e) {
                                c || (c = !0, r[s] = {
                                    status: "rejected",
                                    reason: e
                                }, --a || n(r))
                            }))
                        })), --a || n(r)
                    }));
                return o.error && r(o.value), i.promise
            }
        });
        var Yi = "No one promise resolved";
        Te({
            target: "Promise",
            stat: !0
        }, {
            any: function(e) {
                var t = this,
                    i = hi.f(t),
                    n = i.resolve,
                    r = i.reject,
                    o = gi((function() {
                        var i = $e(t.resolve),
                            o = [],
                            a = 0,
                            s = 1,
                            c = !1;
                        lt(e, (function(e) {
                            var l = a++,
                                u = !1;
                            o.push(void 0), s++, i.call(t, e).then((function(e) {
                                u || c || (c = !0, n(e))
                            }), (function(e) {
                                u || c || (u = !0, o[l] = e, --s || r(new(re("AggregateError"))(o, Yi)))
                            }))
                        })), --s || r(new(re("AggregateError"))(o, Yi))
                    }));
                return o.error && r(o.value), i.promise
            }
        });
        var Zi = !!pt && r((function() {
            pt.prototype.finally.call({
                then: function() {}
            }, (function() {}))
        }));
        Te({
            target: "Promise",
            proto: !0,
            real: !0,
            forced: Zi
        }, {
            finally: function(e) {
                var t = Tt(this, re("Promise")),
                    i = "function" == typeof e;
                return this.then(i ? function(i) {
                    return fi(t, e()).then((function() {
                        return i
                    }))
                } : e, i ? function(i) {
                    return fi(t, e()).then((function() {
                        throw i
                    }))
                } : e)
            }
        }), "function" != typeof pt || pt.prototype.finally || te(pt.prototype, "finally", re("Promise").prototype.finally);
        var $i, en, tn, nn = function(e) {
                return function(t, i) {
                    var n, r, o = String(f(t)),
                        a = se(i),
                        s = o.length;
                    return a < 0 || a >= s ? e ? "" : void 0 : (n = o.charCodeAt(a)) < 55296 || n > 56319 || a + 1 === s || (r = o.charCodeAt(a + 1)) < 56320 || r > 57343 ? e ? o.charAt(a) : n : e ? o.slice(a, a + 2) : r - 56320 + (n - 55296 << 10) + 65536
                }
            },
            rn = {
                codeAt: nn(!1),
                charAt: nn(!0)
            },
            on = Xe("iterator"),
            an = !1;
        [].keys && ("next" in (tn = [].keys()) ? (en = Re(Re(tn))) !== Object.prototype && ($i = en) : an = !0), null == $i && ($i = {}), v($i, on) || T($i, on, (function() {
            return this
        }));
        var sn = {
                IteratorPrototype: $i,
                BUGGY_SAFARI_ITERATORS: an
            },
            cn = sn.IteratorPrototype,
            ln = function() {
                return this
            },
            un = sn.IteratorPrototype,
            dn = sn.BUGGY_SAFARI_ITERATORS,
            pn = Xe("iterator"),
            hn = "keys",
            fn = "values",
            gn = "entries",
            mn = function() {
                return this
            },
            yn = function(e, t, i, n, r, o, a) {
                ! function(e, t, i) {
                    var n = t + " Iterator";
                    e.prototype = Ue(cn, {
                        next: l(1, i)
                    }), mt(e, n, !1), Je[n] = ln
                }(i, t, n);
                var s, c, u, d = function(e) {
                        if (e === r && m) return m;
                        if (!dn && e in f) return f[e];
                        switch (e) {
                            case hn:
                            case fn:
                            case gn:
                                return function() {
                                    return new i(this, e)
                                }
                        }
                        return function() {
                            return new i(this)
                        }
                    },
                    p = t + " Iterator",
                    h = !1,
                    f = e.prototype,
                    g = f[pn] || f["@@iterator"] || r && f[r],
                    m = !dn && g || d(r),
                    y = "Array" == t && f.entries || g;
                if (y && (s = Re(y.call(new e)), un !== Object.prototype && s.next && (Re(s) !== un && (je ? je(s, un) : "function" != typeof s[pn] && T(s, pn, mn)), mt(s, p, !0))), r == fn && g && g.name !== fn && (h = !0, m = function() {
                        return g.call(this)
                    }), f[pn] !== m && T(f, pn, m), Je[t] = m, r)
                    if (c = {
                            values: d(fn),
                            keys: o ? m : d(hn),
                            entries: d(gn)
                        }, a)
                        for (u in c)(dn || h || !(u in f)) && te(f, u, c[u]);
                    else Te({
                        target: t,
                        proto: !0,
                        forced: dn || h
                    }, c);
                return c
            },
            _n = rn.charAt,
            vn = "String Iterator",
            bn = ee.set,
            wn = ee.getterFor(vn);
        yn(String, "String", (function(e) {
            bn(this, {
                type: vn,
                string: String(e),
                index: 0
            })
        }), (function() {
            var e, t = wn(this),
                i = t.string,
                n = t.index;
            return n >= i.length ? {
                value: void 0,
                done: !0
            } : (e = _n(i, n), t.index += e.length, {
                value: e,
                done: !1
            })
        }));
        var Sn = {
                CSSRuleList: 0,
                CSSStyleDeclaration: 0,
                CSSValueList: 0,
                ClientRectList: 0,
                DOMRectList: 0,
                DOMStringList: 0,
                DOMTokenList: 1,
                DataTransferItemList: 0,
                FileList: 0,
                HTMLAllCollection: 0,
                HTMLCollection: 0,
                HTMLFormElement: 0,
                HTMLSelectElement: 0,
                MediaList: 0,
                MimeTypeArray: 0,
                NamedNodeMap: 0,
                NodeList: 1,
                PaintRequestList: 0,
                Plugin: 0,
                PluginArray: 0,
                SVGLengthList: 0,
                SVGNumberList: 0,
                SVGPathSegList: 0,
                SVGPointList: 0,
                SVGStringList: 0,
                SVGTransformList: 0,
                SourceBufferList: 0,
                StyleSheetList: 0,
                TextTrackCueList: 0,
                TextTrackList: 0,
                TouchList: 0
            },
            Cn = Xe("unscopables"),
            kn = Array.prototype;
        null == kn[Cn] && x.f(kn, Cn, {
            configurable: !0,
            value: Ue(null)
        });
        var Pn = function(e) {
                kn[Cn][e] = !0
            },
            En = "Array Iterator",
            On = ee.set,
            xn = ee.getterFor(En),
            Tn = yn(Array, "Array", (function(e, t) {
                On(this, {
                    type: En,
                    target: g(e),
                    index: 0,
                    kind: t
                })
            }), (function() {
                var e = xn(this),
                    t = e.target,
                    i = e.kind,
                    n = e.index++;
                return !t || n >= t.length ? (e.target = void 0, {
                    value: void 0,
                    done: !0
                }) : "keys" == i ? {
                    value: n,
                    done: !1
                } : "values" == i ? {
                    value: t[n],
                    done: !1
                } : {
                    value: [n, t[n]],
                    done: !1
                }
            }), "values");
        Je.Arguments = Je.Array, Pn("keys"), Pn("values"), Pn("entries");
        var In = Xe("iterator"),
            Mn = Xe("toStringTag"),
            An = Tn.values;
        for (var zn in Sn) {
            var Rn = n[zn],
                jn = Rn && Rn.prototype;
            if (jn) {
                if (jn[In] !== An) try {
                    T(jn, In, An)
                } catch (e) {
                    jn[In] = An
                }
                if (jn[Mn] || T(jn, Mn, zn), Sn[zn])
                    for (var Dn in Tn)
                        if (jn[Dn] !== Tn[Dn]) try {
                            T(jn, Dn, Tn[Dn])
                        } catch (e) {
                            jn[Dn] = Tn[Dn]
                        }
            }
        }
        ie.Promise;
        var Bn = !r((function() {
                return Object.isExtensible(Object.preventExtensions({}))
            })),
            Vn = t((function(e) {
                var t = x.f,
                    i = U("meta"),
                    n = 0,
                    r = Object.isExtensible || function() {
                        return !0
                    },
                    o = function(e) {
                        t(e, i, {
                            value: {
                                objectID: "O" + ++n,
                                weakData: {}
                            }
                        })
                    },
                    a = e.exports = {
                        REQUIRED: !1,
                        fastKey: function(e, t) {
                            if (!m(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                            if (!v(e, i)) {
                                if (!r(e)) return "F";
                                if (!t) return "E";
                                o(e)
                            }
                            return e[i].objectID
                        },
                        getWeakData: function(e, t) {
                            if (!v(e, i)) {
                                if (!r(e)) return !0;
                                if (!t) return !1;
                                o(e)
                            }
                            return e[i].weakData
                        },
                        onFreeze: function(e) {
                            return Bn && a.REQUIRED && r(e) && !v(e, i) && o(e), e
                        }
                    };
                G[i] = !0
            }));
        Vn.REQUIRED, Vn.fastKey, Vn.getWeakData, Vn.onFreeze;
        var Ln = function(e, t, i) {
                var o = -1 !== e.indexOf("Map"),
                    a = -1 !== e.indexOf("Weak"),
                    s = o ? "set" : "add",
                    c = n[e],
                    l = c && c.prototype,
                    u = c,
                    d = {},
                    p = function(e) {
                        var t = l[e];
                        te(l, e, "add" == e ? function(e) {
                            return t.call(this, 0 === e ? 0 : e), this
                        } : "delete" == e ? function(e) {
                            return !(a && !m(e)) && t.call(this, 0 === e ? 0 : e)
                        } : "get" == e ? function(e) {
                            return a && !m(e) ? void 0 : t.call(this, 0 === e ? 0 : e)
                        } : "has" == e ? function(e) {
                            return !(a && !m(e)) && t.call(this, 0 === e ? 0 : e)
                        } : function(e, i) {
                            return t.call(this, 0 === e ? 0 : e, i), this
                        })
                    };
                if (Oe(e, "function" != typeof c || !(a || l.forEach && !r((function() {
                        (new c).entries().next()
                    }))))) u = i.getConstructor(t, e, o, s), Vn.REQUIRED = !0;
                else if (Oe(e, !0)) {
                    var h = new u,
                        f = h[s](a ? {} : -0, 1) != h,
                        g = r((function() {
                            h.has(1)
                        })),
                        y = Ot((function(e) {
                            new c(e)
                        })),
                        _ = !a && r((function() {
                            for (var e = new c, t = 5; t--;) e[s](t, t);
                            return !e.has(-0)
                        }));
                    y || ((u = t((function(t, i) {
                        vt(t, u, e);
                        var n = function(e, t, i) {
                            var n, r;
                            return je && "function" == typeof(n = t.constructor) && n !== i && m(r = n.prototype) && r !== i.prototype && je(e, r), e
                        }(new c, t, u);
                        return null != i && lt(i, n[s], {
                            that: n,
                            AS_ENTRIES: o
                        }), n
                    }))).prototype = l, l.constructor = u), (g || _) && (p("delete"), p("has"), o && p("get")), (_ || f) && p(s), a && l.clear && delete l.clear
                }
                return d[e] = u, Te({
                    global: !0,
                    forced: u != c
                }, d), mt(u, e), a || i.setStrong(u, e, o), u
            },
            Fn = x.f,
            Nn = Vn.fastKey,
            qn = ee.set,
            Un = ee.getterFor,
            Hn = {
                getConstructor: function(e, t, i, n) {
                    var r = e((function(e, a) {
                            vt(e, r, t), qn(e, {
                                type: t,
                                index: Ue(null),
                                first: void 0,
                                last: void 0,
                                size: 0
                            }), o || (e.size = 0), null != a && lt(a, e[n], {
                                that: e,
                                AS_ENTRIES: i
                            })
                        })),
                        a = Un(t),
                        s = function(e, t, i) {
                            var n, r, s = a(e),
                                l = c(e, t);
                            return l ? l.value = i : (s.last = l = {
                                index: r = Nn(t, !0),
                                key: t,
                                value: i,
                                previous: n = s.last,
                                next: void 0,
                                removed: !1
                            }, s.first || (s.first = l), n && (n.next = l), o ? s.size++ : e.size++, "F" !== r && (s.index[r] = l)), e
                        },
                        c = function(e, t) {
                            var i, n = a(e),
                                r = Nn(t);
                            if ("F" !== r) return n.index[r];
                            for (i = n.first; i; i = i.next)
                                if (i.key == t) return i
                        };
                    return ht(r.prototype, {
                        clear: function() {
                            for (var e = a(this), t = e.index, i = e.first; i;) i.removed = !0, i.previous && (i.previous = i.previous.next = void 0), delete t[i.index], i = i.next;
                            e.first = e.last = void 0, o ? e.size = 0 : this.size = 0
                        },
                        delete: function(e) {
                            var t = this,
                                i = a(t),
                                n = c(t, e);
                            if (n) {
                                var r = n.next,
                                    s = n.previous;
                                delete i.index[n.index], n.removed = !0, s && (s.next = r), r && (r.previous = s), i.first == n && (i.first = r), i.last == n && (i.last = s), o ? i.size-- : t.size--
                            }
                            return !!n
                        },
                        forEach: function(e) {
                            for (var t, i = a(this), n = et(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.next : i.first;)
                                for (n(t.value, t.key, this); t && t.removed;) t = t.previous
                        },
                        has: function(e) {
                            return !!c(this, e)
                        }
                    }), ht(r.prototype, i ? {
                        get: function(e) {
                            var t = c(this, e);
                            return t && t.value
                        },
                        set: function(e, t) {
                            return s(this, 0 === e ? 0 : e, t)
                        }
                    } : {
                        add: function(e) {
                            return s(this, e = 0 === e ? 0 : e, e)
                        }
                    }), o && Fn(r.prototype, "size", {
                        get: function() {
                            return a(this).size
                        }
                    }), r
                },
                setStrong: function(e, t, i) {
                    var n = t + " Iterator",
                        r = Un(t),
                        o = Un(n);
                    yn(e, t, (function(e, t) {
                        qn(this, {
                            type: n,
                            target: e,
                            state: r(e),
                            kind: t,
                            last: void 0
                        })
                    }), (function() {
                        for (var e = o(this), t = e.kind, i = e.last; i && i.removed;) i = i.previous;
                        return e.target && (e.last = i = i ? i.next : e.state.first) ? "keys" == t ? {
                            value: i.key,
                            done: !1
                        } : "values" == t ? {
                            value: i.value,
                            done: !1
                        } : {
                            value: [i.key, i.value],
                            done: !1
                        } : (e.target = void 0, {
                            value: void 0,
                            done: !0
                        })
                    }), i ? "entries" : "values", !i, !0), _t(t)
                }
            };
        Ln("Map", (function(e) {
            return function() {
                return e(this, arguments.length ? arguments[0] : void 0)
            }
        }), Hn), ie.Map, Ln("Set", (function(e) {
            return function() {
                return e(this, arguments.length ? arguments[0] : void 0)
            }
        }), Hn), ie.Set;
        var Wn = Array.isArray || function(e) {
                return "Array" == d(e)
            },
            Gn = function(e, t, i) {
                var n = y(t);
                n in e ? x.f(e, n, l(0, i)) : e[n] = i
            },
            Qn = Xe("species"),
            Kn = function(e, t) {
                var i;
                return Wn(e) && ("function" != typeof(i = e.constructor) || i !== Array && !Wn(i.prototype) ? m(i) && null === (i = i[Qn]) && (i = void 0) : i = void 0), new(void 0 === i ? Array : i)(0 === t ? 0 : t)
            },
            Xn = Xe("species"),
            Jn = Xe("isConcatSpreadable"),
            Yn = 9007199254740991,
            Zn = "Maximum allowed index exceeded",
            $n = Ci >= 51 || !r((function() {
                var e = [];
                return e[Jn] = !1, e.concat()[0] !== e
            })),
            er = function(e) {
                return Ci >= 51 || !r((function() {
                    var t = [];
                    return (t.constructor = {})[Xn] = function() {
                        return {
                            foo: 1
                        }
                    }, 1 !== t[e](Boolean).foo
                }))
            }("concat"),
            tr = function(e) {
                if (!m(e)) return !1;
                var t = e[Jn];
                return void 0 !== t ? !!t : Wn(e)
            };
        Te({
            target: "Array",
            proto: !0,
            forced: !$n || !er
        }, {
            concat: function(e) {
                var t, i, n, r, o, a = Ie(this),
                    s = Kn(a, 0),
                    c = 0;
                for (t = -1, n = arguments.length; t < n; t++)
                    if (tr(o = -1 === t ? a : arguments[t])) {
                        if (c + (r = le(o.length)) > Yn) throw TypeError(Zn);
                        for (i = 0; i < r; i++, c++) i in o && Gn(s, c, o[i])
                    } else {
                        if (c >= Yn) throw TypeError(Zn);
                        Gn(s, c++, o)
                    } return s.length = c, s
            }
        });
        var ir = ye.f,
            nr = {}.toString,
            rr = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [],
            or = {
                f: function(e) {
                    return rr && "[object Window]" == nr.call(e) ? function(e) {
                        try {
                            return ir(e)
                        } catch (e) {
                            return rr.slice()
                        }
                    }(e) : ir(g(e))
                }
            },
            ar = {
                f: Xe
            },
            sr = x.f,
            cr = function(e) {
                var t = ie.Symbol || (ie.Symbol = {});
                v(t, e) || sr(t, e, {
                    value: ar.f(e)
                })
            },
            lr = [].push,
            ur = function(e) {
                var t = 1 == e,
                    i = 2 == e,
                    n = 3 == e,
                    r = 4 == e,
                    o = 6 == e,
                    a = 7 == e,
                    s = 5 == e || o;
                return function(c, l, u, d) {
                    for (var p, f, g = Ie(c), m = h(g), y = et(l, u, 3), _ = le(m.length), v = 0, b = d || Kn, w = t ? b(c, _) : i || a ? b(c, 0) : void 0; _ > v; v++)
                        if ((s || v in m) && (f = y(p = m[v], v, g), e))
                            if (t) w[v] = f;
                            else if (f) switch (e) {
                        case 3:
                            return !0;
                        case 5:
                            return p;
                        case 6:
                            return v;
                        case 2:
                            lr.call(w, p)
                    } else switch (e) {
                        case 4:
                            return !1;
                        case 7:
                            lr.call(w, p)
                    }
                    return o ? -1 : n || r ? r : w
                }
            },
            dr = {
                forEach: ur(0),
                map: ur(1),
                filter: ur(2),
                some: ur(3),
                every: ur(4),
                find: ur(5),
                findIndex: ur(6),
                filterOut: ur(7)
            }.forEach,
            pr = W("hidden"),
            hr = "Symbol",
            fr = Xe("toPrimitive"),
            gr = ee.set,
            mr = ee.getterFor(hr),
            yr = Object.prototype,
            _r = n.Symbol,
            vr = re("JSON", "stringify"),
            br = P.f,
            wr = x.f,
            Sr = or.f,
            Cr = c.f,
            kr = F("symbols"),
            Pr = F("op-symbols"),
            Er = F("string-to-symbol-registry"),
            Or = F("symbol-to-string-registry"),
            xr = F("wks"),
            Tr = n.QObject,
            Ir = !Tr || !Tr.prototype || !Tr.prototype.findChild,
            Mr = o && r((function() {
                return 7 != Ue(wr({}, "a", {
                    get: function() {
                        return wr(this, "a", {
                            value: 7
                        }).a
                    }
                })).a
            })) ? function(e, t, i) {
                var n = br(yr, t);
                n && delete yr[t], wr(e, t, i), n && e !== yr && wr(yr, t, n)
            } : wr,
            Ar = function(e, t) {
                var i = kr[e] = Ue(_r.prototype);
                return gr(i, {
                    type: hr,
                    tag: e,
                    description: t
                }), o || (i.description = t), i
            },
            zr = We ? function(e) {
                return "symbol" == typeof e
            } : function(e) {
                return Object(e) instanceof _r
            },
            Rr = function(e, t, i) {
                e === yr && Rr(Pr, t, i), E(e);
                var n = y(t, !0);
                return E(i), v(kr, n) ? (i.enumerable ? (v(e, pr) && e[pr][n] && (e[pr][n] = !1), i = Ue(i, {
                    enumerable: l(0, !1)
                })) : (v(e, pr) || wr(e, pr, l(1, {})), e[pr][n] = !0), Mr(e, n, i)) : wr(e, n, i)
            },
            jr = function(e, t) {
                E(e);
                var i = g(t),
                    n = De(i).concat(Lr(i));
                return dr(n, (function(t) {
                    o && !Dr.call(i, t) || Rr(e, t, i[t])
                })), e
            },
            Dr = function(e) {
                var t = y(e, !0),
                    i = Cr.call(this, t);
                return !(this === yr && v(kr, t) && !v(Pr, t)) && (!(i || !v(this, t) || !v(kr, t) || v(this, pr) && this[pr][t]) || i)
            },
            Br = function(e, t) {
                var i = g(e),
                    n = y(t, !0);
                if (i !== yr || !v(kr, n) || v(Pr, n)) {
                    var r = br(i, n);
                    return !r || !v(kr, n) || v(i, pr) && i[pr][n] || (r.enumerable = !0), r
                }
            },
            Vr = function(e) {
                var t = Sr(g(e)),
                    i = [];
                return dr(t, (function(e) {
                    v(kr, e) || v(G, e) || i.push(e)
                })), i
            },
            Lr = function(e) {
                var t = e === yr,
                    i = Sr(t ? Pr : g(e)),
                    n = [];
                return dr(i, (function(e) {
                    !v(kr, e) || t && !v(yr, e) || n.push(kr[e])
                })), n
            };
        if (He || (te((_r = function() {
                if (this instanceof _r) throw TypeError("Symbol is not a constructor");
                var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0,
                    t = U(e),
                    i = function(e) {
                        this === yr && i.call(Pr, e), v(this, pr) && v(this[pr], t) && (this[pr][t] = !1), Mr(this, t, l(1, e))
                    };
                return o && Ir && Mr(yr, t, {
                    configurable: !0,
                    set: i
                }), Ar(t, e)
            }).prototype, "toString", (function() {
                return mr(this).tag
            })), te(_r, "withoutSetter", (function(e) {
                return Ar(U(e), e)
            })), c.f = Dr, x.f = Rr, P.f = Br, ye.f = or.f = Vr, _e.f = Lr, ar.f = function(e) {
                return Ar(Xe(e), e)
            }, o && (wr(_r.prototype, "description", {
                configurable: !0,
                get: function() {
                    return mr(this).description
                }
            }), te(yr, "propertyIsEnumerable", Dr, {
                unsafe: !0
            }))), Te({
                global: !0,
                wrap: !0,
                forced: !He,
                sham: !He
            }, {
                Symbol: _r
            }), dr(De(xr), (function(e) {
                cr(e)
            })), Te({
                target: hr,
                stat: !0,
                forced: !He
            }, {
                for: function(e) {
                    var t = String(e);
                    if (v(Er, t)) return Er[t];
                    var i = _r(t);
                    return Er[t] = i, Or[i] = t, i
                },
                keyFor: function(e) {
                    if (!zr(e)) throw TypeError(e + " is not a symbol");
                    if (v(Or, e)) return Or[e]
                },
                useSetter: function() {
                    Ir = !0
                },
                useSimple: function() {
                    Ir = !1
                }
            }), Te({
                target: "Object",
                stat: !0,
                forced: !He,
                sham: !o
            }, {
                create: function(e, t) {
                    return void 0 === t ? Ue(e) : jr(Ue(e), t)
                },
                defineProperty: Rr,
                defineProperties: jr,
                getOwnPropertyDescriptor: Br
            }), Te({
                target: "Object",
                stat: !0,
                forced: !He
            }, {
                getOwnPropertyNames: Vr,
                getOwnPropertySymbols: Lr
            }), Te({
                target: "Object",
                stat: !0,
                forced: r((function() {
                    _e.f(1)
                }))
            }, {
                getOwnPropertySymbols: function(e) {
                    return _e.f(Ie(e))
                }
            }), vr) {
            var Fr = !He || r((function() {
                var e = _r();
                return "[null]" != vr([e]) || "{}" != vr({
                    a: e
                }) || "{}" != vr(Object(e))
            }));
            Te({
                target: "JSON",
                stat: !0,
                forced: Fr
            }, {
                stringify: function(e, t, i) {
                    for (var n, r = [e], o = 1; arguments.length > o;) r.push(arguments[o++]);
                    if (n = t, (m(t) || void 0 !== e) && !zr(e)) return Wn(t) || (t = function(e, t) {
                        if ("function" == typeof n && (t = n.call(this, e, t)), !zr(t)) return t
                    }), r[1] = t, vr.apply(null, r)
                }
            })
        }
        _r.prototype[fr] || T(_r.prototype, fr, _r.prototype.valueOf), mt(_r, hr), G[pr] = !0, cr("asyncIterator");
        var Nr = x.f,
            qr = n.Symbol;
        if (o && "function" == typeof qr && (!("description" in qr.prototype) || void 0 !== qr().description)) {
            var Ur = {},
                Hr = function() {
                    var e = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0]),
                        t = this instanceof Hr ? new qr(e) : void 0 === e ? qr() : qr(e);
                    return "" === e && (Ur[t] = !0), t
                };
            be(Hr, qr);
            var Wr = Hr.prototype = qr.prototype;
            Wr.constructor = Hr;
            var Gr = Wr.toString,
                Qr = "Symbol(test)" == String(qr("test")),
                Kr = /^Symbol\((.*)\)[^)]+$/;
            Nr(Wr, "description", {
                configurable: !0,
                get: function() {
                    var e = m(this) ? this.valueOf() : this,
                        t = Gr.call(e);
                    if (v(Ur, e)) return "";
                    var i = Qr ? t.slice(7, -1) : t.replace(Kr, "$1");
                    return "" === i ? void 0 : i
                }
            }), Te({
                global: !0,
                forced: !0
            }, {
                Symbol: Hr
            })
        }
        cr("hasInstance"), cr("isConcatSpreadable"), cr("iterator"), cr("match"), cr("matchAll"), cr("replace"), cr("search"), cr("species"), cr("split"), cr("toPrimitive"), cr("toStringTag"), cr("unscopables"), mt(n.JSON, "JSON", !0), mt(Math, "Math", !0), Te({
                global: !0
            }, {
                Reflect: {}
            }), mt(n.Reflect, "Reflect", !0), ie.Symbol,
            function() {
                if ("object" == typeof window)
                    if ("IntersectionObserver" in window && "IntersectionObserverEntry" in window && "intersectionRatio" in window.IntersectionObserverEntry.prototype) "isIntersecting" in window.IntersectionObserverEntry.prototype || Object.defineProperty(window.IntersectionObserverEntry.prototype, "isIntersecting", {
                        get: function() {
                            return this.intersectionRatio > 0
                        }
                    });
                    else {
                        var e = function(e) {
                                for (var t = window.document, i = r(t); i;) i = r(t = i.ownerDocument);
                                return t
                            }(),
                            t = [],
                            i = null,
                            n = null;
                        a.prototype.THROTTLE_TIMEOUT = 100, a.prototype.POLL_INTERVAL = null, a.prototype.USE_MUTATION_OBSERVER = !0, a._setupCrossOriginUpdater = function() {
                            return i || (i = function(e, i) {
                                n = e && i ? d(e, i) : {
                                    top: 0,
                                    bottom: 0,
                                    left: 0,
                                    right: 0,
                                    width: 0,
                                    height: 0
                                }, t.forEach((function(e) {
                                    e._checkForIntersections()
                                }))
                            }), i
                        }, a._resetCrossOriginUpdater = function() {
                            i = null, n = null
                        }, a.prototype.observe = function(e) {
                            if (!this._observationTargets.some((function(t) {
                                    return t.element == e
                                }))) {
                                if (!e || 1 != e.nodeType) throw new Error("target must be an Element");
                                this._registerInstance(), this._observationTargets.push({
                                    element: e,
                                    entry: null
                                }), this._monitorIntersections(e.ownerDocument), this._checkForIntersections()
                            }
                        }, a.prototype.unobserve = function(e) {
                            this._observationTargets = this._observationTargets.filter((function(t) {
                                return t.element != e
                            })), this._unmonitorIntersections(e.ownerDocument), 0 == this._observationTargets.length && this._unregisterInstance()
                        }, a.prototype.disconnect = function() {
                            this._observationTargets = [], this._unmonitorAllIntersections(), this._unregisterInstance()
                        }, a.prototype.takeRecords = function() {
                            var e = this._queuedEntries.slice();
                            return this._queuedEntries = [], e
                        }, a.prototype._initThresholds = function(e) {
                            var t = e || [0];
                            return Array.isArray(t) || (t = [t]), t.sort().filter((function(e, t, i) {
                                if ("number" != typeof e || isNaN(e) || e < 0 || e > 1) throw new Error("threshold must be a number between 0 and 1 inclusively");
                                return e !== i[t - 1]
                            }))
                        }, a.prototype._parseRootMargin = function(e) {
                            var t = (e || "0px").split(/\s+/).map((function(e) {
                                var t = /^(-?\d*\.?\d+)(px|%)$/.exec(e);
                                if (!t) throw new Error("rootMargin must be specified in pixels or percent");
                                return {
                                    value: parseFloat(t[1]),
                                    unit: t[2]
                                }
                            }));
                            return t[1] = t[1] || t[0], t[2] = t[2] || t[0], t[3] = t[3] || t[1], t
                        }, a.prototype._monitorIntersections = function(t) {
                            var i = t.defaultView;
                            if (i && -1 == this._monitoringDocuments.indexOf(t)) {
                                var n = this._checkForIntersections,
                                    o = null,
                                    a = null;
                                this.POLL_INTERVAL ? o = i.setInterval(n, this.POLL_INTERVAL) : (s(i, "resize", n, !0), s(t, "scroll", n, !0), this.USE_MUTATION_OBSERVER && "MutationObserver" in i && (a = new i.MutationObserver(n)).observe(t, {
                                    attributes: !0,
                                    childList: !0,
                                    characterData: !0,
                                    subtree: !0
                                })), this._monitoringDocuments.push(t), this._monitoringUnsubscribes.push((function() {
                                    var e = t.defaultView;
                                    e && (o && e.clearInterval(o), c(e, "resize", n, !0)), c(t, "scroll", n, !0), a && a.disconnect()
                                }));
                                var l = this.root && (this.root.ownerDocument || this.root) || e;
                                if (t != l) {
                                    var u = r(t);
                                    u && this._monitorIntersections(u.ownerDocument)
                                }
                            }
                        }, a.prototype._unmonitorIntersections = function(t) {
                            var i = this._monitoringDocuments.indexOf(t);
                            if (-1 != i) {
                                var n = this.root && (this.root.ownerDocument || this.root) || e;
                                if (!this._observationTargets.some((function(e) {
                                        var i = e.element.ownerDocument;
                                        if (i == t) return !0;
                                        for (; i && i != n;) {
                                            var o = r(i);
                                            if ((i = o && o.ownerDocument) == t) return !0
                                        }
                                        return !1
                                    }))) {
                                    var o = this._monitoringUnsubscribes[i];
                                    if (this._monitoringDocuments.splice(i, 1), this._monitoringUnsubscribes.splice(i, 1), o(), t != n) {
                                        var a = r(t);
                                        a && this._unmonitorIntersections(a.ownerDocument)
                                    }
                                }
                            }
                        }, a.prototype._unmonitorAllIntersections = function() {
                            var e = this._monitoringUnsubscribes.slice(0);
                            this._monitoringDocuments.length = 0, this._monitoringUnsubscribes.length = 0;
                            for (var t = 0; t < e.length; t++) e[t]()
                        }, a.prototype._checkForIntersections = function() {
                            if (this.root || !i || n) {
                                var e = this._rootIsInDom(),
                                    t = e ? this._getRootRect() : {
                                        top: 0,
                                        bottom: 0,
                                        left: 0,
                                        right: 0,
                                        width: 0,
                                        height: 0
                                    };
                                this._observationTargets.forEach((function(n) {
                                    var r = n.element,
                                        a = l(r),
                                        s = this._rootContainsTarget(r),
                                        c = n.entry,
                                        u = e && s && this._computeTargetAndRootIntersection(r, a, t),
                                        d = null;
                                    this._rootContainsTarget(r) ? i && !this.root || (d = t) : d = {
                                        top: 0,
                                        bottom: 0,
                                        left: 0,
                                        right: 0,
                                        width: 0,
                                        height: 0
                                    };
                                    var p = n.entry = new o({
                                        time: window.performance && performance.now && performance.now(),
                                        target: r,
                                        boundingClientRect: a,
                                        rootBounds: d,
                                        intersectionRect: u
                                    });
                                    c ? e && s ? this._hasCrossedThreshold(c, p) && this._queuedEntries.push(p) : c && c.isIntersecting && this._queuedEntries.push(p) : this._queuedEntries.push(p)
                                }), this), this._queuedEntries.length && this._callback(this.takeRecords(), this)
                            }
                        }, a.prototype._computeTargetAndRootIntersection = function(t, r, o) {
                            if ("none" != window.getComputedStyle(t).display) {
                                for (var a, s, c, u, p, f, g, m, y = r, _ = h(t), v = !1; !v && _;) {
                                    var b = null,
                                        w = 1 == _.nodeType ? window.getComputedStyle(_) : {};
                                    if ("none" == w.display) return null;
                                    if (_ == this.root || 9 == _.nodeType)
                                        if (v = !0, _ == this.root || _ == e) i && !this.root ? !n || 0 == n.width && 0 == n.height ? (_ = null, b = null, y = null) : b = n : b = o;
                                        else {
                                            var S = h(_),
                                                C = S && l(S),
                                                k = S && this._computeTargetAndRootIntersection(S, C, o);
                                            C && k ? (_ = S, b = d(C, k)) : (_ = null, y = null)
                                        }
                                    else {
                                        var P = _.ownerDocument;
                                        _ != P.body && _ != P.documentElement && "visible" != w.overflow && (b = l(_))
                                    }
                                    if (b && (a = b, s = y, c = void 0, u = void 0, p = void 0, f = void 0, g = void 0, m = void 0, c = Math.max(a.top, s.top), u = Math.min(a.bottom, s.bottom), p = Math.max(a.left, s.left), f = Math.min(a.right, s.right), m = u - c, y = (g = f - p) >= 0 && m >= 0 && {
                                            top: c,
                                            bottom: u,
                                            left: p,
                                            right: f,
                                            width: g,
                                            height: m
                                        } || null), !y) break;
                                    _ = _ && h(_)
                                }
                                return y
                            }
                        }, a.prototype._getRootRect = function() {
                            var t;
                            if (this.root && !f(this.root)) t = l(this.root);
                            else {
                                var i = f(this.root) ? this.root : e,
                                    n = i.documentElement,
                                    r = i.body;
                                t = {
                                    top: 0,
                                    left: 0,
                                    right: n.clientWidth || r.clientWidth,
                                    width: n.clientWidth || r.clientWidth,
                                    bottom: n.clientHeight || r.clientHeight,
                                    height: n.clientHeight || r.clientHeight
                                }
                            }
                            return this._expandRectByRootMargin(t)
                        }, a.prototype._expandRectByRootMargin = function(e) {
                            var t = this._rootMarginValues.map((function(t, i) {
                                    return "px" == t.unit ? t.value : t.value * (i % 2 ? e.width : e.height) / 100
                                })),
                                i = {
                                    top: e.top - t[0],
                                    right: e.right + t[1],
                                    bottom: e.bottom + t[2],
                                    left: e.left - t[3]
                                };
                            return i.width = i.right - i.left, i.height = i.bottom - i.top, i
                        }, a.prototype._hasCrossedThreshold = function(e, t) {
                            var i = e && e.isIntersecting ? e.intersectionRatio || 0 : -1,
                                n = t.isIntersecting ? t.intersectionRatio || 0 : -1;
                            if (i !== n)
                                for (var r = 0; r < this.thresholds.length; r++) {
                                    var o = this.thresholds[r];
                                    if (o == i || o == n || o < i != o < n) return !0
                                }
                        }, a.prototype._rootIsInDom = function() {
                            return !this.root || p(e, this.root)
                        }, a.prototype._rootContainsTarget = function(t) {
                            var i = this.root && (this.root.ownerDocument || this.root) || e;
                            return p(i, t) && (!this.root || i == t.ownerDocument)
                        }, a.prototype._registerInstance = function() {
                            t.indexOf(this) < 0 && t.push(this)
                        }, a.prototype._unregisterInstance = function() {
                            var e = t.indexOf(this); - 1 != e && t.splice(e, 1)
                        }, window.IntersectionObserver = a, window.IntersectionObserverEntry = o
                    }
                function r(e) {
                    try {
                        return e.defaultView && e.defaultView.frameElement || null
                    } catch (e) {
                        return null
                    }
                }

                function o(e) {
                    this.time = e.time, this.target = e.target, this.rootBounds = u(e.rootBounds), this.boundingClientRect = u(e.boundingClientRect), this.intersectionRect = u(e.intersectionRect || {
                        top: 0,
                        bottom: 0,
                        left: 0,
                        right: 0,
                        width: 0,
                        height: 0
                    }), this.isIntersecting = !!e.intersectionRect;
                    var t = this.boundingClientRect,
                        i = t.width * t.height,
                        n = this.intersectionRect,
                        r = n.width * n.height;
                    this.intersectionRatio = i ? Number((r / i).toFixed(4)) : this.isIntersecting ? 1 : 0
                }

                function a(e, t) {
                    var i, n, r, o = t || {};
                    if ("function" != typeof e) throw new Error("callback must be a function");
                    if (o.root && 1 != o.root.nodeType && 9 != o.root.nodeType) throw new Error("root must be a Document or Element");
                    this._checkForIntersections = (i = this._checkForIntersections.bind(this), n = this.THROTTLE_TIMEOUT, r = null, function() {
                        r || (r = setTimeout((function() {
                            i(), r = null
                        }), n))
                    }), this._callback = e, this._observationTargets = [], this._queuedEntries = [], this._rootMarginValues = this._parseRootMargin(o.rootMargin), this.thresholds = this._initThresholds(o.threshold), this.root = o.root || null, this.rootMargin = this._rootMarginValues.map((function(e) {
                        return e.value + e.unit
                    })).join(" "), this._monitoringDocuments = [], this._monitoringUnsubscribes = []
                }

                function s(e, t, i, n) {
                    "function" == typeof e.addEventListener ? e.addEventListener(t, i, n || !1) : "function" == typeof e.attachEvent && e.attachEvent("on" + t, i)
                }

                function c(e, t, i, n) {
                    "function" == typeof e.removeEventListener ? e.removeEventListener(t, i, n || !1) : "function" == typeof e.detatchEvent && e.detatchEvent("on" + t, i)
                }

                function l(e) {
                    var t;
                    try {
                        t = e.getBoundingClientRect()
                    } catch (e) {}
                    return t ? (t.width && t.height || (t = {
                        top: t.top,
                        right: t.right,
                        bottom: t.bottom,
                        left: t.left,
                        width: t.right - t.left,
                        height: t.bottom - t.top
                    }), t) : {
                        top: 0,
                        bottom: 0,
                        left: 0,
                        right: 0,
                        width: 0,
                        height: 0
                    }
                }

                function u(e) {
                    return !e || "x" in e ? e : {
                        top: e.top,
                        y: e.top,
                        bottom: e.bottom,
                        left: e.left,
                        x: e.left,
                        right: e.right,
                        width: e.width,
                        height: e.height
                    }
                }

                function d(e, t) {
                    var i = t.top - e.top,
                        n = t.left - e.left;
                    return {
                        top: i,
                        left: n,
                        height: t.height,
                        width: t.width,
                        bottom: i + t.height,
                        right: n + t.width
                    }
                }

                function p(e, t) {
                    for (var i = t; i;) {
                        if (i == e) return !0;
                        i = h(i)
                    }
                    return !1
                }

                function h(t) {
                    var i = t.parentNode;
                    return 9 == t.nodeType && t != e ? r(t) : (i && i.assignedSlot && (i = i.assignedSlot.parentNode), i && 11 == i.nodeType && i.host ? i.host : i)
                }

                function f(e) {
                    return e && 9 === e.nodeType
                }
            }();
        var Xr = function(e, t) {
            return (Xr = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function(e, t) {
                    e.__proto__ = t
                } || function(e, t) {
                    for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
                })(e, t)
        };

        function Jr(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");

            function i() {
                this.constructor = e
            }
            Xr(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i)
        }
        var Yr, Zr, $r = function() {
            return ($r = Object.assign || function(e) {
                for (var t, i = 1, n = arguments.length; i < n; i++)
                    for (var r in t = arguments[i]) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
                return e
            }).apply(this, arguments)
        };

        function eo(e, t, i, n) {
            var r, o = arguments.length,
                a = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n;
            if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(e, t, i, n);
            else
                for (var s = e.length - 1; s >= 0; s--)(r = e[s]) && (a = (o < 3 ? r(a) : o > 3 ? r(t, i, a) : r(t, i)) || a);
            return o > 3 && a && Object.defineProperty(t, i, a), a
        }

        function to(e, t) {
            return function(i, n) {
                t(i, n, e)
            }
        }

        function io(e, t) {
            if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(e, t)
        }

        function no(e, t, i, n) {
            return new(i || (i = Promise))((function(r, o) {
                function a(e) {
                    try {
                        c(n.next(e))
                    } catch (e) {
                        o(e)
                    }
                }

                function s(e) {
                    try {
                        c(n.throw(e))
                    } catch (e) {
                        o(e)
                    }
                }

                function c(e) {
                    var t;
                    e.done ? r(e.value) : (t = e.value, t instanceof i ? t : new i((function(e) {
                        e(t)
                    }))).then(a, s)
                }
                c((n = n.apply(e, t || [])).next())
            }))
        }

        function ro(e, t) {
            var i, n, r, o, a = {
                label: 0,
                sent: function() {
                    if (1 & r[0]) throw r[1];
                    return r[1]
                },
                trys: [],
                ops: []
            };
            return o = {
                next: s(0),
                throw: s(1),
                return: s(2)
            }, "function" == typeof Symbol && (o[Symbol.iterator] = function() {
                return this
            }), o;

            function s(o) {
                return function(s) {
                    return function(o) {
                        if (i) throw new TypeError("Generator is already executing.");
                        for (; a;) try {
                            if (i = 1, n && (r = 2 & o[0] ? n.return : o[0] ? n.throw || ((r = n.return) && r.call(n), 0) : n.next) && !(r = r.call(n, o[1])).done) return r;
                            switch (n = 0, r && (o = [2 & o[0], r.value]), o[0]) {
                                case 0:
                                case 1:
                                    r = o;
                                    break;
                                case 4:
                                    return a.label++, {
                                        value: o[1],
                                        done: !1
                                    };
                                case 5:
                                    a.label++, n = o[1], o = [0];
                                    continue;
                                case 7:
                                    o = a.ops.pop(), a.trys.pop();
                                    continue;
                                default:
                                    if (!(r = a.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== o[0] && 2 !== o[0])) {
                                        a = 0;
                                        continue
                                    }
                                    if (3 === o[0] && (!r || o[1] > r[0] && o[1] < r[3])) {
                                        a.label = o[1];
                                        break
                                    }
                                    if (6 === o[0] && a.label < r[1]) {
                                        a.label = r[1], r = o;
                                        break
                                    }
                                    if (r && a.label < r[2]) {
                                        a.label = r[2], a.ops.push(o);
                                        break
                                    }
                                    r[2] && a.ops.pop(), a.trys.pop();
                                    continue
                            }
                            o = t.call(e, a)
                        } catch (e) {
                            o = [6, e], n = 0
                        } finally {
                            i = r = 0
                        }
                        if (5 & o[0]) throw o[1];
                        return {
                            value: o[0] ? o[1] : void 0,
                            done: !0
                        }
                    }([o, s])
                }
            }
        }

        function oo(e) {
            var t = "function" == typeof Symbol && Symbol.iterator,
                i = t && e[t],
                n = 0;
            if (i) return i.call(e);
            if (e && "number" == typeof e.length) return {
                next: function() {
                    return e && n >= e.length && (e = void 0), {
                        value: e && e[n++],
                        done: !e
                    }
                }
            };
            throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
        }

        function ao(e, t) {
            var i = "function" == typeof Symbol && e[Symbol.iterator];
            if (!i) return e;
            var n, r, o = i.call(e),
                a = [];
            try {
                for (;
                    (void 0 === t || t-- > 0) && !(n = o.next()).done;) a.push(n.value)
            } catch (e) {
                r = {
                    error: e
                }
            } finally {
                try {
                    n && !n.done && (i = o.return) && i.call(o)
                } finally {
                    if (r) throw r.error
                }
            }
            return a
        }

        function so() {
            for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(ao(arguments[t]));
            return e
        }! function(t) {
            ! function(i) {
                var n = "object" == typeof e ? e : "object" == typeof self ? self : "object" == typeof this ? this : Function("return this;")(),
                    r = o(t);

                function o(e, t) {
                    return function(i, n) {
                        "function" != typeof e[i] && Object.defineProperty(e, i, {
                            configurable: !0,
                            writable: !0,
                            value: n
                        }), t && t(i, n)
                    }
                }
                void 0 === n.Reflect ? n.Reflect = t : r = o(n.Reflect, r),
                    function(e) {
                        var t = Object.prototype.hasOwnProperty,
                            i = "function" == typeof Symbol,
                            n = i && void 0 !== Symbol.toPrimitive ? Symbol.toPrimitive : "@@toPrimitive",
                            r = i && void 0 !== Symbol.iterator ? Symbol.iterator : "@@iterator",
                            o = "function" == typeof Object.create,
                            a = {
                                __proto__: []
                            }
                        instanceof Array, s = !o && !a, c = {
                            create: o ? function() {
                                return ne(Object.create(null))
                            } : a ? function() {
                                return ne({
                                    __proto__: null
                                })
                            } : function() {
                                return ne({})
                            },
                            has: s ? function(e, i) {
                                return t.call(e, i)
                            } : function(e, t) {
                                return t in e
                            },
                            get: s ? function(e, i) {
                                return t.call(e, i) ? e[i] : void 0
                            } : function(e, t) {
                                return e[t]
                            }
                        }, l = Object.getPrototypeOf(Function), u = "object" == typeof process && process.env && "true" === process.env.REFLECT_METADATA_USE_MAP_POLYFILL, d = u || "function" != typeof Map || "function" != typeof Map.prototype.entries ? ee() : Map, p = u || "function" != typeof Set || "function" != typeof Set.prototype.entries ? te() : Set, h = new(u || "function" != typeof WeakMap ? ie() : WeakMap);

                        function f(e, t, i, n) {
                            if (j(i)) {
                                if (!H(e)) throw new TypeError;
                                if (!G(t)) throw new TypeError;
                                return k(e, t)
                            }
                            if (!H(e)) throw new TypeError;
                            if (!V(t)) throw new TypeError;
                            if (!V(n) && !j(n) && !D(n)) throw new TypeError;
                            return D(n) && (n = void 0), P(e, t, i = U(i), n)
                        }

                        function g(e, t) {
                            function i(i, n) {
                                if (!V(i)) throw new TypeError;
                                if (!j(n) && !Q(n)) throw new TypeError;
                                M(e, t, i, n)
                            }
                            return i
                        }

                        function m(e, t, i, n) {
                            if (!V(i)) throw new TypeError;
                            return j(n) || (n = U(n)), M(e, t, i, n)
                        }

                        function y(e, t, i) {
                            if (!V(t)) throw new TypeError;
                            return j(i) || (i = U(i)), O(e, t, i)
                        }

                        function _(e, t, i) {
                            if (!V(t)) throw new TypeError;
                            return j(i) || (i = U(i)), x(e, t, i)
                        }

                        function v(e, t, i) {
                            if (!V(t)) throw new TypeError;
                            return j(i) || (i = U(i)), T(e, t, i)
                        }

                        function b(e, t, i) {
                            if (!V(t)) throw new TypeError;
                            return j(i) || (i = U(i)), I(e, t, i)
                        }

                        function w(e, t) {
                            if (!V(e)) throw new TypeError;
                            return j(t) || (t = U(t)), A(e, t)
                        }

                        function S(e, t) {
                            if (!V(e)) throw new TypeError;
                            return j(t) || (t = U(t)), z(e, t)
                        }

                        function C(e, t, i) {
                            if (!V(t)) throw new TypeError;
                            j(i) || (i = U(i));
                            var n = E(t, i, !1);
                            if (j(n)) return !1;
                            if (!n.delete(e)) return !1;
                            if (n.size > 0) return !0;
                            var r = h.get(t);
                            return r.delete(i), r.size > 0 || h.delete(t), !0
                        }

                        function k(e, t) {
                            for (var i = e.length - 1; i >= 0; --i) {
                                var n = (0, e[i])(t);
                                if (!j(n) && !D(n)) {
                                    if (!G(n)) throw new TypeError;
                                    t = n
                                }
                            }
                            return t
                        }

                        function P(e, t, i, n) {
                            for (var r = e.length - 1; r >= 0; --r) {
                                var o = (0, e[r])(t, i, n);
                                if (!j(o) && !D(o)) {
                                    if (!V(o)) throw new TypeError;
                                    n = o
                                }
                            }
                            return n
                        }

                        function E(e, t, i) {
                            var n = h.get(e);
                            if (j(n)) {
                                if (!i) return;
                                n = new d, h.set(e, n)
                            }
                            var r = n.get(t);
                            if (j(r)) {
                                if (!i) return;
                                r = new d, n.set(t, r)
                            }
                            return r
                        }

                        function O(e, t, i) {
                            if (x(e, t, i)) return !0;
                            var n = $(t);
                            return !D(n) && O(e, n, i)
                        }

                        function x(e, t, i) {
                            var n = E(t, i, !1);
                            return !j(n) && N(n.has(e))
                        }

                        function T(e, t, i) {
                            if (x(e, t, i)) return I(e, t, i);
                            var n = $(t);
                            return D(n) ? void 0 : T(e, n, i)
                        }

                        function I(e, t, i) {
                            var n = E(t, i, !1);
                            if (!j(n)) return n.get(e)
                        }

                        function M(e, t, i, n) {
                            E(i, n, !0).set(e, t)
                        }

                        function A(e, t) {
                            var i = z(e, t),
                                n = $(e);
                            if (null === n) return i;
                            var r = A(n, t);
                            if (r.length <= 0) return i;
                            if (i.length <= 0) return r;
                            for (var o = new p, a = [], s = 0, c = i; s < c.length; s++) {
                                var l = c[s];
                                o.has(l) || (o.add(l), a.push(l))
                            }
                            for (var u = 0, d = r; u < d.length; u++) {
                                l = d[u];
                                o.has(l) || (o.add(l), a.push(l))
                            }
                            return a
                        }

                        function z(e, t) {
                            var i = [],
                                n = E(e, t, !1);
                            if (j(n)) return i;
                            for (var r = X(n.keys()), o = 0;;) {
                                var a = Y(r);
                                if (!a) return i.length = o, i;
                                var s = J(a);
                                try {
                                    i[o] = s
                                } catch (e) {
                                    try {
                                        Z(r)
                                    } finally {
                                        throw e
                                    }
                                }
                                o++
                            }
                        }

                        function R(e) {
                            if (null === e) return 1;
                            switch (typeof e) {
                                case "undefined":
                                    return 0;
                                case "boolean":
                                    return 2;
                                case "string":
                                    return 3;
                                case "symbol":
                                    return 4;
                                case "number":
                                    return 5;
                                case "object":
                                    return null === e ? 1 : 6;
                                default:
                                    return 6
                            }
                        }

                        function j(e) {
                            return void 0 === e
                        }

                        function D(e) {
                            return null === e
                        }

                        function B(e) {
                            return "symbol" == typeof e
                        }

                        function V(e) {
                            return "object" == typeof e ? null !== e : "function" == typeof e
                        }

                        function L(e, t) {
                            switch (R(e)) {
                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:
                                case 5:
                                    return e
                            }
                            var i = 3 === t ? "string" : 5 === t ? "number" : "default",
                                r = K(e, n);
                            if (void 0 !== r) {
                                var o = r.call(e, i);
                                if (V(o)) throw new TypeError;
                                return o
                            }
                            return F(e, "default" === i ? "number" : i)
                        }

                        function F(e, t) {
                            if ("string" === t) {
                                var i = e.toString;
                                if (W(i))
                                    if (!V(r = i.call(e))) return r;
                                if (W(n = e.valueOf))
                                    if (!V(r = n.call(e))) return r
                            } else {
                                var n;
                                if (W(n = e.valueOf))
                                    if (!V(r = n.call(e))) return r;
                                var r, o = e.toString;
                                if (W(o))
                                    if (!V(r = o.call(e))) return r
                            }
                            throw new TypeError
                        }

                        function N(e) {
                            return !!e
                        }

                        function q(e) {
                            return "" + e
                        }

                        function U(e) {
                            var t = L(e, 3);
                            return B(t) ? t : q(t)
                        }

                        function H(e) {
                            return Array.isArray ? Array.isArray(e) : e instanceof Object ? e instanceof Array : "[object Array]" === Object.prototype.toString.call(e)
                        }

                        function W(e) {
                            return "function" == typeof e
                        }

                        function G(e) {
                            return "function" == typeof e
                        }

                        function Q(e) {
                            switch (R(e)) {
                                case 3:
                                case 4:
                                    return !0;
                                default:
                                    return !1
                            }
                        }

                        function K(e, t) {
                            var i = e[t];
                            if (null != i) {
                                if (!W(i)) throw new TypeError;
                                return i
                            }
                        }

                        function X(e) {
                            var t = K(e, r);
                            if (!W(t)) throw new TypeError;
                            var i = t.call(e);
                            if (!V(i)) throw new TypeError;
                            return i
                        }

                        function J(e) {
                            return e.value
                        }

                        function Y(e) {
                            var t = e.next();
                            return !t.done && t
                        }

                        function Z(e) {
                            var t = e.return;
                            t && t.call(e)
                        }

                        function $(e) {
                            var t = Object.getPrototypeOf(e);
                            if ("function" != typeof e || e === l) return t;
                            if (t !== l) return t;
                            var i = e.prototype,
                                n = i && Object.getPrototypeOf(i);
                            if (null == n || n === Object.prototype) return t;
                            var r = n.constructor;
                            return "function" != typeof r || r === e ? t : r
                        }

                        function ee() {
                            var e = {},
                                t = [],
                                i = function() {
                                    function e(e, t, i) {
                                        this._index = 0, this._keys = e, this._values = t, this._selector = i
                                    }
                                    return e.prototype["@@iterator"] = function() {
                                        return this
                                    }, e.prototype[r] = function() {
                                        return this
                                    }, e.prototype.next = function() {
                                        var e = this._index;
                                        if (e >= 0 && e < this._keys.length) {
                                            var i = this._selector(this._keys[e], this._values[e]);
                                            return e + 1 >= this._keys.length ? (this._index = -1, this._keys = t, this._values = t) : this._index++, {
                                                value: i,
                                                done: !1
                                            }
                                        }
                                        return {
                                            value: void 0,
                                            done: !0
                                        }
                                    }, e.prototype.throw = function(e) {
                                        throw this._index >= 0 && (this._index = -1, this._keys = t, this._values = t), e
                                    }, e.prototype.return = function(e) {
                                        return this._index >= 0 && (this._index = -1, this._keys = t, this._values = t), {
                                            value: e,
                                            done: !0
                                        }
                                    }, e
                                }();
                            return function() {
                                function t() {
                                    this._keys = [], this._values = [], this._cacheKey = e, this._cacheIndex = -2
                                }
                                return Object.defineProperty(t.prototype, "size", {
                                    get: function() {
                                        return this._keys.length
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }), t.prototype.has = function(e) {
                                    return this._find(e, !1) >= 0
                                }, t.prototype.get = function(e) {
                                    var t = this._find(e, !1);
                                    return t >= 0 ? this._values[t] : void 0
                                }, t.prototype.set = function(e, t) {
                                    var i = this._find(e, !0);
                                    return this._values[i] = t, this
                                }, t.prototype.delete = function(t) {
                                    var i = this._find(t, !1);
                                    if (i >= 0) {
                                        for (var n = this._keys.length, r = i + 1; r < n; r++) this._keys[r - 1] = this._keys[r], this._values[r - 1] = this._values[r];
                                        return this._keys.length--, this._values.length--, t === this._cacheKey && (this._cacheKey = e, this._cacheIndex = -2), !0
                                    }
                                    return !1
                                }, t.prototype.clear = function() {
                                    this._keys.length = 0, this._values.length = 0, this._cacheKey = e, this._cacheIndex = -2
                                }, t.prototype.keys = function() {
                                    return new i(this._keys, this._values, n)
                                }, t.prototype.values = function() {
                                    return new i(this._keys, this._values, o)
                                }, t.prototype.entries = function() {
                                    return new i(this._keys, this._values, a)
                                }, t.prototype["@@iterator"] = function() {
                                    return this.entries()
                                }, t.prototype[r] = function() {
                                    return this.entries()
                                }, t.prototype._find = function(e, t) {
                                    return this._cacheKey !== e && (this._cacheIndex = this._keys.indexOf(this._cacheKey = e)), this._cacheIndex < 0 && t && (this._cacheIndex = this._keys.length, this._keys.push(e), this._values.push(void 0)), this._cacheIndex
                                }, t
                            }();

                            function n(e, t) {
                                return e
                            }

                            function o(e, t) {
                                return t
                            }

                            function a(e, t) {
                                return [e, t]
                            }
                        }

                        function te() {
                            return function() {
                                function e() {
                                    this._map = new d
                                }
                                return Object.defineProperty(e.prototype, "size", {
                                    get: function() {
                                        return this._map.size
                                    },
                                    enumerable: !0,
                                    configurable: !0
                                }), e.prototype.has = function(e) {
                                    return this._map.has(e)
                                }, e.prototype.add = function(e) {
                                    return this._map.set(e, e), this
                                }, e.prototype.delete = function(e) {
                                    return this._map.delete(e)
                                }, e.prototype.clear = function() {
                                    this._map.clear()
                                }, e.prototype.keys = function() {
                                    return this._map.keys()
                                }, e.prototype.values = function() {
                                    return this._map.values()
                                }, e.prototype.entries = function() {
                                    return this._map.entries()
                                }, e.prototype["@@iterator"] = function() {
                                    return this.keys()
                                }, e.prototype[r] = function() {
                                    return this.keys()
                                }, e
                            }()
                        }

                        function ie() {
                            var e = 16,
                                i = c.create(),
                                n = r();
                            return function() {
                                function e() {
                                    this._key = r()
                                }
                                return e.prototype.has = function(e) {
                                    var t = o(e, !1);
                                    return void 0 !== t && c.has(t, this._key)
                                }, e.prototype.get = function(e) {
                                    var t = o(e, !1);
                                    return void 0 !== t ? c.get(t, this._key) : void 0
                                }, e.prototype.set = function(e, t) {
                                    return o(e, !0)[this._key] = t, this
                                }, e.prototype.delete = function(e) {
                                    var t = o(e, !1);
                                    return void 0 !== t && delete t[this._key]
                                }, e.prototype.clear = function() {
                                    this._key = r()
                                }, e
                            }();

                            function r() {
                                var e;
                                do {
                                    e = "@@WeakMap@@" + l()
                                } while (c.has(i, e));
                                return i[e] = !0, e
                            }

                            function o(e, i) {
                                if (!t.call(e, n)) {
                                    if (!i) return;
                                    Object.defineProperty(e, n, {
                                        value: c.create()
                                    })
                                }
                                return e[n]
                            }

                            function a(e, t) {
                                for (var i = 0; i < t; ++i) e[i] = 255 * Math.random() | 0;
                                return e
                            }

                            function s(e) {
                                return "function" == typeof Uint8Array ? "undefined" != typeof crypto ? crypto.getRandomValues(new Uint8Array(e)) : "undefined" != typeof msCrypto ? msCrypto.getRandomValues(new Uint8Array(e)) : a(new Uint8Array(e), e) : a(new Array(e), e)
                            }

                            function l() {
                                var t = s(e);
                                t[6] = 79 & t[6] | 64, t[8] = 191 & t[8] | 128;
                                for (var i = "", n = 0; n < e; ++n) {
                                    var r = t[n];
                                    4 !== n && 6 !== n && 8 !== n || (i += "-"), r < 16 && (i += "0"), i += r.toString(16).toLowerCase()
                                }
                                return i
                            }
                        }

                        function ne(e) {
                            return e.__ = void 0, delete e.__, e
                        }
                        e("decorate", f), e("metadata", g), e("defineMetadata", m), e("hasMetadata", y), e("hasOwnMetadata", _), e("getMetadata", v), e("getOwnMetadata", b), e("getMetadataKeys", w), e("getOwnMetadataKeys", S), e("deleteMetadata", C)
                    }(r)
            }()
        }(Yr || (Yr = {})),
        function(e) {
            e[e.Transient = 0] = "Transient", e[e.Singleton = 1] = "Singleton", e[e.ResolutionScoped = 2] = "ResolutionScoped", e[e.ContainerScoped = 3] = "ContainerScoped"
        }(Zr || (Zr = {}));
        var co = Zr,
            lo = function(e, t) {
                return (lo = Object.setPrototypeOf || {
                        __proto__: []
                    }
                    instanceof Array && function(e, t) {
                        e.__proto__ = t
                    } || function(e, t) {
                        for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i])
                    })(e, t)
            };

        function uo(e, t) {
            function i() {
                this.constructor = e
            }
            lo(e, t), e.prototype = null === t ? Object.create(t) : (i.prototype = t.prototype, new i)
        }

        function po(e) {
            var t = "function" == typeof Symbol && Symbol.iterator,
                i = t && e[t],
                n = 0;
            if (i) return i.call(e);
            if (e && "number" == typeof e.length) return {
                next: function() {
                    return e && n >= e.length && (e = void 0), {
                        value: e && e[n++],
                        done: !e
                    }
                }
            };
            throw new TypeError(t ? "Object is not iterable." : "Symbol.iterator is not defined.")
        }

        function ho(e, t) {
            var i = "function" == typeof Symbol && e[Symbol.iterator];
            if (!i) return e;
            var n, r, o = i.call(e),
                a = [];
            try {
                for (;
                    (void 0 === t || t-- > 0) && !(n = o.next()).done;) a.push(n.value)
            } catch (e) {
                r = {
                    error: e
                }
            } finally {
                try {
                    n && !n.done && (i = o.return) && i.call(o)
                } finally {
                    if (r) throw r.error
                }
            }
            return a
        }

        function fo() {
            for (var e = [], t = 0; t < arguments.length; t++) e = e.concat(ho(arguments[t]));
            return e
        }
        var go = "injectionTokens";

        function mo(e) {
            return !!e.useClass
        }

        function yo(e) {
            return !!e.useFactory
        }
        var _o = function() {
            function e(e) {
                this.wrap = e, this.reflectMethods = ["get", "getPrototypeOf", "setPrototypeOf", "getOwnPropertyDescriptor", "defineProperty", "has", "set", "deleteProperty", "apply", "construct"]
            }
            return e.prototype.createProxy = function(e) {
                var t, i = this,
                    n = !1;
                return new Proxy({}, this.createHandler((function() {
                    return n || (t = e(i.wrap()), n = !0), t
                })))
            }, e.prototype.createHandler = function(e) {
                var t = {};
                return this.reflectMethods.forEach((function(i) {
                    t[i] = function() {
                        for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
                        t[0] = e();
                        var r = Reflect[i];
                        return r.apply(void 0, fo(t))
                    }
                })), t
            }, e
        }();

        function vo(e) {
            return "string" == typeof e || "symbol" == typeof e
        }

        function bo(e) {
            return "object" == typeof e && "token" in e && "transform" in e
        }

        function wo(e) {
            return !!e.useToken
        }

        function So(e) {
            return null != e.useValue
        }
        var Co = function() {
                function e() {
                    this._registryMap = new Map
                }
                return e.prototype.entries = function() {
                    return this._registryMap.entries()
                }, e.prototype.getAll = function(e) {
                    return this.ensure(e), this._registryMap.get(e)
                }, e.prototype.get = function(e) {
                    this.ensure(e);
                    var t = this._registryMap.get(e);
                    return t[t.length - 1] || null
                }, e.prototype.set = function(e, t) {
                    this.ensure(e), this._registryMap.get(e).push(t)
                }, e.prototype.setAll = function(e, t) {
                    this._registryMap.set(e, t)
                }, e.prototype.has = function(e) {
                    return this.ensure(e), this._registryMap.get(e).length > 0
                }, e.prototype.clear = function() {
                    this._registryMap.clear()
                }, e.prototype.ensure = function(e) {
                    this._registryMap.has(e) || this._registryMap.set(e, [])
                }, e
            }(),
            ko = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return uo(t, e), t
            }(Co),
            Po = function() {
                this.scopedResolutions = new Map
            };

        function Eo(e, t, i) {
            var n, r, o = ho(e.toString().match(/constructor\(([\w, ]+)\)/) || [], 2)[1],
                a = function(e, t) {
                    return null === e ? "at position #" + t : '"' + e.split(",")[t].trim() + '" at position #' + t
                }(void 0 === o ? null : o, t);
            return n = "Cannot inject the dependency " + a + ' of "' + e.name + '" constructor. Reason:', void 0 === r && (r = "    "), fo([n], i.message.split("\n").map((function(e) {
                return r + e
            }))).join("\n")
        }
        var Oo = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return uo(t, e), t
            }(Co),
            xo = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return uo(t, e), t
            }(Co),
            To = function() {
                this.preResolution = new Oo, this.postResolution = new xo
            },
            Io = new Map,
            Mo = new(function() {
                function e(e) {
                    this.parent = e, this._registry = new ko, this.interceptors = new To
                }
                return e.prototype.register = function(e, t, i) {
                    var n;
                    if (void 0 === i && (i = {
                            lifecycle: co.Transient
                        }), n = function(e) {
                            return mo(e) || So(e) || wo(e) || yo(e)
                        }(t) ? t : {
                            useClass: t
                        }, wo(n))
                        for (var r = [e], o = n; null != o;) {
                            var a = o.useToken;
                            if (r.includes(a)) throw new Error("Token registration cycle detected! " + fo(r, [a]).join(" -> "));
                            r.push(a);
                            var s = this._registry.get(a);
                            o = s && wo(s.provider) ? s.provider : null
                        }
                    if ((i.lifecycle === co.Singleton || i.lifecycle == co.ContainerScoped || i.lifecycle == co.ResolutionScoped) && (So(n) || yo(n))) throw new Error('Cannot use lifecycle "' + co[i.lifecycle] + '" with ValueProviders or FactoryProviders');
                    return this._registry.set(e, {
                        provider: n,
                        options: i
                    }), this
                }, e.prototype.registerType = function(e, t) {
                    return vo(t) ? this.register(e, {
                        useToken: t
                    }) : this.register(e, {
                        useClass: t
                    })
                }, e.prototype.registerInstance = function(e, t) {
                    return this.register(e, {
                        useValue: t
                    })
                }, e.prototype.registerSingleton = function(e, t) {
                    if (vo(e)) {
                        if (vo(t)) return this.register(e, {
                            useToken: t
                        }, {
                            lifecycle: co.Singleton
                        });
                        if (t) return this.register(e, {
                            useClass: t
                        }, {
                            lifecycle: co.Singleton
                        });
                        throw new Error('Cannot register a type name as a singleton without a "to" token')
                    }
                    var i = e;
                    return t && !vo(t) && (i = t), this.register(e, {
                        useClass: i
                    }, {
                        lifecycle: co.Singleton
                    })
                }, e.prototype.resolve = function(e, t) {
                    void 0 === t && (t = new Po);
                    var i = this.getRegistration(e);
                    if (!i && vo(e)) throw new Error('Attempted to resolve unregistered dependency token: "' + e.toString() + '"');
                    if (this.executePreResolutionInterceptor(e, "Single"), i) {
                        var n = this.resolveRegistration(i, t);
                        return this.executePostResolutionInterceptor(e, n, "Single"), n
                    }
                    if (function(e) {
                            return "function" == typeof e || e instanceof _o
                        }(e)) {
                        n = this.construct(e, t);
                        return this.executePostResolutionInterceptor(e, n, "Single"), n
                    }
                    throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")
                }, e.prototype.executePreResolutionInterceptor = function(e, t) {
                    var i, n;
                    if (this.interceptors.preResolution.has(e)) {
                        var r = [];
                        try {
                            for (var o = po(this.interceptors.preResolution.getAll(e)), a = o.next(); !a.done; a = o.next()) {
                                var s = a.value;
                                "Once" != s.options.frequency && r.push(s), s.callback(e, t)
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                a && !a.done && (n = o.return) && n.call(o)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                        this.interceptors.preResolution.setAll(e, r)
                    }
                }, e.prototype.executePostResolutionInterceptor = function(e, t, i) {
                    var n, r;
                    if (this.interceptors.postResolution.has(e)) {
                        var o = [];
                        try {
                            for (var a = po(this.interceptors.postResolution.getAll(e)), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                "Once" != c.options.frequency && o.push(c), c.callback(e, t, i)
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                        this.interceptors.postResolution.setAll(e, o)
                    }
                }, e.prototype.resolveRegistration = function(e, t) {
                    if (e.options.lifecycle === co.ResolutionScoped && t.scopedResolutions.has(e)) return t.scopedResolutions.get(e);
                    var i, n = e.options.lifecycle === co.Singleton,
                        r = e.options.lifecycle === co.ContainerScoped,
                        o = n || r;
                    return i = So(e.provider) ? e.provider.useValue : wo(e.provider) ? o ? e.instance || (e.instance = this.resolve(e.provider.useToken, t)) : this.resolve(e.provider.useToken, t) : mo(e.provider) ? o ? e.instance || (e.instance = this.construct(e.provider.useClass, t)) : this.construct(e.provider.useClass, t) : yo(e.provider) ? e.provider.useFactory(this) : this.construct(e.provider, t), e.options.lifecycle === co.ResolutionScoped && t.scopedResolutions.set(e, i), i
                }, e.prototype.resolveAll = function(e, t) {
                    var i = this;
                    void 0 === t && (t = new Po);
                    var n = this.getAllRegistrations(e);
                    if (!n && vo(e)) throw new Error('Attempted to resolve unregistered dependency token: "' + e.toString() + '"');
                    if (this.executePreResolutionInterceptor(e, "All"), n) {
                        var r = n.map((function(e) {
                            return i.resolveRegistration(e, t)
                        }));
                        return this.executePostResolutionInterceptor(e, r, "All"), r
                    }
                    var o = [this.construct(e, t)];
                    return this.executePostResolutionInterceptor(e, o, "All"), o
                }, e.prototype.isRegistered = function(e, t) {
                    return void 0 === t && (t = !1), this._registry.has(e) || t && (this.parent || !1) && this.parent.isRegistered(e, !0)
                }, e.prototype.reset = function() {
                    this._registry.clear(), this.interceptors.preResolution.clear(), this.interceptors.postResolution.clear()
                }, e.prototype.clearInstances = function() {
                    var e, t;
                    try {
                        for (var i = po(this._registry.entries()), n = i.next(); !n.done; n = i.next()) {
                            var r = ho(n.value, 2),
                                o = r[0],
                                a = r[1];
                            this._registry.setAll(o, a.filter((function(e) {
                                return !So(e.provider)
                            })).map((function(e) {
                                return e.instance = void 0, e
                            })))
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, e.prototype.createChildContainer = function() {
                    var t, i, n = new e(this);
                    try {
                        for (var r = po(this._registry.entries()), o = r.next(); !o.done; o = r.next()) {
                            var a = ho(o.value, 2),
                                s = a[0],
                                c = a[1];
                            c.some((function(e) {
                                return e.options.lifecycle === co.ContainerScoped
                            })) && n._registry.setAll(s, c.map((function(e) {
                                return e.options.lifecycle === co.ContainerScoped ? {
                                    provider: e.provider,
                                    options: e.options
                                } : e
                            })))
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            o && !o.done && (i = r.return) && i.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return n
                }, e.prototype.beforeResolution = function(e, t, i) {
                    void 0 === i && (i = {
                        frequency: "Always"
                    }), this.interceptors.preResolution.set(e, {
                        callback: t,
                        options: i
                    })
                }, e.prototype.afterResolution = function(e, t, i) {
                    void 0 === i && (i = {
                        frequency: "Always"
                    }), this.interceptors.postResolution.set(e, {
                        callback: t,
                        options: i
                    })
                }, e.prototype.getRegistration = function(e) {
                    return this.isRegistered(e) ? this._registry.get(e) : this.parent ? this.parent.getRegistration(e) : null
                }, e.prototype.getAllRegistrations = function(e) {
                    return this.isRegistered(e) ? this._registry.getAll(e) : this.parent ? this.parent.getAllRegistrations(e) : null
                }, e.prototype.construct = function(e, t) {
                    var i = this;
                    if (e instanceof _o) return e.createProxy((function(e) {
                        return i.resolve(e, t)
                    }));
                    var n = Io.get(e);
                    if (!n || 0 === n.length) {
                        if (0 === e.length) return new e;
                        throw new Error('TypeInfo not known for "' + e.name + '"')
                    }
                    var r = n.map(this.resolveParams(t, e));
                    return new(e.bind.apply(e, fo([void 0], r)))
                }, e.prototype.resolveParams = function(e, t) {
                    var i = this;
                    return function(n, r) {
                        var o, a, s, c;
                        try {
                            return "object" == typeof(c = n) && "token" in c && "multiple" in c ? bo(n) ? n.multiple ? (o = i.resolve(n.transform)).transform.apply(o, fo([i.resolveAll(n.token)], n.transformArgs)) : (a = i.resolve(n.transform)).transform.apply(a, fo([i.resolve(n.token, e)], n.transformArgs)) : n.multiple ? i.resolveAll(n.token) : i.resolve(n.token, e) : bo(n) ? (s = i.resolve(n.transform, e)).transform.apply(s, fo([i.resolve(n.token, e)], n.transformArgs)) : i.resolve(n, e)
                        } catch (e) {
                            throw new Error(Eo(t, r, e))
                        }
                    }
                }, e
            }());

        function Ao(e) {
            return function(e, t) {
                return function(i, n, r) {
                    var o = Reflect.getOwnMetadata(go, i) || {};
                    o[r] = t ? {
                        token: e,
                        transform: t.transformToken,
                        transformArgs: t.args || []
                    } : e, Reflect.defineMetadata(go, o, i)
                }
            }(e)
        }

        function zo() {
            return function(e) {
                Io.set(e, function(e) {
                    var t = Reflect.getMetadata("design:paramtypes", e) || [],
                        i = Reflect.getOwnMetadata(go, e) || {};
                    return Object.keys(i).forEach((function(e) {
                        t[+e] = i[e]
                    })), t
                }(e))
            }
        }

        function Ro() {
            return function(e) {
                zo()(e), Mo.registerSingleton(e)
            }
        }
        if ("undefined" == typeof Reflect || !Reflect.getMetadata) throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.");
        var jo = function() {
                function e(e) {
                    this._wait = e, this._timeouts = new Map
                }
                return e.prototype.limit = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t = this;
                        return ro(this, (function(i) {
                            return [2, new Promise((function(i) {
                                t._timeouts.has(e) && window.clearTimeout(t._timeouts.get(e));
                                var n = window.setTimeout((function() {
                                    i()
                                }), t._wait);
                                t._timeouts.set(e, n)
                            }))]
                        }))
                    }))
                }, e
            }(),
            Do = function() {
                function e() {
                    this._listeners = new Set, this._emitted = 0
                }
                return e.prototype.on = function(e) {
                    var t = this;
                    return this._listeners.add(e),
                        function() {
                            t.off(e)
                        }
                }, e.prototype.off = function(e) {
                    this._listeners.delete(e)
                }, e.prototype.once = function() {
                    var e = this;
                    return new Promise((function(t) {
                        var i = e.on((function() {
                            for (var e = [], n = 0; n < arguments.length; n++) e[n] = arguments[n];
                            return i(), t(e)
                        }))
                    }))
                }, e.prototype.emit = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t = this;
                        return ro(this, (function(i) {
                            return [2, Promise.all(so(this._listeners).map((function(t) {
                                return t(e)
                            }))).then((function(e) {
                                return t._emitted++, e
                            }))]
                        }))
                    }))
                }, e.prototype.clear = function() {
                    this._listeners.clear()
                }, Object.defineProperty(e.prototype, "count", {
                    get: function() {
                        return this._listeners.size
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "emitted", {
                    get: function() {
                        return this._emitted
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }(),
            Bo = new(function() {
                function e() {
                    this.sending = new Do, this.logQueue = [], this.supressedEventLogNames = new Map([
                        ["SlotRenderEnded", "adImpression"]
                    ]), this.disableLogging = !1, this.queueLogs = !1
                }
                return e.prototype.init = function(e) {
                    this.logFilter = e.loggerFilters || [], this.siteId = e.siteAds.siteId, this.siteName = e.siteAds.siteName, this.bucket = e.bucket, this.branch = e.branch, this.deployment = e.deployment, this.debug = e.debug
                }, e.prototype.log = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    this.call.apply(this, so([console.log, e, t], i))
                }, e.prototype.info = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    this.call.apply(this, so([console.info, e, t], i))
                }, e.prototype.warn = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    this.call.apply(this, so([console.warn, e, t], i))
                }, e.prototype.error = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    this.call.apply(this, so([console.error, e, t], i)), this.makeRequest.apply(this, so(["send", "error", e, t], i)).catch((function(e) {
                        console.error(e)
                    }))
                }, e.prototype.event = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    var r = this.debug || !this.supressedEventLogNames.has(e) || this.supressedEventLogNames.get(e) !== t;
                    r && this.call.apply(this, so([console.log, e, t], i)), this.makeRequest.apply(this, so(["send", "event", e, t], i)).catch((function(e) {
                        console.error(e)
                    }))
                }, e.prototype.fetchEvent = function(e, t) {
                    for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
                    this.call.apply(this, so([console.log, e, t], i)), this.makeRequest.apply(this, so(["fetch", "event", e, t], i)).catch((function(e) {
                        console.error(e)
                    }))
                }, e.prototype.call = function(e, t, i) {
                    for (var n = [], r = 3; r < arguments.length; r++) n[r - 3] = arguments[r];
                    var o = this.logFilter;
                    if (!(o && o.length && o.indexOf(t) > -1)) {
                        var a = ["%c" + t + "::" + i + " "],
                            s = ["color: #999; font-weight: bold;"];
                        n.length > 0 && "string" == typeof n[0] && a.push(n.shift()), s.push.apply(s, so(n));
                        try {
                            Function.prototype.apply.call(e, console, so([a.join("")], s))
                        } catch (e) {
                            return void console.error(e)
                        }
                    }
                }, e.prototype.buildRequestUrl = function(e, t, i, n) {
                    var r = "https://logger.adthrive.com/" + e,
                        o = [t + "::" + i + " "];
                    n.length > 0 && "string" == typeof n[0] && o.push(n.shift());
                    var a = n.map((function(e) {
                        return e && e.error && (e = e.error), e instanceof Error && (e = {
                            name: e.name,
                            message: e.message,
                            stack: e.stack
                        }), e
                    }));
                    return this.data && a.push(this.data), r + "?" + ["siteId=" + encodeURIComponent(this.siteId || ""), "siteName=" + encodeURIComponent(this.siteName || ""), "bucket=" + encodeURIComponent(this.bucket || ""), "branch=" + encodeURIComponent(this.branch || ""), "deployment=" + encodeURIComponent(this.deployment || ""), "message=" + encodeURIComponent(o.join("").trim()), "pageurl=" + encodeURIComponent(window.location.origin + window.location.pathname), "body=" + encodeURIComponent(JSON.stringify(a))].join("&")
                }, e.prototype.clearLogQueue = function(e) {
                    var t = this;
                    this.info("Logger", "gdprEnforcement", "clearLogQueue", e), e && this.logQueue.forEach((function(e) {
                        "send" === e.action && t.sendRequest.apply(t, so([e.type, e.className, e.methodName], e.args)).catch((function() {})), "fetch" === e.action && t.fetchRequest.apply(t, so([e.type, e.className, e.methodName], e.args)).catch((function() {}))
                    })), this.logQueue = [], this.queueLogs = !1
                }, e.prototype.makeRequest = function(e, t, i, n) {
                    for (var r = [], o = 4; o < arguments.length; o++) r[o - 4] = arguments[o];
                    return no(this, void 0, void 0, (function() {
                        var o;
                        return ro(this, (function(a) {
                            return this.disableLogging ? (this.info("Logger", "gdprEnforcement", "logging disabled"), [2, Promise.resolve(!1)]) : this.queueLogs ? (o = {
                                action: e,
                                type: t,
                                className: i,
                                methodName: n,
                                args: r
                            }, this.logQueue.push(o), this.info("Logger", "gdprEnforcement", "log queued"), [2, Promise.resolve(!0)]) : "send" === e ? [2, this.sendRequest.apply(this, so([t, i, n], r))] : [2, this.fetchRequest.apply(this, so([t, i, n], r))]
                        }))
                    }))
                }, e.prototype.sendRequest = function(e, t, i) {
                    for (var n = [], r = 3; r < arguments.length; r++) n[r - 3] = arguments[r];
                    return no(this, void 0, void 0, (function() {
                        var r;
                        return ro(this, (function(o) {
                            return this.sending.emit().catch((function() {})), r = this.buildRequestUrl(e, t, i, n), 8192, r.length > 8192 ? [2, this.sendRequest(e, t, i, "Error query too large").catch((function(e) {
                                console.error(e)
                            }))] : [2, new Promise((function(e, t) {
                                var i = new XMLHttpRequest;
                                i.open("get", r), i.addEventListener("load", (function() {
                                    return 200 !== i.status ? t(new Error("Logger send request failed " + i.status)) : e(i.responseText)
                                })), i.addEventListener("error", (function() {
                                    return t(new Error("Logger send request failed"))
                                })), i.send()
                            }))]
                        }))
                    }))
                }, e.prototype.fetchRequest = function(e, t, i) {
                    for (var n = [], r = 3; r < arguments.length; r++) n[r - 3] = arguments[r];
                    return no(this, void 0, void 0, (function() {
                        var r;
                        return ro(this, (function(o) {
                            return this.sending.emit().catch((function() {})), r = this.buildRequestUrl(e, t, i, n), [2, fetch(r, {
                                method: "GET",
                                keepalive: !0,
                                referrerPolicy: "no-referrer-when-downgrade"
                            })]
                        }))
                    }))
                }, e = eo([zo()], e)
            }()),
            Vo = function(e, t) {
                return e ? "flat" === e.type ? t - e.value : e.value * t : t
            },
            Lo = function(e, t, i, n) {
                var r, o = null == n ? void 0 : n.dealId,
                    a = e.partners.getBidderConfig(i).cpmMap.get("pmp");
                if (o && a) {
                    var s = null === (r = a.deals) || void 0 === r ? void 0 : r.filter((function(e) {
                        return e.name === o.toString()
                    }))[0];
                    return s ? "flat" === a.type ? Vo(s, t) : a.value * Vo(s, t) : Vo(a, t)
                }
                var c = function(e, t, i) {
                    var n = e.video.instreamAdUnits.has(null == i ? void 0 : i.adUnitCode),
                        r = n ? "instream" : n || !("vastUrl" in i) && !("vastXml" in i) ? "default" : "outstream";
                    return e.partners.getBidderConfig(t).cpmMap.get(e.partners.getBidderConfig(t).cpmMap.has(r) ? r : "default")
                }(e, i, n);
                return Vo(c, t)
            },
            Fo = navigator.userAgent,
            No = navigator.vendor,
            qo = function(e, t) {
                return /Chrom/.test(e || Fo) && /Google/.test(t || No) && !Ho(e) && !Wo(e)
            },
            Uo = function(e, t) {
                return /Safari/.test(e || Fo) && /Apple Computer/.test(t || No) && !Ho(e) && !Wo(e)
            },
            Ho = function(e) {
                return /Edge\/|Edg\//.test(e || Fo)
            },
            Wo = function(e) {
                return /Opera|OPR/.test(e || Fo)
            },
            Go = function(e, t) {
                return qo(e, t) ? "Chrome" : Uo(e, t) ? "Safari" : Ho(e) ? "Edge" : function(e) {
                    return /Firefox/.test(e || Fo)
                }(e) ? "Firefox" : Wo(e) ? "Opera" : function(e) {
                    return /Trident|MSIE/.test(e || Fo)
                }(e) ? "IE" : "Others"
            },
            Qo = function() {
                var e = document.querySelector(".adthrive-footer"),
                    t = 52;
                return e && "none" === e.style.display ? t = 102 : e && (t = Math.max(e.getBoundingClientRect().height, t)), t
            },
            Ko = function(e, t) {
                return null == e || e != e ? t : e
            },
            Xo = function(e) {
                return new Promise((function(t) {
                    setTimeout(t, e)
                }))
            },
            Jo = function(e, t) {
                var i = window.innerWidth;
                return i >= t ? "desktop" : i >= e ? "tablet" : "phone"
            },
            Yo = function() {
                return new Promise((function(e) {
                    if ("interactive" === document.readyState || "complete" === document.readyState) return e();
                    document.addEventListener("DOMContentLoaded", (function() {
                        return e()
                    }))
                }))
            },
            Zo = function(e) {
                var t = e.offsetHeight,
                    i = e.offsetWidth,
                    n = e.getBoundingClientRect(),
                    r = document.body,
                    o = document.documentElement,
                    a = window.pageYOffset || o.scrollTop || r.scrollTop,
                    s = window.pageXOffset || o.scrollLeft || r.scrollLeft,
                    c = o.clientTop || r.clientTop || 0,
                    l = o.clientLeft || r.clientLeft || 0,
                    u = Math.round(n.top + a - c),
                    d = Math.round(n.left + s - l);
                return {
                    top: u,
                    left: d,
                    bottom: u + t,
                    right: d + i,
                    width: i,
                    height: t
                }
            },
            $o = function(e) {
                return function(e) {
                    var t = e.match(/([a-zA-Z0-9._!#$%+^&*()[\]<>-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
                    return t ? t[0] : ""
                }(function(e) {
                    return e.replace(/\s/g, "")
                }(e.toLowerCase()))
            },
            ea = function(e, t, i) {
                return i.indexOf(e) === t
            },
            ta = function(e) {
                return new Promise((function(t, i) {
                    fetch(e).then((function(e) {
                        e.json().then((function(e) {
                            return t(e)
                        })).catch((function() {
                            return i(!1)
                        }))
                    })).catch((function() {
                        return i(!1)
                    }))
                }))
            },
            ia = function(e) {
                sessionStorage.removeItem("adthrive_" + e.toLowerCase())
            },
            na = function(e, t, i) {
                void 0 === i && (i = !1);
                try {
                    var n = sessionStorage.getItem("adthrive_" + e.toLowerCase());
                    if (n) {
                        var r = JSON.parse(n),
                            o = void 0 !== t && Date.now() - r.created >= t;
                        if (r && !o) return i && ra(e, r.value), r.value
                    }
                } catch (e) {}
                return null
            },
            ra = function(e, t) {
                try {
                    var i = {
                        value: t,
                        created: Date.now()
                    };
                    sessionStorage.setItem("adthrive_" + e.toLowerCase(), JSON.stringify(i))
                } catch (e) {}
            },
            oa = function(e, t, i, n) {
                void 0 === n && (n = !0);
                var r = na(e, i, n);
                if (null !== r) return r;
                var o = t();
                return ra(e, o), o
            },
            aa = function(e) {
                void 0 === e && (e = 18e5);
                var t = na("referrer", e),
                    i = sa();
                return Ko(i, t)
            },
            sa = function() {
                if (document.referrer && document.referrer.length) {
                    var e = ca(document.referrer);
                    if (la(e) !== la(window.location.hostname)) return e
                }
            },
            ca = function(e) {
                var t = document.createElement("a");
                return t.href = e, t.hostname
            },
            la = function(e) {
                var t = e.split("."),
                    i = t.length;
                return i > 2 && (e = t[i - 2] + "." + t[i - 1], 2 !== t[i - 2].length && 3 !== t[i - 2].length || 2 !== t[i - 1].length || (e = t[i - 3] + "." + e)), e
            },
            ua = function(e, t, i) {
                return void 0 === t && (t = !1), void 0 === i && (i = !1), new Promise((function(n, r) {
                    var o = document.createElement("script");
                    o.addEventListener("error", (function() {
                        return r(new Error("Failed to import script " + e))
                    })), o.addEventListener("load", (function() {
                        return n(o)
                    })), o.type = "text/javascript", o.src = e, o.defer = i, da(o, t)
                }))
            },
            da = function(e, t) {
                var i = document.getElementsByTagName("script")[0];
                i && i.parentNode && !t ? i.parentNode.insertBefore(e, i) : document.body.appendChild(e)
            },
            pa = ["Refresh", "PD", "Source", "Browser", "Topic", "MCMP", "Sens"],
            ha = function(e, t) {
                t.addToQueue((function() {
                    var i = t.getConfig("ix") || {
                            firstPartyData: {}
                        },
                        n = $r($r({}, i.firstPartyData), e),
                        r = {};
                    for (var o in pa.forEach((function(e) {
                            e in n && (r[e] = n[e])
                        })), n) - 1 === pa.indexOf(o) && (r[o] = n[o]);
                    i.firstPartyData = r, t.setConfig({
                        ix: i
                    })
                }))
            },
            fa = function(e) {
                return e ? function(e) {
                    var t = {
                        google: "google",
                        facebook: "facebook",
                        instagram: "instagram",
                        pinterest: "pinterest"
                    };
                    return e.split(".").filter((function(e) {
                        return t[e]
                    }))[0] || "other"
                }(e) : "direct"
            },
            ga = function(e) {
                var t = e.event,
                    i = e.ignoreOtherCompanyIds,
                    n = void 0 !== i && i,
                    r = new Set([-1, 0, 1, 199612376, 2143809321]),
                    o = new Set([4455444655, 4460609902, 4463579729, 4464180925, 4466143841, 4550726766, 4623743690, 4623743882, 4634020290, 4642901988, 4697115760, 4801442281, 4802163255, 4805985973, 4807636548, 4867316569]),
                    a = !t.campaignId || r.has(t.campaignId),
                    s = !t.companyIds || t.companyIds && !t.companyIds.some((function(e) {
                        return o.has(e)
                    }));
                return n ? a : a && s
            },
            ma = function() {
                if (navigator && navigator.webdriver) return "wdv"
            },
            ya = function() {
                if (navigator && navigator.hardwareConcurrency > 16) return "hwv"
            },
            _a = function() {
                if (navigator && navigator.userAgent && /python|apis|googleweblight|spider|crawler|curl|wget|ia_archiver|insights|baidu|bot|monitor|scraper|A6-Indexer|addthis|admantx|agentslug|alexa|anderspink|apache-httpclient|apachebench|apis-google|appengine-google|ask jeeves|asynchttpclient|awe.sm|baidu|barkrowler|biglotron|bingpreview|brandverify|bubing|butterfly|buzztalk|cf-uc|check_http|cloudflare|cmradar\/0.1|coldfusion|comodo ssl checker|convera|copypants|crowsnest|curl|dap\/nethttp|daumoa|developers.google.com\/\+\/web\/snippet\/|digitalpersona fingerprint software|drupact|duckduck|elb-healthchecker|embedly|eoaagent|europarchive|eventmachine httpclient|evrinid|exaleadcloudview|ezooms|ez publish|facebookexternalhit|feedburner|feedfetcher-google|findlink|findthatfile|flipboardproxy|garlik|genieo|getprismatic.com|ghost|gigablast|go http package|google( page speed insights| web preview|google-site-verification|-structured-data-testing-tool|-structureddatatestingtool)|hatena|headless|heritrix|htmlparser|http(_request2|client|s|unit)|httrack|hubspot|ichiro|icoreservice|idmarch|in(agist|sieve|stapaper)|ips-agent|jack|jakarta commons|java|jetslide|jobseeker|js-kit|kimengi|knows.is|kraken|laconica|libwww|lighthouse|linode|lipperhey|longurl|ltx71|lwp-trivial|mappydata|mastodon|mediapartners-google|megaindex.ru|metauri|mfe_expand|mixnode|mon(tastic|tools)|moreover|mrchrome|nberta|net(craft|researchserver|state|vibes)|newrelicpinger|newspaper|newsme|ning|nmap|nutch|online-domain-tools|paessler|page(peek|sinventory|thing)|panopta|peerindex|phantomjs|pingdom|plukkie|proximic|pu_in|publiclibraryarchive.org|python-(httplib2|requests|urllib)|quanti|queryseeker|quicklook|qwanti|re-animator|readability|rebelmouse|relateiq|riddler|rssmicro|ruby|scrapy|seo-audit|seodiver|seokicks|shopwiki|shortlinktranslate|siege|sistrix|site24x7|siteexplorer|skypeuripreview|slack|slurp|socialrank|sogou|spinn3r|squider|statuscake|stripe|summify|teeraid|teoma|test certificate info|tineye|traackr|tweetedtimes|twikle|twitjobsearch|twitmunin|twurly|typhoeus|unwindfetch|uptim(e|ia)|uptm.io|vagabondo|vb project|vigil|vkshare|wappalyzer|watchsumo|webceo|webdatascout|webmon|webscout|wesee|wget|whatsapp|whatweb|wikido|wordpress|wormly|wotbox|xenu link sleuth|xing-contenttabreceiver|yandex|yanga|yeti|yff35|yourls|zelist.ro|zibb|^Mozilla\/5\.0$|Viv\/2/i.test(window.navigator.userAgent)) return "uav"
            },
            va = function() {
                var e = {
                    width: Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0),
                    height: Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)
                };
                if (e.width > 5e3 || e.height > 5e3) return "vpv"
            },
            ba = function() {
                var e = document.createElement("canvas"),
                    t = e.getContext && e.getContext("webgl"),
                    i = t && t.getExtension && t.getExtension("WEBGL_debug_renderer_info");
                if (i && i.UNMASKED_RENDERER_WEBGL && "Google SwiftShader" === (t && t.getParameter(i.UNMASKED_RENDERER_WEBGL))) return "wglv"
            },
            wa = function() {
                return /Windows NT|Macintosh/i.test(navigator.userAgent)
            },
            Sa = function(e) {
                return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length)
            },
            Ca = function(e) {
                return !Sa(e)
            },
            ka = function(e, t) {
                return e.viewability >= t || e.lazy || e.refreshCount > 0
            },
            Pa = function() {
                var e = navigator.userAgent,
                    t = /Tablet|iPad|Playbook|Nook|webOS|Kindle|Android (?!.*Mobile).*Safari/i.test(e);
                return /Mobi|iP(hone|od)|Opera Mini/i.test(e) && !t
            },
            Ea = function(e, t) {
                if (e.length <= 1) return 0;
                if (e.sort((function(e, t) {
                        return e - t
                    })), t <= 0) return e[0];
                if (t >= 1) return e[e.length - 1];
                var i = t * (e.length + 1),
                    n = Math.floor(i) - 1,
                    r = n + 1,
                    o = Number((i % 1).toFixed(1));
                return i < 1 ? e[0] : r >= e.length ? e[n] : e[n] + o * (e[r] - e[n])
            },
            Oa = function() {
                try {
                    return Math.round(window.performance.now())
                } catch (e) {
                    return 0
                }
            },
            xa = function(e, t) {
                return void 0 === t && (t = 33), Object.keys(e).reduce((function(i, n) {
                    var r, o = e[n].map((function(e) {
                        return function(e, t) {
                            return parseInt(e, t) / 1e5
                        }(e, t)
                    }));
                    return $r($r({}, i), ((r = {})[n] = so(o), r))
                }), {})
            },
            Ta = function(e, t) {
                return void 0 === t && (t = 33), Object.keys(e).reduce((function(i, n) {
                    var r, o = e[n].map((function(e) {
                        return function(e, t) {
                            return Math.floor(1e5 * e).toString(t)
                        }(e, t)
                    }));
                    return $r($r({}, i), ((r = {})[n] = o, r))
                }), {})
            },
            Ia = function() {
                return new Promise((function(e) {
                    if ("complete" === document.readyState) return e();
                    window.addEventListener("load", (function() {
                        return e()
                    }))
                }))
            },
            Ma = function() {
                return window.location.search.slice(1).split("&").reduce((function(e, t) {
                    var i = ao(t.split("="), 2),
                        n = i[0],
                        r = i[1];
                    return e.set(n, r), e
                }), new Map)
            },
            Aa = function(e) {
                return Object.keys(e).map((function(t) {
                    return t + "=" + encodeURIComponent(e[t])
                })).join("&")
            },
            za = function(e, t) {
                return Math.random() * (t - e) + e
            },
            Ra = function(e, t) {
                return Math.floor(za(Math.ceil(e), Math.floor(t)))
            },
            ja = function(e) {
                var t = RegExp("(^|[^;]+)\\s*" + e + "\\s*=\\s*([^;]+)").exec(document.cookie);
                return t ? t.pop() : ""
            },
            Da = function() {
                return (new Date).getTimezoneOffset() < (e = new Date((new Date).getFullYear(), 0, 1), t = new Date((new Date).getFullYear(), 6, 1), Math.max(e.getTimezoneOffset(), t.getTimezoneOffset()));
                var e, t
            },
            Ba = function(e, t) {
                if ("Intl" in window) {
                    var i = Intl.DateTimeFormat().resolvedOptions().timeZone;
                    return e.some((function(e) {
                        return i === e
                    }))
                }
                return t.some((function(e) {
                    return (new Date).getTimezoneOffset() === (Da() ? e - 60 : e)
                }))
            },
            Va = function() {
                return Ba(["America/Los_Angeles"], [480])
            },
            La = function(e) {
                return void 0 !== e
            },
            Fa = function(e, t) {
                return !(!e || "object" != typeof e || !(t in e))
            },
            Na = function(e, t) {
                return Fa(e, t) ? e[t] : null
            },
            qa = function(e) {
                var t = window.location.href;
                return e.some((function(e) {
                    return new RegExp(e, "i").test(t)
                }))
            },
            Ua = function(e, t) {
                var i, n;
                if (t) try {
                    for (var r = oo(pbjs.getUserIdsAsEids()), o = r.next(); !o.done; o = r.next()) {
                        var a = o.value;
                        if (a.source && a.source === e && a.uids && a.uids.length > 0 && a.uids[0].id) return a.uids[0].id
                    }
                } catch (e) {
                    i = {
                        error: e
                    }
                } finally {
                    try {
                        o && !o.done && (n = r.return) && n.call(r)
                    } finally {
                        if (i) throw i.error
                    }
                }
                return null
            },
            Ha = function(e) {
                try {
                    return {
                        valid: !0,
                        elements: document.querySelectorAll(e)
                    }
                } catch (e) {
                    return $r({
                        valid: !1
                    }, e)
                }
            },
            Wa = function(e) {
                return "" === e ? {
                    valid: !0
                } : Ha(e)
            },
            Ga = function(e, t, i, n, r, o) {
                var a = Math.round(o - r),
                    s = [],
                    c = [];
                s.push("(", i.map((function() {
                    return "%o"
                })).join(", "), ")"), c.push.apply(c, so(i)), void 0 !== n && (s.push(" => %o"), c.push(n)), s.push(" %c(" + a + "ms)"), c.push("color: #999;")
            },
            Qa = function(e, t, i) {
                var n = void 0 !== i.get ? i.get : i.value;
                return function() {
                    for (var i = [], r = 0; r < arguments.length; r++) i[r] = arguments[r];
                    try {
                        var o = Oa(),
                            a = n.apply(this, i);
                        if (a instanceof Promise) return a.then((function(e) {
                            var t = Oa();
                            return Ga(0, 0, i, e, o, t), Promise.resolve(e)
                        })).catch((function(i) {
                            throw i.logged || (Bo.error(e, t, i), i.logged = !0), i
                        }));
                        var s = Oa();
                        return Ga(0, 0, i, a, o, s), a
                    } catch (i) {
                        throw i.logged || (Bo.error(e, t, i), i.logged = !0), i
                    }
                }
            },
            Ka = function(e, t) {
                return void 0 === t && (t = !1),
                    function(i) {
                        var n, r, o = Object.getOwnPropertyNames(i.prototype).filter((function(e) {
                            return t || 0 !== e.indexOf("_")
                        })).map((function(e) {
                            return [e, Object.getOwnPropertyDescriptor(i.prototype, e)]
                        }));
                        try {
                            for (var a = oo(o), s = a.next(); !s.done; s = a.next()) {
                                var c = ao(s.value, 2),
                                    l = c[0],
                                    u = c[1];
                                void 0 !== u && "function" == typeof u.value ? i.prototype[l] = Qa(e, l, u) : void 0 !== u && void 0 !== u.get && "function" == typeof u.get && Object.defineProperty(i.prototype, l, $r($r({}, u), {
                                    get: Qa(e, l, u)
                                }))
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }
            },
            Xa = function() {
                return function(e, t, i) {
                    var n = i.value;
                    n && (i.value = function() {
                        for (var e, t = this, i = [], r = 0; r < arguments.length; r++) i[r] = arguments[r];
                        var o = this.key;
                        return !1 === (null === (e = na("branch")) || void 0 === e ? void 0 : e.enabled) && ia(o), oa(o, (function() {
                            return n.apply(t, i)
                        }), 18e5)
                    })
                }
            },
            Ja = "0123456789ABCDEFGHJKMNPQRSTVWXYZ",
            Ya = Ja.length,
            Za = Math.pow(2, 48) - 1,
            $a = function(e) {
                var t = Math.floor(e() * Ya);
                return t === Ya && (t = Ya - 1), Ja.charAt(t)
            },
            es = function(e, t) {
                if (isNaN(e)) throw new Error(e + " must be a number");
                if (e > Za) throw (i = new Error("cannot encode time greater than " + Za)).source = "ulid", i;
                for (var i, n, r = ""; t > 0; t--) r = Ja.charAt(n = e % Ya) + r, e = (e - n) / Ya;
                return r
            },
            ts = function() {
                return es(Date.now(), 10) + function(e, t) {
                    for (var i = ""; e > 0; e--) i = $a(t) + i;
                    return i
                }(16, (function() {
                    return function() {
                        if (window.crypto) {
                            var e = new Uint8Array(1);
                            return crypto.getRandomValues(e), e[0] / 255
                        }
                        return Math.random()
                    }()
                }))
            },
            is = function() {
                function e() {
                    this._map = new Map, this.setAbGroup = !Ma().has("at_features")
                }
                return e.prototype.set = function(e, t) {
                    this.setAbGroup && this._map.set(e, t)
                }, e.prototype.get = function(e) {
                    return this._map.get(e)
                }, Object.defineProperty(e.prototype, "groups", {
                    get: function() {
                        var e, t, i = [];
                        try {
                            for (var n = oo(this._map), r = n.next(); !r.done; r = n.next()) {
                                var o = ao(r.value, 2),
                                    a = o[0],
                                    s = o[1];
                                i.push(a + ":" + s)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (t = n.return) && t.call(n)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return i
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "groupsAsObject", {
                    get: function() {
                        var e, t, i = {};
                        try {
                            for (var n = oo(this._map.keys()), r = n.next(); !r.done; r = n.next()) {
                                var o = r.value,
                                    a = this._map.get(o);
                                a && (i[o] = a)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                r && !r.done && (t = n.return) && t.call(n)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        return i
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), io("design:paramtypes", [])], e)
            }(),
            ns = function() {
                function e() {
                    this.adthriveExperimentOverrides = this.getExperimentOverrides()
                }
                return e.prototype.getExperimentOverrides = function() {
                    var e = {},
                        t = Ma().get("at_features");
                    if (t) try {
                        var i = decodeURIComponent(t);
                        e = JSON.parse(i), Bo.event("ExperimentOverrides", "getExperimentOverrides", "at_features", e)
                    } catch (e) {}
                    return e
                }, e.prototype.hasValidOverride = function(e, t) {
                    if (e in this.adthriveExperimentOverrides) {
                        var i = this.adthriveExperimentOverrides[e];
                        return this.isValidExperimentOverride(t, i)
                    }
                    return !1
                }, e.prototype.useOverride = function(e) {
                    return this.adthriveExperimentOverrides[e]
                }, e.prototype.isValidExperimentOverride = function(e, t) {
                    if (0 === e.length) return !1;
                    var i = Array.isArray(e[0]) ? "array" : typeof e[0];
                    if ("array" === i) {
                        if (!Array.isArray(t)) return !1;
                        if (t.some((function(t) {
                                return -1 === e.indexOf(t)
                            })) && t.map((function(e) {
                                return "[" + JSON.stringify(e) + "]"
                            })).some((function(t) {
                                return -1 === e.map((function(e) {
                                    return JSON.stringify(e)
                                })).indexOf(t)
                            })) && -1 === e.map((function(e) {
                                return JSON.stringify(e)
                            })).indexOf(JSON.stringify(t))) return !1
                    } else if ("object" === i) {
                        if (-1 === e.map((function(e) {
                                return JSON.stringify(e)
                            })).indexOf(JSON.stringify(t))) return !1
                    } else if (-1 === e.indexOf(t)) return !1;
                    return !0
                }, e = eo([Ro(), io("design:paramtypes", [])], e)
            }(),
            rs = function() {
                var e = this,
                    t = this.run.bind(this);
                this.run = function() {
                    var i = Mo.resolve(ns),
                        n = e._choices.map((function(e) {
                            return e.choice
                        }));
                    return i.hasValidOverride(e.key, n) ? i.useOverride(e.key) : t()
                }
            },
            os = function() {},
            as = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._probability = t, i
                }
                return Jr(t, e), t.prototype.get = function() {
                    if (this._probability < 0 || this._probability > 1) throw new Error("Invalid probability");
                    return Math.random() < this._probability
                }, t
            }(os);
        ! function(e) {
            function t(t, i) {
                var n = e.call(this) || this;
                return n._min = t, n._max = i, n
            }
            Jr(t, e), t.prototype.get = function() {
                return za(this._min, this._max)
            }
        }(os),
        function(e) {
            function t(t, i) {
                var n = e.call(this) || this;
                return n._min = t, n._max = i, n
            }
            Jr(t, e), t.prototype.get = function() {
                return Ra(this._min, this._max)
            }
        }(os);
        var ss, cs, ls, us = function(e) {
                function t(t) {
                    void 0 === t && (t = []);
                    var i = e.call(this) || this;
                    return i._choices = t, i
                }
                return Jr(t, e), t.prototype.addChoice = function(e) {
                    this._choices.push(e)
                }, t.prototype.get = function() {
                    var e = Ra(0, this._choices.length);
                    return this._choices[e]
                }, t
            }(os),
            ds = function(e) {
                function t(t, i) {
                    void 0 === t && (t = []);
                    var n = e.call(this) || this;
                    return n._choices = t, n._default = i, n
                }
                return Jr(t, e), t.fromArray = function(e, i) {
                    return new t(e.map((function(e) {
                        var t = ao(e, 2);
                        return {
                            choice: t[0],
                            weight: t[1]
                        }
                    })), i)
                }, t.prototype.addChoice = function(e, t) {
                    this._choices.push({
                        choice: e,
                        weight: t
                    })
                }, t.prototype.get = function() {
                    var e, t, i = za(0, 100),
                        n = 0;
                    try {
                        for (var r = oo(this._choices), o = r.next(); !o.done; o = r.next()) {
                            var a = o.value,
                                s = a.choice;
                            if ((n += a.weight) >= i) return s
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (t = r.return) && t.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return this._default
                }, Object.defineProperty(t.prototype, "totalWeight", {
                    get: function() {
                        return this._choices.reduce((function(e, t) {
                            return e + t.weight
                        }), 0)
                    },
                    enumerable: !1,
                    configurable: !0
                }), t
            }(os),
            ps = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._adthrive = t, n._result = "off", n.key = "inters", n._choices = [{
                        choice: "all",
                        weight: 0
                    }, {
                        choice: "adx",
                        weight: 95
                    }, {
                        choice: "off",
                        weight: 5
                    }], n.canDisplayInterstitial() && (Pa() && Ko(n._adthrive.siteAds.adOptions.mobileInterstitial, !1) || !Pa() && Ko(n._adthrive.siteAds.adOptions.desktopInterstitial, !1)) && (n._result = n.run(), i.set(n.key, n._result)), n
                }
                return Jr(t, e), t.prototype.canDisplayInterstitial = function() {
                    try {
                        var e = window.localStorage.getItem("__lsv__"),
                            t = e ? JSON.parse(decodeURIComponent(e)) : [];
                        if (t.length) {
                            return (new Date).getTime() - t[0] > 36e5
                        }
                        return !0
                    } catch (e) {
                        return Bo.error("InterstitialExperiment", "canDisplayInterstitial", {
                            message: e.message
                        }), !1
                    }
                }, Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, t = eo([Ka("InterstitialExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, is])], t)
            }(rs),
            hs = function() {
                function e(e, t) {
                    this._interstitialExperiment = t, this.footerCloseButtonMigrated = !1;
                    var i = e.siteAds.adOptions,
                        n = i.allowSmallerAdSizes,
                        r = i.footerCloseButton,
                        o = i.footerCloseButtonMobile,
                        a = i.footerCloseButtonDesktop,
                        s = i.footerSelector,
                        c = i.infiniteScroll,
                        l = i.infiniteScrollOptions,
                        u = i.infiniteScrollRefresh,
                        d = i.pmp,
                        p = i.targetaff;
                    this.allowSmallerAdSizes = Ko(n, !0), void 0 !== o && void 0 !== a && (this.footerCloseButtonMigrated = !0), this.interstitial = {
                        gam: "off" !== this._interstitialExperiment.result,
                        prebid: "all" === this._interstitialExperiment.result
                    }, this.footerCloseButton = Ko(r, !0), this.footerCloseButtonMobile = Ko(o, !0), this.footerCloseButtonDesktop = Ko(a, !0), this.footerSelector = Ko(s, ""), this.pmp = Ko(d, !0), this.infiniteScroll = Ko(c, !1), this.infiniteScrollOptions = Ko(l, {}), this.infiniteScrollRefresh = Ko(u, !0), this.targetAff = Ko(p, !1)
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, ps])], e)
            }(),
            fs = function() {
                function e(e) {
                    var t = e.siteAds.adTypes || {};
                    this.animatedFooter = Ko(t.animatedFooter, !0), this.expandableFooter = Ko(t.expandableFooter, !0), this.interscroller = Ko(t.interscroller, !0), this.miniscroller = Ko(t.miniscroller, !0), this.nativeMobileContent = Ko(t.nativeMobileContent, !0), this.nativeDesktopContent = Ko(t.nativeDesktopContent, !0), this.nativeDesktopSidebar = Ko(t.nativeDesktopSidebar, !0), this.nativeDesktopRecipe = Ko(t.nativeDesktopRecipe, !0), this.nativeMobileRecipe = Ko(t.nativeMobileRecipe, !0), this.outstreamDesktop = Ko(t.outstreamDesktop, !0), this.outstreamMobile = Ko(t.outstreamMobile, !0)
                }
                return e.prototype.has = function(e) {
                    return this[e] && !0 === this[e]
                }, Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        var e = this;
                        return Object.keys(this).filter((function(t) {
                            return !0 === e[t]
                        }))
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabledMinified", {
                    get: function() {
                        var e = {
                            outstreamDesktop: {
                                min: "od",
                                val: this.outstreamDesktop
                            },
                            outstreamMobile: {
                                min: "om",
                                val: this.outstreamMobile
                            }
                        };
                        return this.enabled.filter((function(t) {
                            return -1 !== Object.keys(e).indexOf(t) && e[t].val
                        })).map((function(t) {
                            return e[t].min
                        }))
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "outstreamEnabled", {
                    get: function() {
                        return Pa() ? !0 === this.outstreamMobile : !0 === this.outstreamDesktop
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            gs = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "amzn_hold_load", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.5).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("AmazonLibraryExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            ms = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "amzn", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.995).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("AmazonExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            ys = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "wvtls", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], qo() && (i._result = i.run(), t.set(i.key, i.result ? "on" : "off")), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.25).get()
                }, t = eo([Ka("WebVitalsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            _s = function() {
                function e(e, t, i) {
                    var n;
                    this.amazonEnabled = t.result, this.webVitalsEnabled = i.result, this.gptLibFailed = !1, this.liveRamp = Ko(e.siteAds.adOptions.liveRamp, !0), this.liveRampId = Ko(e.siteAds.adOptions.liveRampId, "7f035220-1751-4684-bb7f-a1c0d45657df"), 36 !== this.liveRampId.length && (this.liveRampId = "7f035220-1751-4684-bb7f-a1c0d45657df"), "FR" === (null === (n = null == e ? void 0 : e.core) || void 0 === n ? void 0 : n.country) && (this.liveRampId = "34233849-5500-4e44-8601-5006ae8d13fe"), this._baseUrl = e.baseUrl
                }
                return Object.defineProperty(e.prototype, "baseUrl", {
                    get: function() {
                        return this._baseUrl
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "recencyFrequencyIframeLocation", {
                    get: function() {
                        return this._baseUrl + "/html/recency-and-frequency.html"
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ka("BootstrapConfig"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, ms, ys])], e)
            }(),
            vs = function() {
                function e(e, t) {
                    this.adthrive = e, this._bootstrapConfig = t, this._url = "https://c.amazon-adsystem.com/aax2/apstag.js"
                }
                return e.prototype.load = function() {
                    return no(this, void 0, void 0, (function() {
                        var e, t = this;
                        return ro(this, (function(i) {
                            return this._bootstrapConfig.amazonEnabled && this.adthrive.siteAds.adOptions.amazonUAM ? (this.init(), (e = this.adthrive.fastAds) && e.amazon ? [2, e.amazon.promise.then((function() {
                                return !0
                            })).catch((function() {
                                return ua(t._url).then((function() {
                                    return !0
                                }))
                            }))] : [2, ua(this._url).then((function() {
                                return !0
                            }))]) : [2, Promise.resolve(!1)]
                        }))
                    }))
                }, e.prototype.init = function() {
                    if (!window.apstag) {
                        var e = function(e, t) {
                            window.apstag._Q.push([e, t])
                        };
                        window.apstag = {
                            init: function() {
                                e("i", arguments)
                            },
                            fetchBids: function() {
                                e("f", arguments)
                            },
                            setDisplayBids: function() {},
                            targetingKeys: function() {
                                return []
                            },
                            _Q: []
                        }
                    }
                }, e = eo([Ka("AmazonBootstrap"), zo(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, _s])], e)
            }(),
            bs = function() {
                function e(e) {
                    this._adthrive = e, this._url = "https://securepubads.g.doubleclick.net/tag/js/gpt.js"
                }
                return e.prototype.load = function() {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(e) {
                            return window.googletag = window.googletag || {}, window.googletag.cmd = window.googletag.cmd || [], [2, this.import()]
                        }))
                    }))
                }, e.prototype.sendScript = function() {
                    return ua(this._url).then((function() {
                        return !0
                    }))
                }, e.prototype.import = function() {
                    var e = this,
                        t = this._adthrive.fastAds;
                    return t && t.gam ? t.gam.promise.then((function() {
                        return !0
                    })).catch((function() {
                        return e.sendScript()
                    })) : this.sendScript()
                }, e = eo([Ka("GAMBootstrap"), zo(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            ws = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "rfii", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i.result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(0).get()
                }, t = eo([Ka("RecencyFrequencyIframeInsertionExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ss = function() {
                function e(e, t) {
                    this.bootstrapConfig = e, this.rfiiExperiment = t, this._marmaladeFinishedTimeout = 3e3, this._frame = document.createElement("IFRAME")
                }
                return e.prototype.get = function() {
                    return no(this, void 0, void 0, (function() {
                        var e, t, i = this;
                        return ro(this, (function(n) {
                            return window.adthrive.marmalade ? [2, window.adthrive.marmalade.then((function(e) {
                                return no(i, void 0, void 0, (function() {
                                    return ro(this, (function(t) {
                                        switch (t.label) {
                                            case 0:
                                                return ks(e) || this.rfiiExperiment.result ? [4, Cs(this._frame, this.bootstrapConfig.recencyFrequencyIframeLocation).then((function() {
                                                    Bo.event("MarmaladeBootstrap", "recencyFrequencyIframeAdded")
                                                }))] : [3, 2];
                                            case 1:
                                                t.sent(), t.label = 2;
                                            case 2:
                                                return [2, e]
                                        }
                                    }))
                                }))
                            }))] : (e = new Promise((function(e) {
                                window.adthrive.marmaladeFinished = e
                            })), t = new Promise((function(e) {
                                var t = setTimeout((function() {
                                    clearTimeout(t), e({})
                                }), i._marmaladeFinishedTimeout)
                            })), [2, Promise.race([e, t])])
                        }))
                    }))
                }, e = eo([Ka("MarmaladeBootstrap"), zo(), io("design:paramtypes", [_s, ws])], e)
            }(),
            Cs = function(e, t) {
                var i, n = new Promise((function(e) {
                    i = e
                }));
                return e.onload = function() {
                    i()
                }, e.src = t, e.id = "adthrive-mcmp", e.style.display = "none", document.body.appendChild(e), n
            },
            ks = function(e) {
                return "mcmp" in e
            },
            Ps = function() {
                function e(e) {
                    var t = e.baseUrl;
                    this._url = t + "/vendor/prebid/prebid.min.js"
                }
                return e.prototype.load = function() {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    return this.init(), [4, ua(this._url).then((function() {
                                        return !0
                                    }))];
                                case 1:
                                    return [2, e.sent()]
                            }
                        }))
                    }))
                }, e.prototype.init = function() {
                    window.pbjs = window.pbjs || {}, window.pbjs.que = window.pbjs.que || []
                }, e = eo([Ka("PrebidBootstrap"), zo(), io("design:paramtypes", [_s])], e)
            }(),
            Es = function() {
                function e(e) {
                    this._bootstrapConfig = e, this._url = "https://unpkg.com/web-vitals@2.0.1/dist/web-vitals.umd.js"
                }
                return e.prototype.load = function() {
                    return this._bootstrapConfig.webVitalsEnabled ? this.import() : Promise.resolve(!0)
                }, e.prototype.import = function() {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    return [4, ua(this._url, !1, !0)];
                                case 1:
                                    return [2, e.sent()]
                            }
                        }))
                    }))
                }, e = eo([Ka("WebVitalsBootstrap"), zo(), io("design:paramtypes", [_s])], e)
            }(),
            Os = function() {
                function e(e, t, i, n, r, o, a) {
                    this.bootstrapConfig = e, this._amazon = t, this._waitForAmazon = i, this._gam = n, this._marmalade = r, this._prebid = o, this._webVitals = a
                }
                return e.prototype.run = function() {
                    return no(this, void 0, void 0, (function() {
                        var e, t, i = this;
                        return ro(this, (function(n) {
                            return [2, Promise.all([this._run((function() {
                                return i._amazon.load()
                            }), {
                                wait: this._waitForAmazon.result
                            }), this._run((function() {
                                return i._gam.load()
                            }), {
                                required: !0
                            }).catch((function(n) {
                                return i.gamFallback(n && n.result, e, t)
                            })), t = this._run((function() {
                                return i._marmalade.get()
                            })), this._run((function() {
                                return i._prebid.load()
                            })), this._run((function() {
                                return e = i._webVitals.load()
                            }), {
                                wait: !1
                            }), Yo()]).then((function(e) {
                                var t = ao(e, 5);
                                return {
                                    amazon: t[0],
                                    gam: t[1],
                                    marmalade: t[2],
                                    prebid: t[3],
                                    webvitals: t[4]
                                }
                            }))]
                        }))
                    }))
                }, e.prototype.gamFallback = function(e, t, i) {
                    return this.bootstrapConfig.gptLibFailed = !0, this.bootstrapConfig.webVitalsEnabled || (this.bootstrapConfig.webVitalsEnabled = !0, t = this._webVitals.load()), t.then((function() {
                        return i.then((function(t) {
                            return Promise.reject({
                                message: e,
                                marmalade: t
                            })
                        }))
                    }))
                }, e.prototype._run = function(e, t) {
                    var i = void 0 === t ? {} : t,
                        n = i.required,
                        r = void 0 !== n && n,
                        o = i.wait,
                        a = void 0 === o || o,
                        s = Oa(),
                        c = function(e) {
                            var t = Oa();
                            return {
                                result: e,
                                started: s,
                                finished: t,
                                duration: t - s
                            }
                        },
                        l = e().then(c, (function(e) {
                            return r ? Promise.reject(c(e.message)) : c(e.message)
                        }));
                    return a ? l : Promise.resolve(c(!0))
                }, e = eo([zo(), io("design:paramtypes", [_s, vs, gs, bs, Ss, Ps, Es])], e)
            }(),
            xs = function() {
                function e(e, t) {
                    this.pubId = "4fbba76f-7987-4fa2-9733-c27eb3a2170b", this.adUnitExclusions = new Set(["Video_StickyOutstream", "Interstitial"]);
                    var i = t.amazonEnabled;
                    this.enabled = i && !0 === e.siteAds.adOptions.amazonUAM
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, _s])], e)
            }(),
            Ts = function() {
                function e() {
                    this.bidders = ["unruly", "districtm", "undertone", "33across"]
                }
                return e = eo([Ro()], e)
            }(),
            Is = function() {
                function e() {
                    this.nonCompliantBidders = ["unruly"], this.ccpaNotApplicable = "1---", this.ccpaOptIn = "1YNY", this.ccpaOptOut = "1YYY", this.required = Va(), this.required = Va(), this.privacyString = ja("usprivacy"), this.gpcEnabled = localStorage.getItem("adthrive_gpc"), this.userOptedOut = this.privacyString === this.ccpaOptOut, this.required && (this.comscoreParams = this.userOptedOut ? "0" : "1")
                }
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return this.required && this.userOptedOut
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), io("design:paramtypes", [])], e)
            }(),
            Ms = function() {
                function e() {
                    this._clsGlobalData = window.adthriveCLS
                }
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return this._clsGlobalData && this._clsGlobalData.siteAds
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "siteAds", {
                    get: function() {
                        return this._clsGlobalData.siteAds
                    },
                    set: function(e) {
                        this._clsGlobalData.siteAds = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "disableAds", {
                    get: function() {
                        return this._clsGlobalData.disableAds
                    },
                    set: function(e) {
                        this._clsGlobalData.disableAds = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabledLocations", {
                    get: function() {
                        return this._clsGlobalData.enabledLocations
                    },
                    set: function(e) {
                        this._clsGlobalData.enabledLocations = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "injectedFromPlugin", {
                    get: function() {
                        return this._clsGlobalData.injectedFromPlugin
                    },
                    set: function(e) {
                        this._clsGlobalData.injectedFromPlugin = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "injectedFromSiteAds", {
                    get: function() {
                        return this._clsGlobalData.injectedFromSiteAds
                    },
                    set: function(e) {
                        this._clsGlobalData.injectedFromSiteAds = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.overwriteInjectedSlots = function(e) {
                    this._clsGlobalData.injectedSlots = e
                }, e.prototype.setInjectedSlots = function(e) {
                    this._clsGlobalData.injectedSlots.push(e)
                }, Object.defineProperty(e.prototype, "injectedSlots", {
                    get: function() {
                        return this._clsGlobalData.injectedSlots
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.setInjectedScripts = function(e) {
                    this._clsGlobalData.injectedScripts = this._clsGlobalData.injectedScripts || [], this._clsGlobalData.injectedScripts.push(e)
                }, Object.defineProperty(e.prototype, "getInjectedScripts", {
                    get: function() {
                        return this._clsGlobalData.injectedScripts
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.setExperiment = function(e, t) {
                    this._clsGlobalData.experiments = this._clsGlobalData.experiments || [], this._clsGlobalData.experiments[e] = t
                }, e.prototype.getExperiment = function(e) {
                    return this._clsGlobalData.experiments && this._clsGlobalData.experiments[e]
                }, Object.defineProperty(e.prototype, "branch", {
                    get: function() {
                        return this._clsGlobalData.branch
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "bucket", {
                    get: function() {
                        return this._clsGlobalData.bucket
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "videoDisabledFromPlugin", {
                    get: function() {
                        return this._clsGlobalData.videoDisabledFromPlugin
                    },
                    set: function(e) {
                        this._clsGlobalData.videoDisabledFromPlugin = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "targetDensityLog", {
                    get: function() {
                        return this._clsGlobalData.targetDensityLog
                    },
                    set: function(e) {
                        this._clsGlobalData.targetDensityLog = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }(),
            As = function() {
                function e(e) {
                    this.connectionTargeting = [];
                    var t = e.bucket,
                        i = e.plugin,
                        n = e.branch,
                        r = e.debug,
                        o = e.deployment,
                        a = e.baseUrl,
                        s = e.fastAds,
                        c = e.siteAds,
                        l = e.styleUrl,
                        u = e.invalidTraffic,
                        d = e.integration,
                        p = c.breakpoints,
                        h = p.tablet,
                        f = p.desktop;
                    this.baseUrl = a, this.branch = n, this.bucket = t, this.plugin = i, this.fastAds = s, this.invalidTraffic = u, this.deployment = o, this.domain = window.location.host, this.device = Jo(h, f), this.pageUrl = window.location.href, this.pageviewKey = ts(), this.querystring = Ma(), this.sessionKey = oa("session_key", (function() {
                        return ts()
                    }), 18e5), this.styleUrl = l, this.debug = r, this.integration = d;
                    var g = window.performance.getEntriesByType("resource").filter((function(e) {
                        return e.name.indexOf("ads.min.js") > -1 && e.name.indexOf("ads.adthrive.com") > -1
                    }))[0];
                    if (g) {
                        var m = Math.round(g.responseEnd - g.startTime).toString();
                        "NaN" !== m && (this.adsMinLoadDuration = [m])
                    }
                    var y = window.navigator && (window.navigator.connection || window.navigator.mozConnection || window.navigator.webkitConnection);
                    y && (y.effectiveType && this.connectionTargeting.push("niet:" + y.effectiveType), (y.downlink || y.bandwidth) && this.connectionTargeting.push("dl:" + (y.downlink || y.bandwidth)))
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            zs = 250,
            Rs = function() {
                function e(e, t, i, n) {
                    var r = this;
                    if (this.adthrive = e, this._context = t, this._abgroup = i, this._clsOptions = n, this._defaultHeight = zs, this._map = new Map([
                            ["phone", {
                                Content: zs,
                                Recipe: zs,
                                Header: 50,
                                Footer: 50,
                                Below_Post: zs,
                                Sidebar: zs
                            }],
                            ["tablet", {
                                Content: zs,
                                Recipe: zs,
                                Header: 90,
                                Footer: 90,
                                Below_post: zs,
                                Sidebar: zs
                            }],
                            ["desktop", {
                                Content: zs,
                                Recipe: zs,
                                Header: 90,
                                Footer: 90,
                                Below_Post: zs,
                                Sidebar: zs
                            }]
                        ]), this._clsOptions.enabled) {
                        var o = "clsins_ss",
                            a = this._clsOptions.getExperiment(o);
                        a && this._abgroup.set(o, a);
                        ["cls-insertion", "cls-header-insertion", "cls-disable-ads"].filter((function(e) {
                            if (r._clsOptions.branch) {
                                var t = "script[id^=" + (e + "-" + r._clsOptions.branch) + "]";
                                return document.querySelectorAll(t).length > 0
                            }
                            return !1
                        })).forEach((function(e) {
                            return r._clsOptions.setInjectedScripts(e)
                        }))
                    }
                }
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return this.adthrive.siteAds.adOptions.clsOptimizedAds || this._clsOptions.enabled && (this._clsOptions.injectedFromPlugin || this._clsOptions.injectedFromSiteAds)
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.getDivHeight = function(e, t) {
                    var i = this._map.get(t);
                    return i && i[e] || this._defaultHeight
                }, e.prototype.setStyle = function(e, t) {
                    ("Footer" === t || this.enabled && this._map.get(this._context.device)[t]) && (e.style.minHeight = this._map.get(this._context.device)[t] + "px", e.classList.add("adthrive-ad-cls"))
                }, e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, As, is, Ms])], e)
            }(),
            js = function() {
                function e(e) {
                    this.tracker = !0, this.gdpr = !1, this._footerMessages = new Map([
                        ["FamilyParenting", "CafeMedia Family & Parenting"],
                        ["Finance", "CafeMedia Finance"],
                        ["Food", "CafeMedia Food"],
                        ["General", "CafeMedia"],
                        ["HomeDIY", "CafeMedia Home/DIY"],
                        ["Lifestyle", "CafeMedia Lifestyle"],
                        ["Pets", "CafeMedia Pets"],
                        ["Tech", "CafeMedia Tech"],
                        ["Travel", "CafeMedia Travel"]
                    ]);
                    var t = e.siteAds.adOptions,
                        i = t.comscore,
                        n = t.comscoreFooter;
                    this.category = Ko(i, "General"), this.comscore = Ko(n, !0), this.comscoreMessage = Ko(this._footerMessages.get(this.category), "CafeMedia")
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            Ds = function() {
                function e(e, t) {
                    this.adthrive = e, this._clsOptions = t, this.all = !1, this.content = !1, this.recipe = !1, this.video = !1, this.locations = new Set, this.reasons = new Set, this._clsDivs = ["adthrive-below-post", "adthrive-content", "adthrive-header", "adthrive-recipe", "adthrive-sidebar"], (this.urlHasEmail(window.location.href) || this.urlHasEmail(window.document.referrer)) && (this.all = !0, this.reasons.add("all_email"), this.removeClsDivs(this._clsDivs));
                    try {
                        document.body.classList.contains("adthrive-disable-all") && (this.all = !0, this.reasons.add("all_plugin")), document.body.classList.contains("adthrive-disable-content") && (this.content = !0, this.recipe = !0, this.locations.add("Content"), this.locations.add("Recipe"), this.reasons.add("content_plugin")), null !== document.querySelector(".tag-novideo") && (this.video = !0, this.locations.add("Video"), this.reasons.add("video_tag")), document.body.classList.contains("adthrive-disable-video") && (this.video = !0, this.locations.add("Video"), this.reasons.add("video_plugin"))
                    } catch (e) {
                        Bo.error("DisableAds", "constructor", {
                            message: e.message
                        });
                        var i = "classList" in document.createElement("_");
                        Bo.error("BodyDeviceClassComponent", "init.support", {
                            support: i
                        });
                        var n = "classList" in document.body;
                        Bo.error("BodyDeviceClassComponent", "init.supportBody", {
                            supportBody: n
                        })
                    }
                }
                return e.prototype.removeClsDivs = function(e) {
                    if (this._clsOptions.enabled) {
                        var t = this._clsOptions.injectedSlots.filter((function(t) {
                            var i = t.element,
                                n = !1;
                            return i.parentNode && e.some((function(e) {
                                return i.classList.contains(e)
                            })) && (i.parentNode.removeChild(i), n = !0), !n
                        }));
                        this._clsOptions.overwriteInjectedSlots(t)
                    }
                }, e.prototype.disableAllAds = function(e) {
                    e && !qa(e) || (this.all = !0, this.reasons.add("all_page"), this.removeClsDivs(this._clsDivs))
                }, e.prototype.disableContentAds = function(e) {
                    e && !qa(e) || (this.content = !0, this.recipe = !0, this.locations.add("Content"), this.locations.add("Recipe"), this.reasons.add("content_page"), this.removeClsDivs(["adthrive-content", "adthrive-recipe"]))
                }, e.prototype.disablePlaylistPlayers = function(e) {
                    e && !qa(e) || (this.video = !0, this.locations.add("Video"), this.reasons.add("video_page"), this.adthrive.siteAds.videoPlayers ? this._removeCLSVideoPlayers() : this._removeLegacyCLSVideoPlayers())
                }, e.prototype._removeCLSVideoPlayers = function() {
                    var e;
                    null === (e = this.adthrive.siteAds.videoPlayers) || void 0 === e || e.players.filter((function(e) {
                        return "stickyPlaylist" === e.type || "sekindo" === e.type
                    })).map((function(e) {
                        return document.querySelectorAll("#cls-video-container-" + e.playlistId)
                    })).forEach((function(e) {
                        for (var t, i = 0; i < e.length; i++) {
                            var n = e[i];
                            null === (t = n.parentNode) || void 0 === t || t.removeChild(n)
                        }
                    }))
                }, e.prototype._removeLegacyCLSVideoPlayers = function() {
                    var e, t, i = null === (e = this.adthrive.siteAds.video) || void 0 === e ? void 0 : e.jwPlaylistId;
                    if (i)
                        for (var n = document.querySelectorAll("#cls-video-container-" + i), r = 0; r < n.length; r++) {
                            var o = n[r];
                            null === (t = o.parentNode) || void 0 === t || t.removeChild(o)
                        }
                }, e.prototype.urlHasEmail = function(e) {
                    if (!e) return !1;
                    return null !== /([A-Z0-9._%+-]+(@|%(25)*40)[A-Z0-9.-]+\.[A-Z]{2,})/i.exec(e)
                }, e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, Ms])], e)
            }(),
            Bs = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    i._result = !1, i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i.key = "smhd100";
                    var n = window.adthriveCLS,
                        r = n && n.experiments;
                    return i._result = r && i.key in r ? r[i.key] : i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("RemoveLargeSizeExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Vs = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "smad300", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(1).get()
                }, t = eo([Ka("RemoveLargeSidebarExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ls = function() {
                function e(e, t, i, n) {
                    this._adthrive = e, this._adOptions = t, this._removeLargeSizeExperiment = i, this._removeLargeSidebarExperiment = n, this._stickyOutstreamEnabled = !1, this._supportedSizes = [
                        [728, 90],
                        [300, 250],
                        [300, 600],
                        [320, 50],
                        [970, 250],
                        [160, 600],
                        [300, 1050],
                        [336, 280],
                        [970, 90],
                        [300, 50],
                        [320, 100],
                        [468, 60],
                        [250, 250],
                        [120, 240],
                        [1, 1],
                        [300, 300],
                        [552, 334],
                        [300, 420],
                        [728, 250],
                        [320, 300],
                        [300, 390]
                    ], this._interstitialSupportedSizes = [
                        [320, 50],
                        [300, 250],
                        [300, 600],
                        [336, 280],
                        [320, 480],
                        [1, 1]
                    ], this._adUnitAuctionPriorityMap = new Map([
                        ["Footer", 1],
                        ["Header", 2],
                        ["Sidebar", 3],
                        ["Content", 4],
                        ["Recipe", 5],
                        ["Sidebar_sticky", 6],
                        ["Below Post", 7]
                    ]), this._adUnitSettingTemplate = {
                        auctionPriority: 8,
                        autosize: !0,
                        classNames: [],
                        devices: ["tablet", "phone", "desktop"],
                        elementSelector: "body",
                        every: 1,
                        lazy: !1,
                        lazyMax: 0,
                        lazyMaxDefaulted: !1,
                        location: "",
                        max: 1,
                        pageSelector: "",
                        position: "beforebegin",
                        sequence: 1,
                        sizes: [],
                        skip: 0,
                        spacing: 0,
                        special: [],
                        sticky: !1,
                        stickyOverlapSelector: ""
                    };
                    var r = e.siteAds.breakpoints,
                        o = r.tablet,
                        a = r.desktop;
                    this._device = Jo(o, a), this._adthriveSiteAds = this._adthrive.siteAds, this._adthriveOptions = this._adthriveSiteAds.adOptions, this.setupStickyOutstreamSettings(), this.setupInterstitialSettings()
                }
                return e.prototype.setupStickyOutstreamSettings = function() {
                    var e = this._adthriveSiteAds.video && this._adthriveSiteAds.video.partners && this._adthriveSiteAds.video.partners.stickyOutstream,
                        t = this._adthriveSiteAds.videoPlayers && this._adthriveSiteAds.videoPlayers.partners && this._adthriveSiteAds.videoPlayers.partners.stickyOutstream,
                        i = e || t,
                        n = Ko(this._adthriveOptions && this._adthriveOptions.stickyOutstream || i, null),
                        r = n && ("phone" === this._device ? n.mobile : n.desktop);
                    if (n && r) {
                        this._stickyOutstreamEnabled = r.enabled;
                        var o = $r({}, this._adUnitSettingTemplate);
                        o.sticky = !0, o.location = "Video_StickyOutstream", o.position = "beforeend", o.pageSelector = Ko(i && i.blockedPageSelectors, ""), o.sizes = "phone" === this._device ? [
                            [300, 50]
                        ] : [
                            [300, 250]
                        ], this._stickyOutstreamSettingTemplate = o
                    }
                }, e.prototype.setupInterstitialSettings = function() {
                    var e = $r({}, this._adUnitSettingTemplate),
                        t = this._adthriveOptions;
                    e.location = "Interstitial", e.sizes = this.interstitalSupportedSizes(), e.pageSelector = Ko(t.interstitialBlockedPageSelectors || t.mobileInterstitialBlockedPageSelectors, ""), this._interstitialSettingTemplate = e
                }, e.prototype.get = function() {
                    var e = this;
                    this._adthriveOptions, this._adthrive.siteAds.adUnits.sort((function(t, i) {
                        var n = "Sidebar" === t.location && t.sticky ? t.location + "_sticky" : t.location,
                            r = "Sidebar" === i.location && i.sticky ? i.location + "_sticky" : i.location;
                        return e._adUnitAuctionPriorityMap.get(n) - e._adUnitAuctionPriorityMap.get(r)
                    }));
                    var t = this._adthrive.siteAds.adUnits.filter((function(e) {
                        return void 0 !== e.dynamic && e.dynamic.enabled
                    })).map((function(t) {
                        var i = t.location.replace(/\s+/g, "_");
                        return {
                            auctionPriority: e._adUnitAuctionPriorityMap.get(i) || 8,
                            location: i,
                            sequence: Ko(t.sequence, 1),
                            sizes: e.onlySupportedAdSizes(t.adSizes).filter((function(i) {
                                return e.excludeTallSizes(t.location, i, t.sequence, t.adSizes)
                            })),
                            devices: t.devices,
                            pageSelector: Ko(t.dynamic.pageSelector, "").trim(),
                            elementSelector: Ko(t.dynamic.elementSelector, "").trim(),
                            position: Ko(t.dynamic.position, "beforebegin"),
                            max: Math.floor(Ko(t.dynamic.max, 0)),
                            spacing: Ko(t.dynamic.spacing, 0),
                            skip: Math.floor(Ko(t.dynamic.skip, 0)),
                            every: Math.max(Math.floor(Ko(t.dynamic.every, 1)), 1),
                            classNames: t.dynamic.classNames || [],
                            sticky: "Footer" === t.location || t.sticky,
                            stickyOverlapSelector: Ko(t.stickyOverlapSelector, "").trim(),
                            autosize: t.autosize,
                            special: Ko(t.targeting, []).filter((function(e) {
                                return "special" === e.key
                            })).reduce((function(e, t) {
                                return e.concat.apply(e, so(t.value))
                            }), []),
                            lazy: Ko(t.dynamic.lazy, !1),
                            lazyMax: Ko(t.dynamic.lazyMax, 2),
                            lazyMaxDefaulted: 0 !== t.dynamic.lazyMax && !t.dynamic.lazyMax
                        }
                    }));
                    return this._stickyOutstreamEnabled && this._stickyOutstreamSettingTemplate && t.push(this._stickyOutstreamSettingTemplate), this._adOptions.interstitial.gam && this._interstitialSettingTemplate && t.push(this._interstitialSettingTemplate), t
                }, e.prototype.onlySupportedAdSizes = function(e) {
                    return this._supportedSizes.filter((function(t) {
                        var i = ao(t, 2),
                            n = i[0],
                            r = i[1];
                        return e.some((function(e) {
                            var t = ao(e, 2),
                                i = t[0],
                                o = t[1];
                            return n === i && r === o
                        }))
                    }))
                }, e.prototype.interstitalSupportedSizes = function() {
                    var e = this;
                    return this._interstitialSupportedSizes.filter((function(t) {
                        var i = ao(t, 2),
                            n = i[0],
                            r = i[1];
                        return "phone" === e._device || n + "," + r != "320,50"
                    }))
                }, e.prototype.excludeTallSizes = function(e, t, i, n) {
                    var r = ao(t, 2),
                        o = r[0],
                        a = r[1];
                    return !("Footer" === e && "phone" === this._device && 320 === o && 100 === a || "Header" === e && a > 100 && this._removeLargeSizeExperiment.result || "Sidebar" === e && 9 !== i && n.some((function(e) {
                        var t = ao(e, 2);
                        return t[0], t[1] <= 300
                    })) && a > 300 && this._removeLargeSidebarExperiment.result)
                }, e = eo([zo(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, hs, Bs, Vs])], e)
            }(),
            Fs = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "ebho", i._choices = [{
                        choice: {
                            name: "ix_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "medianet_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "openx_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "pubmatic_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "rhythmone_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "rubicon_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "sharethrough_ebda",
                            weight: 10
                        }
                    }, {
                        choice: {
                            name: "smart_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "sonobi_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "sovrn_ebda",
                            weight: 10
                        }
                    }, {
                        choice: {
                            name: "emx_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "triplelift_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "verizon_ebda",
                            weight: 10
                        }
                    }, {
                        choice: {
                            name: "yieldmo_ebda",
                            weight: 10
                        }
                    }], i._result = i.run(), t.set(i.key, i._result ? i._result.name : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    var e = this._choices.map((function(e) {
                            return e.choice
                        })).map((function(e) {
                            return {
                                choice: e,
                                weight: e.weight
                            }
                        })),
                        t = new ds(e);
                    return t.totalWeight, t.get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Object)], t.prototype, "run", null), t = eo([Ka("EBHOExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ns = function() {
                function e(e) {
                    this.bidder = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [Fs])], e)
            }(),
            qs = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: 0,
                        weight: 98.8
                    }, {
                        choice: 1,
                        weight: .2
                    }, {
                        choice: 2,
                        weight: 1
                    }], i.key = "loglevel", i._result = i.run(), t.set(i.key, i._result ? 1 === i._result ? "on" : "log" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("EventLogExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Us = function() {
                function e(e) {
                    this.enabled = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [qs])], e)
            }(),
            Hs = function() {
                function e() {
                    this.elements = []
                }
                return e = eo([Ro()], e)
            }(),
            Ws = function() {
                function e(e) {
                    this.prefix = "AdThrive", this.networkCode = "18190176", this._gamMCMEnabled = Ko(e.siteAds.adOptions.gamMCMEnabled, !1), this._gamMCMChildNetworkCode = Ko(e.siteAds.adOptions.gamMCMChildNetworkCode, ""), this.account = this._gamMCMEnabled && "" !== this._gamMCMChildNetworkCode ? this.networkCode + "," + this._gamMCMChildNetworkCode : this.networkCode;
                    var t = new Set(["service", "bidding", "dynamicVersion"]);
                    this.targeting = e.siteAds.targeting.filter((function(e) {
                        var i = e.key;
                        return !t.has(i)
                    })).map((function(e) {
                        var t = e.key,
                            i = e.value;
                        return "boolean" == typeof i && (i = String(i)), {
                            key: t,
                            value: i
                        }
                    }))
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            Gs = function() {
                function e(e) {
                    this.cafeMediaVendorId = 996, this.nonCompliantBidders = ["deepintent", "roundel", "yahoossp"], this.isRequired = "true" === e.gdpr
                }
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return this.isRequired
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            Qs = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.biddersHeldOut = [], t.key = "hbho", t._result = [], t._choices = [{
                        choice: ["33across"],
                        threshold: .1
                    }, {
                        choice: ["appnexus"],
                        threshold: .01
                    }, {
                        choice: ["brightroll"],
                        threshold: .01
                    }, {
                        choice: ["concert"],
                        threshold: .05
                    }, {
                        choice: ["conversant"],
                        threshold: .1
                    }, {
                        choice: ["criteo"],
                        threshold: .01
                    }, {
                        choice: ["deepIntent"],
                        threshold: .01
                    }, {
                        choice: ["districtm"],
                        threshold: .35
                    }, {
                        choice: ["districtmDMX"],
                        threshold: .25
                    }, {
                        choice: ["grid"],
                        threshold: .005
                    }, {
                        choice: ["gumgum"],
                        threshold: .01
                    }, {
                        choice: ["kargo"],
                        threshold: .01
                    }, {
                        choice: ["ix"],
                        threshold: .005
                    }, {
                        choice: ["nativo"],
                        threshold: .1
                    }, {
                        choice: ["openx"],
                        threshold: .01
                    }, {
                        choice: ["pubmatic"],
                        threshold: .01
                    }, {
                        choice: ["roundel"],
                        threshold: .1
                    }, {
                        choice: ["rubicon"],
                        threshold: .01
                    }, {
                        choice: ["sharethrough"],
                        threshold: .1
                    }, {
                        choice: ["teads"],
                        threshold: .01
                    }, {
                        choice: ["triplelift"],
                        threshold: .005
                    }, {
                        choice: ["ttd"],
                        threshold: .01
                    }, {
                        choice: ["undertone"],
                        threshold: .01
                    }, {
                        choice: ["unruly"],
                        threshold: .1
                    }, {
                        choice: ["verizon"],
                        threshold: .01
                    }, {
                        choice: ["yahoossp"],
                        threshold: .01
                    }, {
                        choice: ["yieldmo"],
                        threshold: .01
                    }], t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return this._choices.filter((function(e) {
                        var t = e.threshold;
                        return new as(t).get()
                    })).map((function(e) {
                        return e.choice[0]
                    }))
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("HBHOExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Ks = function() {
                function e(e) {
                    this.bidders = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [Qs])], e)
            }(),
            Xs = function() {
                function e(e) {
                    this.adthrive = e, this.apiReady = new Do, this.optIn = new Do
                }
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return Ko(this.adthrive.siteAds.adOptions.liveRampATS, !1)
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            Js = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: {
                            name: "id5Id",
                            weight: 5
                        }
                    }, {
                        choice: {
                            name: "identityLink",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "unifiedId",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "pubCommonId",
                            weight: 5
                        }
                    }, {
                        choice: {
                            name: "criteo",
                            weight: 25
                        }
                    }, {
                        choice: {
                            name: "connectId",
                            weight: 5
                        }
                    }], i.key = "idho", i._result = i.run(), t.set(i.key, i.result ? i.result.name : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    var e = this._choices.map((function(e) {
                            return e.choice
                        })).map((function(e) {
                            return {
                                choice: e,
                                weight: e.weight
                            }
                        })),
                        t = new ds(e);
                    return t.totalWeight, t.get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Object)], t.prototype, "run", null), t = eo([Ka("IDHOExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ys = function() {
                function e(e) {
                    this.subModule = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [Js])], e)
            }(),
            Zs = function() {
                function e() {
                    this.refreshSlots = new Set(["Footer"]), this.ajaxType = !1
                }
                return e = eo([Ro()], e)
            }(),
            $s = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "lzbpvp", i._choices = [{
                        choice: .75,
                        weight: 40
                    }, {
                        choice: .25,
                        weight: 20
                    }, {
                        choice: .125,
                        weight: 20
                    }, {
                        choice: 0,
                        weight: 20
                    }], i._result = i.run(), t.set(i.key, String(i._result)), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Number)], t.prototype, "run", null), t = eo([Ka("BelowPostMarginExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            ec = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "lzcvp", i._choices = [{
                        choice: 2,
                        weight: 60
                    }, {
                        choice: 1.25,
                        weight: 10
                    }, {
                        choice: 1,
                        weight: 10
                    }, {
                        choice: .75,
                        weight: 10
                    }, {
                        choice: .5,
                        weight: 10
                    }], i._result = i.run(), t.set(i.key, String(i._result)), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Number)], t.prototype, "run", null), t = eo([Ka("ContentMarginExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            tc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "lzhb", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.9).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("LZHBExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            ic = function() {
                function e(e, t, i) {
                    this._defaultViewPort = 2, this._infScrollViewPort = 4, this.googleLazyLoadSettings = {
                        disabled: {
                            fetchMarginPercent: -1,
                            renderMarginPercent: -1,
                            mobileScaling: -1
                        },
                        gam: {
                            fetchMarginPercent: 600,
                            renderMarginPercent: 100,
                            mobileScaling: 1.5
                        },
                        hbMarginPercent: 700
                    }, this.lzhb = e.result, this.viewports = {
                        content: t.result,
                        belowPost: i.result,
                        default: this._defaultViewPort,
                        infScroll: this._infScrollViewPort
                    }
                }
                return e = eo([Ro(), io("design:paramtypes", [tc, ec, $s])], e)
            }(),
            nc = function() {
                function e(e) {
                    this._url = "https://ats.rlcdn.com/ats.js", this._config = {
                        placementID: 111,
                        storageType: "localStorage",
                        detectionType: "direct",
                        logging: "error"
                    }, this.enabled = Ko(e.siteAds.adOptions.liveRampATS, !0)
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            rc = {
                AS: {
                    location: "Sponsor_Tile",
                    selectors: ["h1.entry-title", "h1.post-title", "h1.posttitle", "h1.story-title", "h1.heading", ".post > .post-title"],
                    size: [
                        [300, 55],
                        [234, 60]
                    ],
                    position: "afterend",
                    classNames: ["adthrive-sponsor-tile"],
                    find: function(e) {
                        return document.querySelector(e)
                    },
                    requireSelectorMatch: !0,
                    lazy: !1
                },
                NR: {
                    location: "Native_Recipe",
                    sequence: 1,
                    selectors: ['[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="recipeIngredient"]:last-child', '[itemscope][itemtype$="//schema.org/Recipe"] [itemprop="ingredients"]:last-child', '[itemscope][itemtype$="//schema.org/Recipe"] .ingredient:last-child', ".wprm-recipe-ingredient:last-child", "#recipe .ingredients", ".wprm-recipe-ingredients-container", ".tasty-recipe-ingredients", '[class*="recipe"] [class*="ingredient"] ul li:last-child', '[class*="create-ingredient"] ul li:last-child', '[class*="tasty-recipe"] [class*="ingredient"] p:last-child', "[class*=recipe] [class*=recipe] ~ p + ul li:last-child"],
                    size: [
                        [225, 65],
                        [234, 60],
                        [300, 100]
                    ],
                    position: "afterend",
                    classNames: ["adthrive-native-recipe"],
                    find: function(e) {
                        var t = document.querySelectorAll(e);
                        return t.length > 0 ? t[t.length - 1] : null
                    },
                    requireSelectorMatch: !1,
                    lazy: !0
                }
            },
            oc = function() {
                function e(e) {
                    var t = this;
                    if (this.loaded = !1, this.campaigns = [], this.siteCodes = [], this.adViewability = [], this.speed = navigator.connection && "4g" === navigator.connection.effectiveType ? "1" : "0", this.adUnits = rc, this.selectorMatches = [], this.ortbSegments = new Map, this.hvThreshold = .6, this.mcmp = [], this.flpProdIds = [], this.activeCampaign = function(e) {
                            var i = Date.now();
                            return i >= t.parseDate(e.start_date).getTime() && i <= t.parseDate(e.expiration_date).getTime()
                        }, e) {
                        this.loaded = !0;
                        var i = e.host,
                            n = e.page,
                            r = e.adViewability;
                        if (i && i.length && (this.siteCodes = i[0].site_codes || []), n && n.length) {
                            var o = n[0].campaigns || [];
                            this.campaigns = o.filter(this.activeCampaign)
                        }
                        r && r.length && (this.adViewability = r);
                        var a = this.getMcmpFlpIds();
                        this.mcmp = a.mcmp || [], this.flpProdIds = a.flpProdIds || [], this.ortbSegments = this.campaigns.reduce((function(e, t) {
                            var i = ao(new RegExp(/(^iab(a|c))_(\d*)/).exec(t.dfp_id) || [], 4),
                                n = i[1],
                                r = i[3],
                                o = e.get(n) || [];
                            return o.push({
                                id: r
                            }), e.set(n, o), e
                        }), new Map)
                    }
                }
                return e.prototype.isValidMarmaladeCampaign = function(e) {
                    var t = e.dfp_id.substring(0, 2),
                        i = this.adUnits[t];
                    if (i) {
                        var n = i.find(i.selectors.join(","));
                        return n && this.selectorMatches.push({
                            adUnit: i,
                            match: n
                        }), !i.requireSelectorMatch || !!n
                    }
                    return !0
                }, e.prototype.getMcmpFlpIds = function() {
                    var e = this;
                    return this.campaigns.filter((function(t) {
                        return e.isValidMarmaladeCampaign(t)
                    })).reduce((function(e, t) {
                        var i;
                        return e.mcmp.push(t.dfp_id), t.flp_prod_id && (i = e.flpProdIds).push.apply(i, so(JSON.parse(t.flp_prod_id))), e
                    }), {
                        mcmp: [],
                        flpProdIds: []
                    })
                }, e.prototype.parseDate = function(e) {
                    var t = e.split("-");
                    return new Date(Number(t[0]), Number(t[1]) - 1, Number(t[2]))
                }, e = eo([Ro(), to(0, Ao("MarmaladeResponse")), io("design:paramtypes", [Object])], e)
            }(),
            ac = function() {
                function e(e) {
                    var t, i, n, r, o, a, s, c, l, u, d, p, h, f, g, m, y, _, v, b, w, S, C, k, P, E, O, x, T, I, M, A, z, R = this;
                    this._biddersConfig = new Map, null === (t = null == e ? void 0 : e.core) || void 0 === t || t.partners.forEach((function(e) {
                        if (e.bidder_name) {
                            var t = Ko(e.enabled, !0),
                                i = new Map;
                            e.cpm && e.cpm.length && e.cpm.forEach((function(e) {
                                i.set(e.name, e)
                            })), R._biddersConfig.set(e.bidder_name, {
                                bidder_name: e.bidder_name,
                                enabled: t,
                                cpmMap: i
                            })
                        }
                    }));
                    var j = e.siteAds.adOptions;
                    this.appNexus = j.appNexus && Ko(null === (i = this._biddersConfig.get("appnexus")) || void 0 === i ? void 0 : i.enabled, !0), this.brightroll = Ko(j.brightroll, !0) && Ko(null === (n = this._biddersConfig.get("brightroll")) || void 0 === n ? void 0 : n.enabled, !0), this.concert = Ko(j.concert, !1) && Ko(null === (r = this._biddersConfig.get("concert")) || void 0 === r ? void 0 : r.enabled, !1), this.conversant = j.conversant && Ko(null === (o = this._biddersConfig.get("conversant")) || void 0 === o ? void 0 : o.enabled, !1), this.criteo = Ko(j.criteo, !0) && Ko(null === (a = this._biddersConfig.get("criteo")) || void 0 === a ? void 0 : a.enabled, !0), this.deepIntent = Ko(j.deepIntent, !0) && Ko(null === (s = this._biddersConfig.get("deepintent")) || void 0 === s ? void 0 : s.enabled, !0), this.districtM = j.districtM && Ko(null === (c = this._biddersConfig.get("districtm")) || void 0 === c ? void 0 : c.enabled, !0), this.districtMDMX = j.districtM && Ko(null === (l = this._biddersConfig.get("districtmDMX")) || void 0 === l ? void 0 : l.enabled, !0), this.districtMDMXVideo = j.districtM && Ko(null === (u = this._biddersConfig.get("districtmDMX")) || void 0 === u ? void 0 : u.enabled, !0), this.indexExchange = j.indexExchange && Ko(null === (d = this._biddersConfig.get("ix")) || void 0 === d ? void 0 : d.enabled, !0), this.gumgum = Ko(j.gumgum, !0) && Ko(null === (p = this._biddersConfig.get("gumgum")) || void 0 === p ? void 0 : p.enabled, !0), this.kargo = Ko(j.kargo, !0) && Ko(null === (h = this._biddersConfig.get("kargo")) || void 0 === h ? void 0 : h.enabled, !0), this.mediaGrid = Ko(j.mediaGrid, !0) && Ko(null === (f = this._biddersConfig.get("grid")) || void 0 === f ? void 0 : f.enabled, !0), this.mediaGridVideo = Ko(j.mediaGrid, !0) && Ko(null === (g = this._biddersConfig.get("gridvid")) || void 0 === g ? void 0 : g.enabled, !0), this.nativo = Ko(j.nativo, !0) && Ko(null === (m = this._biddersConfig.get("nativo")) || void 0 === m ? void 0 : m.enabled, !0), this.openx = j.openx && Ko(null === (y = this._biddersConfig.get("openx")) || void 0 === y ? void 0 : y.enabled, !0), this.pubMatic = Ko(j.pubMatic, !0) && Ko(null === (_ = this._biddersConfig.get("pubmatic")) || void 0 === _ ? void 0 : _.enabled, !0), this.rubicon = Ko(j.rubicon, !0) && Ko(null === (v = this._biddersConfig.get("rubicon")) || void 0 === v ? void 0 : v.enabled, !0), this.sharethrough = Ko(j.sharethrough, !0) && Ko(null === (b = this._biddersConfig.get("sharethrough")) || void 0 === b ? void 0 : b.enabled, !0), this.spotx = Ko(null === (w = this._biddersConfig.get("spotx")) || void 0 === w ? void 0 : w.enabled, !0), this.teads = Ko(j.teads, !0) && Ko(null === (S = this._biddersConfig.get("teads")) || void 0 === S ? void 0 : S.enabled, !0), this.roundel = Ko(j.roundel, !0) && Ko(null === (C = this._biddersConfig.get("roundel")) || void 0 === C ? void 0 : C.enabled, !0), this.telaria = Ko(null === (k = this._biddersConfig.get("telaria")) || void 0 === k ? void 0 : k.enabled, !0), this.thirtyThreeAcross = Ko(j.thirtyThreeAcross, !0) && Ko(null === (P = this._biddersConfig.get("33across")) || void 0 === P ? void 0 : P.enabled, !0), this.tripleLift = Ko(j.tripleLift, !0) && Ko(null === (E = this._biddersConfig.get("triplelift")) || void 0 === E ? void 0 : E.enabled, !0), this.ttd = Ko(j.theTradeDesk, !0) && Ko(null === (O = this._biddersConfig.get("ttd")) || void 0 === O ? void 0 : O.enabled, !0), this.undertone = Ko(j.undertone, !0) && Ko(null === (x = this._biddersConfig.get("undertone")) || void 0 === x ? void 0 : x.enabled, !0), this.unruly = Ko(j.unruly, !0) && Ko(null === (T = this._biddersConfig.get("unruly")) || void 0 === T ? void 0 : T.enabled, !0), this.verizon = Ko(j.verizon, !0) && Ko(null === (I = this._biddersConfig.get("verizon")) || void 0 === I ? void 0 : I.enabled, !0), this.oneVideo = Ko(j.oneVideo, !0) && Ko(null === (M = this._biddersConfig.get("oneVideo")) || void 0 === M ? void 0 : M.enabled, !0), this.yahoossp = Ko(j.yahoossp, !0) && Ko(null === (A = this._biddersConfig.get("yahoossp")) || void 0 === A ? void 0 : A.enabled, !0), this.yieldmo = Ko(j.yieldmo, !0) && Ko(null === (z = this._biddersConfig.get("yieldmo")) || void 0 === z ? void 0 : z.enabled, !0), this.amazonUAM = j.amazonUAM;
                    var D = e.siteAds.videoPlayers && e.siteAds.videoPlayers.partners,
                        B = e.siteAds.video && e.siteAds.video.partners,
                        V = D || B || {};
                    this.video = {
                        amazonUAM: Ko(V.amazonUAM, !0) && this.amazonUAM,
                        appNexus: Ko(V.appNexus, !0) && this.appNexus,
                        conversant: Ko(V.conversant, !1) && this.conversant,
                        criteo: Ko(V.criteo, !0) && this.criteo,
                        districtM: Ko(V.districtM, !0) && this.districtM,
                        districtMDMXVideo: Ko(V.districtM, !0) && this.districtMDMXVideo,
                        gumgum: Ko(V.gumgum, !0) && this.gumgum,
                        indexExchange: Ko(V.indexExchange, !0) && this.indexExchange,
                        mediaGridVideo: Ko(V.mediaGrid, !0) && this.mediaGridVideo,
                        oneVideo: Ko(V.oneVideo, !0) && this.oneVideo,
                        openx: Ko(V.openx, !0) && this.openx,
                        pubMatic: Ko(V.pubMatic, !0) && this.pubMatic,
                        rubicon: Ko(V.rubicon, !0) && this.rubicon,
                        sharethrough: Ko(V.sharethrough, !0) && this.sharethrough,
                        spotx: Ko(V.spotx, !0) && this.spotx,
                        telaria: Ko(V.telaria, !1) && this.telaria,
                        tripleLift: Ko(V.tripleLift, !0) && this.tripleLift,
                        ttd: Ko(V.ttd, !0) && this.ttd,
                        yahoossp: Ko(V.yahoossp, !0) && this.yahoossp
                    }
                }
                return e.prototype.getBidderConfig = function(e) {
                    return Ko(this._biddersConfig.get(e), {
                        bidder_name: e,
                        enabled: !0,
                        cpmMap: new Map
                    })
                }, e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            sc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "SensOffExperiment", i._choices = [], i._sensCategories = Ko(t.siteAds.adOptions.sensitiveCategories, []), i._choices = i._sensCategories.map((function(e) {
                        return {
                            choice: [e]
                        }
                    })), i._result = i.run(), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return this._sensCategories.filter((function() {
                        return new as(.01).get()
                    }))
                }, t = eo([Ka("SensOffExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], t)
            }(rs),
            cc = function() {
                function e(e, t) {
                    var i = this;
                    this._sensOffExperiment = t, this.id = e.siteAds.siteId, this.name = e.siteAds.siteName, this.verticals = e.siteAds.adOptions.verticals, this.sensitiveCategories = Ko(e.siteAds.adOptions.sensitiveCategories, []), this.sensCategoriesOff = this._sensOffExperiment.result, this.filteredSensitiveCategories = this.sensitiveCategories.filter((function(e) {
                        return -1 === i.sensCategoriesOff.indexOf(e)
                    })), this.breakpoints = e.siteAds.breakpoints, this.style = e.style
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, sc])], e)
            }(),
            lc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: "both",
                        weight: 90
                    }, {
                        choice: "client",
                        weight: 9
                    }, {
                        choice: "server",
                        weight: 1
                    }], i.key = "magnitedr", i._result = i.run(), t.set(i.key, i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("RubiconExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            uc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: "both",
                        weight: 99
                    }, {
                        choice: "client",
                        weight: 1
                    }, {
                        choice: "server",
                        weight: 0
                    }], i.key = "tripleliftdr", i._result = i.run(), t.set(i.key, i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("TripleLiftExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            dc = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    r._result = ["33across", "brightroll", "conversant", "deepintent", "districtm", "pubm_ss", "yieldmo"], r._choices = [{
                        choice: ["appnexus"],
                        threshold: .05
                    }, {
                        choice: ["grid"],
                        threshold: .9
                    }, {
                        choice: ["gumgum"],
                        threshold: .02
                    }], r.key = "pbs2s", r.addToS2SBidders("tripl_ss", i), r.addToS2SBidders("rubi_ss", n);
                    var o = r.run();
                    return r._choices.forEach((function(e) {
                        var i = e.choice[0]; - 1 !== o.indexOf(i) ? (r._result.push(i), t.set("pbs2s_" + i, "on")) : t.set("pbs2s_" + i, "off")
                    })), r
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return this._choices.filter((function(e) {
                        var t = e.threshold;
                        return new as(t).get()
                    })).map((function(e) {
                        return e.choice[0]
                    }))
                }, t.prototype.addToS2SBidders = function(e, t) {
                    "both" !== t.result && "server" !== t.result || this._result.push(e)
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("S2SExperiment"), Ro(), io("design:paramtypes", [is, uc, lc])], t)
            }(rs),
            pc = function() {
                function e(e, t, i) {
                    this._gam = t, this._site = i, this.deals = [], this.targetingKeys = ["ADOMAIN", "AD_ID", "BIDDER", "CACHE_ID", "CACHE_HOST", "DEAL", "FORMAT", "PRICE_BUCKET", "SIZE", "SOURCE", "UUID", "INTERSTITIAL"], this.sendAllBidsTargetingKeys = this.targetingKeys.filter((function(e) {
                        return -1 === ["ADOMAIN", "BIDDER", "INTERSTITIAL"].indexOf(e)
                    })), this.interstitialAdUnitCode = "gpt_unit_/" + this._gam.account + "/AdThrive_Interstitial_1/" + this._site.id + "_0", this.s2s = this.s2s = {
                        bidders: e.result
                    }
                }
                return e = eo([Ro(), io("design:paramtypes", [dc, Ws, cc])], e)
            }(),
            hc = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    n.adthrive = t, n.key = "adsp7", n._result = !1, n._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }];
                    var r = window,
                        o = r.adthrive && r.adthrive.plugin,
                        a = r.adthriveCLS,
                        s = a && a.experiments;
                    return Ko(t.siteAds.adDensityEnabled, !0) && (s && n.key in s ? (n._result = s[n.key], i.set(n.key, n._result ? "on" : "off")) : t.siteAds.adDensityLayout && (s && "clsins_ss" in s || o && o.indexOf("1.1.") > -1) && (n._result = n.run(), i.set(n.key, n._result ? "on" : "off"))), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(1).get()
                }, t = eo([Ka("TargetDensityExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, is])], t)
            }(rs),
            fc = function() {
                function e(e, t) {
                    this._targetDensityExperiment = t, this.enabled = this._targetDensityExperiment.result, this.settings = e.siteAds.adDensityLayout
                }
                return e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, hc])], e)
            }(),
            gc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: 2e3
                    }, {
                        choice: 2200
                    }, {
                        choice: 2400
                    }, {
                        choice: 2600
                    }, {
                        choice: 2800
                    }], i.key = "to_initial", i._result = i.run(), t.set(i.key, String(i._result)), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new us(this._choices.map((function(e) {
                        return e.choice
                    }))).get()
                }, t = eo([Ka("InitialTimeoutExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            mc = function() {
                function e(e) {
                    this.initialBidsRequest = e.result, this.refreshBidsRequest = 5e3
                }
                return e = eo([Ro(), io("design:paramtypes", [gc])], e)
            }(),
            yc = function() {
                function e() {
                    this._data = {}
                }
                return e.prototype.set = function(e) {
                    this._data = $r($r({}, this._data), e)
                }, e.prototype.get = function() {
                    return 0 !== Object.keys(this._data).length ? this._data : void 0
                }, e.prototype.getByKey = function(e) {
                    return this._data[e]
                }, e.prototype.clear = function() {
                    this.set({})
                }, e = eo([Ka("UserPageDataLoggingStore"), Ro()], e)
            }(),
            _c = function() {
                function e(e) {
                    var t = this;
                    this._userPageDataLoggingStore = e, this.loggingData = new Do, this._maxTimeOnPage = 36e5, this._listeners = [], this._callbacks = new Set, this._requestSent = !1, setTimeout((function() {
                        t._callbacks.forEach((function(e) {
                            return t._executeCallback(e)
                        })), t.cleanup()
                    }), this._maxTimeOnPage)
                }
                return e.prototype._executeCallback = function(e) {
                    e(), this._callbacks.delete(e), 0 === this._callbacks.size && this.logUserPageData()
                }, e.prototype.setUserPageData = function(e) {
                    e && this._userPageDataLoggingStore.set(e)
                }, e.prototype.logUserPageData = function() {
                    this._requestSent || (Bo.fetchEvent("UserPageDataLoggingComponent", "logUserData", this._userPageDataLoggingStore.get()), this._requestSent = !0, this.cleanup())
                }, e.prototype.addCallbackToQueue = function(e, t) {
                    var i = this;
                    this._callbacks.add(t), e.forEach((function(e) {
                        i._listeners.push(e.on((function() {
                            return i._executeCallback(t)
                        })))
                    }))
                }, e.prototype.cleanup = function() {
                    this._listeners.forEach((function(e) {
                        e()
                    })), this._listeners = [], this._callbacks.clear()
                }, e = eo([Ka("UserPageDataLoggingEvents"), Ro(), io("design:paramtypes", [yc])], e)
            }(),
            vc = function() {
                (function(e, t) {
                    var i, n = e || navigator.userAgent,
                        r = t || navigator.vendor;
                    if (!Uo(n, r)) return !1;
                    var o = (null === (i = / Version\/(1\d)\.(\d+)/.exec(n)) || void 0 === i ? void 0 : i.slice(-2)) || [],
                        a = "14" === o[0],
                        s = "15" === o[0] && +o[1] < 4;
                    return a || s
                })() && window.addEventListener("beforeunload", (function() {
                    window.addEventListener("visibilitychange", (function(e) {
                        e.stopImmediatePropagation()
                    }), !0)
                }), !0)
            },
            bc = function() {
                function e() {
                    this.beforeUnload = new Do, this.pageHide = new Do, this.resize = new Do, this.scroll = new Do, this.visibilityChange = new Do, this.addEventListener("beforeunload", this.beforeUnload), this.addEventListener("pagehide", this.pageHide), this.addEventListener("resize", this.resize), this.addEventListener("scroll", this.scroll), this.addEventListener("visibilitychange", this.visibilityChange, document), vc()
                }
                return e.prototype.setupOnceEvent = function(e, t, i) {
                    void 0 === i && (i = window);
                    var n = function() {
                        i.removeEventListener(e, n), t()
                    };
                    i.addEventListener(e, n)
                }, e.prototype.setupOnceEventWithPromise = function(e, t) {
                    return void 0 === t && (t = window), new Promise((function(i) {
                        var n = function(r) {
                            return t.removeEventListener(e, n), i(r)
                        };
                        t.addEventListener(e, n)
                    }))
                }, e.prototype.addEventListener = function(e, t, i) {
                    void 0 === i && (i = window), i.addEventListener(e, (function() {
                        t.emit().catch((function() {
                            return !1
                        }))
                    }), !1)
                }, e = eo([Ka("PageManager"), Ro(), io("design:paramtypes", [])], e)
            }(),
            wc = function() {
                function e(e, t) {
                    var i = this;
                    this._userPageDataLoggingEvent = e, this._pageManager = t, this.started = 0, this.loading = 0, this.totalTimeOnPage = 0, this.bootstrapFinished = 0, this.amazonStarted = 0, this.amazonFinished = 0, this.amazonDuration = 0, this.gamStarted = 0, this.gamFinished = 0, this.gamDuration = 0, this.marmaladeStarted = 0, this.marmaladeFinished = 0, this.marmaladeDuration = 0, this.prebidStarted = 0, this.prebidFinished = 0, this.prebidDuration = 0, this.webVitalsStarted = 0, this.webVitalsFinished = 0, this.webVitalsDuration = 0, this.started = Oa(), "visible" === document.visibilityState && (this.timeOnPage = this.started), this._pageManager.visibilityChange.on((function() {
                        return i.documentVisibilityChanged()
                    })), e.loggingData.on((function() {
                        "visible" === document.visibilityState && (i.totalTimeOnPage += Oa() - i.timeOnPage)
                    }))
                }
                return Object.defineProperty(e.prototype, "timingData", {
                    get: function() {
                        return $r({
                            started: this.started,
                            loading: this.loading,
                            totalTimeOnPage: this.totalTimeOnPage,
                            bootstrapFinished: this.bootstrapFinished,
                            amazonStarted: this.amazonStarted,
                            amazonFinished: this.amazonFinished,
                            amazonDuration: this.amazonDuration,
                            gamStarted: this.gamStarted,
                            gamFinished: this.gamFinished,
                            gamDuration: this.gamDuration,
                            marmaladeStarted: this.marmaladeStarted,
                            marmaladeFinished: this.marmaladeFinished,
                            marmaladeDuration: this.marmaladeDuration,
                            prebidStarted: this.prebidStarted,
                            prebidFinished: this.prebidFinished,
                            prebidDuration: this.prebidDuration,
                            webVitalsStarted: this.webVitalsStarted,
                            webVitalsFinished: this.webVitalsFinished,
                            webVitalsDuration: this.webVitalsDuration
                        }, this.timeOnPage && {
                            timeOnPage: this.timeOnPage
                        })
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.documentVisibilityChanged = function() {
                    "visible" === document.visibilityState ? this.timeOnPage = Oa() : "hidden" === document.visibilityState && (this.totalTimeOnPage += Oa() - this.timeOnPage, this.timeOnPage = void 0)
                }, e = eo([Ro(), io("design:paramtypes", [_c, bc])], e)
            }(),
            Sc = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._choices = [{
                        choice: "ats",
                        weight: 1
                    }, {
                        choice: "conf",
                        weight: 1
                    }, {
                        choice: "hawk",
                        weight: 1
                    }, {
                        choice: "tgtaff",
                        weight: 1
                    }, {
                        choice: "none",
                        weight: 96
                    }], n.key = "3pho", n._result = n.run(), i.set(n.key, n.result), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, t = eo([Ka("TKHOExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, is])], t)
            }(rs),
            Cc = function() {
                function e(e) {
                    this.tracker = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [Sc])], e)
            }(),
            kc = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t._result = [], t._choices = [{
                        choice: ["appnexus"],
                        threshold: .1
                    }, {
                        choice: ["conversant"],
                        threshold: .01
                    }, {
                        choice: ["criteo"],
                        threshold: .01
                    }, {
                        choice: ["districtm"],
                        threshold: .3
                    }, {
                        choice: ["dmdmx"],
                        threshold: .2
                    }, {
                        choice: ["gridvid"],
                        threshold: .01
                    }, {
                        choice: ["gumgum"],
                        threshold: .5
                    }, {
                        choice: ["ix"],
                        threshold: .005
                    }, {
                        choice: ["oneVideo"],
                        threshold: .2
                    }, {
                        choice: ["openx"],
                        threshold: .1
                    }, {
                        choice: ["pubmatic"],
                        threshold: .01
                    }, {
                        choice: ["roundel"],
                        threshold: .1
                    }, {
                        choice: ["rubicon"],
                        threshold: .01
                    }, {
                        choice: ["sharethrough"],
                        threshold: .01
                    }, {
                        choice: ["spotx"],
                        threshold: .01
                    }, {
                        choice: ["telaria"],
                        threshold: .01
                    }, {
                        choice: ["triplelift"],
                        threshold: .01
                    }, {
                        choice: ["ttd"],
                        threshold: .01
                    }, {
                        choice: ["yahoossp"],
                        threshold: .01
                    }], t.key = "vbho", t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return this._choices.filter((function(e) {
                        var t = e.threshold;
                        return new as(t).get()
                    })).map((function(e) {
                        return e.choice[0]
                    }))
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("VBHOExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Pc = function() {
                function e(e) {
                    this.bidders = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [kc])], e)
            }(),
            Ec = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: {
                            name: "chocolate_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "ix_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "medianet_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "openx_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "pubmatic_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "rhythmone_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "rubicon_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "sonobi_ebda",
                            weight: .5
                        }
                    }, {
                        choice: {
                            name: "spotx_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "telaria_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "triplelift_ebda",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "verizon_ebda",
                            weight: 1
                        }
                    }], i.key = "vebho", i._result = i.run(), t.set(i.key, i._result ? i._result.name : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    var e = this._choices.map((function(e) {
                            return e.choice
                        })).map((function(e) {
                            return {
                                choice: e,
                                weight: e.weight
                            }
                        })),
                        t = new ds(e);
                    return t.totalWeight, t.get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Object)], t.prototype, "run", null), t = eo([Ka("VEBHOExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Oc = function() {
                function e(e) {
                    this.bidder = e.result
                }
                return e = eo([Ro(), io("design:paramtypes", [Ec])], e)
            }(),
            xc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: 6e3,
                        weight: 5
                    }, {
                        choice: 4e3,
                        weight: 75
                    }, {
                        choice: 2e3,
                        weight: 15
                    }, {
                        choice: 0,
                        weight: 5
                    }], i.key = "cbt", i._result = i.run(), 6e3 === i._result ? t.set(i.key, "6s") : 4e3 === i._result ? t.set(i.key, "4s") : 2e3 === i._result ? t.set(i.key, "2s") : 0 === i._result && t.set(i.key, "0s"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("CloseButtonTimeoutExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Tc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: {
                            protocols: [1, 2, 3, 4, 5, 6, 7, 8],
                            value: "all",
                            scope: "all"
                        },
                        weight: 55
                    }, {
                        choice: {
                            protocols: [2, 3, 5, 6, 7, 8],
                            value: "nv1",
                            scope: "all"
                        },
                        weight: 15
                    }, {
                        choice: {
                            protocols: [1, 2, 3, 5, 6, 7, 8],
                            value: "allr",
                            scope: "limited"
                        },
                        weight: 15
                    }, {
                        choice: {
                            protocols: [2, 3, 5, 6, 7, 8],
                            value: "nv1r",
                            scope: "limited"
                        },
                        weight: 15
                    }], i.key = "proto", i._result = i.run(), t.set(i.key, i._result.value), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("ProtocolsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ic = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: 5e3,
                        weight: 40
                    }, {
                        choice: 1e4,
                        weight: 40
                    }, {
                        choice: 15e3,
                        weight: 20
                    }], i.key = "vast_to", i._result = i.run(), 5e3 === i._result ? t.set(i.key, "5s") : 1e4 === i._result ? t.set(i.key, "10s") : 15e3 === i._result && t.set(i.key, "15s"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("VastTimeoutExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs);
        ! function(e) {
            e.Desktop = "desktop", e.Mobile = "mobile"
        }(ss || (ss = {})),
        function(e) {
            e.Video_Collapse_Autoplay_SoundOff = "Video_Collapse_Autoplay_SoundOff", e.Video_Individual_Autoplay_SOff = "Video_Individual_Autoplay_SOff", e.Video_Coll_SOff_Smartphone = "Video_Coll_SOff_Smartphone", e.Video_In_Post_ClicktoPlay_SoundOn = "Video_In-Post_ClicktoPlay_SoundOn"
        }(cs || (cs = {})),
        function(e) {
            e.StickySekindo = "stickySekindo", e.StaticSekindo = "staticSekindo", e.None = "none"
        }(ls || (ls = {}));
        var Mc = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    n._adthrive = t, n._result = !1, n.key = "vadv", n._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }];
                    var r = n._adthrive.siteAds.adOptions.advancePlaylist,
                        o = n._adthrive.siteAds.adOptions.advancePlaylistOptions,
                        a = o ? o && o.playlistPlayer && o.playlistPlayer.enabled : r;
                    return Ko(a, !0) && (n._result = n.run(), i.set(n.key, n._result ? "on" : "off")), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.99).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("AdvancePlaylistExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, is])], t)
            }(rs),
            Ac = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    n._adthrive = t, n._result = !1, n.key = "rvadv_ab1", n._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }];
                    var r = n._adthrive.siteAds,
                        o = r.adOptions.advancePlaylistOptions || {},
                        a = r.videoPlayers;
                    return (a && a.players || []).filter((function(e) {
                        return "stickyPlaylist" === e.type
                    })).length && Ko(o.relatedPlayer && o.relatedPlayer.enabled, !0) && (n._result = n.run(), i.set(n.key, n._result ? "on" : "off")), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.9).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("AdvancePlaylistRelatedExperiment"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, is])], t)
            }(rs),
            zc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "reqTo", i._choices = [{
                        choice: 1e4,
                        weight: 20
                    }, {
                        choice: 15e3,
                        weight: 60
                    }, {
                        choice: 2e4,
                        weight: 20
                    }], i._result = i.run(), 1e4 === i._result ? t.set(i.key, "10") : 15e3 === i._result ? t.set(i.key, "15") : 2e4 === i._result && t.set(i.key, "20"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("JwRequestTimeoutExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Rc = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.key = "LogAdDurationExperiment", t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.03).get()
                }, t = eo([Ka("LogAdDurationExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            jc = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.key = "LogAdLifeCycleExperiment", t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("LogAdLifeCycleExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Dc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "pbm", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._map = new Map([
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, [3]],
                        [cs.Video_Collapse_Autoplay_SoundOff, [6]],
                        [cs.Video_Coll_SOff_Smartphone, [6]],
                        [cs.Video_Individual_Autoplay_SOff, [6]]
                    ]), i._result = i.run(), i.playbackmethod = i._result ? i._map : void 0, t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.2).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("PlaybackmethodExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Bc = function() {
                function e() {}
                return e.getScrollTop = function() {
                    return (window.pageYOffset || document.documentElement.scrollTop) - (document.documentElement.clientTop || 0)
                }, e.shufflePlaylist = function(e) {
                    for (var t, i, n = e.length; 0 !== n;) i = Math.floor(Math.random() * e.length), t = e[n -= 1], e[n] = e[i], e[i] = t;
                    return e
                }, e.playerInView = function(e) {
                    var t = e.getBoundingClientRect();
                    return window.innerHeight > t.top + t.height / 2
                }, e.createQueryString = function(e) {
                    return Object.keys(e).map((function(t) {
                        return t + "=" + e[t]
                    })).join("&")
                }, e.createEncodedQueryString = function(e) {
                    return Object.keys(e).map((function(t) {
                        return t + "=" + encodeURIComponent(e[t])
                    })).join("&")
                }, e.setMobileLocation = function(e) {
                    return "top-left" === (e = e || "bottom-right") ? e = "adthrive-collapse-top-left" : "top-right" === e ? e = "adthrive-collapse-top-right" : "bottom-left" === e ? e = "adthrive-collapse-bottom-left" : "bottom-right" === e && (e = "adthrive-collapse-bottom-right"), e
                }, e
            }(),
            Vc = function() {
                function e(e, t, i, n, r, o, a, s, c) {
                    this._adthrive = e, this.players = [], this.instreamAdUnits = new Set([cs.Video_Collapse_Autoplay_SoundOff, cs.Video_Individual_Autoplay_SOff, cs.Video_Coll_SOff_Smartphone, cs.Video_In_Post_ClicktoPlay_SoundOn]), this.closeButtonTimeout = t.result, this.vastTimeout = Ko(i.result, 1e4), this.maxRedirect = 8, this.apiValue = [2], this.videoWasClosed = Ko(na("video_closed", 18e5, !0), !1), this.mobileStickyPlayerOnPage = !1, this.playbackmethod = r.playbackmethod, this.logAdDuration = o.result, this.logAdLifeCycle = a.result, this.jwRequestTimeout = s.result, this.mimeType = navigator.userAgent && -1 === navigator.userAgent.search(/Chrom|firefox/i) ? ["video/mp4", "application/javascript"] : ["video/mp4", "application/javascript", "video/webm"], this.videoProtocols = n.result, this.position = {
                        id: 1,
                        name: "above"
                    }, this.removeVideoTitleWrapper = Ko(e.siteAds.adOptions.removeVideoTitleWrapper, !1);
                    var l = e.siteAds.videoPlayers;
                    this.footerSelector = Ko(l && l.footerSelector, ""), this.players = Ko(l && l.players.map((function(e) {
                        return e.mobileLocation = Bc.setMobileLocation(e.mobileLocation), e
                    })), []), this.contextualSettings = l && l.contextual, this.jwPlaylist = this.getPlayListPlayerVideos(), this.advancePlaylist = this.getAdvancePlaylistConfig(c)
                }
                return e.prototype.setupAdvanceRelatedExperiment = function(e) {
                    var t = Mo.resolve(Ac),
                        i = this.advancePlaylist.relatedPlayer || {},
                        n = e ? i.sticky : i.static;
                    (n ? n.enabled : i.enabled) && t && (i.applyToFirst = n ? n.applyToFirst : i.applyToFirst, i.shouldRun = this.jwPlaylist.then((function(e) {
                        return "object" == typeof e && t.result
                    })).catch((function() {
                        return Promise.reject().catch((function() {
                            return !1
                        }))
                    })))
                }, e.prototype.getPlayListPlayerVideos = function() {
                    var e = this._adthrive.siteAds.videoPlayers,
                        t = (e && e.players || []).filter((function(e) {
                            return "stickyPlaylist" === e.type
                        })),
                        i = t.length && t[0].playlistId;
                    return i ? ta("https://cdn.jwplayer.com/v2/playlists/" + i) : Promise.reject().catch((function() {
                        return !1
                    }))
                }, e.prototype.getAdvancePlaylistConfig = function(e) {
                    var t = (this._adthrive.siteAds.adOptions.advancePlaylistOptions || {}).relatedPlayer || {};
                    return {
                        playlistPlayer: {
                            enabled: e.result
                        },
                        relatedPlayer: {
                            applyToFirst: Ko(t.applyToFirst, !0),
                            enabled: Ko(t.enabled, !0),
                            shouldRun: Promise.reject().catch((function() {
                                return !1
                            })),
                            static: t.static,
                            sticky: t.sticky
                        }
                    }
                }, e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, xc, Ic, Tc, Dc, Rc, jc, zc, Mc])], e)
            }(),
            Lc = function() {
                function e(e, t, i, n) {
                    this._videoAdOptions = e, this.apiValue = [2], this.mobileStickyPlayerOnPage = !1, this.playlistPlayerAdded = !1, this.contextualPlayerAdded = !1, this.sekindoPlayerAdded = !1, this.hasJwPlayer = !1, this.preventStickyOutstream = !1, this.hasStickyOutstream = !1, this.footerSelector = "", this.removeVideoTitleWrapper = !1, this.instreamAdUnits = new Set([cs.Video_Collapse_Autoplay_SoundOff, cs.Video_Individual_Autoplay_SOff, cs.Video_Coll_SOff_Smartphone, cs.Video_In_Post_ClicktoPlay_SoundOn]);
                    var r = this._videoAdOptions;
                    this.videoProtocols = t.result, this.closeButtonTimeout = i.result, this.vastTimeout = n.result, this.position = {
                        id: 1,
                        name: "above"
                    }, this.maxRedirect = 8, this.playbackmethod = r.playbackmethod, this.advancePlaylist = r.advancePlaylist, this.jwPlaylist = r.jwPlaylist, this.setupAdvanceRelatedExperiment = r.setupAdvanceRelatedExperiment, this.contextualSettings = r.contextualSettings, this.mimeType = r.mimeType, this.videoProtocols = r.videoProtocols, this.closeButtonTimeout = r.closeButtonTimeout, this.jwRequestTimeout = r.jwRequestTimeout, this.logAdDuration = r.logAdDuration, this.logAdLifeCycle = r.logAdLifeCycle, this.vastTimeout = r.vastTimeout, this.videoWasClosed = r.videoWasClosed, this.removeVideoTitleWrapper = r.removeVideoTitleWrapper, this.players = r.players, this.footerSelector = r.footerSelector
                }
                return e = eo([Ro(), io("design:paramtypes", [Vc, Tc, xc, Ic])], e)
            }(),
            Fc = function() {
                function e(e, t, i, n, r, o, a, s, c, l, u, d, p, h, f, g, m, y, _, v, b, w, S, C, k, P, E, O, x, T, I, M, A) {
                    this.abGroup = e, this.adOptions = t, this.adTypes = i, this.amazon = n, this.ccpa = r, this.clsOptimizedAds = o, this.comscore = a, this.context = s, this.disableAds = c, this.ebho = l, this.impressionLog = u, this.footer = d, this.gam = p, this.gdpr = h, this.hbho = f, this.identityApi = g, this.idho = m, this.infiniteScroll = y, this.lazyLoad = _, this.liveRampAts = v, this.marmalade = b, this.partners = w, this.prebid = S, this.site = C, this.targetDensity = k, this.timeouts = P, this.timing = E, this.tkho = O, this.vbho = x, this.vebho = T, this.auctionOptions = I, this.video = M, this.dynamicAds = A.get();
                    var z = Mo.resolve(Ms);
                    z.enabled && (this.clsOptions = z)
                }
                return e = eo([Ro(), io("design:paramtypes", [is, hs, fs, xs, Is, Rs, js, As, Ds, Ns, Us, Hs, Ws, Gs, Ks, Xs, Ys, Zs, ic, nc, oc, ac, pc, cc, fc, mc, wc, Cc, Pc, Oc, Ts, Lc, Ls])], e)
            }(),
            Nc = function() {
                function e(e, t, i, n, r, o, a, s, c, l, u) {
                    void 0 === o && (o = !1), void 0 === a && (a = 8), void 0 === c && (c = []), void 0 === l && (l = !0), void 0 === u && (u = !1), this.location = e, this.sequence = t, this.sizes = i, this.element = n, this.sticky = r, this.lazy = o, this.auctionPriority = a, this.stickyOverlapSelector = s, this.special = c, this.enabledForAuction = l, this.infinite = u, this.refreshPaused = !1, this.viewableDuration = 0, this.outOfViewIO = !0, this.outOfViewGPT = !0, this.alwaysInView = !1, this.displayed = !1, this.refreshCount = 0, this.viewability = 0, this.servedPrebidBidResponse = void 0
                }
                return Object.defineProperty(e.prototype, "id", {
                    get: function() {
                        return this.element.id
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "isSticky", {
                    get: function() {
                        return this.sticky
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "hasHighViewability", {
                    get: function() {
                        return this.sticky || "Recipe" === this.location
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "isAboveTheFold", {
                    get: function() {
                        return (e = this.element, t = e.getBoundingClientRect(), {
                            top: t.top + window.pageYOffset,
                            left: t.left + window.pageXOffset,
                            bottom: t.bottom + window.pageYOffset,
                            right: t.right + window.pageXOffset,
                            width: t.right - t.left,
                            height: t.bottom - t.top
                        }).top > 1e3;
                        var e, t
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.hasSize = function(e) {
                    var t = ao(e, 2),
                        i = t[0],
                        n = t[1];
                    return this.sizes.some((function(e) {
                        var t = ao(e, 2),
                            r = t[0],
                            o = t[1];
                        return i === r && n === o
                    }))
                }, Object.defineProperty(e.prototype, "name", {
                    get: function() {
                        return [this.location, this.sequence].filter(La).join("_")
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "placementMapName", {
                    get: function() {
                        return "Content" === this.location && this.sequence && this.sequence > 9 ? this.location + "_9" : this.name
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.pushToQueue = function(e) {
                    var t = window.googletag;
                    t && t.cmd && t.cmd.push(e)
                }, e.prototype.setViewability = function(e) {
                    var t = this;
                    e.adViewability.filter((function(t) {
                        return t.speed === e.speed && window.innerWidth >= t.width[0] && (!t.width[1] || window.innerWidth <= t.width[1])
                    })).forEach((function(e) {
                        Object.keys(e.adUnits).forEach((function(i) {
                            i === t.name && (t.viewability = e.adUnits[i])
                        }))
                    }))
                }, e.prototype.clearTargeting = function(e) {
                    this.googleTagSlot ? this.googleTagSlot.clearTargeting(e) : Bo.error("Slot", "setTargeting", "Attempted to clear targeting before slot was defined", e)
                }, e.prototype.setTargeting = function(e) {
                    var t = this;
                    this.pushToQueue((function() {
                        var i, n;
                        if (t.googleTagSlot) {
                            var r = Array.isArray(e) ? e : [e];
                            try {
                                for (var o = oo(r), a = o.next(); !a.done; a = o.next()) {
                                    var s = a.value;
                                    t.googleTagSlot.setTargeting(s.key, s.value)
                                }
                            } catch (e) {
                                i = {
                                    error: e
                                }
                            } finally {
                                try {
                                    a && !a.done && (n = o.return) && n.call(o)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                        } else Bo.error("Slot", "setTargeting", "Attempted to set targeting before slot was defined", e)
                    }))
                }, e.prototype.setSlotTargetingFlag = function(e, t, i, n) {
                    void 0 === n && (n = !1);
                    t && t.length > 0 && this.pushToQueue((function() {
                        return r = i.getTargeting("flag_slot").filter((function(t) {
                            var i = ao(t.split(":"), 1)[0];
                            return !n || i !== e
                        })), void i.setTargeting("flag_slot", so(r, t.map((function(t) {
                            return e + ":" + t
                        }))));
                        var r
                    }))
                }, e.prototype.getTargeting = function(e) {
                    return this.googleTagSlot ? this.googleTagSlot.getTargeting(e) : (Bo.error("Slot", "getTargeting", "Attempted to get targeting before slot was defined"), [])
                }, e.prototype.getTargetingMap = function() {
                    if (this.googleTagSlot) {
                        var e = this.googleTagSlot;
                        return e.getTargetingKeys().reduce((function(t, i) {
                            return t[i] = e.getTargeting(i), t
                        }), {})
                    }
                    return Bo.error("Slot", "getTargetingMap", "Attempted to get targeting before slot was defined"), {}
                }, e
            }(),
            qc = function() {
                function e() {
                    this.added = new Do, this.bidServed = new Do, this._slots = new Map
                }
                return e.prototype.add = function(e) {
                    var t, i, n = this.castArray(e);
                    try {
                        for (var r = oo(n), o = r.next(); !o.done; o = r.next()) {
                            var a = o.value;
                            this._slots.has(a.id) || (this._slots.set(a.id, a), this.added.emit(a).catch((function(e) {
                                Bo.error("Slots", "add", e)
                            })))
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            o && !o.done && (i = r.return) && i.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return n
                }, e.prototype.remove = function(e) {
                    var t, i, n = this.castArray(e);
                    try {
                        for (var r = oo(n), o = r.next(); !o.done; o = r.next()) {
                            var a = o.value;
                            this._slots.has(a.id) && this._slots.delete(a.id)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            o && !o.done && (i = r.return) && i.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                }, e.prototype.get = function(e) {
                    return e ? this._slots.get(e) : so(this._slots.values())
                }, e.prototype.castArray = function(e) {
                    if ("string" == typeof e) {
                        var t = this.get(e);
                        return void 0 !== t ? [t] : []
                    }
                    return Array.isArray(e) ? e : [e]
                }, e = eo([Ka("Slots"), Ro()], e)
            }(),
            Uc = function() {
                function e(e, t) {
                    this._config = e, this._slots = t, this._started = !1, this.postStartTargetingWhiteList = ["bms", "pvk", "flag", "hi_au", "abgroup"], this.impressionViewable = new Do, this.slotOnload = new Do, this.slotRenderEnded = new Do, this.slotVisibilityChanged = new Do, this.slotRequested = new Do, this.started = new Do
                }
                var t;
                return t = e, e.prototype.init = function() {
                    var e = this;
                    t.pushToQueue((function() {
                        var t = googletag.pubads();
                        t.setSafeFrameConfig({
                            sandbox: !0,
                            allowOverlayExpansion: !0,
                            allowPushExpansion: !0,
                            useUniqueDomain: !0
                        }), t.set("page_url", e._config.context.pageUrl), t.collapseEmptyDivs(), t.enableSingleRequest(), t.disableInitialLoad(), t.setTagForChildDirectedTreatment(0), e._addGamEventListeners()
                    }))
                }, e.prototype.start = function() {
                    var e = this;
                    t.pushToQueue((function() {
                        googletag.enableServices(), e.started.emit().catch((function(e) {
                            Bo.error("GoogleAdManager", "start", "started", e)
                        })), e._started = !0
                    }))
                }, e.pushToQueue = function(e) {
                    googletag.cmd.push(e)
                }, e.prototype.waitForQueue = function() {
                    return new Promise((function(e) {
                        googletag.cmd.push((function() {
                            e(!0)
                        }))
                    }))
                }, e.prototype.setTargeting = function(e) {
                    var i, n, r = this,
                        o = (Array.isArray(e) ? e : [e]).filter((function(e) {
                            return !(!e.value || !e.value.length)
                        }));
                    if (this._started && o.some((function(e) {
                            return -1 === r.postStartTargetingWhiteList.indexOf(e.key)
                        }))) Bo.error("GoogleAdManager", "setTargeting", "Attempted to set targeting after started");
                    else {
                        var a = function(e) {
                            e && t.pushToQueue((function() {
                                googletag.pubads().setTargeting(e.key, e.value)
                            }))
                        };
                        try {
                            for (var s = oo(o), c = s.next(); !c.done; c = s.next()) {
                                a(c.value)
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                c && !c.done && (n = s.return) && n.call(s)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }
                }, e.prototype.setSlotTargeting = function(e, i) {
                    var n, r, o = Array.isArray(e) ? e : [e],
                        a = function(e) {
                            e && t.pushToQueue((function() {
                                i.setTargeting(e.key, Array.isArray(e.value) ? e.value.join(",") : e.value)
                            }))
                        };
                    try {
                        for (var s = oo(o), c = s.next(); !c.done; c = s.next()) {
                            a(c.value)
                        }
                    } catch (e) {
                        n = {
                            error: e
                        }
                    } finally {
                        try {
                            c && !c.done && (r = s.return) && r.call(s)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }, e.prototype.setTargetingFlag = function(e, i, n) {
                    var r = this;
                    void 0 === n && (n = !1);
                    i && i.length > 0 && t.pushToQueue((function() {
                        return t = googletag.pubads().getTargeting("flag").filter((function(t) {
                            var i = ao(t.split(":"), 1)[0];
                            return !n || i !== e
                        })), void r.setTargeting({
                            key: "flag",
                            value: so(t, i.map((function(t) {
                                return e + ":" + t
                            })))
                        });
                        var t
                    }))
                }, e.prototype.getTargeting = function() {
                    return googletag.pubads().getTargetingKeys().map((function(e) {
                        return {
                            key: e,
                            value: googletag.pubads().getTargeting(e)
                        }
                    }))
                }, e.prototype.getTargetingValuesForKey = function(e) {
                    return googletag.pubads().getTargeting(e)
                }, e.prototype.getTargetingMap = function() {
                    var e = googletag.pubads();
                    return e.getTargetingKeys().reduce((function(t, i) {
                        return t[i] = e.getTargeting(i), t
                    }), {})
                }, e.prototype.clearTargetingForKey = function(e) {
                    t.pushToQueue((function() {
                        googletag.pubads().clearTargeting(e)
                    }))
                }, e.prototype.defineSlots = function(e) {
                    var t = this,
                        i = this._config.site.id,
                        n = this._config.gam,
                        r = n.account,
                        o = n.prefix;
                    return e.map((function(e) {
                        var n = "Content" === e.location && e.sequence && e.sequence > 9 ? e.location : e.name,
                            a = "/" + r + "/" + o + "_" + n + "/" + i,
                            s = "Video_StickyOutstream" === e.location ? so(e.sizes) : so(e.sizes, ["fluid"]);
                        return t._setupSlot(e, a, s), e
                    })).filter(La)
                }, e.prototype.displaySlots = function(e) {
                    var i = this;
                    t.pushToQueue((function() {
                        var t, n, r = googletag.pubads(),
                            o = r.isInitialLoadDisabled();
                        googletag && !googletag.pubadsReady && Bo.error("index", "load", new Error("Unexpected googletag.pubadsReady: " + googletag.pubadsReady));
                        try {
                            for (var a = oo(e), s = a.next(); !s.done; s = a.next()) {
                                var c = s.value;
                                googletag.pubads().enableLazyLoad(c.lazy ? i._config.lazyLoad.googleLazyLoadSettings.gam : i._config.lazyLoad.googleLazyLoadSettings.disabled), o ? r.refresh([c.googleTagSlot]) : googletag.display(c.id)
                            }
                        } catch (e) {
                            t = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (n = a.return) && n.call(a)
                            } finally {
                                if (t) throw t.error
                            }
                        }
                    }))
                }, e.prototype.refreshSlots = function(e) {
                    t.pushToQueue((function() {
                        googletag.pubads().refresh(e.map((function(e) {
                            return e.googleTagSlot
                        })))
                    }))
                }, e.prototype.clearSlots = function(e) {
                    t.pushToQueue((function() {
                        var t = e.map((function(e) {
                            return e.googleTagSlot
                        }));
                        googletag.pubads().clear(t)
                    }))
                }, e.prototype.destroySlots = function(e) {
                    t.pushToQueue((function() {
                        var t = e.map((function(e) {
                            return e.googleTagSlot
                        }));
                        googletag.destroySlots(t)
                    }))
                }, e.prototype._addGamEventListeners = function() {
                    this._addEventListener(this.impressionViewable, "impressionViewable"), this._addEventListener(this.slotOnload, "slotOnload"), this._addEventListener(this.slotRenderEnded, "slotRenderEnded"), this._addEventListener(this.slotVisibilityChanged, "slotVisibilityChanged"), this._addEventListener(this.slotRequested, "slotRequested")
                }, e.prototype._addEventListener = function(e, i) {
                    var n = this;
                    t.pushToQueue((function() {
                        googletag.pubads().addEventListener(i, (function(t) {
                            var i = n._slots.get(t.slot.getSlotElementId());
                            i && e.emit({
                                slot: i,
                                event: t
                            }).catch((function(e) {
                                Bo.error("GoogleAdManager", "addEventListener", "emit", e)
                            }))
                        }))
                    }))
                }, e.prototype._setupSlot = function(e, t, i) {
                    var n = googletag.pubads();
                    e.googleTagSlot = "Interstitial" === e.location ? googletag.defineOutOfPageSlot(t, googletag.enums.OutOfPageFormat.INTERSTITIAL) : googletag.defineSlot(t, i, e.element.id), e.googleTagSlot ? (e.googleTagSlot.addService(n).setTargeting("location", e.location).setTargeting("sequence", String(e.sequence)).setTargeting("id", e.id), (1 === e.sequence && e.isAboveTheFold || "Footer" === e.location) && e.googleTagSlot.setTargeting("ATF", "true"), e.isSticky && "Video_StickyOutstream" !== e.location && e.googleTagSlot.setTargeting("sticky", "true"), e.special && e.special.length > 0 && e.googleTagSlot.setTargeting("special", e.special), "Sponsor_Tile" === e.location && e.googleTagSlot.setCollapseEmptyDiv(!0, !0), n.isInitialLoadDisabled() && googletag.display(e.googleTagSlot)) : Bo.error("GoogleAdManager", "defineSlots", "Duplicate " + t)
                }, e = t = eo([Ka("GoogleAdManager"), Ro(), io("design:paramtypes", [Fc, qc])], e)
            }(),
            Hc = function() {
                function e() {}
                return Object.defineProperty(e.prototype, "videoEnabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }(),
            Wc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "amzn_hold_disp", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.5).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("AmazonLibraryExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Gc = function() {
                function e() {}
                return e.prototype.addAdUnits = function(e) {
                    this.addToQueue((function() {
                        pbjs.addAdUnits(e)
                    }))
                }, e.prototype.addToQueue = function(e) {
                    pbjs.que.push(e)
                }, e.prototype.enableAnalytics = function(e) {
                    this.addToQueue((function() {
                        pbjs.enableAnalytics(e)
                    }))
                }, e.prototype.isPrebidLoaded = function() {
                    return window.pbjs && window.pbjs.libLoaded
                }, e.prototype.markWinningBidAsUsed = function(e) {
                    this.addToQueue((function() {
                        pbjs.markWinningBidAsUsed(e)
                    }))
                }, e.prototype.offEvent = function(e, t) {
                    this.addToQueue((function() {
                        pbjs.offEvent(e, t)
                    }))
                }, e.prototype.onEvent = function(e, t) {
                    this.addToQueue((function() {
                        pbjs.onEvent(e, t)
                    }))
                }, e.prototype.refreshUserIds = function(e, t) {
                    this.addToQueue((function() {
                        pbjs.refreshUserIds(e, t)
                    }))
                }, e.prototype.requestBids = function(e) {
                    this.addToQueue((function() {
                        pbjs.requestBids(e)
                    }))
                }, e.prototype.setAliasBidder = function(e, t) {
                    this.addToQueue((function() {
                        pbjs.aliasBidder(e, t)
                    }))
                }, e.prototype.setBidderConfig = function(e) {
                    this.addToQueue((function() {
                        pbjs.setBidderConfig(e)
                    }))
                }, e.prototype.setBidderSettings = function(e) {
                    this.addToQueue((function() {
                        pbjs.bidderSettings = e
                    }))
                }, e.prototype.setBidsReceivedFilter = function(e) {
                    this.addToQueue((function() {
                        pbjs.setBidsReceivedFilter(e)
                    }))
                }, e.prototype.setConfig = function(e) {
                    this.addToQueue((function() {
                        pbjs.setConfig(e)
                    }))
                }, e.prototype.setTargetingForGPTAsync = function(e) {
                    this.addToQueue((function() {
                        pbjs.setTargetingForGPTAsync(e)
                    }))
                }, e.prototype.triggerUserSyncs = function() {
                    this.addToQueue((function() {
                        pbjs.triggerUserSyncs()
                    }))
                }, e.prototype.waitForQueue = function() {
                    var e = this;
                    return new Promise((function(t, i) {
                        e.isPrebidLoaded() || i(!1), pbjs.que.push((function() {
                            t(!0)
                        }))
                    }))
                }, e.prototype.getBidResponsesForAdUnitCode = function(e) {
                    return pbjs.getBidResponsesForAdUnitCode(e)
                }, e.prototype.getConfig = function(e, t) {
                    return t ? pbjs.getConfig(e, t) : pbjs.getConfig(e)
                }, e.prototype.getHighestCpmBids = function(e) {
                    return pbjs.getHighestCpmBids(e)
                }, e
            }(),
            Qc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.abgroup = t, i._choices = [{
                        choice: 0,
                        weight: 60
                    }, {
                        choice: .8,
                        weight: 10
                    }, {
                        choice: .9,
                        weight: 10
                    }, {
                        choice: .95,
                        weight: 10
                    }, {
                        choice: .99,
                        weight: 10
                    }], i.key = "lzflrcontent", i._result = i.run(), 0 === i._result ? i.abgroup.set(i.key, "off") : .8 === i._result ? i.abgroup.set(i.key, "80") : .9 === i._result ? i.abgroup.set(i.key, "90") : .95 === i._result ? i.abgroup.set(i.key, "95") : .99 === i._result && i.abgroup.set(i.key, "99"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Number)], t.prototype, "run", null), t = eo([Ka("LazyLoadFloorsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Kc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.abgroup = t, i._choices = [{
                        choice: "on",
                        weight: 4
                    }, {
                        choice: "on_min",
                        weight: 4
                    }, {
                        choice: "off",
                        weight: 90
                    }, {
                        choice: "none",
                        weight: 2
                    }], i.key = "rbflr", i._result = i.run(), i.abgroup.set(i.key, i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", String)], t.prototype, "run", null), t = eo([Ka("RubiconFloorsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Xc = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.abgroup = t, i._choices = [{
                        choice: 0,
                        weight: 60
                    }, {
                        choice: .8,
                        weight: 10
                    }, {
                        choice: .9,
                        weight: 10
                    }, {
                        choice: .95,
                        weight: 10
                    }, {
                        choice: .99,
                        weight: 10
                    }], i.key = "sessflrs1", i._result = i.run(), 0 === i._result ? i.abgroup.set(i.key, "off") : i.abgroup.set(i.key, "" + 100 * i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Number)], t.prototype, "run", null), t = eo([Ka("SessionFloorsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Jc = function() {
                function e(e, t) {
                    this._rubiconFloorsExperiment = e, this.abGroup = t, this._result = {
                        rubicon: !1,
                        legacy: !1,
                        percentile: {
                            lazy: 0,
                            session: 0
                        }
                    }, this.run()
                }
                return Object.defineProperty(e.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.run = function() {
                    "on" !== this._rubiconFloorsExperiment.result && "on_min" !== this._rubiconFloorsExperiment.result || (this._result.rubicon = !0), "off" !== this._rubiconFloorsExperiment.result && "on_min" !== this._rubiconFloorsExperiment.result || (this._result.legacy = !0, this._result.percentile.lazy = new Qc(this.abGroup).result, this._result.percentile.session = new Xc(this.abGroup).result)
                }, e = eo([Ka("FloorsExperimentHandler"), Ro(), io("design:paramtypes", [Kc, is])], e)
            }(),
            Yc = function() {
                function e(e, t, i) {
                    this._floorsExperiment = e, this._config = t, this._prebidMethods = i, this._amazonFloors = {}
                }
                return e.prototype.setValues = function(e, t, i) {
                    e.values[window.location.host + "|" + t] = i > 0 ? i : 0
                }, e.prototype.getDefaultFloorConfig = function() {
                    return {
                        currency: "USD",
                        schema: {
                            fields: ["domain", "adUnitCode"],
                            delimiter: "|"
                        },
                        values: {}
                    }
                }, e.prototype.setPrebidFloors = function(e) {
                    e.modelGroups.length > 0 && this._setPrebidFloors(e)
                }, e.prototype.setLegacyFloorsConfig = function(e) {
                    var t = this;
                    if (Object.keys(e.values).length) {
                        this._setAmazonFloors(e);
                        var i = this.rubiconData || {
                            floorsSchemaVersion: 2,
                            modelGroups: [$r($r({}, e), {
                                modelWeight: 100,
                                modelVersion: "legacy"
                            })]
                        };
                        !0 === this._floorsExperiment.result.rubicon && !0 === this._floorsExperiment.result.legacy && this.rubiconData && (i.modelGroups = this.rubiconData.modelGroups.map((function(i) {
                            return i.values = t.getMaxFloors(e.values, i.values), i
                        }))), this.setPrebidFloors(i)
                    }
                }, e.prototype._setPrebidFloors = function(e) {
                    this._prebidMethods.setConfig({
                        floors: {
                            enforcement: {
                                enforceJS: !1
                            },
                            data: e
                        }
                    })
                }, e.prototype._setAmazonFloors = function(e) {
                    var t = this,
                        i = e.values,
                        n = e.currency;
                    Object.keys(i).forEach((function(e) {
                        var r = e.split("|").length && e.split("|")[1] || e;
                        t._amazonFloors[r] = {
                            value: i[e],
                            currency: n || "USD"
                        }
                    }))
                }, e.prototype.getAmazonFloorsBySlotId = function(e) {
                    return this._amazonFloors[e] || this._amazonFloors[e.toLowerCase()] || {}
                }, e.prototype.getMaxFloors = function(e, t) {
                    void 0 === e && (e = {}), void 0 === t && (t = {});
                    var i = this.setAdUnitCodeKeys(t),
                        n = this.setAdUnitCodeKeys(e),
                        r = $r($r({}, n), i);
                    return Object.keys(r).reduce((function(e, t) {
                        var r = function(e) {
                            return isNaN(e) ? 0 : e
                        };
                        return e[window.location.host + "|" + t] = Math.max(r(n[t]), r(i[t])), e
                    }), {})
                }, e.prototype.setAdUnitCodeKeys = function(e) {
                    var t = this;
                    return Object.keys(e).reduce((function(i, n) {
                        return n.split("|").forEach((function(r) {
                            t.verifyAdUnitCode(r) && (i[r.toLowerCase()] = e[n])
                        })), i
                    }), {})
                }, e.prototype.verifyAdUnitCode = function(e) {
                    var t = !!/AdThrive_/i.exec(e),
                        i = void 0 !== so(this._config.video.instreamAdUnits).filter((function(t) {
                            return t.toLowerCase() === e.toLowerCase()
                        }))[0];
                    return t || i
                }, e = eo([Ka("Floors"), Ro(), io("design:paramtypes", [Jc, Fc, Gc])], e)
            }(),
            Zc = function() {
                function e() {}
                return e.prototype.getSupplyChainConfig = function(e) {
                    return {
                        ver: "1.0",
                        complete: 1,
                        nodes: [{
                            asi: "cafemedia.com",
                            sid: e,
                            hp: 1
                        }]
                    }
                }, e
            }(),
            $c = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._amazonHoldDisplayExperiment = i, r._floors = n, r.holdDisplayExperiment = !1, r.videoSlotNames = new Map, r.videoSlotBids = new Map, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    window.apstag.init({
                        pubID: this._config.amazon.pubId,
                        adServer: "googletag",
                        videoAdServer: "DFP",
                        schain: (new Zc).getSupplyChainConfig(this._config.site.id)
                    }), this.holdDisplayExperiment = this._amazonHoldDisplayExperiment.result, this.videoSlotNames = this.initVideoSlotMap()
                }, t.prototype.requestBids = function(e, t) {
                    var i = this;
                    void 0 === t && (t = this._config.timeouts.initialBidsRequest - 200);
                    var n = this._config.site.id,
                        r = this._config.gam,
                        o = r.networkCode,
                        a = r.prefix;
                    return new Promise((function(r) {
                        Uc.pushToQueue((function() {
                            var s = e.filter((function(e) {
                                return void 0 !== e.googleTagSlot && !i._config.amazon.adUnitExclusions.has(e.location)
                            })).map((function(e) {
                                var t = i._floors.getAmazonFloorsBySlotId(e.element.id);
                                return $r({
                                    slotID: e.element.id,
                                    slotName: "/" + o + "/" + a + "_" + e.name + "/" + n,
                                    sizes: e.sizes
                                }, t && t.currency && {
                                    floor: {
                                        value: Math.ceil(100 * t.value),
                                        currency: t.currency
                                    }
                                })
                            }));
                            s.length ? (window.apstag.fetchBids({
                                slots: s,
                                timeout: t
                            }, (function() {
                                Uc.pushToQueue((function() {
                                    window.apstag.setDisplayBids(), r()
                                }))
                            })), i.holdDisplayExperiment || r()) : r()
                        }))
                    }))
                }, t.prototype.refreshBids = function(e) {
                    return this.requestBids(e, this._config.timeouts.refreshBidsRequest - 200)
                }, t.prototype.requestVideoBids = function(e, t) {
                    var i = this;
                    return void 0 === t && (t = this._config.timeouts.initialBidsRequest - 200), Promise.all(e.map((function(e) {
                        var n = i._floors.getAmazonFloorsBySlotId(e.name),
                            r = $r({
                                slotID: i.videoSlotNames.get(e.name),
                                mediaType: "video"
                            }, n && n.currency && {
                                floor: {
                                    value: Math.ceil(100 * n.value),
                                    currency: n.currency
                                }
                            });
                        return new Promise((function(n) {
                            r ? window.apstag.fetchBids({
                                slots: [r],
                                timeout: t
                            }, (function(t) {
                                t.length > 0 && i.videoSlotBids.set(e._playlistId, t[0]), n()
                            })) : n()
                        }))
                    }))).then((function() {
                        return Promise.resolve()
                    })).catch()
                }, t.prototype.getVideoBid = function(e) {
                    var t = this.videoSlotBids.get(e);
                    if (t) return this.videoSlotBids.delete(e), t
                }, t.prototype.initVideoSlotMap = function() {
                    var e = {
                        desktop: new Map([
                            [cs.Video_Collapse_Autoplay_SoundOff, "Sticky_Playlist_Desktop"],
                            [cs.Video_Individual_Autoplay_SOff, "Sticky_Related_Desktop"],
                            [cs.Video_In_Post_ClicktoPlay_SoundOn, "CTP_Desktop"]
                        ]),
                        mobile: new Map([
                            [cs.Video_Coll_SOff_Smartphone, "Sticky_Playlist_Mobile"],
                            [cs.Video_Individual_Autoplay_SOff, "Sticky_Related_Mobile"],
                            [cs.Video_In_Post_ClicktoPlay_SoundOn, "CTP_Mobile"]
                        ])
                    };
                    return wa() ? e.desktop : e.mobile
                }, Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.amazonUAM
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return void 0 !== window.apstag && this._config.amazon.enabled
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("AmazonAuctionManager"), zo(), io("design:paramtypes", [Fc, Wc, Yc])], t)
            }(Hc),
            el = function() {},
            tl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "pba", i._choices = [{
                        choice: {
                            name: "roxot",
                            weight: 1
                        }
                    }, {
                        choice: {
                            name: "rubicon",
                            weight: 0
                        }
                    }, {
                        choice: {
                            name: "none",
                            weight: 99
                        }
                    }], i._result = i.run(), t.set("pba", i._result ? i._result.name : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    var e = this._choices.map((function(e) {
                        return e.choice
                    })).map((function(e) {
                        return {
                            choice: e,
                            weight: e.weight
                        }
                    }));
                    return new ds(e).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Object)], t.prototype, "run", null), t = eo([Ka("AnalyticsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            il = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._prebidMethods = i, r._analyticsExperiment = n, r.name = "roxot", r
                }
                return Jr(t, e), t.prototype.init = function() {
                    if (window.localStorage) try {
                        this._prebidMethods.enableAnalytics({
                            provider: "roxot",
                            options: {
                                publisherIds: ["ffcc0e40-07d0-4238-92e4-f711915afb5a"],
                                host: this._config.context.bucket + ".com"
                            }
                        })
                    } catch (e) {
                        Bo.error("RoxotAnalytics", "init - ignored", e)
                    } else Bo.error("RoxotAnalytics", "init", new Error("Disabled roxot because localStorage is undefined"))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        var e;
                        return "roxot" === (null === (e = this._analyticsExperiment.result) || void 0 === e ? void 0 : e.name)
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("RoxotAnalytics"), zo(), io("design:paramtypes", [Fc, Gc, tl])], t)
            }(el),
            nl = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._rubiconFloorsExperiment = t, r._analyticsExperiment = i, r._prebidMethods = n, r.name = "rubicon", r
                }
                return Jr(t, e), t.prototype.init = function() {
                    try {
                        this._prebidMethods.enableAnalytics({
                            provider: this.name,
                            options: {
                                accountId: 9262,
                                endpoint: "https://prebid-a.rubiconproject.com/event"
                            }
                        })
                    } catch (e) {
                        Bo.error("RubiconAnalytics", "init - ignored", e)
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        var e;
                        return "on" === this._rubiconFloorsExperiment.result || "rubicon" === (null === (e = this._analyticsExperiment.result) || void 0 === e ? void 0 : e.name)
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("RubiconAnalytics"), zo(), io("design:paramtypes", [Kc, tl, Gc])], t)
            }(el),
            rl = function(e) {
                function t() {
                    return null !== e && e.apply(this, arguments) || this
                }
                return Jr(t, e), t.prototype.getSlotBidRequests = function(e) {}, t.prototype.getVideoSlotBidRequests = function(e) {}, t.prototype.getBidRequests = function(e) {
                    var t = this;
                    return e.reduce((function(e, i) {
                        return e.set(i.id, t.getSlotBidRequests(i)), e
                    }), new Map)
                }, t.prototype.getVideoBidRequests = function(e) {
                    var t = this;
                    return e.reduce((function(e, i) {
                        return e.set(i.name, t.getVideoSlotBidRequests(i)), e
                    }), new Map)
                }, t
            }(function() {
                function e() {}
                return e.prototype.updateBidParams = function(e, t, i) {
                    return i
                }, Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "videoEnabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "name", {
                    get: function() {
                        return this.bidderConfig.bidder_name
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }()),
            ol = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("33across"), i._map = new Map([
                        ["Below_Post_1", "dqjinO_Lqr6i5uaKkv7mNO"],
                        ["Content_1", "dzqsVw_Lqr6iHHaKlId8sQ"],
                        ["Content_2", "dGYL36_Lqr6iHHaKlId8sQ"],
                        ["Content_3", "dPmBLW_Lqr6ikXaKkGJozW"],
                        ["Content_4", "dYmdO4_Lqr6ikXaKkGJozW"],
                        ["Content_5", "d73_q4_Lqr6ikfaKlId8sQ"],
                        ["Content_6", "aeCNc8_Lur6ikfaKlId8sQ"],
                        ["Content_7", "amEJ90_Lur6ikXaKkGJozW"],
                        ["Content_8", "avcDUU_Lur6ikXaKkGJozW"],
                        ["Content_9", "aE0F5q_Lur6iHHaKlId8sQ"],
                        ["Footer_1", "aMbGkS_Lur6ikXaKkGJozW"],
                        ["Header_1", "aZCnyg_Lur6ikfaKlId8sQ"],
                        ["Header_2", "a7S6ye_Lur6ikXaKkGJozW"],
                        ["Recipe_1", "bfXhLW_Lur6ioMaKkGJozW"],
                        ["Recipe_2", "bmQVLo_Lur6ikfaKlId8sQ"],
                        ["Recipe_3", "d7kcPCUhur6yo-aKkGJozW"],
                        ["Recipe_4", "agAjkaUhyr6yo9aKlId8sQ"],
                        ["Sidebar_1", "buEy3O_Lur6ikfaKlId8sQ"],
                        ["Sidebar_2", "bCOsqy_Lur6ikfaKlId8sQ"],
                        ["Sidebar_3", "bOGvrc_Lur6ikXaKkGJozW"],
                        ["Sidebar_4", "bW-wb0_Lur6ikfaKlId8sQ"],
                        ["Sidebar_5", "b8nVxi_Lur6ikXaKkGJozW"],
                        ["Sidebar_9", "cggK7W_Lur6ikfaKlId8sQ"]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.thirtyThreeAcross
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: {
                            siteId: this._map.get(e.placementMapName),
                            productId: "siab"
                        }
                    }]
                }, t = eo([Ka("ThirtyThreeAcrossBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            al = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "rmos1", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.01).get()
                }, t = eo([Ka("OneVideoStreamExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            sl = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._result = !1, n.key = "rmosnv1", n._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i.video.hasJwPlayer || (n._result = n.run(), t.set(n.key, n._result ? "on" : "off")), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.01).get()
                }, t = eo([Ka("OneVideoStreamNoVideoExperiment"), Ro(), io("design:paramtypes", [is, Fc])], t)
            }(rs),
            cl = function() {
                function e(e) {
                    this._config = e, this._sharedConfig = {
                        context: "outstream",
                        mimes: ["video/mp4"],
                        api: [2],
                        skip: 0,
                        pos: 1,
                        protocols: [2, 3, 5, 6, 7, 8],
                        linearity: 1,
                        minduration: 0,
                        maxduration: 30,
                        playbackmethod: [2]
                    };
                    var t = this._config.site.breakpoints,
                        i = t.desktop,
                        n = t.tablet;
                    this._stickyOutstreamSize = "phone" === Jo(n, i) ? [178, 100] : [227, 150]
                }
                return e.prototype._callANRenderer = function(e, t) {
                    var i = this._getOutstreamRendererConfig(t);
                    e.renderer.push((function() {
                        window.ANOutstreamVideo.renderAd({
                            targetId: e.adUnitCode,
                            adResponse: i,
                            rendererOptions: {
                                audioOnMouseover: !1,
                                playerSkin: {
                                    topBarColor: "rgba(0,0,0,0.0)",
                                    topBarTextColor: "rgba(0,0,0,0.0)"
                                },
                                playVideoVisibleThreshold: 1,
                                disableCollapse: {
                                    enabled: !1,
                                    replay: !1
                                }
                            }
                        })
                    }))
                }, e.prototype._renderer = function(e) {
                    var t, i = this,
                        n = e.ad || e.vastXml;
                    n ? this._callANRenderer(e, n) : e.vastUrl && (t = e.vastUrl, (n = new Promise((function(e, i) {
                        fetch(t).then((function(t) {
                            t.text().then((function(t) {
                                "string" == typeof t ? e(t) : i("Vast XML not in proper format")
                            })).catch((function(e) {
                                i(e)
                            }))
                        })).catch((function(e) {
                            return i(e)
                        }))
                    }))).then((function(t) {
                        return i._callANRenderer(e, t), !0
                    })).catch((function(e) {
                        return Bo.error("StickyOutstream", "fetch", {
                            message: e
                        }), !1
                    })))
                }, Object.defineProperty(e.prototype, "standardOutstreamConfig", {
                    get: function() {
                        return $r({
                            playerSize: [640, 480]
                        }, this._sharedConfig)
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "stickyOutstreamConfig", {
                    get: function() {
                        var e = this;
                        return $r($r({}, this._sharedConfig), {
                            playerSize: this._stickyOutstreamSize,
                            renderer: {
                                url: "https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",
                                render: function(t) {
                                    e._renderer(t)
                                }
                            }
                        })
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype._getOutstreamRendererConfig = function(e) {
                    return {
                        ad: {
                            video: {
                                content: e,
                                player_width: this._stickyOutstreamSize[0],
                                player_height: this._stickyOutstreamSize[1]
                            }
                        }
                    }
                }, e = eo([zo(), io("design:paramtypes", [Fc])], e)
            }(),
            ll = function() {
                function e(e, t, i, n) {
                    this._config = e, this._gam = t, this._outstream = i, this._oneVideoStreamExperiment = n, this._standardOutstreamSlots = ["Content_1", "Below_Post_1"], this.oneStreamExpResult = !1
                }
                return e.prototype.runOneStreamExperiment = function() {
                    var e = this,
                        t = Mo.resolve(sl);
                    this._gam.setTargeting({
                        key: "abgroup",
                        value: this._config.abGroup.groups.join(",")
                    }), this.oneStreamExpResult = t.result, this.oneStreamExpResult && ["Content_3", "Content_5", "Recipe_1"].forEach((function(t) {
                        e._standardOutstreamSlots.push(t)
                    }))
                }, e.prototype.isOutstreamAllowed = function() {
                    return !this._oneVideoStreamExperiment.result || !this._config.video.hasJwPlayer
                }, e.prototype.outstreamEnabled = function(e) {
                    var t = e.viewability,
                        i = e.refreshCount,
                        n = "Video_StickyOutstream" === e.location,
                        r = i >= 1 || t >= .5 || n,
                        o = (this._config.adTypes.outstreamEnabled || n) && this.outstreamSlots.has(e.placementMapName) && this.isOutstreamAllowed();
                    return {
                        outstreamCapable: o,
                        currentlyActive: o && r
                    }
                }, e.prototype.getMediaType = function(e) {
                    var t = {},
                        i = e.slot,
                        n = e.video;
                    if (n && this._config.video.instreamAdUnits.has(n.name)) {
                        var r = this.getInstreamConfig(n);
                        t.video = r
                    }
                    if (i) {
                        var o = ka(i, this._config.marmalade.hvThreshold),
                            a = $r({
                                sizes: i.sizes
                            }, o && {
                                pos: 1
                            });
                        "Video_StickyOutstream" !== i.location && (t.banner = a), this.outstreamEnabled(i).currentlyActive && (t.video = "Video_StickyOutstream" !== i.location ? this._outstream.standardOutstreamConfig : this._outstream.stickyOutstreamConfig)
                    }
                    return t
                }, Object.defineProperty(e.prototype, "outstreamSlots", {
                    get: function() {
                        return new Set(this.getOutstreamEnabledUnits())
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.getOutstreamEnabledUnits = function() {
                    return this._config.video.hasStickyOutstream ? ["Video_StickyOutstream_1"] : this._standardOutstreamSlots
                }, e.prototype.getInstreamConfig = function(e) {
                    var t;
                    return $r($r({
                        context: "instream",
                        playerSize: e.size,
                        mimes: this._config.video.mimeType,
                        protocols: this._config.video.videoProtocols.protocols,
                        maxduration: 30
                    }, (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) && {
                        playbackmethod: this._config.video.playbackmethod.get(e.name)
                    }), {
                        linearity: 1,
                        api: this._config.video.apiValue,
                        w: e.size[0],
                        h: e.size[1],
                        pos: this._config.video.position.id,
                        minduration: 1,
                        startdelay: 0,
                        placement: 1,
                        skip: 0
                    })
                }, e = eo([Ro(), io("design:paramtypes", [Fc, Uc, cl, al])], e)
            }(),
            ul = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._mediaType = i, n.bidderConfig = n._config.partners.getBidderConfig("appnexus"), n._keywords = {
                        keywords: $r($r($r({}, n._config.site.filteredSensitiveCategories.length && {
                            sens: n._config.site.filteredSensitiveCategories
                        }), {
                            bucket: [n._config.context.bucket],
                            Chrome: "" + qo(),
                            Mobile: "" + navigator.userAgent && navigator.userAgent.search(/Mobi/i) > -1
                        }), n._config.site.verticals.length && {
                            verticals: n._config.site.verticals
                        })
                    }, n.outstreamType = Pa() ? "outstreamMobile" : "outstreamDesktop", n._map = new Map([
                        ["Below_Post_1", [{
                            placementId: 13036386
                        }]],
                        ["Content_1", [{
                            placementId: 13036388
                        }, {
                            placementId: 16808429,
                            adType: n.outstreamType,
                            playback_method: ["auto_play_sound_off"]
                        }]],
                        ["Content_2", [{
                            placementId: 13036389
                        }]],
                        ["Content_3", [{
                            placementId: 13036391
                        }]],
                        ["Content_4", [{
                            placementId: 13036393
                        }]],
                        ["Content_5", [{
                            placementId: 13036394
                        }]],
                        ["Content_6", [{
                            placementId: 13036396
                        }]],
                        ["Content_7", [{
                            placementId: 13036398
                        }]],
                        ["Content_8", [{
                            placementId: 13036399
                        }]],
                        ["Content_9", [{
                            placementId: 13036400
                        }]],
                        ["Footer_1", [{
                            placementId: 13036401
                        }]],
                        ["Header_1", [{
                            placementId: 13036404
                        }]],
                        ["Header_2", [{
                            placementId: 13036405
                        }]],
                        ["Interstitial_1", [{
                            placementId: 21240886
                        }]],
                        ["Recipe_1", [{
                            placementId: 13036406
                        }]],
                        ["Recipe_2", [{
                            placementId: 13036407
                        }]],
                        ["Recipe_3", [{
                            placementId: 15014787
                        }]],
                        ["Recipe_4", [{
                            placementId: 15998791
                        }]],
                        ["Sidebar_1", [{
                            placementId: 13036408
                        }]],
                        ["Sidebar_2", [{
                            placementId: 13036409
                        }]],
                        ["Sidebar_3", [{
                            placementId: 13036410
                        }]],
                        ["Sidebar_4", [{
                            placementId: 13036411
                        }]],
                        ["Sidebar_5", [{
                            placementId: 13036412
                        }]],
                        ["Sidebar_9", [{
                            placementId: 13036416
                        }]],
                        ["Video_StickyOutstream_1", [{
                            placementId: 22366045
                        }]],
                        [cs.Video_Collapse_Autoplay_SoundOff, [{
                            placementId: 15504193,
                            playback_method: ["auto_play_sound_off"]
                        }]],
                        [cs.Video_Coll_SOff_Smartphone, [{
                            placementId: 15504209,
                            playback_method: ["auto_play_sound_off"]
                        }]],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                            placementId: 15504166,
                            playback_method: ["click_to_play"]
                        }]],
                        [cs.Video_Individual_Autoplay_SOff, [{
                            placementId: 17947919,
                            playback_method: ["auto_play_sound_off"]
                        }]]
                    ]), n._playbackmethodMap = new Map([
                        [3, "click_to_play"],
                        [6, "auto_play_sound_off"]
                    ]), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.appNexus
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.appNexus
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(e) {
                        var i = e.adType;
                        return !i || t._config.adTypes.has(i)
                    })).map((function(i) {
                        var n = i.adType,
                            r = i.placementId,
                            o = i.playback_method,
                            a = ka(e, t._config.marmalade.hvThreshold),
                            s = n === t.outstreamType ? {
                                video: {
                                    playback_method: o
                                }
                            } : "",
                            c = n === t.outstreamType && !t._mediaType.outstreamEnabled(e).currentlyActive;
                        return $r($r({
                            bidder: t.name
                        }, c ? {
                            labelAny: ["refresh"]
                        } : {}), {
                            params: $r($r($r($r({}, t._keywords), {
                                allowSmallerSizes: t._config.adOptions.allowSmallerAdSizes,
                                placementId: r
                            }), s), a && {
                                position: "above"
                            })
                        })
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t;
                    if (this._map.has(e.name)) return [{
                        bidder: this.name,
                        params: $r($r({}, this._keywords), {
                            placementId: this._map.get(e.name)[0].placementId,
                            position: this._config.video.position.name,
                            video: $r($r({
                                mimes: this._config.video.mimeType
                            }, (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) && {
                                playback_method: this._playbackmethodMap.get(this._config.video.playbackmethod.get(e.name)[0])
                            }), {
                                frameworks: this._config.video.apiValue
                            })
                        })
                    }]
                }, t.prototype.updateBidParams = function(e, t, i) {
                    return 1 === e.refreshCount && (i.params.position = "above"), i
                }, t = eo([Ka("AppNexusBidder"), zo(), io("design:paramtypes", [Fc, ll])], t)
            }(rl),
            dl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("brightroll"), i._params = {
                        publisher: "adthrive"
                    }, i._map = new Set(["Below_Post_1", "Content_1", "Content_2", "Content_3", "Content_4", "Content_5", "Content_6", "Content_7", "Content_8", "Content_9", "Footer_1", "Header_1", "Header_2", "Recipe_1", "Recipe_2", "Recipe_3", "Recipe_4", "Sidebar_1", "Sidebar_2", "Sidebar_3", "Sidebar_4", "Sidebar_5", "Sidebar_9"]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.brightroll
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: $r({}, this._params)
                    }]
                }, t = eo([Ka("BrightRollBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            pl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("concert"), i._hvThreshold = 0, i._map = new Map([
                        ["Content_1", [300, 250]]
                    ]), i._desktopSizes = [
                        [620, 366]
                    ], i._mobileSizes = [
                        [325, 508],
                        [325, 204]
                    ], "desktop" === i._config.context.device && (i._map.set("Content_2", [300, 250]), i._map.set("Content_3", [300, 250])), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.concert
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getPartnerIdFromDomain = function() {
                    try {
                        return la(window.location.hostname).split(".")[0].toLowerCase().replace("-", "")
                    } catch (e) {
                        return Bo.error("ConcertBidder", "getPartnerIdFromDomain", e), ""
                    }
                }, t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName) && e.hasSize(this._map.get(e.placementMapName))) {
                        var t = this.getPartnerIdFromDomain();
                        if (t.length > 0) return [$r($r({
                            bidder: this.name
                        }, e.viewability < this._hvThreshold ? {
                            labelAny: ["refresh"]
                        } : {}), {
                            params: {
                                bidder: this.name,
                                slot: e.id,
                                partnerId: t,
                                sizes: Pa() ? this._mobileSizes : this._desktopSizes
                            }
                        })]
                    }
                }, t = eo([Ka("ConcertBidder"), Ro(), io("design:paramtypes", [Fc])], t)
            }(rl),
            hl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("conversant"), i._siteId = "203587", i._map = new Map([
                        ["Below_Post_1", {
                            tag_id: "8c6e3091"
                        }],
                        ["Content", {
                            tag_id: "f4f67b17"
                        }],
                        ["Content_1", {
                            tag_id: "9cbc79fd"
                        }],
                        ["Content_2", {
                            tag_id: "8fdfa3de"
                        }],
                        ["Content_3", {
                            tag_id: "ff6c383c"
                        }],
                        ["Content_4", {
                            tag_id: "972f654c"
                        }],
                        ["Content_5", {
                            tag_id: "bd1aadb5"
                        }],
                        ["Content_6", {
                            tag_id: "ce4f5d6e"
                        }],
                        ["Content_7", {
                            tag_id: "d85e90b"
                        }],
                        ["Content_8", {
                            tag_id: "f02f4ba"
                        }],
                        ["Content_9", {
                            tag_id: "2c01cbc"
                        }],
                        ["Footer_1", {
                            tag_id: "1b2dec1"
                        }],
                        ["Header_1", {
                            tag_id: "44d21b5"
                        }],
                        ["Header_2", {
                            tag_id: "3488dd9"
                        }],
                        ["Recipe_1", {
                            tag_id: "f6cf917"
                        }],
                        ["Recipe_2", {
                            tag_id: "31d9c43"
                        }],
                        ["Recipe_3", {
                            tag_id: "a7b4d19"
                        }],
                        ["Recipe_4", {
                            tag_id: "245c673"
                        }],
                        ["Recipe_5", {
                            tag_id: "0bf3576"
                        }],
                        ["Sidebar_1", {
                            tag_id: "bf73d45"
                        }],
                        ["Sidebar_2", {
                            tag_id: "0a57500"
                        }],
                        ["Sidebar_3", {
                            tag_id: "cceddcd"
                        }],
                        ["Sidebar_4", {
                            tag_id: "872fffd4"
                        }],
                        ["Sidebar_5", {
                            tag_id: "a7653e4"
                        }],
                        ["Sidebar_9", {
                            tag_id: "517df454"
                        }],
                        [cs.Video_Coll_SOff_Smartphone, {
                            tag_id: "0d0dfda"
                        }],
                        [cs.Video_Collapse_Autoplay_SoundOff, {
                            tag_id: "50331e1d"
                        }],
                        [cs.Video_Individual_Autoplay_SOff, {
                            tag_id: "de9d5670"
                        }],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, {
                            tag_id: "ab89e3c1"
                        }]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.conversant
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.conversant
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: {
                            tag_id: this._map.get(e.placementMapName).tag_id,
                            site_id: this._siteId
                        }
                    }]
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) return [{
                        bidder: this.name,
                        params: $r($r({
                            tag_id: this._map.get(e.name).tag_id,
                            site_id: this._siteId,
                            mimes: this._config.video.mimeType,
                            api: this._config.video.apiValue
                        }, "all" === this._config.video.videoProtocols.scope && {
                            protocols: this._config.video.videoProtocols.protocols
                        }), {
                            position: this._config.video.position.id
                        })
                    }]
                }, t = eo([Ka("ConversantBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            fl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("criteo"), i._params = {
                        networkId: 3927
                    }, i._map = new Set(["Below_Post_1", "Content_1", "Content_2", "Content_3", "Content_4", "Content_5", "Content_6", "Content_7", "Content_8", "Content_9", "Footer_1", "Header_1", "Header_2", "Recipe_1", "Recipe_2", "Recipe_3", "Recipe_4", "Sidebar_1", "Sidebar_2", "Sidebar_3", "Sidebar_4", "Sidebar_5", "Sidebar_9"]), i._videoMap = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, "1629631"],
                        [cs.Video_Coll_SOff_Smartphone, "1629630"],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, "1629629"],
                        [cs.Video_Individual_Autoplay_SOff, "1629401"]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.criteo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: $r({}, this._params)
                    }]
                }, Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.criteo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getVideoSlotBidRequests = function(e) {
                    var t;
                    if (this._videoMap.has(e.name)) return [{
                        bidder: this.name,
                        params: {
                            zoneId: this._videoMap.get(e.name),
                            video: {
                                playbackmethod: (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) || []
                            }
                        }
                    }]
                }, t = eo([Ka("CriteoBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            gl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("deepintent"), i._map = new Map([
                        ["Below_Post_1", "441"],
                        ["Content", "442"],
                        ["Content_1", "443"],
                        ["Content_2", "444"],
                        ["Content_3", "445"],
                        ["Content_4", "446"],
                        ["Content_5", "447"],
                        ["Content_6", "448"],
                        ["Content_7", "449"],
                        ["Content_8", "450"],
                        ["Content_9", "451"],
                        ["Footer_1", "452"],
                        ["Header_1", "453"],
                        ["Header_2", "454"],
                        ["Recipe_1", "455"],
                        ["Recipe_2", "456"],
                        ["Recipe_3", "457"],
                        ["Recipe_4", "458"],
                        ["Recipe_5", "459"],
                        ["Sidebar_1", "460"],
                        ["Sidebar_2", "461"],
                        ["Sidebar_3", "462"],
                        ["Sidebar_4", "463"],
                        ["Sidebar_5", "464"],
                        ["Sidebar_9", "465"]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.deepIntent && -1 !== this._config.site.sensitiveCategories.indexOf("drg")
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: {
                            tagId: this._map.get(e.placementMapName)
                        }
                    }]
                }, t = eo([Ka("DeepIntentBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            ml = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("districtmDMX"), i._params = {
                        memberid: 100319
                    }, i._map = new Map([
                        ["Below_Post_1", "210062"],
                        ["Content_1", "210064"],
                        ["Content_2", "210065"],
                        ["Content_3", "210066"],
                        ["Content_4", "210067"],
                        ["Content_5", "210068"],
                        ["Content_6", "210069"],
                        ["Content_7", "210070"],
                        ["Content_8", "210071"],
                        ["Content_9", "210072"],
                        ["Footer_1", "210073"],
                        ["Header_1", "210076"],
                        ["Header_2", "210077"],
                        ["Recipe_1", "210078"],
                        ["Recipe_2", "210079"],
                        ["Recipe_3", "277966"],
                        ["Recipe_4", "277983"],
                        ["Sidebar_1", "210080"],
                        ["Sidebar_2", "210081"],
                        ["Sidebar_3", "210082"],
                        ["Sidebar_4", "210083"],
                        ["Sidebar_5", "210084"],
                        ["Sidebar_9", "210088"]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.districtMDMX
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: $r($r({}, this._params), {
                            dmxid: this._map.get(e.placementMapName)
                        })
                    }]
                }, t = eo([Ka("DistrictMDMXBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            yl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("dmdmx"), i.adapterName = "districtmDMX", i._params = {
                        memberid: 100319
                    }, i._map = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, "277970"],
                        [cs.Video_Coll_SOff_Smartphone, "277968"],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, "277969"],
                        [cs.Video_Individual_Autoplay_SOff, "277972"]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.districtMDMX
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.districtMDMXVideo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) return [{
                        bidder: this.name,
                        params: $r({
                            dmxid: this._map.get(e.name)
                        }, this._params)
                    }]
                }, t = eo([Ka("DistrictMDMXVideoBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            _l = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("districtm"), i._map = new Map([
                        ["Below_Post_1", [{
                            placementId: 13239209
                        }]],
                        ["Content_1", [{
                            placementId: 13239211
                        }]],
                        ["Content_2", [{
                            placementId: 13239212
                        }]],
                        ["Content_3", [{
                            placementId: 13239213
                        }]],
                        ["Content_4", [{
                            placementId: 13239216
                        }]],
                        ["Content_5", [{
                            placementId: 13239217
                        }]],
                        ["Content_6", [{
                            placementId: 13239218
                        }]],
                        ["Content_7", [{
                            placementId: 13239219
                        }]],
                        ["Content_8", [{
                            placementId: 13239220
                        }]],
                        ["Content_9", [{
                            placementId: 13239221
                        }]],
                        ["Footer_1", [{
                            placementId: 13239223
                        }]],
                        ["Header_1", [{
                            placementId: 13239227
                        }]],
                        ["Header_2", [{
                            placementId: 13239229
                        }]],
                        ["Recipe_1", [{
                            placementId: 13239230
                        }]],
                        ["Recipe_2", [{
                            placementId: 13239231
                        }]],
                        ["Recipe_3", [{
                            placementId: 14591635
                        }]],
                        ["Recipe_4", [{
                            placementId: 14591652
                        }]],
                        ["Sidebar_1", [{
                            placementId: 13239232
                        }]],
                        ["Sidebar_2", [{
                            placementId: 13239233
                        }]],
                        ["Sidebar_3", [{
                            placementId: 13239234
                        }]],
                        ["Sidebar_4", [{
                            placementId: 13239236
                        }]],
                        ["Sidebar_5", [{
                            placementId: 13239238
                        }]],
                        ["Sidebar_9", [{
                            placementId: 13239242
                        }]],
                        [cs.Video_Collapse_Autoplay_SoundOff, [{
                            placementId: 14591639,
                            playback_method: ["auto_play_sound_off"]
                        }]],
                        [cs.Video_Coll_SOff_Smartphone, [{
                            placementId: 14591637,
                            playback_method: ["auto_play_sound_off"]
                        }]],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                            placementId: 14591638,
                            playback_method: ["click_to_play"]
                        }]],
                        [cs.Video_Individual_Autoplay_SOff, [{
                            placementId: 14591641,
                            playback_method: ["auto_play_sound_off"]
                        }]]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.districtM
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.districtM
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.updateBidParams = function(e, t, i) {
                    return 1 === e.refreshCount && (i.params.position = "above"), i
                }, t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) {
                        var i = ka(e, this._config.marmalade.hvThreshold);
                        return this._map.get(e.placementMapName).map((function(e) {
                            var n = e.placementId;
                            return {
                                bidder: t.name,
                                params: $r({
                                    placementId: n,
                                    allowSmallerSizes: t._config.adOptions.allowSmallerAdSizes
                                }, i && {
                                    position: "above"
                                })
                            }
                        }))
                    }
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) return [{
                        bidder: this.name,
                        params: {
                            placementId: this._map.get(e.name)[0].placementId,
                            position: this._config.video.position.name,
                            video: {
                                mimes: this._config.video.mimeType,
                                playback_method: this._map.get(e.name)[0].playback_method,
                                frameworks: this._config.video.apiValue
                            }
                        }
                    }]
                }, t = eo([Ka("DistrictMBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            vl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("gumgum"), i._zoneIds = {
                        client: "g95nznmj",
                        s2s: {
                            desktop: "0yo5ozig",
                            tablet: "0yo5ozig",
                            phone: "nedjcoh9"
                        }
                    }, i._map = new Map([
                        ["Interstitial_1", [{
                            slotId: 110743
                        }]],
                        ["Footer_1", []],
                        [cs.Video_Collapse_Autoplay_SoundOff, "glpmwixo"],
                        [cs.Video_Coll_SOff_Smartphone, "5zl85htf"],
                        [cs.Video_Individual_Autoplay_SOff, "8jzhuyj5"],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, "dtwgesum"]
                    ]), i._animatedFooterEnabled = i._config.adTypes.animatedFooter, i._interstitialEnabled = i._config.adOptions.interstitial.prebid, i._contextualAuctionParams = -1 === i._config.prebid.s2s.bidders.indexOf(i.name) ? {
                        inScreen: i._zoneIds.client
                    } : {
                        zone: i._zoneIds.s2s[i._config.context.device]
                    }, i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.gumgum && (this._animatedFooterEnabled || this._interstitialEnabled)
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.gumgum
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this._map.get(e.placementMapName),
                        i = "Footer" === e.location && this._animatedFooterEnabled,
                        n = "Interstitial" === e.location;
                    if (t && (i || n)) return [{
                        bidder: this.name,
                        params: $r($r({}, this._contextualAuctionParams), n && {
                            slot: t[0].slotId
                        })
                    }]
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) return [{
                        bidder: this.name,
                        params: {
                            video: this._map.get(e.name)
                        }
                    }]
                }, t = eo([Ka("GumGumBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            bl = new Map([
                ["Below_Post_1", {
                    siteId: "185759",
                    hvSiteId: "404596"
                }],
                ["Content_1", {
                    siteId: "185761",
                    hvSiteId: "404597"
                }],
                ["Content_2", {
                    siteId: "185762",
                    hvSiteId: "404598"
                }],
                ["Content_3", {
                    siteId: "185763",
                    hvSiteId: "404599"
                }],
                ["Content_4", {
                    siteId: "185764",
                    hvSiteId: "404600"
                }],
                ["Content_5", {
                    siteId: "185765",
                    hvSiteId: "404601"
                }],
                ["Content_6", {
                    siteId: "185766",
                    hvSiteId: "404602"
                }],
                ["Content_7", {
                    siteId: "185767",
                    hvSiteId: "404603"
                }],
                ["Content_8", {
                    siteId: "185768",
                    hvSiteId: "404604"
                }],
                ["Content_9", {
                    siteId: "185769",
                    hvSiteId: "404605"
                }],
                ["Footer_1", {
                    siteId: "185770"
                }],
                ["Header_1", {
                    siteId: "185774",
                    hvSiteId: "404607"
                }],
                ["Interstitial_1", {
                    siteId: "631834"
                }],
                ["Recipe_1", {
                    siteId: "185776"
                }],
                ["Recipe_2", {
                    siteId: "185777",
                    hvSiteId: "404609"
                }],
                ["Recipe_3", {
                    siteId: "304909"
                }],
                ["Recipe_4", {
                    siteId: "371523",
                    hvSiteId: "404611"
                }],
                ["Sidebar_1", {
                    siteId: "185787"
                }],
                ["Sidebar_2", {
                    siteId: "185788"
                }],
                ["Sidebar_3", {
                    siteId: "185789"
                }],
                ["Sidebar_4", {
                    siteId: "185790"
                }],
                ["Sidebar_5", {
                    siteId: "185791"
                }],
                ["Sidebar_9", {
                    siteId: "185795"
                }],
                ["Video_StickyOutstream_1", {
                    siteId: "745167"
                }]
            ]),
            wl = new Map([
                ["Below_Post_1", [{
                    size: [728, 90],
                    id: "1_1"
                }, {
                    size: [300, 250],
                    id: "1_2"
                }]],
                ["Content_1", [{
                    size: [728, 90],
                    id: "3_1"
                }, {
                    size: [300, 250],
                    id: "3_2"
                }, {
                    size: [320, 50],
                    id: "3_4"
                }, {
                    size: [320, 100],
                    id: "3_5"
                }, {
                    size: [300, 50],
                    id: "3_6"
                }]],
                ["Content_2", [{
                    size: [728, 90],
                    id: "4_1"
                }, {
                    size: [300, 250],
                    id: "4_2"
                }, {
                    size: [320, 50],
                    id: "4_4"
                }, {
                    size: [320, 100],
                    id: "4_5"
                }, {
                    size: [300, 50],
                    id: "4_6"
                }]],
                ["Content_3", [{
                    size: [300, 250],
                    id: "5_1"
                }, {
                    size: [320, 50],
                    id: "5_2"
                }, {
                    size: [320, 100],
                    id: "5_3"
                }, {
                    size: [300, 50],
                    id: "5_4"
                }]],
                ["Content_4", [{
                    size: [300, 250],
                    id: "6_1"
                }, {
                    size: [320, 50],
                    id: "6_2"
                }, {
                    size: [320, 100],
                    id: "6_3"
                }, {
                    size: [300, 50],
                    id: "6_4"
                }]],
                ["Content_5", [{
                    size: [300, 250],
                    id: "7_1"
                }, {
                    size: [320, 50],
                    id: "7_2"
                }, {
                    size: [320, 100],
                    id: "7_3"
                }, {
                    size: [300, 50],
                    id: "7_4"
                }]],
                ["Content_6", [{
                    size: [300, 250],
                    id: "8_1"
                }, {
                    size: [320, 50],
                    id: "8_2"
                }, {
                    size: [320, 100],
                    id: "8_3"
                }, {
                    size: [300, 50],
                    id: "8_4"
                }]],
                ["Content_7", [{
                    size: [300, 250],
                    id: "9_1"
                }, {
                    size: [320, 50],
                    id: "9_2"
                }, {
                    size: [300, 50],
                    id: "9_3"
                }]],
                ["Content_8", [{
                    size: [300, 250],
                    id: "10_1"
                }, {
                    size: [320, 50],
                    id: "10_2"
                }, {
                    size: [300, 50],
                    id: "10_3"
                }]],
                ["Content_9", [{
                    size: [300, 250],
                    id: "11_1"
                }, {
                    size: [320, 50],
                    id: "11_2"
                }, {
                    size: [300, 50],
                    id: "11_3"
                }]],
                ["Footer_1", [{
                    size: [728, 90],
                    id: "12_1"
                }, {
                    size: [970, 90],
                    id: "12_2"
                }, {
                    size: [320, 50],
                    id: "12_3"
                }, {
                    size: [320, 100],
                    id: "12_4"
                }, {
                    size: [300, 50],
                    id: "12_5"
                }]],
                ["Header_1", [{
                    size: [728, 90],
                    id: "15_1"
                }, {
                    size: [970, 90],
                    id: "15_2"
                }, {
                    size: [970, 250],
                    id: "15_3"
                }, {
                    size: [320, 50],
                    id: "15_4"
                }, {
                    size: [320, 100],
                    id: "15_5"
                }, {
                    size: [300, 50],
                    id: "15_6"
                }]],
                ["Interstitial_1", [{
                    size: [300, 600],
                    id: "36_1"
                }, {
                    size: [336, 280],
                    id: "36_2"
                }, {
                    size: [320, 480],
                    id: "36_3"
                }, {
                    size: [300, 250],
                    id: "36_4"
                }, {
                    size: [320, 50],
                    id: "36_5"
                }]],
                ["Recipe_1", [{
                    size: [300, 250],
                    id: "17_1"
                }, {
                    size: [320, 50],
                    id: "17_3"
                }, {
                    size: [320, 100],
                    id: "17_4"
                }, {
                    size: [300, 50],
                    id: "17_5"
                }]],
                ["Recipe_2", [{
                    size: [300, 250],
                    id: "18_1"
                }, {
                    size: [320, 50],
                    id: "18_3"
                }, {
                    size: [320, 100],
                    id: "18_4"
                }, {
                    size: [300, 50],
                    id: "18_5"
                }]],
                ["Recipe_3", [{
                    size: [300, 250],
                    id: "42_1"
                }, {
                    size: [320, 50],
                    id: "42_3"
                }, {
                    size: [320, 100],
                    id: "42_4"
                }, {
                    size: [300, 50],
                    id: "42_5"
                }]],
                ["Recipe_4", [{
                    size: [300, 250],
                    id: "43_1"
                }, {
                    size: [320, 50],
                    id: "43_3"
                }, {
                    size: [320, 100],
                    id: "43_4"
                }, {
                    size: [300, 50],
                    id: "43_5"
                }]],
                ["Sidebar_1", [{
                    size: [300, 250],
                    id: "27_1"
                }, {
                    size: [300, 600],
                    id: "27_2"
                }, {
                    size: [300, 1050],
                    id: "27_3"
                }, {
                    size: [160, 600],
                    id: "27_4"
                }, {
                    size: [300, 50],
                    id: "27_5"
                }]],
                ["Sidebar_2", [{
                    size: [300, 250],
                    id: "28_1"
                }, {
                    size: [300, 600],
                    id: "28_2"
                }, {
                    size: [160, 600],
                    id: "28_3"
                }, {
                    size: [300, 50],
                    id: "28_4"
                }]],
                ["Sidebar_3", [{
                    size: [300, 250],
                    id: "29_1"
                }, {
                    size: [300, 600],
                    id: "29_2"
                }, {
                    size: [160, 600],
                    id: "29_3"
                }, {
                    size: [300, 50],
                    id: "29_4"
                }]],
                ["Sidebar_4", [{
                    size: [300, 250],
                    id: "30_1"
                }, {
                    size: [300, 600],
                    id: "30_2"
                }, {
                    size: [160, 600],
                    id: "30_3"
                }, {
                    size: [300, 50],
                    id: "30_4"
                }]],
                ["Sidebar_5", [{
                    size: [300, 250],
                    id: "31_1"
                }, {
                    size: [300, 600],
                    id: "31_2"
                }, {
                    size: [160, 600],
                    id: "31_3"
                }, {
                    size: [300, 50],
                    id: "31_4"
                }]],
                ["Sidebar_9", [{
                    size: [300, 250],
                    id: "35_1"
                }, {
                    size: [300, 600],
                    id: "35_2"
                }, {
                    size: [300, 1050],
                    id: "35_3"
                }, {
                    size: [160, 600],
                    id: "35_4"
                }, {
                    size: [300, 50],
                    id: "35_5"
                }]],
                ["Video_StickyOutstream_1", [{
                    size: [300, 250],
                    id: "48_1",
                    sizeOverride: [227, 150]
                }, {
                    size: [320, 50],
                    id: "48_2",
                    sizeOverride: [178, 100]
                }]]
            ]),
            Sl = new Map([
                [cs.Video_Collapse_Autoplay_SoundOff, [{
                    size: [640, 360],
                    siteId: "185255",
                    id: "44_1"
                }]],
                [cs.Video_Coll_SOff_Smartphone, [{
                    size: [400, 225],
                    siteId: "321341",
                    id: "45_1"
                }]],
                [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                    size: [640, 360],
                    siteId: "385287",
                    device: "desktop",
                    id: "46_1"
                }, {
                    size: [400, 225],
                    siteId: "385288",
                    device: "mobile",
                    id: "46_2"
                }]],
                [cs.Video_Individual_Autoplay_SOff, [{
                    size: [640, 360],
                    siteId: "385285",
                    device: "desktop",
                    id: "47_1"
                }, {
                    size: [400, 225],
                    siteId: "385286",
                    device: "mobile",
                    id: "47_2"
                }]]
            ]),
            Cl = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._prebidMethods = i, n._bidderName = "ix", n.bidderConfig = n._config.partners.getBidderConfig(n._bidderName), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.indexExchange
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.indexExchange
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.init = function() {
                    var e = aa(),
                        t = this._config,
                        i = t.site,
                        n = so(i.verticals).filter(ea),
                        r = i.filteredSensitiveCategories,
                        o = $r($r($r({
                            PD: (t.adOptions.pmp ? "" : "no") + t.context.device
                        }, n.length && {
                            Topic: n.join("#Topic:")
                        }), r.length && {
                            Sens: r.join("#Sens:")
                        }), {
                            Source: fa(e),
                            Browser: Go(),
                            vp: "0"
                        });
                    ha(o, this._prebidMethods)
                }, t.prototype.getVideoBidRequests = function(e) {
                    var t = this;
                    return e.reduce((function(i, n) {
                        var r = t.getVideoSizeSites(e).filter((function(e) {
                            return e.video === n
                        })).map((function(e) {
                            var i = e.sizeSite,
                                r = i.siteId,
                                o = i.id,
                                a = i.size,
                                s = t.getPrebidAdUnitBidRequest(r, o, a, !1);
                            return s.params.video = t.getVideoParams(n.name), s
                        }));
                        return i.set(n.name, r)
                    }), new Map)
                }, t.prototype.getBidRequests = function(e) {
                    var t = this;
                    return e.reduce((function(i, n) {
                        var r = bl.get(n.placementMapName);
                        if (!r) return i;
                        return i.set(n.id, t.getSlotSizeIds(e).filter((function(e) {
                            return e.slot === n
                        })).reduce((function(e, i) {
                            var o, a = i.sizeId,
                                s = a.id,
                                c = a.size;
                            return r.hvSiteId && ka(n, t._config.marmalade.hvThreshold) && (o = t.getPrebidAdUnitBidRequest(r.hvSiteId, s, c, "Video_StickyOutstream" === n.location), e.push(o)), e.push(t.getPrebidAdUnitBidRequest(r.siteId, s, c, "Video_StickyOutstream" === n.location)), e
                        }), []))
                    }), new Map)
                }, t.prototype.getVideoParams = function(e, t) {
                    var i = $r($r({}, this._config.video), t),
                        n = i.playbackmethod && i.playbackmethod.get(e),
                        r = new Map([
                            [3, [3]],
                            [6, [2]]
                        ]),
                        o = n && {
                            playbackmethod: r.get(n[0])
                        };
                    return $r($r({
                        api: i.apiValue,
                        mimes: i.mimeType
                    }, o), {
                        minduration: 0,
                        maxduration: 30,
                        protocols: i.videoProtocols.protocols,
                        pos: i.position.id
                    })
                }, t.prototype.getPrebidAdUnitBidRequest = function(e, t, i, n) {
                    return {
                        bidder: this._bidderName,
                        params: $r({
                            id: t,
                            siteId: e
                        }, n ? {
                            video: {}
                        } : {
                            size: i
                        })
                    }
                }, t.prototype.getSlotSizeIds = function(e) {
                    return e.filter((function(e) {
                        return wl.has(e.placementMapName)
                    })).reduce((function(e, t) {
                        return so(e, wl.get(t.placementMapName).filter((function(e) {
                            var i = e.size;
                            return t.hasSize(i)
                        })).map((function(e) {
                            return {
                                slot: t,
                                sizeId: e
                            }
                        })))
                    }), [])
                }, t.prototype.getVideoSizeSites = function(e) {
                    var t = wa() ? "desktop" : "mobile";
                    return e.filter((function(e) {
                        return Sl.has(e.name)
                    })).reduce((function(e, i) {
                        return so(e, Sl.get(i.name).filter((function(e, n, r) {
                            var o = e.device,
                                a = e.size;
                            return (!o || o && o === t) && i.size[0] === a[0] && i.size[1] === a[1]
                        })).map((function(e) {
                            return {
                                video: i,
                                sizeSite: e
                            }
                        })))
                    }), [])
                }, t = eo([Ka("IndexExchangeBidder"), zo(), io("design:paramtypes", [Fc, Gc])], t)
            }(rl),
            kl = ao(["desktop", "content", "sidebar", "header"], 4),
            Pl = kl[0],
            El = kl[1],
            Ol = kl[2],
            xl = kl[3],
            Tl = {
                desktop: {
                    content: {
                        placementId: "_mfu14jCkaN",
                        size: [300, 250]
                    },
                    header: {
                        placementId: "_vzS4k9rMKu",
                        size: [728, 90]
                    },
                    sidebar: {
                        placementId: "_zxmQwsW17E",
                        size: [300, 600]
                    }
                }
            },
            Il = new Map([
                ["Below_Post_1", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_1", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_2", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_3", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_4", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_5", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_6", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_7", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_8", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Content_9", [Tl[Pl][El], Tl[Pl][xl]]],
                ["Header_1", [Tl[Pl][xl], Tl[Pl][El]]],
                ["Header_2", [Tl[Pl][xl], Tl[Pl][El]]],
                ["Recipe_1", [Tl[Pl][El]]],
                ["Recipe_2", [Tl[Pl][El]]],
                ["Recipe_3", [Tl[Pl][El]]],
                ["Recipe_4", [Tl[Pl][El]]],
                ["Recipe_5", [Tl[Pl][El]]],
                ["Sidebar_1", [Tl[Pl][Ol], Tl[Pl][El]]],
                ["Sidebar_2", [Tl[Pl][Ol], Tl[Pl][El]]],
                ["Sidebar_3", [Tl[Pl][Ol], Tl[Pl][El]]],
                ["Sidebar_4", [Tl[Pl][Ol], Tl[Pl][El]]],
                ["Sidebar_5", [Tl[Pl][Ol], Tl[Pl][El]]],
                ["Sidebar_9", [Tl[Pl][Ol], Tl[Pl][El]]]
            ]),
            Ml = new Map([
                ["10000", {
                    id: "_htv2gWQDl4",
                    isOutstream: !1
                }],
                ["11000", {
                    id: "_rEapvpk6cZ",
                    isOutstream: !0
                }],
                ["11100", {
                    id: "_hDLFEUkifu",
                    isOutstream: !0
                }],
                ["10100", {
                    id: "_kEvPWSnblw",
                    isOutstream: !1
                }],
                ["00011", {
                    id: "_hRaLC9FgYn",
                    isOutstream: !1
                }],
                ["00010", {
                    id: "_iyznbek6ki",
                    isOutstream: !1
                }],
                ["00001", {
                    id: "_g1dEyYpnCU",
                    isOutstream: !1
                }]
            ]),
            Al = ["Below_Post_1", "Content_1", "Content_2", "Content_3", "Content_4", "Content_5", "Content_5", "Content_6", "Content_7", "Content_8", "Content_9", "Header_1", "Header_2", "Recipe_1", "Recipe_2", "Recipe_3", "Recipe_4", "Sidebar_1", "Sidebar_2", "Sidebar_3", "Sidebar_4", "Sidebar_5", "Sidebar_9"],
            zl = ["Below_Post_1", "Content_1"],
            Rl = {
                desktop: Il,
                mobile: null
            },
            jl = ["Below_Post_1", "Content_1", "Content_3", "Content_5", "Recipe_1 "],
            Dl = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    r.adthrive = t, r._config = i, r._mediaType = n, r.bidderConfig = r._config.partners.getBidderConfig("kargo");
                    var o = Pa() ? "mobile" : "desktop";
                    return r._map = Rl[o], r
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.kargo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.createBitStringAdOptions = function(e) {
                    var t = e.hasSize([300, 250]),
                        i = e.hasSize([320, 50]);
                    return [+this.isBanner(e, t, i), +this.isOutstream(e, t), +this.isInterscroller(e), +this.isAnimatedFooter(e, i), +this.isExpandableFooter(e, i)].join("")
                }, t.prototype.isBanner = function(e, t, i) {
                    return t && i && -1 !== Al.indexOf(e.placementMapName)
                }, t.prototype.isOutstream = function(e, t) {
                    return t && -1 !== jl.indexOf(e.placementMapName) && this._mediaType.outstreamEnabled(e).outstreamCapable
                }, t.prototype.isInterscroller = function(e) {
                    return this._config.adTypes.has("interscroller") && -1 !== zl.indexOf(e.placementMapName)
                }, t.prototype.isAnimatedFooter = function(e, t) {
                    return t && this._config.adTypes.has("animatedFooter") && "Footer_1" === e.placementMapName
                }, t.prototype.isExpandableFooter = function(e, t) {
                    return t && this._config.adTypes.has("expandableFooter") && "Footer_1" === e.placementMapName
                }, t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map) {
                        if (this._map && this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(i) {
                            var n = i.adType,
                                r = i.mobileCollapsePlayer,
                                o = i.size;
                            return (!n || t._config.adTypes.has(n)) && (!r || !t._config.video.mobileStickyPlayerOnPage) && e.hasSize(o)
                        })).map((function(e) {
                            var i = e.placementId;
                            return {
                                bidder: t.name,
                                params: {
                                    placementId: i
                                }
                            }
                        }))
                    } else {
                        var i = this.createBitStringAdOptions(e);
                        if (Ml.has(i)) {
                            var n = Ml.get(i);
                            return [$r($r({
                                bidder: this.name
                            }, this.getLabels(n.isOutstream, e.placementMapName)), {
                                params: {
                                    placementId: n.id
                                }
                            })]
                        }
                    }
                }, t.prototype.getLabels = function(e, t) {
                    var i = [];
                    return e && i.push("outstreamEnabled_" + t), i.length ? {
                        labelAny: i
                    } : {}
                }, t = eo([Ka("KargoBidder"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, Fc, ll])], t)
            }(rl),
            Bl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("grid"), i.settings = {
                        bidCpmAdjustment: function(e, t) {
                            return i._getCPMAdjustment(e, t)
                        },
                        adserverTargeting: [{
                            key: "hb_format",
                            val: function(e) {
                                return e && e.meta && "trustx" === e.meta.demandSource ? "trustx_" + e.mediaType : e.mediaType
                            }
                        }]
                    }, i._getCPMAdjustment = function(e, t) {
                        var n = t.dealId,
                            r = ("vastUrl" in t || "vastXml" in t) && n && n.toString().indexOf("G-TRUSTX") > -1;
                        return Lo(i._config, e, "grid", $r($r({}, t), r && {
                            dealId: void 0
                        }))
                    }, i._map = new Map([
                        ["Below_Post_1", 357],
                        ["Content_1", 358],
                        ["Content_2", 359],
                        ["Content_3", 360],
                        ["Content_4", 361],
                        ["Content_5", 362],
                        ["Content_6", 363],
                        ["Content_7", 364],
                        ["Content_8", 365],
                        ["Content_9", 366],
                        ["Footer_1", 367],
                        ["Header_1", 368],
                        ["Header_2", 369],
                        ["Interstitial_1", 48428],
                        ["Recipe_1", 370],
                        ["Recipe_2", 371],
                        ["Recipe_3", 372],
                        ["Recipe_4", 373],
                        ["Sidebar_1", 375],
                        ["Sidebar_2", 376],
                        ["Sidebar_3", 377],
                        ["Sidebar_4", 378],
                        ["Sidebar_5", 379],
                        ["Sidebar_9", 380],
                        ["Video_StickyOutstream_1", 133519]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.mediaGrid
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: {
                            uid: this._map.get(e.placementMapName)
                        }
                    }]
                }, t = eo([Ka("MediaGridBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Vl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("gridvid"), i.adapterName = "grid", i._map = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, [{
                            uid: 2163
                        }]],
                        [cs.Video_Coll_SOff_Smartphone, [{
                            uid: 2165
                        }]],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                            device: "desktop",
                            uid: 2164
                        }, {
                            device: "mobile",
                            uid: 6056
                        }]],
                        [cs.Video_Individual_Autoplay_SOff, [{
                            device: "desktop",
                            uid: 2166
                        }, {
                            device: "mobile",
                            uid: 6057
                        }]]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.mediaGridVideo
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.mediaGridVideo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getVideoSlotBidRequests = function(e) {
                    var t = this,
                        i = wa() ? "desktop" : "mobile";
                    if (this._map.has(e.name)) return this._map.get(e.name).filter((function(e) {
                        var t = e.device;
                        return !t || t === i
                    })).map((function(e) {
                        var i = e.uid;
                        return {
                            bidder: t.name,
                            params: {
                                uid: i
                            }
                        }
                    }))
                }, t = eo([Ka("MediaGridVideoBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Ll = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("nativo"), i.adapterName = "nativo", i._map = new Set(["Content_1", "Content_2", "Recipe_1", "Recipe_2", "Sidebar_1", "Sidebar_2"]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.nativo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._map.has(e.placementMapName)) return [{
                        bidder: this.name,
                        params: {}
                    }]
                }, t = eo([Ka("NativoBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Fl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("openx"), i._params = {
                        delDomain: "cafemedia-d.openx.net"
                    }, i._highImpactParamsMap = new Map([
                        ["Content_1", ["interscroller", "miniscroller"]]
                    ]), i._map = new Map([
                        ["Below_Post_1", "538699862"],
                        ["Content_1", "538699864"],
                        ["Content_2", "538699865"],
                        ["Content_3", "538699866"],
                        ["Content_4", "538699867"],
                        ["Content_5", "538699868"],
                        ["Content_6", "538699869"],
                        ["Content_7", "538699870"],
                        ["Content_8", "538699871"],
                        ["Content_9", "538699872"],
                        ["Footer_1", "538699840"],
                        ["Header_1", "538699873"],
                        ["Header_2", "538699874"],
                        ["Interstitial_1", "543876568"],
                        ["Recipe_1", "538699843"],
                        ["Recipe_2", "538699844"],
                        ["Recipe_3", "540594416"],
                        ["Recipe_4", "540751624"],
                        ["Sidebar_1", "538699853"],
                        ["Sidebar_2", "538699854"],
                        ["Sidebar_3", "538699855"],
                        ["Sidebar_4", "538699856"],
                        ["Sidebar_5", "538699857"],
                        ["Sidebar_9", "538699861"],
                        ["Video_StickyOutstream_1", "545721971"],
                        [cs.Video_Collapse_Autoplay_SoundOff, "540679731"],
                        [cs.Video_Coll_SOff_Smartphone, "540679733"],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, "540679727"],
                        [cs.Video_Individual_Autoplay_SOff, "540925853"]
                    ]), i._custParams = $r($r({}, i._config.site.filteredSensitiveCategories.length && {
                        sens: i._config.site.filteredSensitiveCategories
                    }), {
                        bucket: [i._config.context.bucket]
                    }), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.openx
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.openx
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) {
                        var i = this._highImpactParamsMap.get(e.placementMapName) || [];
                        return [{
                            bidder: this.name,
                            params: $r($r({}, this._params), {
                                unit: this._map.get(e.placementMapName),
                                customParams: $r($r({}, this._custParams), {
                                    hi_au: i.filter((function(e) {
                                        return t._config.adTypes[e]
                                    }))
                                })
                            })
                        }]
                    }
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t;
                    if (this._map.has(e.name)) {
                        var i = "all" === this._config.video.videoProtocols.scope ? {
                            protocols: this._config.video.videoProtocols.protocols
                        } : "";
                        return [{
                            bidder: this.name,
                            params: $r($r({}, this._params), {
                                unit: this._map.get(e.name),
                                video: $r($r($r({
                                    mimes: this._config.video.mimeType,
                                    api: this._config.video.apiValue
                                }, i), {
                                    pos: this._config.video.position.id
                                }), (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) && {
                                    playbackmethod: this._config.video.playbackmethod.get(e.name)
                                })
                            })
                        }]
                    }
                }, t = eo([Ka("OpenXBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Nl = function() {
                function e() {
                    this.segmentName = "www.iris.tv", this.segtax = 501, this._irisEndpoint = "https://context.iris.tv/video_info", this._token = "5d8f38ad6d7de4253cfa501b84c30b1014868d9884be5d68dc64bd50a6edb54c", this._clientToken = "EXJQESR8SMWMZCJ"
                }
                return e.prototype.fetchIrisResponse = function(e) {
                    return ta(this._irisEndpoint + "?access_token=" + this._token + "&client_token=" + this._clientToken + "&platform_id=" + e)
                }, e.prototype.setContextualData = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t = this;
                        return ro(this, (function(i) {
                            return [2, this.fetchIrisResponse(e).then((function(e) {
                                if (e && "boolean" != typeof e) {
                                    var i = e.video_info,
                                        n = i && i.context;
                                    n && n.length && (t._contextualData = n, t._irisId = i.iris_id)
                                }
                                return !0
                            })).catch((function() {
                                return !1
                            }))]
                        }))
                    }))
                }, Object.defineProperty(e.prototype, "irisContextualData", {
                    get: function() {
                        return this._contextualData
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "irisId", {
                    get: function() {
                        return this._irisId
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro()], e)
            }(),
            ql = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._irisTv = i, n.bidderConfig = n._config.partners.getBidderConfig("pubmatic"), n.adapterName = "pubmatic", n.serverBidderName = "pubm_ss", n.pubId = "157347", n._map = new Map([
                        ["Below_Post_1", {
                            client: "BelowPost1",
                            server: "BelowPost1_XandrS2S"
                        }],
                        ["Content_1", {
                            client: "Content1",
                            server: "Content1_XandrS2S"
                        }],
                        ["Content_2", {
                            client: "Content2",
                            server: "Content2_XandrS2S"
                        }],
                        ["Content_3", {
                            client: "Content3",
                            server: "Content3_XandrS2S"
                        }],
                        ["Content_4", {
                            client: "Content4",
                            server: "Content4_XandrS2S"
                        }],
                        ["Content_5", {
                            client: "Content5",
                            server: "Content5_XandrS2S"
                        }],
                        ["Content_6", {
                            client: "Content6",
                            server: "Content6_XandrS2S"
                        }],
                        ["Content_7", {
                            client: "Content7",
                            server: "Content7_XandrS2S"
                        }],
                        ["Content_8", {
                            client: "Content8",
                            server: "Content8_XandrS2S"
                        }],
                        ["Content_9", {
                            client: "Content9",
                            server: "Content9_XandrS2S"
                        }],
                        ["Footer_1", {
                            client: "Footer1",
                            server: "Footer1_XandrS2S"
                        }],
                        ["Header_1", {
                            client: "Header1",
                            server: "Header1_XandrS2S"
                        }],
                        ["Header_2", {
                            client: "Header2",
                            server: "Header2_XandrS2S"
                        }],
                        ["Interstitial_1", {
                            client: "interstitial",
                            server: "interstitial_XandrS2S"
                        }],
                        ["Recipe_1", {
                            client: "Recipe1",
                            server: "Recipe1_XandrS2S"
                        }],
                        ["Recipe_2", {
                            client: "Recipe2",
                            server: "Recipe2_XandrS2S"
                        }],
                        ["Recipe_3", {
                            client: "Recipe3",
                            server: "Recipe3_XandrS2S"
                        }],
                        ["Recipe_4", {
                            client: "Recipe4",
                            server: "Recipe4_XandrS2S"
                        }],
                        ["Sidebar_1", {
                            client: "Sidebar1",
                            server: "Sidebar1_XandrS2S"
                        }],
                        ["Sidebar_2", {
                            client: "Sidebar2",
                            server: "Sidebar2_XandrS2S"
                        }],
                        ["Sidebar_3", {
                            client: "Sidebar3",
                            server: "Sidebar3_XandrS2S"
                        }],
                        ["Sidebar_4", {
                            client: "Sidebar4",
                            server: "Sidebar4_XandrS2S"
                        }],
                        ["Sidebar_5", {
                            client: "Sidebar5",
                            server: "Sidebar5_XandrS2S"
                        }],
                        ["Sidebar_9", {
                            client: "Sidebar9",
                            server: "Sidebar9_XandrS2S"
                        }],
                        ["Video_StickyOutstream_1", {
                            client: "2267845",
                            server: "4018943"
                        }],
                        [cs.Video_Collapse_Autoplay_SoundOff, {
                            client: "1961309",
                            server: "3437231"
                        }],
                        [cs.Video_Coll_SOff_Smartphone, {
                            client: "1961310",
                            server: "3437234"
                        }],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, {
                            client: "1961308",
                            server: "3437232"
                        }],
                        [cs.Video_Individual_Autoplay_SOff, {
                            client: "2503033",
                            server: "3443766"
                        }]
                    ]), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.pubMatic
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.pubMatic
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = [];
                    return this._map.has(e.placementMapName) && (t.push(this.getBidParams(this.name, this._map.get(e.placementMapName).client, e)), t.push(this.getBidParams(this.serverBidderName, this._map.get(e.placementMapName).server, e))), t
                }, t.prototype.getBidParams = function(e, t, i) {
                    return {
                        bidder: e,
                        params: $r({
                            publisherId: this.pubId,
                            adSlot: t + "@" + i.sizes[0][0] + "x" + i.sizes[0][1]
                        }, this._config.site.filteredSensitiveCategories.length && {
                            pmzoneid: this._config.site.filteredSensitiveCategories.join(",")
                        })
                    }
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t = [];
                    return this._map.has(e.name) && (t.push(this.getVideoBidParams(this.name, this._map.get(e.name).client, e)), t.push(this.getVideoBidParams(this.serverBidderName, this._map.get(e.name).server, e))), t
                }, t.prototype.getDCTRParam = function(e) {
                    var t = [],
                        i = this._irisTv.irisContextualData;
                    return i && i.length && t.push("iris_context=" + i.toString()), t.join("|")
                }, t.prototype.getVideoBidParams = function(e, t, i) {
                    var n, r = this.getDCTRParam(e);
                    return {
                        bidder: e,
                        params: $r($r($r({
                            publisherId: this.pubId
                        }, r && {
                            dctr: r
                        }), {
                            video: $r($r({
                                mimes: this._config.video.mimeType,
                                api: this._config.video.apiValue
                            }, "all" === this._config.video.videoProtocols.scope && {
                                protocols: this._config.video.videoProtocols.protocols
                            }), (null === (n = this._config.video.playbackmethod) || void 0 === n ? void 0 : n.get(i.name)) && {
                                playbackmethod: this._config.video.playbackmethod.get(i.name)
                            }),
                            adSlot: t + "@" + i.size[0] + "x" + i.size[1]
                        }), this._config.site.filteredSensitiveCategories.length && {
                            pmzoneid: this._config.site.filteredSensitiveCategories.join(",")
                        })
                    }
                }, t = eo([Ka("PubMaticBidder"), zo(), io("design:paramtypes", [Fc, Nl])], t)
            }(rl),
            Ul = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("roundel"), i.adapterName = "ix", i._params = {
                        siteId: "377190"
                    }, i._map = new Map([
                        ["Below_Post_1", [{
                            size: [728, 90]
                        }, {
                            size: [300, 250]
                        }]],
                        ["Content_1", [{
                            size: [728, 90]
                        }, {
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_2", [{
                            size: [728, 90]
                        }, {
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_3", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_4", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_5", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_6", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_7", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_8", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Content_9", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Header_1", [{
                            size: [728, 90]
                        }, {
                            size: [970, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Header_2", [{
                            size: [728, 90]
                        }, {
                            size: [970, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Footer_1", [{
                            size: [728, 90]
                        }, {
                            size: [970, 90]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [320, 100]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Recipe_1", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Recipe_2", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Recipe_3", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Recipe_4", [{
                            size: [300, 250]
                        }, {
                            size: [320, 50]
                        }, {
                            size: [300, 50]
                        }]],
                        ["Sidebar_1", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]],
                        ["Sidebar_2", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]],
                        ["Sidebar_3", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]],
                        ["Sidebar_4", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]],
                        ["Sidebar_5", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]],
                        ["Sidebar_9", [{
                            size: [300, 250]
                        }, {
                            size: [300, 600]
                        }, {
                            size: [160, 600]
                        }]]
                    ]), i._videoMap = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, [{
                            size: [640, 360],
                            siteId: "485376",
                            device: "desktop"
                        }]],
                        [cs.Video_Coll_SOff_Smartphone, [{
                            size: [400, 225],
                            siteId: "485377",
                            device: "mobile"
                        }]],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                            size: [640, 360],
                            siteId: "485380",
                            device: "desktop"
                        }, {
                            size: [400, 225],
                            siteId: "485381",
                            device: "mobile"
                        }]],
                        [cs.Video_Individual_Autoplay_SOff, [{
                            size: [640, 360],
                            siteId: "485378",
                            device: "desktop"
                        }, {
                            size: [400, 225],
                            siteId: "485379",
                            device: "mobile"
                        }]]
                    ]), i._playbackmethodMap = new Map([
                        [3, [3]],
                        [6, [2]]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.roundel
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(t) {
                        var i = t.size;
                        return e.hasSize(i)
                    })).map((function(i) {
                        var n = i.size;
                        return $r($r({
                            bidder: t.name
                        }, e.viewability < t._config.marmalade.hvThreshold ? {
                            labelAny: ["refresh"]
                        } : {}), {
                            params: $r($r({}, t._params), {
                                size: n
                            })
                        })
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t;
                    if (this._videoMap.has(e.name)) {
                        var i = wa() ? "desktop" : "mobile",
                            n = this._videoMap.get(e.name).filter((function(e) {
                                return e.device === i
                            })).map((function(e) {
                                return e.device,
                                    function(e, t) {
                                        var i = {};
                                        for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (i[n] = e[n]);
                                        if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                                            var r = 0;
                                            for (n = Object.getOwnPropertySymbols(e); r < n.length; r++) t.indexOf(n[r]) < 0 && Object.prototype.propertyIsEnumerable.call(e, n[r]) && (i[n[r]] = e[n[r]])
                                        }
                                        return i
                                    }(e, ["device"])
                            }))[0];
                        return [{
                            bidder: this.name,
                            params: $r($r({}, n), {
                                video: $r($r({
                                    mimes: this._config.video.mimeType
                                }, (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) && {
                                    playbackmethod: this._playbackmethodMap.get(this._config.video.playbackmethod.get(e.name)[0])
                                }), {
                                    api: this._config.video.apiValue,
                                    minduration: 0,
                                    maxduration: 30,
                                    protocols: this._config.video.videoProtocols.protocols
                                })
                            })
                        }]
                    }
                }, t = eo([Ka("RoundelBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Hl = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    n._config = t, n._rubiconExperiment = i, n.bidderConfig = n._config.partners.getBidderConfig("rubicon"), n.adapterName = "rubicon", n.serverBidderName = "rubi_ss", n._bidders = [], n._map = new Map([
                        ["Below_Post_1", {
                            client: 881394,
                            server: 1974272
                        }],
                        ["Content_1", {
                            client: 881398,
                            server: 1974276
                        }],
                        ["Content_2", {
                            client: 881400,
                            server: 1974280
                        }],
                        ["Content_3", {
                            client: 881402,
                            server: 1974282
                        }],
                        ["Content_4", {
                            client: 881404,
                            server: 1974284
                        }],
                        ["Content_5", {
                            client: 881406,
                            server: 1974286
                        }],
                        ["Content_6", {
                            client: 881408,
                            server: 1974288
                        }],
                        ["Content_7", {
                            client: 881410,
                            server: 1974290
                        }],
                        ["Content_8", {
                            client: 881412,
                            server: 1974292
                        }],
                        ["Content_9", {
                            client: 881414,
                            server: 1974294
                        }],
                        ["Footer_1", {
                            client: 881416,
                            server: 1974296
                        }],
                        ["Header_1", {
                            client: 881422,
                            server: 1974304
                        }],
                        ["Header_2", {
                            client: 881426,
                            server: 1974306
                        }],
                        ["Interstitial_1", {
                            client: 1979348,
                            server: 1979354
                        }],
                        ["Recipe_1", {
                            client: 881428,
                            server: 1974308
                        }],
                        ["Recipe_2", {
                            client: 881430,
                            server: 1974310
                        }],
                        ["Recipe_3", {
                            client: 1187188,
                            server: 1974312
                        }],
                        ["Recipe_4", {
                            client: 1279328,
                            server: 1974314
                        }],
                        ["Sidebar_1", {
                            client: 881440,
                            server: 1974316
                        }],
                        ["Sidebar_2", {
                            client: 881454,
                            server: 1974318
                        }],
                        ["Sidebar_3", {
                            client: 881460,
                            server: 1974320
                        }],
                        ["Sidebar_4", {
                            client: 881462,
                            server: 1974322
                        }],
                        ["Sidebar_5", {
                            client: 881466,
                            server: 1974324
                        }],
                        ["Sidebar_9", {
                            client: 881478,
                            server: 1974332
                        }],
                        ["Video_StickyOutstream_1", {
                            client: 2150398,
                            server: 2150396
                        }],
                        [cs.Video_Collapse_Autoplay_SoundOff, {
                            client: 1259006,
                            server: 2055644
                        }],
                        [cs.Video_Coll_SOff_Smartphone, {
                            client: 1259010,
                            server: 2055648
                        }],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, {
                            client: 1259008,
                            server: 2055642
                        }],
                        [cs.Video_Individual_Autoplay_SOff, {
                            client: 1506800,
                            server: 2055646
                        }]
                    ]);
                    var r = "both" === n._rubiconExperiment.result || "client" === n._rubiconExperiment.result;
                    return ("both" === n._rubiconExperiment.result || "server" === n._rubiconExperiment.result) && n._bidders.push({
                        name: n.serverBidderName,
                        type: "server"
                    }), r && n._bidders.push({
                        name: n.name,
                        type: "client"
                    }), n
                }
                return Jr(t, e), t.prototype.getDisplayParams = function(e, t) {
                    return $r({
                        accountId: 9262,
                        siteId: "Video_StickyOutstream" === t ? 386004 : {
                            server: 363698,
                            client: 180726
                        } [e]
                    }, "Video_StickyOutstream" === t && {
                        video: {
                            language: "en"
                        }
                    })
                }, t.prototype.getVideoParams = function(e) {
                    return {
                        accountId: 9262,
                        siteId: {
                            server: 375144,
                            client: 253996
                        } [e],
                        video: {
                            language: "en"
                        }
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.rubicon
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.rubicon
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._bidders.map((function(i) {
                        var n = ka(e, t._config.marmalade.hvThreshold);
                        return {
                            bidder: i.name,
                            params: $r($r($r({}, t.getDisplayParams(i.type, e.location)), {
                                zoneId: t._map.get(e.placementMapName)[i.type]
                            }), n && {
                                position: "atf"
                            })
                        }
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.name)) return this._bidders.map((function(i) {
                        return {
                            bidder: i.name,
                            params: $r($r({}, t.getVideoParams(i.type)), {
                                zoneId: t._map.get(e.name)[i.type]
                            })
                        }
                    }))
                }, t.prototype.updateBidParams = function(e, t, i) {
                    return 1 === e.refreshCount && (i.params.position = "atf"), i
                }, t = eo([Ka("RubiconBidder"), zo(), io("design:paramtypes", [Fc, lc])], t)
            }(rl),
            Wl = new Map([
                ["Below_Post_1", [{
                    size: [300, 250],
                    pkey: "7SbWFfJm2dn10YEIuTIpKDME"
                }, {
                    size: [728, 90],
                    pkey: "rcC1EVV27zshgwZefZtMMbQH"
                }, {
                    size: [320, 50],
                    pkey: "T7Qor0zFsfzE8d0WArpJPwQX"
                }, {
                    size: [336, 280],
                    pkey: "WoVFJAUvQg9oowjifOQLhHfb"
                }]],
                ["Content_1", [{
                    size: [300, 250],
                    pkey: "Hqhk8OQEu54TMfika2qbQjZe"
                }, {
                    size: [728, 90],
                    pkey: "Abg2OePLqx4qSJsbvcMFeKMd"
                }, {
                    size: [320, 50],
                    pkey: "nlcvbONm7a7qbEq1CUb60bDG"
                }, {
                    size: [336, 280],
                    pkey: "ygZ1JVS7p7SMDBgz7ueGgfVr"
                }, {
                    size: [300, 50],
                    pkey: "9kDU40A4BJXchR7ikuWND5Ui"
                }]],
                ["Content_2", [{
                    size: [300, 250],
                    pkey: "h28JMhou2Lu9BYHVipYoXuJC"
                }, {
                    size: [320, 50],
                    pkey: "jdumKQjHDTttqY113Cyf8Dg5"
                }, {
                    size: [728, 90],
                    pkey: "zXUbUzaRyn8LyqVmiSSGFcf5"
                }, {
                    size: [300, 50],
                    pkey: "D3MXJwPThTgUD48ESouRejcn"
                }, {
                    size: [336, 280],
                    pkey: "ocdg6DMXhAfaTk7KgImuPCPi"
                }]],
                ["Content_3", [{
                    size: [300, 250],
                    pkey: "BFOY9pnh071TtzOy9lBjIr2i"
                }, {
                    size: [320, 50],
                    pkey: "96aXzW1FyE1LlnVyOMYuFW7x"
                }, {
                    size: [728, 90],
                    pkey: "HhDmPHv4VTNzHzcG65kBlpS0"
                }, {
                    size: [300, 50],
                    pkey: "JQXmRwXj1jOjHCQF8ufXkKIJ"
                }]],
                ["Content_4", [{
                    size: [300, 250],
                    pkey: "GA7GQONt3evAWTb7QFsfr4kT"
                }, {
                    size: [320, 50],
                    pkey: "iN7VUlNOwy5Nem9ve7HCjt1O"
                }, {
                    size: [728, 90],
                    pkey: "WlK6M3BJTYR6CKgtW4fpeWwc"
                }, {
                    size: [300, 50],
                    pkey: "7DEh5436UHnmeKGzVXQVsvRk"
                }]],
                ["Content_5", [{
                    size: [300, 250],
                    pkey: "ZKk36rd21PTfmO81jIh4Yogg"
                }, {
                    size: [320, 50],
                    pkey: "Dc9sjnVcwjTK2iG3wYmqLveY"
                }, {
                    size: [728, 90],
                    pkey: "wuq8OFVQSXj9rmtUlnLo57Tm"
                }, {
                    size: [300, 50],
                    pkey: "ZWVmSVe4txKlxxCQoqMcGIus"
                }]],
                ["Content_6", [{
                    size: [300, 250],
                    pkey: "1rWi9eEX25aaJTBP0gYbRZkI"
                }, {
                    size: [320, 50],
                    pkey: "xpvziI7Hx5t9ZYEhjNh559PS"
                }, {
                    size: [728, 90],
                    pkey: "NCS2KzLcAOxlnkaJ4xjxF0yY"
                }, {
                    size: [300, 50],
                    pkey: "T3CRI7sep8LYNDkOrvgSZUPQ"
                }]],
                ["Content_7", [{
                    size: [300, 250],
                    pkey: "UyoEFm2doVvp7106fNDYQWUD"
                }, {
                    size: [320, 50],
                    pkey: "TaEN9LCRL7njBnuDdcqFl45i"
                }, {
                    size: [728, 90],
                    pkey: "F9qCCjLusYbKBOeMYwTpuEPE"
                }, {
                    size: [300, 50],
                    pkey: "T4LKxfIKZJCqFzBemjae6MGu"
                }]],
                ["Content_8", [{
                    size: [300, 250],
                    pkey: "Kx7r3bEMtM8oX76sHwPJmKc0"
                }, {
                    size: [320, 50],
                    pkey: "yFU6LWetkGsn5PDQKYT2IDsb"
                }, {
                    size: [728, 90],
                    pkey: "SzRqozC7KE5CHZ5X0MYolGNg"
                }, {
                    size: [300, 50],
                    pkey: "TIHmP6MqapPY4RpbkOm3pYpV"
                }]],
                ["Content_9", [{
                    size: [300, 250],
                    pkey: "ME02OxIG42MNrqtEtkRcC3WI"
                }, {
                    size: [320, 50],
                    pkey: "FZAEaVzZWYVTEcRNmWJmjUXB"
                }, {
                    size: [728, 90],
                    pkey: "d2Rjluzn2K59G2BS6dcOSTnQ"
                }, {
                    size: [300, 50],
                    pkey: "mBGMr6mqftj8c2qcQky6UjEB"
                }]],
                ["Footer_1", [{
                    size: [728, 90],
                    pkey: "3B3mEOFlqzWznInsydJTcOM4"
                }, {
                    size: [320, 50],
                    pkey: "D7FU4vgB3xSrSUsE8x941axF"
                }, {
                    size: [300, 50],
                    pkey: "GNY9gDQKzEGt6Tlb13yLfmuX"
                }, {
                    size: [970, 90],
                    pkey: "QpPUq12xurb2uH4eesPfZAHF"
                }, {
                    size: [320, 100],
                    pkey: "B1C8tQAkMN7kpCuxh1hW6CY8"
                }]],
                ["Header_1", [{
                    size: [728, 90],
                    pkey: "gEiCP252abCex8X60QDCQ18Q"
                }, {
                    size: [320, 50],
                    pkey: "1edt8nVrdCirRPclWUszxTkp"
                }, {
                    size: [970, 250],
                    pkey: "8vU2bELnZC87m9GLY6XrB82g"
                }, {
                    size: [300, 50],
                    pkey: "hjIoNE7R9iO7fInGsX0iibTz"
                }, {
                    size: [300, 250],
                    pkey: "jStKXZxN8Ccuf6XS4dKqhKr9"
                }, {
                    size: [970, 90],
                    pkey: "InTyYn8hF3Qs7LnzMuZosUTQ"
                }]],
                ["Header_2", [{
                    size: [728, 90],
                    pkey: "qJiJRp6ukhtMyrprTZKHjL2M"
                }, {
                    size: [320, 50],
                    pkey: "8FmqCiT44WYjSNLDf1gQE8JU"
                }, {
                    size: [300, 250],
                    pkey: "HkFfwTqoieNv9hxPhJKPKoX8"
                }, {
                    size: [970, 250],
                    pkey: "NwtHSBVFWxfm6Yh7UeCfuHa6"
                }, {
                    size: [300, 50],
                    pkey: "4kwwuV84b6KhCJQy0yjDYdfl"
                }, {
                    size: [320, 100],
                    pkey: "TJx2N6gevlYeFawnBbRy4gRl"
                }]],
                ["Recipe_1", [{
                    size: [300, 250],
                    pkey: "uf0lKHKQpMCXGy4lxiCspQq7"
                }, {
                    size: [320, 50],
                    pkey: "lklI3sAvIozfaIGNQGORtPOR"
                }, {
                    size: [300, 50],
                    pkey: "yiehMO6LI3FNHjbCPIb1L3Sk"
                }, {
                    size: [250, 250],
                    pkey: "LyZ0FEa1r0IYt8G2ZZsZi389"
                }]],
                ["Recipe_2", [{
                    size: [300, 250],
                    pkey: "k3diT2fkJ9qUBWQussCusqH3"
                }, {
                    size: [320, 50],
                    pkey: "nWhVYiRycgz0snwL4hTcS3vA"
                }, {
                    size: [300, 50],
                    pkey: "dq7FbogqyhCRRIH60EEOqCSU"
                }, {
                    size: [250, 250],
                    pkey: "yiWtNVya1yOMCncI5pNF5kc5"
                }]],
                ["Recipe_3", [{
                    size: [300, 250],
                    pkey: "43441FPoOkNSE3t2cVABWnsj"
                }, {
                    size: [320, 50],
                    pkey: "XTsNJ5wTa3CksG40rnRNHiib"
                }, {
                    size: [300, 50],
                    pkey: "OogAcgEwqjMqWmbuSN0n1fhg"
                }, {
                    size: [250, 250],
                    pkey: "t9D4xPUErCl21pJOFQemQp9h"
                }]],
                ["Recipe_4", [{
                    size: [300, 250],
                    pkey: "DYIoV5pkMmf8Dh6Z328lJjVS"
                }, {
                    size: [320, 50],
                    pkey: "00kJPcqve45ZTYX6hicr37iK"
                }, {
                    size: [300, 50],
                    pkey: "BpO7D8zDzdyGmFUOGNcRhUUm"
                }, {
                    size: [300, 600],
                    pkey: "xv9dO3gYMP1nJKg1FZVtIUlc"
                }]],
                ["Sidebar_1", [{
                    size: [300, 250],
                    pkey: "CrsU69OOlLRE1gDlLVGWIIV6"
                }, {
                    size: [300, 600],
                    pkey: "3pyeQzDRiW84Hg8gNrOq7BUr"
                }, {
                    size: [160, 600],
                    pkey: "CFUyMykS3nc38kL2GnT0S7E4"
                }, {
                    size: [320, 50],
                    pkey: "1BptSVedVseFELcEHmSjZmDr"
                }, {
                    size: [300, 50],
                    pkey: "2pg9IZthU4rVlb45qoI2081a"
                }]],
                ["Sidebar_2", [{
                    size: [300, 250],
                    pkey: "SRG5uYvQkWqlTzkqgXr65zTB"
                }, {
                    size: [300, 600],
                    pkey: "Ean6FEKv8T4dKoDEQtgf6J5K"
                }, {
                    size: [160, 600],
                    pkey: "WbYPSpMSXQPKyD7MaH1Qc5z7"
                }, {
                    size: [320, 50],
                    pkey: "TAk15aJmBw3jMFoV9vSYYWLl"
                }, {
                    size: [300, 50],
                    pkey: "9w6UD5z59ooQWpW98mmpv0mD"
                }]],
                ["Sidebar_3", [{
                    size: [300, 250],
                    pkey: "ePJzx8Sm7N35TzihmA98puiL"
                }, {
                    size: [160, 600],
                    pkey: "P4EOkxn1ZtpxOxx2lahCdYOJ"
                }, {
                    size: [300, 600],
                    pkey: "6mOPwEqEtbkwuuzizUPzdQhN"
                }, {
                    size: [320, 50],
                    pkey: "oSwBRQCb6174NZ0wDEyxZW9E"
                }, {
                    size: [300, 50],
                    pkey: "LImddo0cIDhlsk6dkvMaHxsW"
                }]],
                ["Sidebar_4", [{
                    size: [300, 250],
                    pkey: "xVf5XsMi0sHZYN4WvjiFhCt3"
                }, {
                    size: [300, 600],
                    pkey: "WH8DfDE6oJYbphu2nD4xxeIV"
                }, {
                    size: [160, 600],
                    pkey: "8ZBBtdUqKqArOUPgW7bpiUia"
                }, {
                    size: [320, 50],
                    pkey: "UMKQPvhCYMOH1sOPVdYEDEQt"
                }, {
                    size: [300, 50],
                    pkey: "UoweNgEnjfmpxKoHzSXkuoWg"
                }]],
                ["Sidebar_5", [{
                    size: [300, 250],
                    pkey: "EhtNcAaPOBeM8QI5ypGM7lZy"
                }, {
                    size: [160, 600],
                    pkey: "zAOUkIaCHmzOCw2Ma5rrzaql"
                }, {
                    size: [300, 600],
                    pkey: "LDMKwAfNFjGKWXL0OWKksknT"
                }, {
                    size: [320, 50],
                    pkey: "WdPWJ92IfPqKgO5vRXvlsDO4"
                }, {
                    size: [300, 50],
                    pkey: "MgyTpbqDa5nWNz6aDNWyucFn"
                }]],
                ["Sidebar_9", [{
                    size: [300, 250],
                    pkey: "JmiI0R5Mw4cFlLp9pgaem31E"
                }, {
                    size: [300, 600],
                    pkey: "IoYC7dL9wONQvhjMnu3iqP3R"
                }, {
                    size: [160, 600],
                    pkey: "np3Ol8PXscn2cbaUcrthhTKg"
                }, {
                    size: [320, 50],
                    pkey: "Cd46ns56pySxsSXXdRi3KlYq"
                }, {
                    size: [300, 50],
                    pkey: "k8W1t71k8qmkYsiK4v3pop6j"
                }, {
                    size: [250, 250],
                    pkey: "qINMbG0pc3n9CO2oIW1qxWGE"
                }]]
            ]),
            Gl = new Map([
                [cs.Video_Collapse_Autoplay_SoundOff, [{
                    size: [640, 360],
                    pkey: "I5VjN89qESPMegBdpCt92W8S"
                }]],
                [cs.Video_Coll_SOff_Smartphone, [{
                    size: [400, 225],
                    pkey: "iZXbFkwkNrOgpI7ue8o3mJda"
                }]],
                [cs.Video_In_Post_ClicktoPlay_SoundOn, [{
                    size: [640, 360],
                    pkey: "sMLWZBQNa6GaKC2khQiIg5Tj"
                }, {
                    size: [400, 225],
                    pkey: "yHkEhAMj24ubV101Fklbp6fA"
                }]],
                [cs.Video_Individual_Autoplay_SOff, [{
                    size: [640, 360],
                    pkey: "GCV9Do84nDBEFaVjb507H4iE"
                }, {
                    size: [400, 225],
                    pkey: "6lY8mDlZX6W7ijhbh6OuDCfj"
                }]]
            ]),
            Ql = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("sharethrough"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.sharethrough
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.sharethrough
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (Wl.has(e.placementMapName)) return Wl.get(e.placementMapName).filter((function(t) {
                        var i = t.size;
                        return e.hasSize(i)
                    })).map((function(e) {
                        var i = e.pkey;
                        return {
                            bidder: t.name,
                            params: {
                                pkey: i
                            }
                        }
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t = this;
                    return Gl.get(e.name).filter((function(t) {
                        var i = t.size;
                        return e.size[0] === i[0] && e.size[1] === i[1]
                    })).map((function(e) {
                        var i = e.pkey;
                        return {
                            bidder: t.name,
                            params: {
                                pkey: i
                            }
                        }
                    }))
                }, t = eo([Ka("SharethroughBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Kl = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._irisTv = i, n.bidderConfig = n._config.partners.getBidderConfig("spotx"), n._videoParams = {
                        ad_unit: "instream",
                        secure: !0,
                        mimes: n._config.video.mimeType,
                        position: n._config.video.position.id
                    }, n._map = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, 279547],
                        [cs.Video_Coll_SOff_Smartphone, 279549],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, 279548],
                        [cs.Video_Individual_Autoplay_SOff, 279550]
                    ]), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.spotx
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) {
                        var t = this._irisTv.irisContextualData,
                            i = this._irisTv.irisId,
                            n = i && t && t.length;
                        return [{
                            bidder: this.name,
                            params: $r($r($r({}, this._videoParams), {
                                channel_id: this._map.get(e.name)
                            }), n && {
                                custom: {
                                    iris_context: t,
                                    iris_id: i
                                }
                            })
                        }]
                    }
                }, t = eo([Ka("SpotXBidder"), zo(), io("design:paramtypes", [Fc, Nl])], t)
            }(rl),
            Xl = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._mediaType = i, n.bidderConfig = n._config.partners.getBidderConfig("teads"), n._pageId = 112062, n._adTypeBitIndexMap = new Map([
                        ["outstream", {
                            adType: Pa() ? "outstreamMobile" : "outstreamDesktop",
                            index: 1
                        }],
                        ["interscroller", {
                            adType: "interscroller",
                            index: 2
                        }],
                        ["miniscroller", {
                            adType: "miniscroller",
                            index: 3
                        }]
                    ]), n._adUnitsMap = new Map([
                        ["Below_Post_1", []],
                        ["Content_1", ["outstreamDesktop", "outstreamMobile", "miniscroller", "interscroller"]],
                        ["Content_2", ["miniscroller", "interscroller"]],
                        ["Content_3", ["outstreamDesktop", "outstreamMobile", "miniscroller", "interscroller"]],
                        ["Content_4", ["miniscroller", "interscroller"]],
                        ["Content_5", ["outstreamDesktop", "outstreamMobile", "miniscroller", "interscroller"]],
                        ["Content_6", ["miniscroller", "interscroller"]],
                        ["Content_7", ["miniscroller", "interscroller"]],
                        ["Content_8", ["miniscroller", "interscroller"]],
                        ["Content_9", ["miniscroller", "interscroller"]],
                        ["Footer_1", []],
                        ["Header_1", []],
                        ["Header_2", []],
                        ["Recipe_1", ["outstreamDesktop", "outstreamMobile", "miniscroller"]],
                        ["Recipe_2", ["miniscroller"]],
                        ["Recipe_3", ["miniscroller"]],
                        ["Recipe_4", ["miniscroller"]],
                        ["Sidebar_1", []],
                        ["Sidebar_2", []],
                        ["Sidebar_3", []],
                        ["Sidebar_4", []],
                        ["Sidebar_5", []],
                        ["Sidebar_9", []]
                    ]), n._deviceAdTypes = {
                        mobile: ["outstreamMobile", "interscroller", "miniscroller"],
                        desktop: ["outstreamDesktop"]
                    }, n._placementIdMap = new Map([
                        ["1000", {
                            id: 121842,
                            isOutstream: !1
                        }],
                        ["1001", {
                            id: 121836,
                            isOutstream: !0
                        }],
                        ["1010", {
                            id: 121835,
                            isOutstream: !0
                        }],
                        ["1011", {
                            id: 121840,
                            isOutstream: !0
                        }],
                        ["1100", {
                            id: 121834,
                            isOutstream: !1
                        }],
                        ["1101", {
                            id: 121838,
                            isOutstream: !0
                        }],
                        ["1110", {
                            id: 121837,
                            isOutstream: !0
                        }],
                        ["1111", {
                            id: 121895,
                            isOutstream: !0
                        }]
                    ]), n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.teads
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.createBitArrayAdOptions = function(e) {
                    var t = this,
                        i = Pa() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop,
                        n = ["1", "0", "0", "0"],
                        r = this._adUnitsMap.get(e.placementMapName);
                    return this._adTypeBitIndexMap.forEach((function(o, a) {
                        var s = o.adType;
                        i.indexOf(s) > -1 && t._config.adTypes.has(s) && r.indexOf(s) > -1 && (n[o.index] = "outstream" === a ? t._mediaType.outstreamEnabled(e).currentlyActive ? "1" : "0" : "1")
                    })), n
                }, t.prototype.updateBidParams = function(e, t, i) {
                    if (1 === e.refreshCount && this._adUnitsMap.has(e.placementMapName)) {
                        var n = this.createBitArrayAdOptions(e),
                            r = this._placementIdMap.get(n.join(""));
                        i.params.placementId = r.id;
                        var o = i.labelAny || [],
                            a = "outstreamEnabled_" + e.placementMapName; - 1 === o.indexOf(a) && r.isOutstream && (o.push(a), i.labelAny = o)
                    }
                    return i
                }, t.prototype.getSlotBidRequests = function(e) {
                    if (this._adUnitsMap.has(e.placementMapName)) {
                        var t = this.createBitArrayAdOptions(e),
                            i = this._placementIdMap.get(t.join(""));
                        return [$r($r({
                            bidder: this.name
                        }, this.getLabels(i.isOutstream, e.placementMapName)), {
                            params: {
                                placementId: i.id,
                                pageId: this._pageId
                            }
                        })]
                    }
                }, t.prototype.getLabels = function(e, t) {
                    var i = [];
                    return e && i.push("outstreamEnabled_" + t), i.length ? {
                        labelAny: i
                    } : {}
                }, t = eo([Ka("TeadsBidder"), zo(), io("design:paramtypes", [Fc, ll])], t)
            }(rl),
            Jl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("telaria"), i._map = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, {
                            supplyCode: "6psex-fm1gy",
                            adCode: "6psex-o3fcq"
                        }],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, {
                            supplyCode: "6psex-bgapy",
                            adCode: "6psex-kln5k"
                        }],
                        [cs.Video_Coll_SOff_Smartphone, {
                            supplyCode: "6psex-axuft",
                            adCode: "6psex-jaes3"
                        }],
                        [cs.Video_Individual_Autoplay_SOff, {
                            supplyCode: "6psex-sootr",
                            adCode: "6psex-0vosj"
                        }]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.telaria
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._map.has(e.name)) {
                        var t = this._map.get(e.name);
                        return [{
                            bidder: this.name,
                            params: $r($r({}, t), {
                                videoId: e.name
                            })
                        }]
                    }
                }, t = eo([Ka("TelariaBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            Yl = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "tlvid", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(0).get()
                }, t = eo([Ka("TripleLiftOutstreamExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Zl = function(e) {
                function t(t, i, n, r) {
                    var o = e.call(this) || this;
                    return o._config = t, o._tripleLiftExperiment = i, o._tripleLiftOutstreamExperiment = n, o._mediaType = r, o.bidderConfig = o._config.partners.getBidderConfig("triplelift"), o.adapterName = "triplelift", o.serverBidderName = "tripl_ss", o._clientEnabled = !1, o._serverEnabled = !1, o.settings = {
                        adserverTargeting: [{
                            key: "hb_format",
                            val: function(e) {
                                var t = e.meta,
                                    i = e.tl_source;
                                return t && t.mediaType || o.tlSourceMap.get(i || "")
                            }
                        }]
                    }, o.tlSourceMap = new Map([
                        ["hdx", "banner"],
                        ["tlx", "native"]
                    ]), o._verticalCategoryMap = new Map([
                        ["Baby", "Family"],
                        ["Family and Parenting", "Family"],
                        ["Natural Parenting", "Family"],
                        ["Pregnancy", "Family"],
                        ["Toddler", "Family"],
                        ["Personal Finance", "Finance"],
                        ["Professional Finance", "Finance"],
                        ["Deals", "Finance"],
                        ["Clean Eating", "Food"],
                        ["Food", "Food"],
                        ["Crafts", "Home"],
                        ["Gardening", "Home"],
                        ["Green Living", "Home"],
                        ["Home Decor and Design", "Home"],
                        ["Pets", "Home"],
                        ["Travel", "Travel"],
                        ["News", "News"],
                        ["Lifestyle", "Lifestyle"],
                        ["Beauty", "Lifestyle"],
                        ["Other", "Lifestyle"],
                        ["Health and Fitness", "Health"],
                        ["Entertainment", "Entertainment"],
                        ["Sports", "Sports"],
                        ["Womens Style", "Womens Style"],
                        ["Mens Style and Grooming", "Mens Style"],
                        ["Tech", "Tech"],
                        ["Wedding", "Wedding"],
                        ["Auto", "Auto"]
                    ]), o._categoryPriorityList = new Set(["Food", "Home", "Family", "Finance", "Travel", "News", "Health", "Entertainment", "Sports", "Womens Style", "Mens Style", "Tech", "Wedding", "Auto", "Lifestyle"]), o._category = Ko(o.getCategory(), "Lifestyle"), o._map = new Map([
                        ["Interstitial_1", []],
                        ["Below_Post_1", []],
                        ["Content_1", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_2", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_3", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_4", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_5", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_6", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_7", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_8", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Content_9", ["nativeMobileContent", "nativeDesktopContent"]],
                        ["Footer_1", []],
                        ["Header_1", []],
                        ["Header_2", []],
                        ["Recipe_1", ["nativeMobileRecipe", "nativeDesktopRecipe"]],
                        ["Recipe_2", ["nativeMobileRecipe", "nativeDesktopRecipe"]],
                        ["Recipe_3", ["nativeMobileRecipe", "nativeDesktopRecipe"]],
                        ["Recipe_4", ["nativeMobileRecipe", "nativeDesktopRecipe"]],
                        ["Recipe_5", ["nativeMobileRecipe", "nativeDesktopRecipe"]],
                        ["Sidebar_1", ["nativeDesktopSidebar"]],
                        ["Sidebar_2", ["nativeDesktopSidebar"]],
                        ["Sidebar_3", ["nativeDesktopSidebar"]],
                        ["Sidebar_4", ["nativeDesktopSidebar"]],
                        ["Sidebar_5", ["nativeDesktopSidebar"]],
                        ["Sidebar_9", ["nativeDesktopSidebar"]]
                    ]), o._videoMap = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, {
                            client: "AdThriveRON_instream_desktopcollapse_prebid_c2s",
                            server: "AdThriveRON_instream_desktopcollapse_prebid"
                        }],
                        [cs.Video_Coll_SOff_Smartphone, {
                            client: "AdThriveRON_instream_mwebsticky_prebid_c2s",
                            server: "AdThriveRON_instream_mwebsticky_prebid"
                        }],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, {
                            client: "AdThriveRON_instream_CTP_prebid_c2s",
                            server: "AdThriveRON_instream_CTP_prebid"
                        }],
                        [cs.Video_Individual_Autoplay_SOff, {
                            client: "AdThriveRON_instream_contextcollapse_prebid_c2s",
                            server: "AdThriveRON_instream_contextcollapse_prebid"
                        }]
                    ]), o._deviceAdTypes = {
                        mobile: ["nativeMobileContent", "nativeMobileRecipe"],
                        desktop: ["nativeDesktopContent", "nativeDesktopRecipe", "nativeDesktopSidebar"]
                    }, o._clientEnabled = "both" === o._tripleLiftExperiment.result || "client" === o._tripleLiftExperiment.result, o._serverEnabled = "both" === o._tripleLiftExperiment.result || "server" === o._tripleLiftExperiment.result, o
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.tripleLift
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.tripleLift
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this,
                        i = (Pa() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop).filter((function(e) {
                            return t._config.adTypes.has(e)
                        }));
                    if (this._map.has(e.placementMapName)) {
                        var n = [],
                            r = "Interstitial" === e.location ? "interstitial" : "standard";
                        this._map.get(e.placementMapName).forEach((function(e) {
                            -1 !== i.indexOf(e) && (r = e)
                        }));
                        var o = this.getInventoryCode(r, e),
                            a = this.isOutstreamEligible(e);
                        return this._clientEnabled && n.push($r($r({
                            bidder: this.name
                        }, this.getLabels(e.placementMapName, a)), {
                            params: {
                                inventoryCode: o
                            }
                        })), this._serverEnabled && n.push({
                            bidder: this.serverBidderName,
                            params: {
                                inventoryCode: o + "_pbs2s"
                            }
                        }), n
                    }
                }, t.prototype.inventoryCodeAppend = function(e) {
                    return this.isOutstreamEligible(e) ? "_BV" : ""
                }, t.prototype.isOutstreamEligible = function(e) {
                    return this._tripleLiftOutstreamExperiment.result && this._mediaType.outstreamEnabled(e).outstreamCapable
                }, t.prototype.getInventoryCode = function(e, t) {
                    if ("standard" === e) return "AdThrive_" + t.placementMapName + "_HDX";
                    if ("interstitial" === e) return "AdThriveRON_interstitial_multisize";
                    var i = "Content_1" === t.placementMapName || "Sidebar_9" === t.placementMapName ? t.location.toLowerCase() : t.placementMapName.toLowerCase().replace(/_(?!.*_)/, ""),
                        n = Pa() ? "mobile" : "desktop",
                        r = this.inventoryCodeAppend(t);
                    return "adthrive" + this._category + "_" + i + "_fixed_" + n + r
                }, t.prototype.getVideoBidParams = function(e, t, i) {
                    var n, r;
                    return {
                        bidder: e,
                        params: {
                            inventoryCode: i,
                            video: $r($r($r($r({}, wa() ? {
                                w: 640,
                                h: 360
                            } : {
                                w: 400,
                                h: 225
                            }), {
                                api: this._config.video.apiValue,
                                mimes: this._config.video.mimeType
                            }), "all" === this._config.video.videoProtocols.scope && {
                                protocols: this._config.video.videoProtocols.protocols
                            }), {
                                playbackmethod: null === (r = null === (n = this._config.video.playbackmethod) || void 0 === n ? void 0 : n.get(t.name)) || void 0 === r ? void 0 : r[0],
                                pos: this._config.video.position.id
                            })
                        }
                    }
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t = [];
                    return this._videoMap.has(e.name) && (this._clientEnabled && t.push(this.getVideoBidParams(this.name, e, this._videoMap.get(e.name).client)), this._serverEnabled && t.push(this.getVideoBidParams(this.serverBidderName, e, this._videoMap.get(e.name).server))), t
                }, t.prototype.getCategory = function() {
                    var e, t, i = this,
                        n = this._config.site.verticals.filter((function(e) {
                            return i._verticalCategoryMap.has(e)
                        })).map((function(e) {
                            return i._verticalCategoryMap.get(e)
                        }));
                    try {
                        for (var r = oo(this._categoryPriorityList), o = r.next(); !o.done; o = r.next()) {
                            var a = o.value;
                            if (-1 !== n.indexOf(a)) return a
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            o && !o.done && (t = r.return) && t.call(r)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, t.prototype.getLabels = function(e, t) {
                    var i = [];
                    return t && i.push("outstreamEnabled_" + e), i.length ? {
                        labelAny: i
                    } : {}
                }, t = eo([Ka("TripleLiftBidder"), zo(), io("design:paramtypes", [Fc, uc, Yl, ll])], t)
            }(rl),
            $l = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("ttd"), i._device = i._config.context.device, i._set = new Set(["Below_Post_1", "Content_1", "Content_2", "Content_3", "Content_4", "Content_5", "Content_6", "Content_7", "Content_8", "Content_9", "Footer_1", "Header_1", "Recipe_1", "Recipe_2", "Recipe_3", "Recipe_4", "Sidebar_1", "Sidebar_2", "Sidebar_3", "Sidebar_4", "Sidebar_5", "Sidebar_9", "Video_Collapse_Autoplay_SoundOff", "Video_Coll_SOff_Smartphone", "Video_In-Post_ClicktoPlay_SoundOn", "Video_Individual_Autoplay_SOff"]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.ttd
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.ttd
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    if (this._set.has(e.placementMapName)) {
                        var t = e.id,
                            i = new RegExp("_" + this._device);
                        return [{
                            bidder: this.name,
                            params: {
                                publisherId: this._config.site.id,
                                siteId: this._config.site.id,
                                placementId: t.replace(i, ""),
                                supplySourceId: "cafemedia"
                            }
                        }]
                    }
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._set.has(e.name)) {
                        var t = "" + e.name;
                        return [{
                            bidder: this.name,
                            params: {
                                publisherId: this._config.site.id,
                                siteId: this._config.site.id,
                                placementId: t,
                                supplySourceId: "cafemedia"
                            }
                        }]
                    }
                }, t = eo([Ka("TTDBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            eu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("undertone"), i._params = {
                        publisherId: 2002
                    }, i._deviceAdTypes = {
                        mobile: ["animatedFooter", "expandableFooter", "interscroller", "miniscroller"],
                        desktop: []
                    }, i._map = new Map([
                        ["Below_Post_1", [{
                            placementId: "2002034",
                            size: [
                                [1, 2]
                            ],
                            adType: "interscroller",
                            highViewability: !0
                        }, {
                            placementId: "2002035",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller",
                            highViewability: !0
                        }, {
                            placementId: "2002036",
                            size: [
                                [300, 250]
                            ],
                            highViewability: !0
                        }]],
                        ["Content_1", [{
                            placementId: "2002001",
                            size: [
                                [1, 2]
                            ],
                            adType: "interscroller"
                        }, {
                            placementId: "2002002",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller"
                        }]],
                        ["Content_2", [{
                            placementId: "2002003",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller"
                        }]],
                        ["Content_3", [{
                            placementId: "2002004",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller"
                        }]],
                        ["Content_4", [{
                            placementId: "2002005",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller"
                        }]],
                        ["Content_5", [{
                            placementId: "2002006",
                            size: [
                                [1, 2]
                            ],
                            adType: "miniscroller"
                        }]],
                        ["Footer_1", [{
                            placementId: "2002033",
                            size: [
                                [320, 50]
                            ],
                            adType: "expandableFooter"
                        }, {
                            placementId: "2002038",
                            size: [
                                [1, 1]
                            ],
                            adType: "expandableFooter",
                            mobileCollapsePlayer: !0
                        }, {
                            placementId: "2002039",
                            size: [
                                [1, 1]
                            ],
                            adType: "animatedFooter"
                        }]],
                        ["Header_1", [{
                            placementId: "2002037",
                            size: [
                                [970, 250]
                            ]
                        }]],
                        ["Interstitial_1", [{
                            placementId: "2002040",
                            size: [
                                [1, 1]
                            ]
                        }]],
                        ["Recipe_1", [{
                            placementId: "2002020",
                            size: [
                                [300, 250]
                            ]
                        }]],
                        ["Recipe_2", [{
                            placementId: "2002021",
                            size: [
                                [300, 250]
                            ]
                        }]],
                        ["Recipe_3", [{
                            placementId: "2002022",
                            size: [
                                [300, 250]
                            ]
                        }]],
                        ["Recipe_4", [{
                            placementId: "2002023",
                            size: [
                                [300, 250]
                            ]
                        }]],
                        ["Sidebar_9", [{
                            placementId: "2002032",
                            size: [
                                [300, 250]
                            ]
                        }]]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.undertone
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this,
                        i = (Pa() ? this._deviceAdTypes.mobile : this._deviceAdTypes.desktop).filter((function(e) {
                            return t._config.adTypes.has(e)
                        }));
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(n) {
                        var r = n.adType,
                            o = n.mobileCollapsePlayer,
                            a = n.size;
                        return (!r && e.hasSize(a[0]) || r && -1 !== i.indexOf(r)) && (!o || !t._config.video.mobileStickyPlayerOnPage)
                    })).map((function(i) {
                        var n = i.placementId,
                            r = i.size,
                            o = i.highViewability;
                        return $r($r({
                            bidder: t.name
                        }, o && e.viewability < t._config.marmalade.hvThreshold ? {
                            labelAny: ["refresh"]
                        } : {}), {
                            params: $r($r({}, t._params), {
                                placementId: n,
                                size: r
                            })
                        })
                    }))
                }, t = eo([Ka("UndertoneBidder"), Ro(), io("design:paramtypes", [Fc])], t)
            }(rl),
            tu = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._mediaType = i, n.bidderConfig = n._config.partners.getBidderConfig("unruly"), n._params = {
                        siteId: 208686
                    }, n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.unruly
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this._mediaType.outstreamEnabled(e),
                        i = t.outstreamCapable,
                        n = t.currentlyActive;
                    if (i && "Video_StickyOutstream" !== e.location) return [$r($r({
                        bidder: this.name
                    }, n ? {} : {
                        labelAny: ["refresh"]
                    }), {
                        params: $r({}, this._params)
                    })]
                }, t = eo([Ka("UnrulyBidder"), zo(), io("design:paramtypes", [Fc, ll])], t)
            }(rl),
            iu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("verizon"), i.adapterName = "aol", i._params = {
                        dcn: Pa() ? "8a969d580177771bc13c2047d6290082" : "8a9694d00177771bcae21c6941d30023"
                    }, i._desktopMap = new Map([
                        ["Content_1", [{
                            size: [300, 250],
                            id: "8a969d580177771bc13c20458198007e"
                        }, {
                            size: [728, 90],
                            id: "8a96918c0177771bc65220467ff60092"
                        }]],
                        ["Content_2", [{
                            size: [300, 250],
                            id: "8a96918c0177771bc652204531fe0091"
                        }]],
                        ["Content_3", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae220463a710058"
                        }]],
                        ["Footer_1", [{
                            size: [728, 90],
                            id: "8a9694d00177771bcae21c6a7d880025"
                        }, {
                            size: [970, 90],
                            id: "8a969d580177771bc13c2046cd280081"
                        }, {
                            size: [320, 50],
                            id: "8a9694d00177771bcae2204408520056"
                        }]],
                        ["Header_1", [{
                            size: [728, 90],
                            id: "8a969d580177771bc13c2045cac4007f"
                        }]],
                        ["Interstitial_1", [{
                            size: [300, 250],
                            id: "8a969449017c7c9d384d9f8170b10066"
                        }, {
                            size: [300, 600],
                            id: "8a969449017c7c9d384d9f80b9970064"
                        }, {
                            size: [320, 480],
                            id: "8a969958017c7c9d2d8a9f812d360081"
                        }, {
                            size: [336, 280],
                            id: "8a969449017c7c9d384d9f80f2a20065"
                        }]],
                        ["Sidebar_1", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae2204449d80057"
                        }]],
                        ["Sidebar_9", [{
                            size: [320, 50],
                            id: "8a969d580177771bc13c2045ff6b0080"
                        }, {
                            size: [300, 600],
                            id: "8a96918c0177771bc6522043c8540090"
                        }, {
                            size: [160, 600],
                            id: "8a969d580177771bc13c2044ea91007d"
                        }, {
                            size: [300, 250],
                            id: "8a96918c0177771bc6521c6b5f4e003f"
                        }]],
                        ["Recipe_1", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae21c6bc7e80027"
                        }]],
                        ["Recipe_2", [{
                            size: [300, 250],
                            id: "8a969d580177771bc13c2044ac08007c"
                        }]]
                    ]), i._mobileMap = new Map([
                        ["Content_1", [{
                            size: [300, 250],
                            id: "8a969d580177771bc13c2048bd0e0085"
                        }, {
                            size: [320, 50],
                            id: "8a969d580177771bc13c204b68670088"
                        }]],
                        ["Content_2", [{
                            size: [300, 250],
                            id: "8a96918c0177771bc652204877c50094"
                        }, {
                            size: [320, 50],
                            id: "8a96918c0177771bc652204b257e0097"
                        }]],
                        ["Content_3", [{
                            size: [300, 250],
                            id: "8a96918c0177771bc6522048f24e0095"
                        }]],
                        ["Content_4", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae220497831005a"
                        }]],
                        ["Content_5", [{
                            size: [300, 250],
                            id: "8a969d580177771bc13c204a5f240087"
                        }]],
                        ["Content_6", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae2204a9092005c"
                        }]],
                        ["Footer_1", [{
                            size: [320, 100],
                            id: "8a96918c0177771bc652204a27cb0096"
                        }, {
                            size: [300, 50],
                            id: "8a9694d00177771bcae22049449a0059"
                        }, {
                            size: [728, 90],
                            id: "8a9694d00177771bcae2204ad481005d"
                        }, {
                            size: [320, 50],
                            id: "8a969d580177771bc13c20480cf50084"
                        }]],
                        ["Interstitial_1", [{
                            size: [300, 250],
                            id: "8a969161017c7c9d32879f82491c007d"
                        }, {
                            size: [300, 600],
                            id: "8a969161017c7c9d32879f8195b3007c"
                        }, {
                            size: [320, 480],
                            id: "8a969958017c7c9d2d8a9f81f2c50082"
                        }, {
                            size: [336, 280],
                            id: "8a969449017c7c9d384d9f81c5660067"
                        }, {
                            size: [320, 50],
                            id: "8a969449017c7c9d384d9f8279950068"
                        }]],
                        ["Recipe_1", [{
                            size: [300, 250],
                            id: "8a96918c0177771bc6522048483a0093"
                        }]],
                        ["Recipe_2", [{
                            size: [300, 250],
                            id: "8a9694d00177771bcae22049e596005b"
                        }]],
                        ["Recipe_3", [{
                            size: [300, 250],
                            id: "8a969d580177771bc13c2049b47f0086"
                        }]]
                    ]), i._map = Pa() ? i._mobileMap : i._desktopMap, i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.verizon
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(t) {
                        var i = t.size;
                        return e.hasSize(i)
                    })).map((function(e) {
                        var i = e.id;
                        return {
                            bidder: t.name,
                            params: $r($r($r({}, t._params), t._config.site.filteredSensitiveCategories.length && {
                                ext: {
                                    sens: t._config.site.filteredSensitiveCategories
                                }
                            }), {
                                pos: i
                            })
                        }
                    }))
                }, t = eo([Ka("VerizonBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            nu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i.bidderConfig = i._config.partners.getBidderConfig("oneVideo"), i.instreamPubId = "CMIExchange", i.outstreamPubId = "CafeMediaOS", i._map = new Map([
                        ["Video_StickyOutstream_1", [{
                            size: [300, 250],
                            id: "1286612"
                        }, {
                            size: [320, 50],
                            id: "1286612"
                        }]]
                    ]), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.oneVideo
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.oneVideo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(t) {
                        var i = t.size;
                        return e.hasSize(i)
                    })).map((function(e) {
                        var i = e.id;
                        return {
                            bidder: t.name,
                            params: {
                                pubId: t.outstreamPubId,
                                video: {
                                    inventoryid: i
                                }
                            }
                        }
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    var t;
                    return [{
                        bidder: this.name,
                        params: {
                            pubId: this.instreamPubId,
                            video: $r($r($r($r({
                                playerWidth: e.size[0],
                                playerHeight: e.size[1],
                                mimes: this._config.video.mimeType
                            }, "all" === this._config.video.videoProtocols.scope ? {
                                protocols: this._config.video.videoProtocols.protocols
                            } : ""), {
                                api: this._config.video.apiValue
                            }), (null === (t = this._config.video.playbackmethod) || void 0 === t ? void 0 : t.get(e.name)) && {
                                playbackmethod: this._config.video.playbackmethod.get(e.name)
                            }), {
                                position: this._config.video.position
                            })
                        }
                    }]
                }, t = eo([Ka("VerizonVideoBidder"), zo(), io("design:paramtypes", [Fc])], t)
            }(rl),
            ru = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    n._config = t, n._prebidMethods = i, n.bidderConfig = n._config.partners.getBidderConfig("yahoossp"), n._params = {
                        display: {
                            dcn: Pa() ? "8a969d580177771bc13c2047d6290082" : "8a9694d00177771bcae21c6941d30023"
                        },
                        video: {
                            dcn: "8a969469017b7bdf59b2e07862af0281"
                        }
                    }, n._videoMap = new Map([
                        [cs.Video_Collapse_Autoplay_SoundOff, "8a96941a017e7e91c49492261bdf000c"],
                        [cs.Video_Coll_SOff_Smartphone, "8a9690ee017e7e91bee0922682f1000b"],
                        [cs.Video_In_Post_ClicktoPlay_SoundOn, "8a969951017e7e91ba38923576c20011"],
                        [cs.Video_Individual_Autoplay_SOff, "8a969951017e7e91ba389236dc470014"]
                    ]), n._displayMap = {
                        desktop: new Map([
                            ["Content_1", [{
                                size: [300, 250],
                                id: "8a969d580177771bc13c20458198007e"
                            }, {
                                size: [728, 90],
                                id: "8a96918c0177771bc65220467ff60092"
                            }]],
                            ["Content_2", [{
                                size: [300, 250],
                                id: "8a96918c0177771bc652204531fe0091"
                            }]],
                            ["Content_3", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae220463a710058"
                            }]],
                            ["Footer_1", [{
                                size: [728, 90],
                                id: "8a9694d00177771bcae21c6a7d880025"
                            }, {
                                size: [970, 90],
                                id: "8a969d580177771bc13c2046cd280081"
                            }, {
                                size: [320, 50],
                                id: "8a9694d00177771bcae2204408520056"
                            }]],
                            ["Header_1", [{
                                size: [728, 90],
                                id: "8a969d580177771bc13c2045cac4007f"
                            }]],
                            ["Interstitial_1", [{
                                size: [300, 250],
                                id: "8a969449017c7c9d384d9f8170b10066"
                            }, {
                                size: [300, 600],
                                id: "8a969449017c7c9d384d9f80b9970064"
                            }, {
                                size: [320, 480],
                                id: "8a969958017c7c9d2d8a9f812d360081"
                            }, {
                                size: [336, 280],
                                id: "8a969449017c7c9d384d9f80f2a20065"
                            }]],
                            ["Sidebar_1", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae2204449d80057"
                            }]],
                            ["Sidebar_9", [{
                                size: [320, 50],
                                id: "8a969d580177771bc13c2045ff6b0080"
                            }, {
                                size: [300, 600],
                                id: "8a96918c0177771bc6522043c8540090"
                            }, {
                                size: [160, 600],
                                id: "8a969d580177771bc13c2044ea91007d"
                            }, {
                                size: [300, 250],
                                id: "8a96918c0177771bc6521c6b5f4e003f"
                            }]],
                            ["Recipe_1", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae21c6bc7e80027"
                            }]],
                            ["Recipe_2", [{
                                size: [300, 250],
                                id: "8a969d580177771bc13c2044ac08007c"
                            }]],
                            ["Video_StickyOutstream_1", [{
                                size: [300, 250],
                                id: "8a969d87017b7be074aae07a22b70005"
                            }]]
                        ]),
                        mobile: new Map([
                            ["Content_1", [{
                                size: [300, 250],
                                id: "8a969d580177771bc13c2048bd0e0085"
                            }, {
                                size: [320, 50],
                                id: "8a969d580177771bc13c204b68670088"
                            }]],
                            ["Content_2", [{
                                size: [300, 250],
                                id: "8a96918c0177771bc652204877c50094"
                            }, {
                                size: [320, 50],
                                id: "8a96918c0177771bc652204b257e0097"
                            }]],
                            ["Content_3", [{
                                size: [300, 250],
                                id: "8a96918c0177771bc6522048f24e0095"
                            }]],
                            ["Content_4", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae220497831005a"
                            }]],
                            ["Content_5", [{
                                size: [300, 250],
                                id: "8a969d580177771bc13c204a5f240087"
                            }]],
                            ["Content_6", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae2204a9092005c"
                            }]],
                            ["Footer_1", [{
                                size: [320, 100],
                                id: "8a96918c0177771bc652204a27cb0096"
                            }, {
                                size: [300, 50],
                                id: "8a9694d00177771bcae22049449a0059"
                            }, {
                                size: [728, 90],
                                id: "8a9694d00177771bcae2204ad481005d"
                            }, {
                                size: [320, 50],
                                id: "8a969d580177771bc13c20480cf50084"
                            }]],
                            ["Interstitial_1", [{
                                size: [300, 250],
                                id: "8a969161017c7c9d32879f82491c007d"
                            }, {
                                size: [300, 600],
                                id: "8a969161017c7c9d32879f8195b3007c"
                            }, {
                                size: [320, 480],
                                id: "8a969958017c7c9d2d8a9f81f2c50082"
                            }, {
                                size: [336, 280],
                                id: "8a969449017c7c9d384d9f81c5660067"
                            }, {
                                size: [320, 50],
                                id: "8a969449017c7c9d384d9f8279950068"
                            }]],
                            ["Recipe_1", [{
                                size: [300, 250],
                                id: "8a96918c0177771bc6522048483a0093"
                            }]],
                            ["Recipe_2", [{
                                size: [300, 250],
                                id: "8a9694d00177771bcae22049e596005b"
                            }]],
                            ["Recipe_3", [{
                                size: [300, 250],
                                id: "8a969d580177771bc13c2049b47f0086"
                            }]],
                            ["Video_StickyOutstream_1", [{
                                size: [300, 50],
                                id: "8a969d87017b7be074aae07a22b70005"
                            }]]
                        ])
                    }, n._setYahooMediaConfig();
                    var r = n._displayMap;
                    return n._map = Pa() ? r.mobile : r.desktop, n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.yahoossp
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "videoEnabled", {
                    get: function() {
                        return this._config.partners.video.yahoossp
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.getSlotBidRequests = function(e) {
                    var t = this;
                    if (this._map.has(e.placementMapName)) return this._map.get(e.placementMapName).filter((function(t) {
                        var i = t.size;
                        return e.hasSize(i)
                    })).map((function(i) {
                        var n = i.id;
                        return {
                            bidder: t.name,
                            params: $r($r({}, "Video_StickyOutstream" !== e.location ? t._params.display : t._params.video), {
                                pos: n
                            })
                        }
                    }))
                }, t.prototype.getVideoSlotBidRequests = function(e) {
                    if (this._videoMap.has(e.name)) return [{
                        bidder: this.name,
                        params: $r($r({}, this._params.video), {
                            pos: this._videoMap.get(e.name)
                        })
                    }]
                }, t.prototype._setYahooMediaConfig = function() {
                    this._prebidMethods.setConfig({
                        yahoossp: {
                            mode: "all"
                        }
                    })
                }, t = eo([Ka("YahooSSPBidder"), zo(), io("design:paramtypes", [Fc, Gc])], t)
            }(rl),
            ou = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._mediaType = i, n.bidderConfig = n._config.partners.getBidderConfig("yieldmo"), n.settings = {
                        adserverTargeting: [{
                            key: "hb_format",
                            val: function(e) {
                                return n._creativeFormatMap.get(n.getCreativeFormatId(e.ad)) || e.mediaType
                            }
                        }]
                    }, n._creativeFormatMap = new Map([
                        ["44", "banner"],
                        ["47", "banner"],
                        ["49", "banner"],
                        ["50", "banner"],
                        ["43", "banner"],
                        ["17", "banner"],
                        ["23", "banner"],
                        ["33", "banner"],
                        ["40", "outstream"],
                        ["51", "outstream"],
                        ["48", "outstream"],
                        ["34", "outstream"],
                        ["14", "miniscroller"],
                        ["16", "miniscroller"],
                        ["37", "miniscroller"],
                        ["15", "miniscroller"],
                        ["18", "native"],
                        ["36", "native"],
                        ["46", "native"],
                        ["10", "native"],
                        ["6", "native"]
                    ]), n._adOptionsMap = new Map([
                        ["100000", {
                            id: "2626064683911553041",
                            isOutstream: !1
                        }],
                        ["110000", {
                            id: "2626064684062547986",
                            isOutstream: !0
                        }],
                        ["111000", {
                            id: "2626064684196765715",
                            isOutstream: !0
                        }],
                        ["110100", {
                            id: "2626064684339372052",
                            isOutstream: !0
                        }],
                        ["110010", {
                            id: "2626064684498755605",
                            isOutstream: !0
                        }],
                        ["111100", {
                            id: "2626064684632973334",
                            isOutstream: !0
                        }],
                        ["111010", {
                            id: "2626064684775579671",
                            isOutstream: !0
                        }],
                        ["111110", {
                            id: "2626064684934963224",
                            isOutstream: !0
                        }],
                        ["101000", {
                            id: "2626064685069180953",
                            isOutstream: !1
                        }],
                        ["101100", {
                            id: "2626064685203398682",
                            isOutstream: !1
                        }],
                        ["101010", {
                            id: "2626064685337616411",
                            isOutstream: !0
                        }],
                        ["101110", {
                            id: "2626064685471834140",
                            isOutstream: !0
                        }],
                        ["100100", {
                            id: "2626064685606051869",
                            isOutstream: !1
                        }],
                        ["100110", {
                            id: "2626064685740269598",
                            isOutstream: !0
                        }],
                        ["100010", {
                            id: "2626064685882875935",
                            isOutstream: !0
                        }],
                        ["110110", {
                            id: "2626807131797397582",
                            isOutstream: !0
                        }],
                        ["110001", {
                            id: "2820437600580345895",
                            isOutstream: !0
                        }]
                    ]), n._bannerMap = ["Below_Post_1", "Content", "Content_1", "Content_2", "Content_3", "Content_4", "Content_5", "Content_6", "Content_7", "Content_8", "Content_9", "Footer_1", "Header_1", "Header_2", "Recipe_1", "Recipe_2", "Recipe_3", "Recipe_4", "Recipe_5", "Sidebar_1", "Sidebar_2", "Sidebar_3", "Sidebar_4", "Sidebar_5", "Sidebar_9", "Video_StickyOutstream_1"], n
                }
                return Jr(t, e), t.prototype.getCreativeFormatId = function(e) {
                    var t = /creative_format_id":([0-9]*)/.exec(e);
                    if (null !== t) return t[1]
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.partners.yieldmo
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.isMiniScroller = function(e) {
                    return e.sequence && this._config.adTypes.has("miniscroller") && ("Content" === e.location || "Recipe" === e.location)
                }, t.prototype.isNative = function(e) {
                    var t = {
                            mobile: new Map([
                                ["Content", "nativeMobileContent"],
                                ["Recipe", "nativeMobileRecipe"]
                            ]),
                            desktop: new Map([
                                ["Content", "nativeDesktopContent"],
                                ["Recipe", "nativeDesktopRecipe"],
                                ["Sidebar", "nativeDesktopSidebar"]
                            ])
                        },
                        i = Pa() ? t.mobile : t.desktop;
                    return e.sequence && i.has(e.location) && this._config.adTypes.has(i.get(e.location))
                }, t.prototype.isOutstream = function(e) {
                    return this._mediaType.outstreamEnabled(e).currentlyActive
                }, t.prototype.isStickyOutstream = function(e) {
                    return "Video_StickyOutstream" === e.location
                }, t.prototype.isMobileOustreamSingleInstance = function(e) {
                    return Pa() && "Content_1" === e.placementMapName && this._mediaType.outstreamEnabled(e).currentlyActive && this._config.adTypes.has("outstreamMobile") && !this._config.video.mobileStickyPlayerOnPage
                }, t.prototype.updateBidParams = function(e, t, i) {
                    if (1 === e.refreshCount) {
                        var n = this.createBitStringAdOptions(e),
                            r = this._adOptionsMap.get(n);
                        if (this._adOptionsMap.has(n)) {
                            i.params.placementId = r.id;
                            var o = i.labelAny || [],
                                a = "outstreamEnabled_" + e.placementMapName; - 1 === o.indexOf(a) && r.isOutstream && (o.push(a), i.labelAny = o)
                        }
                    }
                    return i
                }, t.prototype.createBitStringAdOptions = function(e) {
                    var t = -1 !== this._bannerMap.indexOf(e.placementMapName) ? "1" : "0";
                    return t += this.isOutstream(e) ? "1" : "0", t += this.isMiniScroller(e) ? "1" : "0", t += this.isNative(e) ? "1" : "0", t += this.isMobileOustreamSingleInstance(e) ? "1" : "0", t += this.isStickyOutstream(e) ? "1" : "0"
                }, t.prototype.getSlotBidRequests = function(e) {
                    var t = this.createBitStringAdOptions(e);
                    if (this._adOptionsMap.has(t)) {
                        var i = this._adOptionsMap.get(t);
                        return [$r($r({
                            bidder: this.name
                        }, this.getLabels(i.isOutstream, e.placementMapName)), {
                            params: $r({
                                placementId: i.id
                            }, "Video_StickyOutstream" === e.location && {
                                video: {
                                    placement: 2
                                }
                            })
                        })]
                    }
                }, t.prototype.getLabels = function(e, t) {
                    var i = [];
                    return e && i.push("outstreamEnabled_" + t), i.length ? {
                        labelAny: i
                    } : {}
                }, t = eo([Ka("YieldmoBidder"), zo(), io("design:paramtypes", [Fc, ll])], t)
            }(rl),
            au = function() {
                function e(e, t, i, n, r, o, a, s, c, l, u, d, p, h, f, g, m, y, _, v, b, w, S, C, k, P, E, O, x, T, I, M, A) {
                    var z = this;
                    this._config = e, this._biddersParams = new Map, this._orderedDisplayBidders = [P, p, S, T, I, t, _, m, o, g, b, h, i, r, E, s, c, f, x, d, O, y, k, A, a, n, v, M].filter((function(e) {
                        return z._bidderFilter(e)
                    })), this._orderedVideoBidders = [t, M, I, r, s, l, d, b, u, p, g, y, _, E, m, o, w, C, P].filter((function(e) {
                        return z._bidderFilter(e, !0)
                    }))
                }
                return Object.defineProperty(e.prototype, "orderedDisplayBidders", {
                    get: function() {
                        return this._orderedDisplayBidders
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "orderedVideoBidders", {
                    get: function() {
                        return this._orderedVideoBidders
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(e.prototype, "biddersParams", {
                    get: function() {
                        return this._biddersParams
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype._bidderFilter = function(e, t) {
                    void 0 === t && (t = !1);
                    var i = this._config,
                        n = e.name,
                        r = t ? i.vbho.bidders : i.hbho.bidders,
                        o = t ? "videoEnabled" : "enabled",
                        a = t || !e.updateBidParams;
                    return e[o] && this._holdoutValidation(r, n) && this._ccpaValidation(i.ccpa, n) && this._gdprValidation(i.gdpr, n) && (a || this._biddersParams.set(n, e))
                }, e.prototype._holdoutValidation = function(e, t) {
                    return !e.length || -1 === e.indexOf(t)
                }, e.prototype._ccpaValidation = function(e, t) {
                    return !e.enabled || -1 === e.nonCompliantBidders.indexOf(t)
                }, e.prototype._gdprValidation = function(e, t) {
                    return !e.enabled || -1 === e.nonCompliantBidders.indexOf(t)
                }, e = eo([Ro(), io("design:paramtypes", [Fc, ul, dl, pl, hl, fl, gl, _l, ml, yl, Vl, vl, Cl, Dl, Bl, Fl, ql, Ul, Hl, Ll, Ql, Kl, Xl, Jl, ol, Zl, $l, eu, tu, iu, ru, nu, ou])], e)
            }(),
            su = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "crtvmon", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("CreativeMonitoringExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            cu = function() {
                function e(e, t, i, n) {
                    this._config = e, this._gam = t, this._prebidMethods = i, this._creativeMonitoringExperiment = n, this._auctionData = new Set, this._prebidAdvertiserId = 413678576
                }
                return e.prototype.setupCreativeEventListeners = function() {
                    this._prebidMethods.onEvent("auctionInit", this._storeAuctionData.bind(this)), this._prebidMethods.onEvent("adRenderFailed", this._renderFailedHandler.bind(this)), this._prebidMethods.onEvent("adRenderSucceeded", this._renderSucceededHandler.bind(this)), this._prebidMethods.onEvent("staleRender", this._staleRenderHandler.bind(this)), this._creativeMonitoringExperiment.result && this._gam.slotRenderEnded.on(this._checkSlotRender.bind(this))
                }, e.prototype._storeAuctionData = function(e) {
                    var t = this;
                    e.adUnitCodes.forEach((function(i) {
                        return t._auctionData.add(e.auctionId + "-" + i)
                    }))
                }, e.prototype._deleteStoredAuction = function(e, t) {
                    this._auctionData.delete(e + "-" + t)
                }, e.prototype._renderFailedHandler = function(e) {
                    var t = e.bid;
                    t && this._deleteStoredAuction(t.auctionId, t.adUnitCode);
                    var i = {
                        message: e.message,
                        reason: e.reason
                    };
                    t && t.meta && Object.keys(t.meta).length > 0 ? i.buyerInformation = t.meta : i.markup = t && t.ad, Bo.error("PrebidAuctionManager", "init", "adRenderFailed", i)
                }, e.prototype._staleRenderHandler = function(e) {
                    e && this._deleteStoredAuction(e.auctionId, e.adUnitCode)
                }, e.prototype._renderSucceededHandler = function(e) {
                    var t = e.bid;
                    t && this._deleteStoredAuction(t.auctionId, t.adUnitCode)
                }, e.prototype._isSafeFrame = function(e) {
                    var t = e.element.querySelector("iframe");
                    return !(!t || !t.src)
                }, e.prototype._checkSlotRender = function(e) {
                    var t = this,
                        i = e.event;
                    this._isSafeFrame(e.slot) || i.advertiserId !== this._prebidAdvertiserId || setTimeout((function() {
                        t._logUnknownFailure(e)
                    }), 2e3)
                }, e.prototype._getHeightWidth = function(e) {
                    if (!e) return {};
                    var t = e.split("x").map(Number);
                    return $r({}, Array.isArray(t) && 2 === t.length && {
                        height: t[1],
                        width: t[0]
                    })
                }, e.prototype._getPrebidCreativeWindowData = function(e) {
                    return {
                        adId: e.bidderAdId,
                        bidder: e.bidder,
                        size: e.bidderSize,
                        adserverTargeting: e.targeting
                    }
                }, e.prototype._getPrebidBidderData = function(e) {
                    var t = e.element.querySelector("iframe").contentWindow;
                    if (!t) return {};
                    var i = this._getPrebidCreativeWindowData(t),
                        n = i.adId,
                        r = i.adserverTargeting,
                        o = i.bidder,
                        a = i.size,
                        s = this._getHeightWidth(t && t.bidderSize),
                        c = s.height,
                        l = s.width;
                    return {
                        adId: n,
                        adserverTargeting: r,
                        adUnitCode: e.id,
                        bidder: o,
                        height: c,
                        size: a,
                        width: l
                    }
                }, e.prototype._logUnknownFailure = function(e) {
                    var t = this._config.context,
                        i = e.slot,
                        n = e.event,
                        r = i.servedPrebidBidResponse || this._getPrebidBidderData(i),
                        o = r.adId,
                        a = r.adserverTargeting,
                        s = r.auctionId,
                        c = r.adUnitCode,
                        l = r.bidder,
                        u = r.height,
                        d = r.meta,
                        p = r.size,
                        h = r.width;
                    if (!s || !c || this._auctionData.has(s + "-" + c)) {
                        var f = $r($r($r({
                            adId: o,
                            advertiserDomains: d && d.advertiserDomains || a && a.hb_adomain,
                            bidderSize: p || a && a.hb_size,
                            bidder: l,
                            branch: t.branch,
                            bucket: t.bucket,
                            campaignId: n.campaignId,
                            creativeId: n.creativeId || n.sourceAgnosticCreativeId,
                            lineItemId: n.lineItemId || n.sourceAgnosticLineItemId,
                            message: "An unknown error occurred rendering the Prebid creative",
                            slotSizes: i.sizes,
                            slot: i.location
                        }, h && u && {
                            size: [h, u]
                        }), d && (d.dchain && {
                            dchain: d.dchain
                        } || d.networkId && {
                            networkId: d.networkId
                        })), (!o || o.length < 2) && a && {
                            hbAdId: a.hb_adid
                        });
                        Bo.error("PrebidAuctionManager", "init", "prebidCreativeFailure", f), s && c && this._deleteStoredAuction(s, c)
                    }
                }, e = eo([Ro(), io("design:paramtypes", [Fc, Uc, Gc, su])], e)
            }(),
            lu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "jwb", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.95).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("JwBoostExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            uu = function() {
                function e(e, t, i) {
                    this._config = e, this._prebidMethods = t, this._jwBoostExperiment = i, this._data = {}, this._highViewabilityThreshold = .6, this._staticFirstPartyData = {
                        mcmp: this._config.marmalade.mcmp.filter(ea),
                        site_code: this._config.marmalade.siteCodes.filter(ea),
                        site_id: [this._config.site.id],
                        sens: this._config.site.sensitiveCategories,
                        verticals: this._config.site.verticals,
                        pmp_elig: [this._config.adOptions.pmp]
                    }, this._userSegments = this._config.marmalade.ortbSegments.get("iaba") || [], this._siteSegments = this._config.marmalade.ortbSegments.get("iabc") || [], this._data = $r($r({}, this._userSegments.length && {
                        user: {
                            data: this.buildSegmentData(this._userSegments, 4)
                        }
                    }), this._siteSegments.length && {
                        site: {
                            content: {
                                data: this.buildSegmentData(this._siteSegments, 6)
                            }
                        }
                    })
                }
                return Object.defineProperty(e.prototype, "data", {
                    get: function() {
                        return this._data
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype.buildSegmentData = function(e, t, i) {
                    return void 0 === i && (i = "cafemedia.com"), [{
                        name: i,
                        segment: e,
                        ext: {
                            segtax: t
                        }
                    }]
                }, e.prototype.buildSegmentDataFromArray = function(e, t, i) {
                    return this.buildSegmentData(e.map((function(e) {
                        return {
                            id: e
                        }
                    })), t, i)
                }, e.prototype.setOrtb2Imp = function(e, t, i) {
                    var n, r;
                    if (void 0 === i && (i = !0), t) try {
                        for (var o = oo(Object.keys(e)), a = o.next(); !a.done; a = o.next()) {
                            var s = a.value;
                            i && t.ext && t.ext.data ? t.ext.data[s] = e[s] : t[s] = e[s]
                        }
                    } catch (e) {
                        n = {
                            error: e
                        }
                    } finally {
                        try {
                            a && !a.done && (r = o.return) && r.call(o)
                        } finally {
                            if (n) throw n.error
                        }
                    }
                }, e.prototype._setVideoOrtb2ImpData = function(e, t) {
                    this.setOrtb2Imp({
                        adserver: {
                            name: "gam",
                            adslot: "/" + this._config.gam.account + "/" + this._config.gam.prefix + "_" + t.name + "/" + this._config.site.id
                        }
                    }, e), this._jwBoostExperiment.result && this.setOrtb2Imp({
                        jwTargeting: t.getJwBoostTargeting()
                    }, e)
                }, e.prototype.addOrtb2Imp = function(e, t) {
                    void 0 === t && (t = !1);
                    var i = e.slot,
                        n = e.video,
                        r = {
                            ext: {
                                data: {}
                            }
                        };
                    return i && ka(i, this._config.marmalade.hvThreshold) && this.setOrtb2Imp({
                        pos: "atf"
                    }, r), n && this._setVideoOrtb2ImpData(r, n), i && t && this.setOrtb2Imp({
                        instl: 1
                    }, r), r
                }, e = eo([zo(), io("design:paramtypes", [Fc, Gc, lu])], e)
            }(),
            du = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "sab", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(1).get()
                }, t = eo([Ka("BidLimitExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            pu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "mxrpog", i._choices = [{
                        choice: 4,
                        weight: 50
                    }, {
                        choice: 5,
                        weight: 20
                    }, {
                        choice: 6,
                        weight: 20
                    }, {
                        choice: 7,
                        weight: 10
                    }], i._result = i.run(), t.set(i.key, String(i._result)), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("MaxRequestsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            hu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "dajto", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("DisableAjaxTimeoutExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            fu = {
                buckets: [{
                    precision: 2,
                    max: .1,
                    increment: .01
                }, {
                    precision: 2,
                    max: 5,
                    increment: .05
                }, {
                    precision: 2,
                    max: 20,
                    increment: .1
                }, {
                    precision: 2,
                    max: 100,
                    increment: .5
                }]
            },
            gu = function() {
                function e(e) {
                    var t = this;
                    this._config = e, this._configuration = {
                        suppressEmptyKeys: !0,
                        adserverTargeting: [{
                            key: "hb_bidder",
                            val: function(e) {
                                return e.bidderCode
                            }
                        }, {
                            key: "hb_adid",
                            val: function(e) {
                                return e.adId
                            }
                        }, {
                            key: "hb_pb",
                            val: function(e) {
                                return e.pbCg
                            }
                        }, {
                            key: "hb_size",
                            val: function(e) {
                                return t._config.video.instreamAdUnits.has(e.adUnitCode) ? "" : e.size
                            }
                        }, {
                            key: "hb_deal",
                            val: function(e) {
                                return e.dealId
                            }
                        }, {
                            key: "hb_format",
                            val: function(e) {
                                return e.mediaType
                            }
                        }, {
                            key: "hb_adomain",
                            val: function(e) {
                                var t, i;
                                return (null === (t = e.meta) || void 0 === t ? void 0 : t.advertiserDomains) ? null === (i = e.meta) || void 0 === i ? void 0 : i.advertiserDomains[0] : ""
                            }
                        }]
                    }
                }
                return Object.defineProperty(e.prototype, "configuration", {
                    get: function() {
                        return this._configuration
                    },
                    enumerable: !1,
                    configurable: !0
                }), e = eo([Ro(), io("design:paramtypes", [Fc])], e)
            }(),
            mu = function() {
                function e(e, t, i, n, r, o, a) {
                    this._config = e, this._prebidMethods = t, this._bidLimitExperiment = i, this._maxRequestsExperiment = n, this._disableAjaxTimeoutExperiment = r, this._ortb2 = o, this._standardPrebidBidderSetting = a, this._uspConfig = {
                        usp: {
                            cmpApi: "iab",
                            timeout: 0
                        }
                    }, this._gdprConfig = {
                        gdpr: {
                            cmpApi: "iab",
                            timeout: 1e4,
                            defaultGdprScope: !0,
                            rules: [{
                                purpose: "storage",
                                enforcePurpose: !0,
                                enforceVendor: !0
                            }, {
                                purpose: "basicAds",
                                enforcePurpose: !0,
                                enforceVendor: !0
                            }, {
                                purpose: "measurement",
                                enforcePurpose: !0,
                                enforceVendor: !0
                            }]
                        }
                    }, this._defaultConfig = $r($r({
                        maxRequestsPerOrigin: this._maxRequestsExperiment.result,
                        auctionOptions: {
                            secondaryBidders: this._config.auctionOptions.bidders
                        },
                        bidderSequence: "fixed"
                    }, this._bidLimitExperiment.result && {
                        sendBidsControl: {
                            bidLimit: 3
                        }
                    }), {
                        useBidCache: !0,
                        enableSendAllBids: this._bidLimitExperiment.result,
                        disableAjaxTimeout: this._disableAjaxTimeoutExperiment.result,
                        userSync: {
                            syncsPerBidder: 1,
                            aliasSyncEnabled: !0,
                            enableOverride: !0,
                            filterSettings: {
                                iframe: {
                                    bidders: "*",
                                    filter: "include"
                                }
                            }
                        },
                        gptPreAuction: {
                            mcmEnabled: !0
                        },
                        priceGranularity: fu,
                        cache: {
                            url: "https://prebid.adnxs.com/pbc/v1/cache"
                        },
                        consentManagement: {},
                        targetingControls: {
                            allowTargetingKeys: this._config.prebid.targetingKeys,
                            allowSendAllBidsTargetingKeys: this._config.prebid.sendAllBidsTargetingKeys
                        },
                        schain: {
                            validation: "strict",
                            config: (new Zc).getSupplyChainConfig(this._config.site.id)
                        },
                        ortb2: this._ortb2.data
                    })
                }
                return e.prototype.setDefaultConfig = function() {
                    var e = this.addPrebidConsent(),
                        t = this._defaultConfig;
                    t.consentManagement = e, this._prebidMethods.setConfig(t)
                }, e.prototype.applyClientAndServerBidderSettings = function(e) {
                    var t = this;
                    this._prebidMethods.setBidderSettings(e.reduce((function(e, i) {
                        return t._setupBidderSettings(e, i)
                    }), {
                        standard: this._standardPrebidBidderSetting.configuration
                    }))
                }, e.prototype.aliasBidders = function(e) {
                    var t = this;
                    e.forEach((function(e) {
                        e.adapterName && (e.adapterName !== e.name && t._prebidMethods.setAliasBidder(e.adapterName, e.name), e.serverBidderName && t._prebidMethods.setAliasBidder(e.adapterName, e.serverBidderName))
                    }))
                }, e.prototype._setupBidderSettings = function(e, t) {
                    var i;
                    return e[t.name] = this.getBidderSettings(t, t.name), t.serverBidderName && (e[t.serverBidderName] = this.getBidderSettings(t, t.serverBidderName)), e.standard.adserverTargeting && t.adServerTargeting && (i = e.standard.adserverTargeting).push.apply(i, so(t.adServerTargeting)), e
                }, e.prototype.addPrebidConsent = function() {
                    return !0 === this._config.gdpr.enabled ? this._gdprConfig : this._uspConfig
                }, e.prototype.getBidderSettings = function(e, t) {
                    var i = this;
                    return $r({
                        bidCpmAdjustment: function(e, n) {
                            return Lo(i._config, e, t, n)
                        }
                    }, e.settings)
                }, e = eo([Ro(), io("design:paramtypes", [Fc, Gc, du, pu, hu, uu, gu])], e)
            }(),
            yu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "vpred", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.99).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("PredictiveAnalysisExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            _u = function() {
                function e(e, t) {
                    this._config = e, this._prebidMethods = t, this._s2sConfig = [{
                        accountId: "9262",
                        enabled: !0,
                        bidders: this._config.prebid.s2s.bidders,
                        defaultTtl: 300,
                        timeout: this._config.timeouts.initialBidsRequest - 200,
                        adapter: "prebidServer",
                        endpoint: {
                            p1Consent: "https://prebid-server.rubiconproject.com/openrtb2/auction",
                            noP1Consent: "https://prebid-server.rubiconproject.com/openrtb2/auction"
                        },
                        syncEndpoint: {
                            p1Consent: "https://prebid-server.rubiconproject.com/cookie_sync",
                            noP1Consent: "https://prebid-server.rubiconproject.com/cookie_sync"
                        }
                    }]
                }
                return e.prototype.init = function() {
                    this._prebidMethods.setConfig({
                        s2sConfig: this._s2sConfig.filter((function(e) {
                            return e.bidders.length
                        }))
                    })
                }, e = eo([zo(), io("design:paramtypes", [Fc, Gc])], e)
            }(),
            vu = function(e) {
                function t(t, i, n, r, o, a, s, c, l, u, d, p, h, f) {
                    var g = e.call(this) || this;
                    return g._adthrive = t, g._config = i, g._gam = n, g._s2s = r, g._bidderSetup = o, g._mediaType = a, g._prebidMethods = s, g._prebidConfiguration = c, g._predictiveAnalysisExperiment = l, g._slots = u, g._creativeMonitoring = d, g._ortb2 = p, g.videoAdUnits = [], g.bidsRequested = new Do, g._orderedDisplayBidders = g._bidderSetup.orderedDisplayBidders, g._orderedVideoBidders = g._bidderSetup.orderedVideoBidders, g._analytics = [h, f].filter((function(e) {
                        return e.enabled
                    })), g
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = this._prebidConfiguration,
                        i = this._orderedDisplayBidders,
                        n = so(i, this._orderedVideoBidders);
                    t.setDefaultConfig(), t.aliasBidders(n), this._s2s.init(), this._analytics.forEach((function(e) {
                        return void 0 !== e.init && e.init()
                    })), i.forEach((function(e) {
                        return void 0 !== e.init && e.init()
                    })), t.applyClientAndServerBidderSettings(n), Ia().then((function() {
                        return e._prebidMethods.triggerUserSyncs()
                    })).catch((function(e) {
                        Bo.error("PrebidAuctionManager", "init", "pageLoaded", e)
                    })), this._setEvents(), this._predictiveAnalysisExperiment.result && this._setVideoBidsFilter()
                }, t.prototype._setEvents = function() {
                    var e = this;
                    this._creativeMonitoring.setupCreativeEventListeners(), this._prebidMethods.onEvent("bidWon", (function(t) {
                        var i = e._slots.get(t.adUnitCode);
                        i && (i.servedPrebidBidResponse = t, e._slots.bidServed.emit(i).catch((function() {})))
                    }));
                    var t = function() {
                        !e._mediaType.oneStreamExpResult && e._mediaType.isOutstreamAllowed() || e._updateHighImpactUnitTargeting(), e._prebidMethods.offEvent("beforeRequestBids", t)
                    };
                    this._prebidMethods.onEvent("beforeRequestBids", t), this._predictiveAnalysisExperiment.result && this._setVideoBidsFilter(), this._prebidMethods.onEvent("bidRequested", (function() {
                        e.bidsRequested.emit()
                    }))
                }, t.prototype._setVideoBidsFilter = function() {
                    var e = this;
                    if (this._adthrive.core = this._adthrive.core || {}, this._adthrive.core.predictiveAnalysis = this._adthrive.core.predictiveAnalysis || [], this._adthrive.core.predictiveAnalysis.length) {
                        var t = this._adthrive.core.predictiveAnalysis.filter((function(t) {
                                return "1" === t.chrome === qo() && (i = t.mobile, n = e._config.context.device, "1" === i ? "phone" === n : "tablet" === n || "desktop" === n);
                                var i, n
                            })),
                            i = {};
                        t.forEach((function(e) {
                            var t = e.adomain + "," + e.bidder;
                            i[t] = !0
                        })), this._prebidMethods.setBidsReceivedFilter((function(t) {
                            return t.length && e._config.video.instreamAdUnits.has(t[0].adUnitCode) ? t.filter((function(e) {
                                var t, n, r = !0;
                                return null === (n = null === (t = e.meta) || void 0 === t ? void 0 : t.advertiserDomains) || void 0 === n || n.forEach((function(t) {
                                    var n = t + "," + e.bidder;
                                    i[n] && (r = !1)
                                })), r
                            })) : t
                        }))
                    }
                }, t.prototype._updateSlotTargeting = function(e) {
                    if (this._mediaType.outstreamSlots.has("" + e.placementMapName)) {
                        var t = this._config.adTypes.enabledMinified.map((function(e) {
                            return e.toLowerCase()
                        })).filter((function(e) {
                            return "od" === e || "om" === e
                        }));
                        t.length && this._gam.setSlotTargeting({
                            key: "hi_au",
                            value: t
                        }, e.googleTagSlot)
                    }
                }, t.prototype.instlEnabled = function(e) {
                    return "Interstitial" === e && this._config.adOptions.interstitial.prebid
                }, t.prototype.addSlots = function(e) {
                    var t = this,
                        i = this._orderedDisplayBidders.map((function(t) {
                            return t.getBidRequests(e)
                        })),
                        n = e.filter((function(e) {
                            return "Interstitial" !== e.location || t.instlEnabled(e.location)
                        })).sort((function(e, t) {
                            return e.auctionPriority - t.auctionPriority
                        })).map((function(e) {
                            var n = t.instlEnabled(e.location),
                                r = t._ortb2.addOrtb2Imp({
                                    slot: e
                                }, n);
                            return t._mediaType.oneStreamExpResult && t._updateSlotTargeting(e), $r($r({
                                code: n ? t._config.prebid.interstitialAdUnitCode : e.element.id,
                                mediaTypes: t._mediaType.getMediaType({
                                    slot: e
                                })
                            }, r ? {
                                ortb2Imp: r
                            } : {}), {
                                bids: i.map((function(t) {
                                    return t.get(e.id)
                                })).filter(La).reduce((function(e, t) {
                                    return e.concat(t)
                                }), [])
                            })
                        }));
                    return this._prebidMethods.addAdUnits(n), n
                }, t.prototype._updateAdUnitParams = function(e) {
                    var t, i = this;
                    (null === (t = pbjs.adUnits) || void 0 === t ? void 0 : t.length) && pbjs.adUnits.filter((function(t) {
                        return t.code === e.element.id
                    })).forEach((function(t) {
                        var n = i._ortb2.addOrtb2Imp({
                            slot: e
                        });
                        t.ortb2Imp = n, t.mediaTypes = i._mediaType.getMediaType({
                            slot: e
                        })
                    }))
                }, t.prototype._updateBidParams = function(e) {
                    var t, i = this;
                    (null === (t = pbjs.adUnits) || void 0 === t ? void 0 : t.length) && pbjs.adUnits.filter((function(t) {
                        var i;
                        return t.code === e.element.id && (null === (i = t.bids) || void 0 === i ? void 0 : i.length)
                    })).forEach((function(t) {
                        t.bids.forEach((function(n) {
                            var r, o;
                            n = null !== (o = null === (r = i._bidderSetup.biddersParams.get(n.bidder)) || void 0 === r ? void 0 : r.updateBidParams(e, t, n)) && void 0 !== o ? o : n
                        }))
                    }))
                }, t.prototype._updateHighImpactUnitTargeting = function() {
                    var e = this._gam;
                    Uc.pushToQueue((function() {
                        var t = "hi_au",
                            i = e.getTargetingValuesForKey(t).filter((function(e) {
                                return "od" !== e && "om" !== e
                            }));
                        i.length ? e.setTargeting({
                            key: t,
                            value: i
                        }) : e.clearTargetingForKey(t)
                    }))
                }, t.prototype._includeOutstreamWhenNoInstreamVideo = function(e, t) {
                    var i = this;
                    return this._mediaType.isOutstreamAllowed() && e.forEach((function(e) {
                        i._mediaType.outstreamEnabled(e).outstreamCapable && t.push("outstreamEnabled_" + e.placementMapName)
                    })), t
                }, t.prototype.requestBids = function(e, t, i) {
                    var n = this;
                    return void 0 === t && (t = this._config.timeouts.initialBidsRequest), void 0 === i && (i = []), new Promise((function(r) {
                        var o = e.map((function(e) {
                            return n.instlEnabled(e.location) ? n._config.prebid.interstitialAdUnitCode : e.element.id
                        }));
                        i = n._includeOutstreamWhenNoInstreamVideo(e, i), e.forEach((function(e) {
                            return n._updateBidParams(e)
                        })), e.forEach((function(e) {
                            return n._updateAdUnitParams(e)
                        })), n._prebidMethods.requestBids({
                            adUnitCodes: o,
                            timeout: t,
                            bidsBackHandler: function() {
                                Uc.pushToQueue((function() {
                                    n._prebidMethods.setTargetingForGPTAsync(o), r()
                                }))
                            },
                            labels: i
                        })
                    }))
                }, t.prototype.addVideoSlots = function(e) {
                    var t = this,
                        i = this._orderedVideoBidders.map((function(t) {
                            return t.getVideoBidRequests(e)
                        })),
                        n = e.map((function(e) {
                            var n = t._ortb2.addOrtb2Imp({
                                    video: e
                                }),
                                r = {
                                    code: e.name,
                                    ortb2Imp: n,
                                    mediaTypes: t._mediaType.getMediaType({
                                        video: e
                                    }),
                                    bids: i.map((function(t) {
                                        return t.get(e.name)
                                    })).filter(La).reduce((function(e, t) {
                                        return e.concat(t)
                                    }), [])
                                };
                            return e.videoAdUnit = r, r
                        }));
                    this._prebidMethods.addAdUnits(n)
                }, t.prototype.requestVideoBids = function(e, t) {
                    var i = this;
                    void 0 === t && (t = this._config.timeouts.initialBidsRequest);
                    var n = e.map((function(e) {
                        return e.name
                    }));
                    if (n.length > 0) return new Promise((function(e) {
                        i._prebidMethods.requestBids({
                            adUnitCodes: n,
                            timeout: t,
                            bidsBackHandler: function() {
                                Uc.pushToQueue((function() {
                                    i._prebidMethods.setTargetingForGPTAsync(n), e()
                                }))
                            }
                        })
                    }))
                }, t.prototype.refreshBids = function(e) {
                    return this.requestBids(e, this._config.timeouts.refreshBidsRequest, ["refresh"])
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._prebidMethods.isPrebidLoaded()
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("PrebidAuctionManager"), Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object, Fc, Uc, _u, au, ll, Gc, mu, yu, qc, cu, uu, il, nl])], t)
            }(Hc),
            bu = function() {
                function e(e, t, i) {
                    this._config = e, this._auctionManagers = [i, t], this._auctionManagers = this._auctionManagers.filter((function(e) {
                        return e.enabled
                    }))
                }
                return e.prototype.init = function() {
                    this._auctionManagers.forEach((function(e) {
                        return void 0 !== e.init && e.init()
                    }))
                }, e.prototype.requestBids = function(e) {
                    return Promise.all(this._auctionManagers.map((function(t) {
                        return t.requestBids(e)
                    })))
                }, e.prototype.refreshBids = function(e) {
                    return Promise.all(this._auctionManagers.map((function(t) {
                        return t.refreshBids(e)
                    })))
                }, e.prototype.addSlots = function(e) {
                    this._auctionManagers.forEach((function(t) {
                        void 0 !== t.addSlots && t.addSlots(e)
                    }))
                }, e.prototype.addVideoSlots = function(e) {
                    this._auctionManagers.filter((function(e) {
                        return e.videoEnabled && e.addVideoSlots
                    })).forEach((function(t) {
                        return t.addVideoSlots(e)
                    }))
                }, e.prototype.requestVideoBids = function(e, t) {
                    return Promise.all(this._auctionManagers.filter((function(e) {
                        return e.videoEnabled
                    })).map((function(i) {
                        return i.requestVideoBids(e, t)
                    })))
                }, e.prototype.getAmazonAuctionManager = function() {
                    var e, t;
                    try {
                        for (var i = oo(this._auctionManagers), n = i.next(); !n.done; n = i.next()) {
                            var r = n.value;
                            if (r instanceof $c) return r
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, e = eo([Ka("AuctionManagers"), Ro(), io("design:paramtypes", [Fc, vu, $c])], e)
            }(),
            wu = function() {
                function e(e) {
                    this._commands = e.cmd || []
                }
                return e.prototype.init = function() {
                    var e, t;
                    if (this._commands.length > 0) {
                        try {
                            for (var i = oo(this._commands), n = i.next(); !n.done; n = i.next()) {
                                var r = n.value;
                                this._isGamMethod(r.toString()) ? this._addToGamQueue(r) : this._call(r)
                            }
                        } catch (t) {
                            e = {
                                error: t
                            }
                        } finally {
                            try {
                                n && !n.done && (t = i.return) && t.call(i)
                            } finally {
                                if (e) throw e.error
                            }
                        }
                        this._commands = []
                    }
                }, e.prototype.push = function(e) {
                    this._commands.length > 0 ? this._commands.push(e) : this._isGamMethod(e.toString()) ? this._addToGamQueue(e) : this._call(e)
                }, e.prototype._call = function(e) {
                    e.call(void 0)
                }, e.prototype._isGamMethod = function(e) {
                    return e && (-1 !== e.indexOf("setTargeting(") || -1 !== e.indexOf("googletag") || -1 !== e.indexOf("pubads"))
                }, e.prototype._addToGamQueue = function(e) {
                    var t = this;
                    Uc.pushToQueue((function() {
                        t._call(e)
                    }))
                }, e = eo([Ro(), to(0, Ao("AdThrive")), io("design:paramtypes", [Object])], e)
            }(),
            Su = function() {
                function e() {}
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }(),
            Cu = function() {
                function e(e, t, i, n) {
                    this._auctionManagers = e, this._config = t, this._googleAdManager = i, this._slots = n, this.added = new Do, this.cleared = new Do, this.displayed = new Do, this.displaying = new Do, this.refreshed = new Do, this.refreshing = new Do, this.refreshingBids = new Do, this.refreshedBids = new Do, this.requestingBids = new Do, this.requestedBids = new Do, this.refreshInterval = 25e3
                }
                return e.prototype.add = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i = this;
                        return ro(this, (function(n) {
                            switch (n.label) {
                                case 0:
                                    return [4, this._googleAdManager.waitForQueue()];
                                case 1:
                                    return n.sent(), (t = this._googleAdManager.defineSlots(this.castArray(e))).forEach((function(e) {
                                        e.setViewability(i._config.marmalade), i._config.clsOptimizedAds.setStyle(e.element, e.location)
                                    })), this._auctionManagers.addSlots(t), this._slots.add(t), [4, this.added.emit(t)];
                                case 2:
                                    return n.sent(), [2, t]
                            }
                        }))
                    }))
                }, e.prototype.clear = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i = this;
                        return ro(this, (function(n) {
                            switch (n.label) {
                                case 0:
                                    return (t = this.castArray(e)).forEach((function(e) {
                                        e.displayed = !1, i.setMinDimensions(e.element)
                                    })), this._googleAdManager.clearSlots(t), [4, this.cleared.emit(t)];
                                case 1:
                                    return n.sent(), [2, t]
                            }
                        }))
                    }))
                }, e.prototype.destroy = function(e) {
                    var t = this.castArray(e);
                    return this.pauseRefresh(t), this._slots.remove(t), this._googleAdManager.destroySlots(t), t
                }, e.prototype.rebuild = function(e) {
                    var t, i, n = this,
                        r = this.castArray(e),
                        o = this._googleAdManager,
                        a = function(e) {
                            Uc.pushToQueue((function() {
                                var t = ["refresh", "inf_scroll", "decref", "nref", "hvp", "lazy"].reduce((function(t, i) {
                                    var n = e.getTargeting(i);
                                    return n.length && t.push({
                                        key: i,
                                        value: n
                                    }), t
                                }), []);
                                o.destroySlots(n.castArray(e)), o.defineSlots(n.castArray(e)), e.setTargeting(t)
                            }))
                        };
                    try {
                        for (var s = oo(r), c = s.next(); !c.done; c = s.next()) {
                            a(c.value)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            c && !c.done && (i = s.return) && i.call(s)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    return r
                }, e.prototype.refresh = function(e, t) {
                    return void 0 === t && (t = !0), no(this, void 0, void 0, (function() {
                        var i, n, r, o, a, s, c = this;
                        return ro(this, (function(l) {
                            switch (l.label) {
                                case 0:
                                    i = this.castArray(e);
                                    try {
                                        for (n = oo(i), r = n.next(); !r.done; r = n.next())(o = r.value).refreshCount = o.refreshCount + 1, o.servedPrebidBidResponse = void 0
                                    } catch (e) {
                                        a = {
                                            error: e
                                        }
                                    } finally {
                                        try {
                                            r && !r.done && (s = n.return) && s.call(n)
                                        } finally {
                                            if (a) throw a.error
                                        }
                                    }
                                    return [4, this.refreshing.emit(i)];
                                case 1:
                                    return l.sent(), [4, Promise.all([!t || Xo(this._config.timeouts.refreshBidsRequest), this.refreshBids(i)]).then((function() {
                                        return c._googleAdManager.refreshSlots(i)
                                    }))];
                                case 2:
                                    return l.sent(), [4, this.refreshed.emit(i)];
                                case 3:
                                    return l.sent(), [2, i]
                            }
                        }))
                    }))
                }, e.prototype.display = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i = this;
                        return ro(this, (function(n) {
                            switch (n.label) {
                                case 0:
                                    return t = this.castArray(e), [4, this.displaying.emit(t)];
                                case 1:
                                    return n.sent(), [4, this.requestBids(t).then((function() {
                                        return i._googleAdManager.displaySlots(t)
                                    }))];
                                case 2:
                                    return n.sent(), t.forEach((function(e) {
                                        e.displayed = !0
                                    })), [4, this.displayed.emit(t)];
                                case 3:
                                    return n.sent(), [2, t]
                            }
                        }))
                    }))
                }, e.prototype.inView = function(e) {
                    var t = this,
                        i = this.castArray(e);
                    return i.forEach((function(e) {
                        return t.setRefreshTimeout(e)
                    })), i
                }, e.prototype.outOfView = function(e) {
                    var t = this,
                        i = this.castArray(e);
                    return i.filter((function(e) {
                        return !e.alwaysInView
                    })).filter((function(e) {
                        return "IntersectionObserver" in window ? e.outOfViewGPT && e.outOfViewIO : e.outOfViewGPT
                    })).forEach((function(e) {
                        var i = e.element.querySelector("div > iframe");
                        Sa(e.element) && i && Sa(i) && t.clearRefreshTimeout(e)
                    })), i
                }, e.prototype.pauseRefresh = function(e) {
                    var t = this,
                        i = this.castArray(e);
                    return i.filter((function(e) {
                        return e.refreshTimeout
                    })).forEach((function(e) {
                        e.refreshPaused = !0, t.clearRefreshTimeout(e)
                    })), i
                }, e.prototype.resumeRefresh = function(e) {
                    var t = this,
                        i = this.castArray(e);
                    return i.filter((function(e) {
                        return e.refreshPaused
                    })).forEach((function(e) {
                        e.refreshPaused = !1, t.setRefreshTimeout(e)
                    })), i
                }, e.prototype.updateRefreshTimeout = function(e, t) {
                    var i = this,
                        n = this.castArray(e);
                    return n.forEach((function(e) {
                        e.refreshInterval = t, e.refreshTimeout && (i.clearRefreshTimeout(e), i.setRefreshTimeout(e))
                    })), n
                }, e.prototype.clearRefreshTimeout = function(e, t) {
                    void 0 === t && (t = !1), this.castArray(e).filter((function(e) {
                        return e.refreshTimeout
                    })).forEach((function(e) {
                        window.clearTimeout(e.refreshTimeout), e.refreshTimeout = void 0, t ? e.viewableDuration = 0 : e.viewableSince && (e.viewableDuration += (new Date).getTime() - e.viewableSince.getTime())
                    }))
                }, e.prototype.setRefreshTimeout = function(e) {
                    var t = this;
                    this.castArray(e).filter((function(e) {
                        return !e.refreshTimeout
                    })).forEach((function(e) {
                        var i = Ko(e.refreshInterval, t.refreshInterval);
                        i > 0 && (e.viewableSince = new Date, e.refreshTimeout = window.setTimeout((function() {
                            e.viewableDuration = 0, e.refreshInterval = void 0, e.refreshTimeout = void 0, t.refresh(e).catch((function(e) {}))
                        }), i - e.viewableDuration))
                    }))
                }, e.prototype.requestBids = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i = this;
                        return ro(this, (function(n) {
                            switch (n.label) {
                                case 0:
                                    return (t = this.castArray(e).filter((function(e) {
                                        return e.enabledForAuction && (!e.lazy || i._config.lazyLoad.lzhb)
                                    }))).length > 0 ? [4, this.requestingBids.emit(t)] : [3, 4];
                                case 1:
                                    return n.sent(), [4, this._auctionManagers.requestBids(t)];
                                case 2:
                                    return n.sent(), [4, this.requestedBids.emit(t)];
                                case 3:
                                    n.sent(), n.label = 4;
                                case 4:
                                    return [2, t]
                            }
                        }))
                    }))
                }, e.prototype.refreshBids = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t;
                        return ro(this, (function(i) {
                            switch (i.label) {
                                case 0:
                                    return (t = this.castArray(e).filter((function(e) {
                                        return e.enabledForAuction
                                    }))).length > 0 ? [4, this.refreshingBids.emit(t)] : [3, 4];
                                case 1:
                                    return i.sent(), [4, this._auctionManagers.refreshBids(t)];
                                case 2:
                                    return i.sent(), [4, this.refreshedBids.emit(t)];
                                case 3:
                                    i.sent(), i.label = 4;
                                case 4:
                                    return [2, t]
                            }
                        }))
                    }))
                }, e.prototype.castArray = function(e) {
                    if ("string" == typeof e) {
                        var t = this._slots.get(e);
                        return void 0 !== t ? [t] : []
                    }
                    return Array.isArray(e) ? e : [e]
                }, e.prototype.setMinDimensions = function(e) {
                    var t = getComputedStyle(e, null);
                    e.style.minHeight = t.getPropertyValue("height"), e.style.minWidth = t.getPropertyValue("width")
                }, e = eo([Ka("SlotManager"), Ro(), io("design:paramtypes", [bu, Fc, Uc, qc])], e)
            }(),
            ku = function() {
                function e() {
                    this.wasClosed = !1, this.wasStarted = !1, this.totalTimeCollapsed = 0
                }
                return e = eo([Ka("CollapsibleVideoLoggingStore"), Ro()], e)
            }(),
            Pu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "UserPageDataLoggingExperiment", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set("upl", i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.25).get()
                }, t = eo([Ka("UserPageDataLoggingExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Eu = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.key = "UserPageDataPrivacyLoggingExperiment", t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("UserPageDataPrivacyLoggingExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Ou = function(e) {
                function t(t, i, n, r, o, a, s, c) {
                    var l = e.call(this) || this;
                    return l._config = t, l._pageManager = i, l._prebidMethods = n, l._slotManager = r, l._userPageDataLoggingExperiment = o, l._userPageDataPrivacyLoggingExperiment = a, l._userPageDataLogEvents = s, l._collapsibleVideoLoggingStore = c, l._userPrivacyData = {}, l._getUserData = function() {
                        return $r($r({
                            device: l._config.context.device,
                            timePageOpen: Oa() - l._config.timing.started,
                            timeOnPage: l._config.timing.totalTimeOnPage,
                            viewportWidth: window.innerWidth,
                            viewportHeight: window.innerHeight,
                            video: {
                                nonclose: !l._collapsibleVideoLoggingStore.wasClosed,
                                playerName: l._collapsibleVideoLoggingStore.playerName,
                                totalTimeCollapsed: l._collapsibleVideoLoggingStore.totalTimeCollapsed,
                                wasStarted: l._collapsibleVideoLoggingStore.wasStarted
                            }
                        }, l._userPrivacyData), !l._config.gdpr.enabled && !l._config.ccpa.userOptedOut && {
                            uid1: Ua("adserver.org", l._prebidMethods.isPrebidLoaded())
                        })
                    }, l._legacy = 1 === l._config.impressionLog.enabled, l
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    if (!this._legacy) {
                        var t = this._config.disableAds.reasons;
                        Promise.all([0 !== t.size ? 0 : this._slotManager.requestingBids.once().then((function() {
                            return Oa()
                        })), 0 !== t.size ? 0 : this._slotManager.requestedBids.once().then((function() {
                            return Oa()
                        })), 0 !== t.size ? 0 : this._slotManager.displayed.once().then((function() {
                            return Oa()
                        })), Ia()]).then((function(t) {
                            var i = ao(t, 3),
                                n = i[0],
                                r = i[1],
                                o = i[2];
                            return e._setTimingData(n, r, o)
                        })).catch((function(e) {
                            return Bo.error("UserPageDataComponent", "init", e)
                        }))
                    }
                    Pa() && this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.visibilityChange], (function() {
                        "hidden" === document.visibilityState && e._logUserData()
                    })), this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload, this._pageManager.pageHide], (function() {
                        return e._logUserData()
                    })), this._logUserPrivacyData().catch((function() {
                        Bo.error("_logUserPrivacyData: ", "Could not log user privacy.")
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._userPageDataLoggingExperiment.result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype._setTimingData = function(e, t, i) {
                    if (window.performance && window.performance.timing) {
                        var n = window.performance.timing;
                        if (n && 0 !== n.navigationStart) {
                            var r = {
                                pageLoad: n.loadEventStart - n.navigationStart,
                                domainLookup: n.domainLookupEnd - n.domainLookupStart,
                                connect: n.connectEnd - n.connectStart,
                                request: n.responseStart - n.requestStart,
                                response: n.responseEnd - n.responseStart,
                                navigation: n.fetchStart - n.navigationStart,
                                domInteractive: n.domInteractive - n.navigationStart,
                                domContentLoaded: n.domContentLoadedEventStart - n.navigationStart
                            };
                            if (Object.keys(r).map((function(e) {
                                    return r[e]
                                })).every((function(e) {
                                    return !isNaN(e) && e >= 0 && e < 36e5
                                }))) {
                                var o = this._config.disableAds.reasons;
                                this._timingData = $r($r($r({}, r), this._config.timing.timingData), {
                                    disableAds: o.size > 0 ? so(o).join(",") : "none",
                                    auctionStarted: e,
                                    auctionFinished: t,
                                    displayed: i
                                })
                            }
                        }
                    }
                }, t.prototype._logUserData = function() {
                    this._userPageDataLogEvents.loggingData.emit().catch(null), this._userPageDataLogEvents.setUserPageData($r($r({}, !this._legacy && this._timingData && {
                        UserPageTimingData: this._timingData
                    }), {
                        UserPageDataLoggingComponent: this._getUserData()
                    }))
                }, t.prototype._logUserPrivacyData = function() {
                    return no(this, void 0, void 0, (function() {
                        var e;
                        return ro(this, (function(t) {
                            switch (t.label) {
                                case 0:
                                    return this._userPageDataPrivacyLoggingExperiment.result ? (e = this, [4, this._getUserPrivacyData()]) : [3, 2];
                                case 1:
                                    e._userPrivacyData = t.sent(), t.label = 2;
                                case 2:
                                    return [2]
                            }
                        }))
                    }))
                }, t.prototype._getUserPrivacyData = function() {
                    return no(this, void 0, void 0, (function() {
                        var e;
                        return ro(this, (function(t) {
                            switch (t.label) {
                                case 0:
                                    return e = {
                                        gpc: "navigator" in window && "globalPrivacyControl" in window.navigator ? window.navigator.globalPrivacyControl : null
                                    }, [4, this._getDataConsent()];
                                case 1:
                                    return [2, (e.dcp = t.sent(), e)]
                            }
                        }))
                    }))
                }, t.prototype._getDataConsent = function() {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    if (!("dataConsentPreference" in document)) return [3, 4];
                                    e.label = 1;
                                case 1:
                                    return e.trys.push([1, 3, , 4]), [4, document.dataConsentPreference()];
                                case 2:
                                    return [2, e.sent()];
                                case 3:
                                    return e.sent(), [2, null];
                                case 4:
                                    return [2, null]
                            }
                        }))
                    }))
                }, t = eo([Ka("UserPageDataLoggingComponent"), zo(), io("design:paramtypes", [Fc, bc, Gc, Cu, Pu, Eu, _c, ku])], t)
            }(Su),
            xu = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.key = "AdDensityExperiment", t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.25).get()
                }, t = eo([Ka("AdDensityExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Tu = function() {
                return window.location.origin + "/" === Iu(window.location.href)
            },
            Iu = function(e) {
                return e.split("?")[0]
            },
            Mu = function(e) {
                function t(t, i, n, r, o, a, s) {
                    var c = e.call(this) || this;
                    return c._gam = t, c._config = i, c._adDensityExperiment = n, c._slots = r, c._slotManager = o, c._pageManager = a, c._userPageDataLogEvents = s, c._initialSlotsTimeout = 1e4, c._addToMainContent = new Set(["Below_Post"]), c._slotsForAdDensity = new Set(["Content", "Recipe", "Native_Recipe", "Sponsor_Tile", "Below_Post", "Footer"]), c._mainContent = null, c._commentElem = null, c._heightsRegistered = !1, c._initMainContentHeight = null, c._endMainContentHeight = null, c._slotsHeightLoad = null, c._slotsHeightEnd = null, c._slotsHeightVideo = null, c._slotsForInitial = new Set, c._slotsForMainContent = new Set, c._slotsForEnd = new Set, c
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._mainContent = function() {
                        var e = document.querySelectorAll("article");
                        if (0 === e.length) return null;
                        var t = e.item(0);
                        return e.forEach((function(e) {
                            e.offsetHeight > t.offsetHeight && (t = e)
                        })), t && t.offsetHeight > 1.5 * window.innerHeight ? t : null
                    }(), null !== this._mainContent && (this._initObserver(this._mainContent), this._gam.slotOnload.on((function() {
                        e._heightsRegistered || (setTimeout((function() {
                            e._getSlotHeights()
                        }), e._initialSlotsTimeout), e._heightsRegistered = !0)
                    })), this._slotManager.added.on((function(t) {
                        t.some((function(e) {
                            return e.infinite
                        })) || e._addSlots(t)
                    })), this._userPageDataLogEvents.addCallbackToQueue([this._pageManager.beforeUnload], (function() {
                        return e._logAdDensity()
                    })))
                }, t.prototype._logAdDensity = function() {
                    var e = $r($r($r({}, this._initMainContentHeight && this._slotsHeightLoad && {
                        addensload: Math.round(this._slotsHeightLoad / this._initMainContentHeight * 100)
                    }), this._endMainContentHeight && this._slotsHeightEnd && {
                        addensend: Math.round(this._slotsHeightEnd / this._endMainContentHeight * 100)
                    }), this._endMainContentHeight && this._slotsHeightVideo && {
                        addensvid: Math.round(this._slotsHeightVideo / this._endMainContentHeight * 100)
                    });
                    Object.keys(e).length > 0 && this._userPageDataLogEvents.setUserPageData({
                        AdDensityComponent: e
                    })
                }, t.prototype._addSlots = function(e) {
                    var t = this;
                    e.filter((function(e) {
                        return t._slotsForAdDensity.has(e.location)
                    })).forEach((function(e) {
                        e.lazy || (t._slotsForInitial.add(e.name), t._addToMainContent.has(e.location) && t._slotsForMainContent.add(e.name)), t._slotsForEnd.add(e.name)
                    }))
                }, t.prototype.isSlotInMainContent = function(e) {
                    var t;
                    return !(!(null === (t = this._mainContent) || void 0 === t ? void 0 : t.querySelector("#" + e.id)) || this.isSlotInComment(e))
                }, t.prototype.isSlotInComment = function(e) {
                    return !(!this._commentElem || !this._commentElem.querySelector("#" + e.id))
                }, t.prototype._getSlotHeights = function() {
                    var e = this,
                        t = 0,
                        i = 0;
                    this._slots.get().forEach((function(n) {
                        e._slotsForInitial.has(n.name) && ("Content" !== n.location || e.isSlotInMainContent(n)) && (t += n.element.offsetHeight), e._slotsForMainContent.has(n.name) && (i += n.element.offsetHeight)
                    })), this._slotsHeightLoad = t, this._mainContent && (this._initMainContentHeight = null !== this._commentElem ? this._mainContent.offsetHeight - this._commentElem.offsetHeight : this._mainContent.offsetHeight, this._initMainContentHeight += i)
                }, t.prototype._initObserver = function(e) {
                    var t = e.querySelector("div #comments, section .comments");
                    this._observer = this.getIntersectionObserver(t), null !== t ? (this._commentElem = t, this._observer.observe(this._commentElem)) : this._observer.observe(e)
                }, t.prototype.getIntersectionObserver = function(e) {
                    var t = this;
                    return new IntersectionObserver((function(i) {
                        var n, r, o, a;
                        try {
                            for (var s = oo(i), c = s.next(); !c.done; c = s.next()) {
                                var l = c.value;
                                null !== t._initMainContentHeight && (null === e && l.boundingClientRect.top < 0 && (t._calculateSlotHeightsAtEnd(), null === (o = t._observer) || void 0 === o || o.unobserve(t._mainContent)), null !== e && l.boundingClientRect.top > 0 && (t._calculateSlotHeightsAtEnd(), null === (a = t._observer) || void 0 === a || a.unobserve(e)))
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                c && !c.done && (r = s.return) && r.call(s)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }), {})
                }, t.prototype._calculateSlotHeightsAtEnd = function() {
                    var e = this,
                        t = 0,
                        i = 0;
                    if (this._slots.get().forEach((function(n) {
                            e._slotsForEnd.has(n.name) && ("Content" !== n.location || e.isSlotInMainContent(n)) && (t += n.element.offsetHeight), e._slotsForMainContent.has(n.name) && (i += n.element.offsetHeight)
                        })), this._slotsHeightEnd = t, this._mainContent && (this._endMainContentHeight = null !== this._commentElem ? this._mainContent.offsetHeight - this._commentElem.offsetHeight : this._mainContent.offsetHeight, this._endMainContentHeight += i), this._config.video.playlistPlayerAdded) {
                        var n = document.querySelector(".adthrive-collapse-player");
                        t += n ? n.offsetHeight : 0
                    }
                    this._config.video.contextualPlayerAdded && document.querySelectorAll(".adthrive-video-player").forEach((function(e) {
                        t += e.offsetHeight
                    }));
                    if (this._config.video.sekindoPlayerAdded) {
                        var r = document.querySelector(".adthrive-sekindo-player");
                        t += r ? r.offsetHeight : 0
                    }
                    this._slotsHeightVideo = t
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._adDensityExperiment.result && "IntersectionObserver" in window && !(null !== document.querySelector("body.home") || null !== document.querySelector("body.archive")) && !Tu()
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("AdDensityComponent"), zo(), io("design:paramtypes", [Uc, Fc, xu, qc, Cu, bc, _c])], t)
            }(Su),
            Au = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    if (this._config.context.querystring.has("ad_test")) {
                        var e = this._config.context.querystring.get("ad_test");
                        this._gam.setTargeting({
                            key: "sec",
                            value: e.split(",").map((function(e) {
                                return "test" + e
                            }))
                        })
                    }
                }, t = eo([Ka("AdTestComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            zu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "bmetrics", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.99).get()
                }, t = eo([Ka("BrandMetricsExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Ru = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._brandMetricsExperiment = t, r._gam = i, r._prebidAuctionManager = n, r._url = "https://cdn.brandmetrics.com/tag/aa466d868b2742ffa2cc31bb6341dc12/cafemedia.js", r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._prebidAuctionManager.bidsRequested.once().then((function() {
                        e._load()
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._brandMetricsExperiment.result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype._load = function() {
                    var e = this;
                    ua(this._url).then((function() {
                        return e._monitorSurvey()
                    })).catch((function() {}))
                }, t.prototype._monitorSurvey = function() {
                    var e = this;
                    window._brandmetrics = window._brandmetrics || [], window._brandmetrics.push({
                        cmd: "_querySurvey",
                        val: {
                            callback: function(t, i) {
                                t && i && i.measurementId && e._gam.setTargeting({
                                    key: "bms",
                                    value: [i.measurementId.toString()]
                                })
                            }
                        }
                    })
                }, t = eo([Ka("BrandMetrics"), zo(), io("design:paramtypes", [zu, Uc, vu])], t)
            }(Su),
            ju = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    ! function(e) {
                        var t = document.body,
                            i = "adthrive-device-" + e;
                        if (!t.classList.contains(i)) try {
                            t.classList.add(i)
                        } catch (e) {
                            Bo.error("BodyDeviceClassComponent", "init", {
                                message: e.message
                            });
                            var n = "classList" in document.createElement("_");
                            Bo.error("BodyDeviceClassComponent", "init.support", {
                                support: n
                            })
                        }
                    }(this._config.context.device)
                }, t = eo([Ka("BodyDeviceClassComponent"), zo(), io("design:paramtypes", [Fc])], t)
            }(Su),
            Du = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._prebidMethods = i, n.ccpaRequired = n._config.ccpa.required, n.privacyString = n._config.ccpa.privacyString, n.ccpaNotApplicable = n._config.ccpa.ccpaNotApplicable, n.ccpaOptIn = n._config.ccpa.ccpaOptIn, n.ccpaOptOut = n._config.ccpa.ccpaOptOut, n.gpcEnabled = !!n._config.ccpa.gpcEnabled, n.gpcUpdated = !1, n.globalPrivacyControl = window.navigator.globalPrivacyControl, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    window.__uspapi = this.uspapi.bind(this), this.addLocatorFrame(), this.ccpaRequired ? (this.setGpcString(), !0 === this.gpcEnabled ? this.setPrivacyString(this.ccpaOptOut) : this.setPrivacyString(this.ccpaOptIn), this.addOptOutLink(), this.setDeviceAccess()) : this.setPrivacyString(this.ccpaNotApplicable)
                }, t.prototype.setPrivacyString = function(e, t) {
                    void 0 === t && (t = !1);
                    var i = this.ccpaRequired && this.privacyString === this.ccpaNotApplicable,
                        n = !this.ccpaRequired && this.privacyString !== this.ccpaNotApplicable;
                    ("" === this.privacyString || !0 === t || i || n || this.gpcUpdated) && (document.cookie = "usprivacy=" + e, this.privacyString = e)
                }, t.prototype.setGpcString = function() {
                    null !== this.gpcEnabled && !1 !== this.gpcEnabled || !this.globalPrivacyControl ? !0 !== this.gpcEnabled || this.globalPrivacyControl || (localStorage.removeItem("adthrive_gpc"), this.gpcEnabled = this.globalPrivacyControl, this.gpcUpdated = !0) : (localStorage.setItem("adthrive_gpc", "" + this.globalPrivacyControl), this.gpcEnabled = !!("" + this.globalPrivacyControl), this.gpcUpdated = !0)
                }, t.prototype.setDeviceAccess = function() {
                    var e = this.privacyString === this.ccpaOptIn;
                    this._prebidMethods.setConfig({
                        deviceAccess: e
                    })
                }, t.prototype.addOptOutLink = function() {
                    var e = this,
                        t = "Do not sell my personal information.",
                        i = "Customize my ad experience.",
                        n = this.privacyString === this.ccpaOptIn ? t : i,
                        r = document.createElement("div");
                    r.className = "adthrive-ccpa-link", r.innerHTML = "Information from your device can be used to personalize your ad experience. <br> ";
                    var o = document.createElement("a");
                    o.innerHTML = n, o.addEventListener("click", function() {
                        e.privacyString === e.ccpaOptIn ? (e.setPrivacyString(e.ccpaOptOut, !0), o.textContent = i) : (e.setPrivacyString(e.ccpaOptIn, !0), o.textContent = t), e.setDeviceAccess()
                    }.bind(this)), r.appendChild(o), this._config.footer.elements.push({
                        order: 1,
                        element: r
                    })
                }, t.prototype.uspapi = function(e, t, i) {
                    i({
                        command: e,
                        version: t,
                        uspString: ja("usprivacy")
                    }, !0)
                }, t.prototype.addLocatorFrame = function() {
                    if (null === document.getElementById("__uspapiLocator")) {
                        var e = document.createElement("iframe");
                        e.style.display = "none", e.id = "__uspapiLocator", e.name = "__uspapiLocator", document.body.appendChild(e)
                    }
                }, t = eo([Ka("CCPAComponent"), zo(), io("design:paramtypes", [Fc, Gc])], t)
            }(Su),
            Bu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this._config.comscore,
                        t = e.comscore,
                        i = e.comscoreMessage;
                    t && this._config.footer.elements.push({
                        order: 2,
                        element: "<span>An Elite " + i + " Publisher</span>"
                    })
                }, t = eo([Ka("ComscoreFooterComponent"), zo(), io("design:paramtypes", [Fc])], t)
            }(Su),
            Vu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "confiant", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "exp" : "prod"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("ConfiantRefreshExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Lu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "cnfep", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(1).get()
                }, t = eo([Ka("ConfiantEndpointExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Fu = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._confiantRefreshExperiment = i, r._confiantEndpointExperiment = n, r._prodPropertyId = "mOinGM9MTu5v-Lto835XLhlrSPY", r._expPropertyId = "wyN88rwU6FImxcXgha7IWE-FzsE", r._trackerHoldoutKey = "conf", r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this._confiantRefreshExperiment.result ? this._expPropertyId : this._prodPropertyId,
                        t = this._confiantEndpointExperiment.result ? "gpt_and_prebid/config.js" : "gpt_and_prebid_v3l/config.js";
                    return ua("https://confiant-integrations.global.ssl.fastly.net/" + e + "/" + t)
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.tkho.tracker !== this._trackerHoldoutKey
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("ConfiantComponent"), zo(), io("design:paramtypes", [Fc, Vu, Lu])], t)
            }(Su),
            Nu = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n.debug = !1, n.debug = n._config.context.debug, n
                }
                return Jr(t, e), t.prototype.getConfigTargeting = function() {
                    var e = this._config,
                        t = this._config.context,
                        i = this.debug;
                    return so(e.gam.targeting, [{
                        key: "abgroup",
                        value: e.abGroup.groups
                    }, {
                        key: "bucket",
                        value: i ? "unsupported" : t.bucket
                    }, {
                        key: "sens",
                        value: e.site.sensitiveCategories
                    }, {
                        key: "domain",
                        value: t.domain
                    }, {
                        key: "plugin",
                        value: t.plugin
                    }, {
                        key: "hi_au",
                        value: e.adTypes.enabledMinified
                    }, {
                        key: "vpwxvph",
                        value: window.innerWidth + "x" + window.innerHeight
                    }, {
                        key: "ri",
                        value: t.querystring.has("ri") ? t.querystring.get("ri") : String(Math.floor(100 * Math.random()))
                    }, {
                        key: "pvk",
                        value: t.pageviewKey
                    }, {
                        key: "sess",
                        value: t.sessionKey
                    }, {
                        key: "branch",
                        value: t.branch
                    }, {
                        key: "deployment",
                        value: i || t.invalidTraffic ? "unsupported" : t.deployment
                    }, {
                        key: "hbho",
                        value: e.hbho.bidders
                    }, {
                        key: "vbho",
                        value: e.vbho.bidders
                    }, {
                        key: "gptv",
                        value: googletag.getVersion()
                    }])
                }, t.prototype.getConditionalTargeting = function() {
                    var e = [],
                        t = this._config.context,
                        i = this._config.site,
                        n = this._config.ccpa;
                    return i.sensCategoriesOff.length && e.push({
                        key: "sens_off",
                        value: i.sensCategoriesOff
                    }), t.connectionTargeting.length && e.push({
                        key: "connection",
                        value: t.connectionTargeting
                    }), n.required && e.push({
                        key: "ccpaOptOut",
                        value: n.userOptedOut ? "1" : "0"
                    }), e
                }, t.prototype.setConditionalFlagTargeting = function() {
                    var e = this._config.context;
                    e.invalidTraffic && this._gam.setTargetingFlag("bot", e.invalidTraffic), e.adsMinLoadDuration && this._gam.setTargetingFlag("adsmnche", e.adsMinLoadDuration), this._config.adOptions.pmp && this._gam.setTargetingFlag("pmp_elig", ["1"]), this._config.clsOptions && (this._gam.setTargetingFlag("clson", [this._config.clsOptions.injectedFromPlugin ? "true" : "false"]), this._gam.setTargetingFlag("clsBranch", [this._config.clsOptions.branch ? this._config.clsOptions.branch : ""]), this._gam.setTargetingFlag("clsBucket", [this._config.clsOptions.bucket ? this._config.clsOptions.bucket : ""])), e.integration && this._gam.setTargetingFlag("integration", [e.integration])
                }, t.prototype.init = function() {
                    var e = this;
                    Uc.pushToQueue((function() {
                        e._gam.setTargeting(so(e.getConfigTargeting(), e.getConditionalTargeting())), e.setConditionalFlagTargeting()
                    }))
                }, t = eo([Ka("ConfigTargetingComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            qu = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._gam = t, n._slots = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotRenderEnded.on((function(t) {
                        return e.confirmedClickOverlay(t)
                    }))
                }, t.prototype.confirmedClickOverlay = function(e) {
                    var t = this,
                        i = e.event,
                        n = e.slot;
                    Uc.pushToQueue((function() {
                        var e = n.getTargetingMap(),
                            r = e.id,
                            o = e.location,
                            a = e.sequence,
                            s = e.nref,
                            c = t.confirmedClickStatus(t._slots.get(i.slot.getSlotElementId()));
                        ga({
                            event: i,
                            ignoreOtherCompanyIds: !0
                        }) && c && Bo.event("confirmedClickOverlay", "status", {
                            id: r,
                            location: o,
                            sequence: a,
                            nref: s,
                            confirmedClick: c
                        })
                    }))
                }, t.prototype.confirmedClickStatus = function(e) {
                    try {
                        var t, i = null == e ? void 0 : e.element.querySelectorAll("iframe[id^=google_ads_iframe]");
                        return i && (null == i ? void 0 : i.length) > 0 && (t = i[0]), ["common_15click_overlay", "common_15click_anchor"].some((function(e) {
                            var i;
                            return null != (null === (i = null == t ? void 0 : t.contentDocument) || void 0 === i ? void 0 : i.getElementById(e))
                        }))
                    } catch (e) {
                        Bo.error("ConfirmedClickComponent", "confirmedClickStatus", e)
                    }
                    return !1
                }, t = eo([Ka("ConfirmedClicksComponent"), zo(), io("design:paramtypes", [Uc, qc])], t)
            }(Su),
            Uu = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._gam = i, r._slotManager = n, r._device = r._config.context.device, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = this._slotManager;
                    this._gam.slotRenderEnded.on((function(i) {
                        var n = i.event,
                            r = i.slot;
                        e.isDeclaredRefreshCompliantSlot(r) && ga({
                            event: n
                        }) && t.updateRefreshTimeout(r.id, 24e4)
                    })), t.added.on((function(t) {
                        return t.forEach((function(t) {
                            e.isDeclaredRefreshCompliantSlot(t) && Uc.pushToQueue((function() {
                                t.setTargeting({
                                    key: "decref",
                                    value: "240"
                                })
                            }))
                        }))
                    }))
                }, t.prototype.isDeclaredRefreshCompliantSlot = function(e) {
                    return "Sidebar" === e.location && ("phone" === this._device || "tablet" === this._device) || "Header" === e.location && 2 === e.sequence && ("phone" === this._device || "tablet" === this._device)
                }, t = eo([Ka("DeclaredRefreshComponent"), zo(), io("design:paramtypes", [Fc, Uc, Cu])], t)
            }(Su),
            Hu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "stkyos", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.95).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("StickyOutstreamExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Wu = function() {
                function e() {
                    this._totalContentInserted = 0, this._recipeCount = 0, this._mainContentHeight = 0, this._mainContentDiv = null, this._firstContentDiv = null, this._totalAvailableElements = 0, this._densityDevice = ss.Desktop, this._pubLog = {
                        onePerViewport: !1,
                        targetDensity: 0,
                        targetDensityUnits: 0,
                        combinedMax: 0
                    }, this._densityMax = .99, this.locationMaxLazySequence = new Map([
                        ["Recipe", 5],
                        ["Below_Post", 1]
                    ])
                }
                return e.prototype.inject = function(e, t) {
                    void 0 === t && (t = document), window.adthriveCLS && window.adthriveCLS.targetDensityLog && Bo.event("BaseDynamicAdsInjector", "_logDensityInfo", window.adthriveCLS.targetDensityLog);
                    var i = this._config.targetDensity.enabled,
                        n = e.filter((function(e) {
                            return i ? "Content" !== e.location : e
                        })),
                        r = e.filter((function(e) {
                            return i ? "Content" === e.location : null
                        }));
                    return so(n.length ? this._injectNonDensitySlots(n, t) : [], r.length ? this._injectDensitySlots(r, t) : [])
                }, e.prototype._injectNonDensitySlots = function(e, t) {
                    var i, n;
                    void 0 === t && (t = document);
                    var r = [];
                    try {
                        for (var o = oo(e), a = o.next(); !a.done; a = o.next()) {
                            var s = a.value,
                                c = 0,
                                l = 0,
                                u = 0;
                            s.spacing > 0 && (c = window.innerHeight * s.spacing, l = c);
                            var d = this._repeatDynamicAds(s),
                                p = this.getElements(s.elementSelector, t);
                            s.skip;
                            for (var h = function(e) {
                                    if (u + 1 > d.length) return "break";
                                    var i = p[e];
                                    if (c > 0) {
                                        var n = Zo(i).bottom;
                                        if (n <= l) return "continue";
                                        l = n + c
                                    }
                                    var o = d[u],
                                        a = o.location + "_" + o.sequence;
                                    if (r.some((function(e) {
                                            return e.name === a
                                        }))) return u += 1, "continue";
                                    var h = f.getDynamicElementId(o),
                                        g = "adthrive-" + s.location.replace("_", "-").toLowerCase(),
                                        m = so([g, g + "-" + s.sequence], s.classNames),
                                        y = f.addAd(i, h, s.position, m, s.location);
                                    if (y) {
                                        var _ = f._filterAdUnitSizes(o, y);
                                        _.length && (r.push(f.createSlot(o, y, _, t !== document)), "Recipe" === s.location && ++f._recipeCount, u += 1), i = y
                                    }
                                }, f = this, g = s.skip; g < p.length; g += s.every) {
                                if ("break" === h(g)) break
                            }
                        }
                    } catch (e) {
                        i = {
                            error: e
                        }
                    } finally {
                        try {
                            a && !a.done && (n = o.return) && n.call(o)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    return r
                }, e.prototype._getMinDivHeight = function(e) {
                    return void 0 === e && (e = "Content"), this._config.clsOptimizedAds.getDivHeight(e, this._config.context.device)
                }, e.prototype._shouldTargetAllElgibile = function(e) {
                    return e === this._densityMax
                }, e.prototype._injectDensitySlots = function(e, t) {
                    var i, n, r = this;
                    void 0 === t && (t = document);
                    try {
                        this._calculateMainContentHeightAndAllElements(e)
                    } catch (e) {
                        return []
                    }
                    this._densityDevice = "desktop" === this._config.context.device ? ss.Desktop : ss.Mobile;
                    var o = [],
                        a = this._getDensitySettings(),
                        s = a.adDensity,
                        c = a.onePerViewport,
                        l = this._shouldTargetAllElgibile(s),
                        u = this._getTargetDensityUnits(s),
                        d = this._getCombinedMax(e),
                        p = Math.min.apply(Math, so([this._totalAvailableElements, u], d > 0 ? [d] : []));
                    if (this._pubLog = {
                            onePerViewport: c,
                            targetDensity: s,
                            targetDensityUnits: u,
                            combinedMax: d
                        }, !p) return [];
                    var h = 0,
                        f = 0,
                        g = function(e) {
                            var i = m.getElements(e.elementSelector, t),
                                n = m._getInsertEvery(p, c);
                            m._logDensityInfo(i, e.elementSelector, n);
                            var a = function(i) {
                                var a, s;
                                a = r._attemptInsertion({
                                    dynamicAd: e,
                                    element: i,
                                    insertNext: f,
                                    onePerViewport: c,
                                    contentInsertedThisPage: h,
                                    target: t,
                                    insertEvery: n,
                                    targetAll: l
                                }), f = a.insertNext, (s = a.slot) && (o.push(s), ++h)
                            };
                            e.skip;
                            for (var s = e.skip; s < i.length; s++) {
                                var g = i[s];
                                if (!(g.offsetHeight >= m._mainContentHeight && m._totalAvailableElements > 1)) {
                                    if (!(h < d && h < u)) break;
                                    a(g)
                                }
                            }
                        },
                        m = this;
                    try {
                        for (var y = oo(e), _ = y.next(); !_.done; _ = y.next()) {
                            g(_.value)
                        }
                    } catch (e) {
                        i = {
                            error: e
                        }
                    } finally {
                        try {
                            _ && !_.done && (n = y.return) && n.call(y)
                        } finally {
                            if (i) throw i.error
                        }
                    }
                    return o
                }, e.prototype._getInsertEvery = function(e, t) {
                    var i = .43 * this._mainContentHeight / e;
                    return t && window.innerHeight > i ? window.innerHeight : i
                }, e.prototype._getDensitySettings = function() {
                    var e = this._config.targetDensity.settings,
                        t = this._determineOverrides(e.pageOverrides);
                    return t.length ? t[0] : e[this._densityDevice]
                }, e.prototype._determineOverrides = function(e) {
                    var t = this;
                    return e.filter((function(e) {
                        var t = Wa(e.pageSelector);
                        return "" === e.pageSelector || t.elements && t.elements.length
                    })).map((function(e) {
                        return e[t._densityDevice]
                    }))
                }, e.prototype._getTargetDensityUnits = function(e) {
                    return Math.floor(e * this._mainContentHeight / (1 - e) / this._getMinDivHeight()) - this._recipeCount
                }, e.prototype._getCombinedMax = function(e) {
                    return Ko(e.filter((function(e) {
                        var t;
                        try {
                            t = document.querySelector(e.elementSelector)
                        } catch (e) {}
                        return t
                    })).map((function(e) {
                        return e.max + (e.lazyMaxDefaulted ? 0 : e.lazyMax)
                    })).sort((function(e, t) {
                        return t - e
                    }))[0], 0)
                }, e.prototype._logDensityInfo = function(e, t, i) {
                    var n = this._pubLog,
                        r = n.onePerViewport,
                        o = n.targetDensity,
                        a = n.targetDensityUnits,
                        s = n.combinedMax;
                    this._totalAvailableElements, Bo.event("BaseDynamicAdsInjector", "_logDensityInfo", {
                        onePerViewport: r,
                        combinedMax: s,
                        targetDensityUnits: a,
                        targetDensityPercentage: o,
                        mainContentHeight: this._mainContentHeight,
                        recipeCount: this._recipeCount,
                        numberOfEls: e.length
                    })
                }, e.prototype._attemptInsertion = function(e) {
                    var t, i = e.dynamicAd,
                        n = e.element,
                        r = e.insertNext,
                        o = e.onePerViewport,
                        a = e.contentInsertedThisPage,
                        s = e.target,
                        c = e.insertEvery,
                        l = e.targetAll,
                        u = null;
                    if (this._isElementSpacedCorrectly(n, r, o, i, l, c)) {
                        var d = $r($r({}, i), {
                            sequence: this._totalContentInserted + 1,
                            lazy: i.lazy && a >= i.max
                        });
                        u = (t = this._addContentAd(n, d, s, c)).insertedSlot, r = t.insertNext
                    }
                    return {
                        insertNext: r,
                        slot: u
                    }
                }, e.prototype._isElementSpacedCorrectly = function(e, t, i, n, r, o) {
                    var a = "beforebegin" === n.position || "afterbegin" === n.position,
                        s = "beforeend" === n.position || "afterbegin" === n.position,
                        c = r || this._isElementFarEnough(i, e, t, a, o),
                        l = s || this._isElementNotInRow(e, a),
                        u = c && l;
                    return u && (this._lastElement = e, this._lastAdPosition = "beforebegin" === n.position || "afterbegin" === n.position ? "top" : "bottom"), u
                }, e.prototype._getMinimumSpacingByLastInjection = function(e) {
                    return this._lastAdPosition && "bottom" === this._lastAdPosition && e < this._getMinDivHeight() ? this._getMinDivHeight() : 0
                }, e.prototype._isElementFarEnough = function(e, t, i, n, r) {
                    var o = Zo(t),
                        a = this._getMinimumSpacingByLastInjection(r),
                        s = this._lastElement ? Zo(this._lastElement).bottom : 0,
                        c = n ? o.top : o.bottom;
                    return c > i && (0 === s || c - s >= r + a)
                }, e.prototype._isElementNotInRow = function(e, t) {
                    var i = e.previousElementSibling,
                        n = e.nextElementSibling,
                        r = t ? !i && n || i && e.tagName !== i.tagName ? n : i : n;
                    return !(!r || 0 !== e.getBoundingClientRect().height) || (!r || e.getBoundingClientRect().top !== r.getBoundingClientRect().top)
                }, e.prototype._calculateMainContentHeightAndAllElements = function(e) {
                    var t = this._setMainContentAndElements(e),
                        i = t.mainContentDiv,
                        n = t.firstContentDiv;
                    this._mainContentDiv = i, this._firstContentDiv = n;
                    var r = this._mainContentDiv.querySelector("div #comments, section .comments");
                    this._mainContentHeight = r ? this._mainContentDiv.offsetHeight - r.offsetHeight : this._mainContentDiv.offsetHeight
                }, e.prototype._setMainContentAndElements = function(e) {
                    var t = this._getPotentialElements(e);
                    if (0 === t.length) throw Error("No Main Content Elements Found");
                    return {
                        mainContentDiv: Array.from(t).reduce((function(e, t) {
                            return t.offsetHeight > e.offsetHeight ? t : e
                        })) || document.body,
                        firstContentDiv: Array.from(t).reduce((function(e, t) {
                            return Zo(t).top < Zo(e).top ? t : e
                        }))
                    }
                }, e.prototype._getPotentialElements = function(e) {
                    var t = this,
                        i = this._attemptArticleLookup(),
                        n = i ? [i] : [];
                    return e.forEach((function(e) {
                        return t._getSelectors(e.elementSelector).forEach((function(e) {
                            for (var i = document.querySelectorAll(e), r = 0; r < i.length; r++) i[r] && i[r].parentElement && i[r].parentElement !== document.body ? n.push(i[r].parentElement) : n.push(i[r]), ++t._totalAvailableElements
                        }))
                    })), n
                }, e.prototype._attemptArticleLookup = function() {
                    var e = document.querySelectorAll("article");
                    if (0 === e.length) return null;
                    var t = Array.from(e).reduce((function(e, t) {
                        return t.offsetHeight > e.offsetHeight ? t : e
                    }));
                    return t && t.offsetHeight > 1.5 * window.innerHeight ? t : null
                }, e.prototype._getSelectors = function(e) {
                    return e.indexOf(",") > -1 ? e.split(",") : [e]
                }, e.prototype._addContentAd = function(e, t, i, n) {
                    void 0 === i && (i = document);
                    var r = null,
                        o = "adthrive-" + t.location.replace("_", "-").toLowerCase(),
                        a = o + "-" + t.sequence,
                        s = this.addAd(e, this.getDynamicElementId(t), t.position, so([o, a], t.classNames), t.location),
                        c = this._getNextInsertPosition(t.position, s, n);
                    if (s) {
                        var l = this._filterAdUnitSizes(t, s);
                        l.length && (r = this.createSlot(t, s, l, i !== document), ++this._totalContentInserted)
                    }
                    return {
                        insertedSlot: r,
                        insertNext: c
                    }
                }, e.prototype._getNextInsertPosition = function(e, t, i) {
                    var n = t.getBoundingClientRect(),
                        r = window.pageYOffset;
                    return ("beforebegin" === e || "afterbegin" === e ? n.top : n.bottom) + r + i - this._getMinDivHeight()
                }, e.prototype.getElements = function(e, t) {
                    return void 0 === t && (t = document), t.querySelectorAll(e)
                }, e.prototype._filterAdUnitSizes = function(e, t) {
                    var i = function(e) {
                            var t = e.clientWidth;
                            if (getComputedStyle) {
                                var i = getComputedStyle(e, null);
                                t -= parseFloat(i.paddingLeft || "0") + parseFloat(i.paddingRight || "0")
                            }
                            return t
                        }(t),
                        n = e.sticky && "Sidebar" === e.location;
                    return e.sizes.filter((function(t) {
                        var r = !e.autosize || (t[0] <= i || t[0] <= 320),
                            o = !n || t[1] <= window.innerHeight - 100;
                        return r && o
                    }))
                }, e.prototype.createSlot = function(e, t, i, n) {
                    var r = e.location,
                        o = e.sequence,
                        a = e.sticky,
                        s = e.lazy,
                        c = e.stickyOverlapSelector,
                        l = e.special,
                        u = e.auctionPriority;
                    return new Nc(r, o, i, t, a, s, u, c, l, !0, n)
                }, e.prototype._repeatDynamicAds = function(e) {
                    for (var t = [], i = e.lazy ? Ko(this.locationMaxLazySequence.get(e.location), 0) : 0, n = e.max, r = 0 === i && e.lazy ? n + e.lazyMax : Math.min(Math.max(i - e.sequence + 1, 0), n + e.lazyMax), o = Math.max(n, r), a = 0; a < o; a++) {
                        var s = e.sequence + a,
                            c = e.lazy && a >= n;
                        t.push($r($r({}, e), {
                            sequence: s,
                            lazy: c
                        }))
                    }
                    return t
                }, e.prototype.addAd = function(e, t, i, n, r) {
                    var o;
                    void 0 === n && (n = []);
                    var a = '<div id="' + t + '" class="adthrive-ad ' + n.join(" ") + '"></div>';
                    "Video_StickyOutstream" === r && (a = '<div class="adthrive-sticky-outstream adthrive-sticky-outstream-' + (t.indexOf("phone") > -1 ? "mobile" : "desktop") + '">' + a + "</div>");
                    return (null === (o = window.adthriveCLS) || void 0 === o ? void 0 : o.injectedSlots.some((function(e) {
                        return e.element.id === t
                    }))) || e.insertAdjacentHTML(i, a), document.getElementById(t)
                }, e
            }(),
            Gu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i
                }
                return Jr(t, e), t.prototype.getDynamicElementId = function(e) {
                    return this._config.gam.prefix + "_" + e.location + "_" + e.sequence + "_" + this._config.context.device
                }, t = eo([Ka("DynamicAdsInjector"), zo(), io("design:paramtypes", [Fc])], t)
            }(Wu),
            Qu = function(e) {
                function t(t, i, n, r) {
                    var o = e.call(this) || this;
                    return o._config = t, o._injector = i, o._slotManager = n, o._gam = r, o._stickyOutstreamExperimentResult = !1, o
                }
                return Jr(t, e), t.prototype.hasClsInjectedContent = function() {
                    var e, t;
                    if (window.adthriveCLS && window.adthriveCLS.injectedSlots.length) try {
                        for (var i = oo(window.adthriveCLS.injectedSlots), n = i.next(); !n.done; n = i.next()) {
                            if (-1 !== n.value.name.indexOf("Content")) return !0
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                    return !1
                }, t.prototype.start = function() {
                    var e = this;
                    this.runStickyOutstreamExperiment();
                    var t = this.hasClsInjectedContent(),
                        i = this._config.dynamicAds.filter((function(t) {
                            return e.locationEnabled(t)
                        })).filter((function(t) {
                            return e.forDevice(t, e._config.context.device)
                        })).filter((function(e) {
                            return !t || t && "Content" !== e.location
                        })).filter((function(t) {
                            return "Interstitial" === t.location || "Video_StickyOutstream" === t.location ? e.forPageBlocks(t.pageSelector) : e.forPage(t)
                        })).filter((function(t) {
                            return !e.pluginInjected(t)
                        })).filter((function(t) {
                            return "Video_StickyOutstream" !== t.location || !e.shouldFilterStickyOutstream()
                        })),
                        n = this._injector.inject(i);
                    if (this._config.clsOptions && this._config.clsOptions.enabled) {
                        var r = [];
                        this._config.clsOptions.injectedSlots.forEach((function(t) {
                            n.some((function(e) {
                                return e.name === t.name
                            })) || r.push(e._injector.createSlot(t.dynamicAd, t.element, t.sizes, t.infinite))
                        })), n = n.concat(r)
                    }
                    this._slotManager.add(n).catch((function(e) {
                        Bo.error("DynamicAdsComponent", "start", "add", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.dynamicAds.length > 0
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.runStickyOutstreamExperiment = function() {
                    this._config.video.preventStickyOutstream || (this._stickyOutstreamExperimentResult = Mo.resolve(Hu).result, this._gam.setTargeting({
                        key: "abgroup",
                        value: this._config.abGroup.groups.join(",")
                    }))
                }, t.prototype.shouldFilterStickyOutstream = function() {
                    return this.runStickyOutstreamExperiment(), !(this._stickyOutstreamExperimentResult && !this._config.disableAds.video && !Tu()) || (this._config.video.hasStickyOutstream = !0, !1)
                }, t.prototype.pluginInjected = function(e) {
                    var t = JSON.stringify(e);
                    return this._config.clsOptions && this._config.clsOptions.injectedSlots.some((function(e) {
                        return JSON.stringify(e.clsDynamicAd) === t
                    }))
                }, t.prototype.forDevice = function(e, t) {
                    return -1 !== e.devices.indexOf(t)
                }, t.prototype.forPage = function(e) {
                    return 0 === e.pageSelector.length || null !== document.querySelector(e.pageSelector)
                }, t.prototype.forPageBlocks = function(e) {
                    return 0 === e.length || !e.split(",").some((function(e) {
                        return null !== document.querySelector(e)
                    }))
                }, t.prototype.locationEnabled = function(e) {
                    return !this._config.disableAds.locations.has(e.location) && !this._config.disableAds.all
                }, t = eo([Ka("DynamicAdsComponent"), zo(), io("design:paramtypes", [Fc, Gu, Cu, Uc])], t)
            }(Su),
            Ku = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.refreshExternal()
                    })).catch((function(e) {
                        Bo.error("ExternalSlotsComponent", "init", e)
                    }))
                }, t.prototype.refreshExternal = function() {
                    var e = this;
                    Uc.pushToQueue((function() {
                        var t = e._config.gam.account,
                            i = googletag.pubads().getSlots().filter((function(e) {
                                return null === RegExp("^/?" + t + "/").exec(e.getAdUnitPath())
                            })).filter((function(e) {
                                return null !== document.getElementById(e.getSlotElementId())
                            }));
                        i.length && googletag.pubads().refresh(i)
                    }))
                }, t = eo([Ka("ExternalSlotsComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            Xu = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._gam = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this.isFirstPageview() ? "1" : "0";
                    this._gam.setTargeting({
                        key: "fpv",
                        value: e
                    })
                }, t.prototype.isFirstPageview = function() {
                    var e = 0;
                    try {
                        var t = localStorage.getItem("adthrive_fpv");
                        if (t && (e = Date.now() - Date.parse(t)), !t || e > 864e5) return localStorage.setItem("adthrive_fpv", (new Date).toString()), !0
                    } catch (e) {}
                    return !1
                }, t = eo([Ka("FirstPageviewComponent"), zo(), io("design:paramtypes", [Uc])], t)
            }(Su),
            Ju = function() {
                function e(e) {
                    this._auctionManagers = e, this.refreshingVideoBids = new Do, this.requestingVideoBids = new Do, this.requestingSekindoBids = new Do
                }
                return e.prototype.addVideoSlots = function(e) {
                    this._auctionManagers.addVideoSlots(e)
                }, e.prototype.requestVideoBids = function(e, t) {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(i) {
                            switch (i.label) {
                                case 0:
                                    return [4, this.requestingVideoBids.emit(e).catch()];
                                case 1:
                                    return i.sent(), [4, this._determineIsRefreshing(e).catch()];
                                case 2:
                                    return i.sent(), [4, this._auctionManagers.requestVideoBids(e, t)];
                                case 3:
                                    return i.sent(), [2]
                            }
                        }))
                    }))
                }, e.prototype._determineIsRefreshing = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t;
                        return ro(this, (function(i) {
                            switch (i.label) {
                                case 0:
                                    return (t = e.filter((function(e) {
                                        return e._prerollNum > 0
                                    }))).length ? [4, this.refreshingVideoBids.emit(t)] : [3, 2];
                                case 1:
                                    i.sent(), i.label = 2;
                                case 2:
                                    return [2]
                            }
                        }))
                    }))
                }, e = eo([Ka("VideoRequestManager"), Ro(), io("design:paramtypes", [bu])], e)
            }(),
            Yu = function(e) {
                function t(t, i, n, r, o, a) {
                    var s = e.call(this) || this;
                    return s._slotManager = t, s._config = i, s._prebidMethods = n, s._videoRequestManager = r, s._ortb2 = o, s._irisTv = a, s
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._slotManager.added.once().then((function() {
                        e.setBidderSpecificFpd({
                            bidders: ["rubicon"],
                            fpdData: {
                                refresh: ["false"],
                                vp: "0"
                            }
                        }), e._config.site.sensitiveCategories.length && e.setBidderSpecificFpd({
                            bidders: ["triplelift", "tripl_ss"],
                            fpdData: {
                                sens: e._config.site.filteredSensitiveCategories
                            },
                            addStaticFpd: !1
                        }), e._config.site.filteredSensitiveCategories.length && e.setBidderSpecificFpd({
                            bidders: ["yahoossp"],
                            fpdData: {
                                sens: e._config.site.filteredSensitiveCategories
                            },
                            addStaticFpd: !1
                        }), e._config.site.filteredSensitiveCategories.length && e.setBidderSpecificFpd({
                            bidders: ["yahoossp"],
                            fpdData: {
                                sens: e._config.site.filteredSensitiveCategories
                            },
                            addStaticFpd: !1
                        })
                    })).catch((function() {})), this._slotManager.refreshing.once().then((function() {
                        e.setBidderSpecificFpd({
                            bidders: ["rubicon"],
                            fpdData: {
                                refresh: ["true"],
                                vp: "0"
                            }
                        }), e._prebidMethods.addToQueue((function() {
                            e.setIXRefresh()
                        }))
                    })).catch((function() {})), this._videoRequestManager.requestingVideoBids.on((function(t) {
                        t.forEach((function() {
                            var t = e._irisTv,
                                i = t.irisContextualData;
                            i && i.length && e.setBidderSpecificFpd({
                                bidders: ["pubmatic", "pubm_ss"],
                                fpdData: {
                                    content: {
                                        id: t.irisId
                                    }
                                },
                                addStaticFpd: !1,
                                isExtData: !1
                            })
                        }))
                    })), this._videoRequestManager.refreshingVideoBids.on((function(t) {
                        t.forEach((function(t) {
                            t.vp > 0 && t._prerollNum <= 10 && (e.setBidderSpecificFpd({
                                bidders: ["rubicon"],
                                fpdData: {
                                    refresh: ["true"],
                                    vp: t.vp.toString()
                                }
                            }), e._prebidMethods.addToQueue((function() {
                                e.setIXVPParam(t.vp)
                            })))
                        }))
                    }))
                }, t.prototype.setBidderSpecificFpd = function(e) {
                    var t, i = e.bidders,
                        n = e.fpdData,
                        r = e.addStaticFpd,
                        o = void 0 === r || r,
                        a = e.location,
                        s = void 0 === a ? "site" : a,
                        c = e.isExtData,
                        l = void 0 === c || c,
                        u = $r($r({}, o && $r({}, this._ortb2._staticFirstPartyData)), n),
                        d = l ? {
                            ext: {
                                data: u
                            }
                        } : u;
                    this._prebidMethods.setBidderConfig({
                        bidders: i,
                        config: {
                            ortb2: (t = {}, t[s] = d, t)
                        }
                    })
                }, t.prototype.setIXRefresh = function() {
                    var e = this._prebidMethods.getConfig("ix");
                    e && e.firstPartyData && "True" !== e.firstPartyData.Refresh && ha({
                        Refresh: "True"
                    }, this._prebidMethods)
                }, t.prototype.setIXVPParam = function(e) {
                    var t = this._prebidMethods.getConfig("ix");
                    t && t.firstPartyData && e > 0 && ha({
                        vp: e.toString()
                    }, this._prebidMethods)
                }, t = eo([Ka("FirstPartyDataComponent"), zo(), io("design:paramtypes", [Cu, Fc, Gc, Ju, uu, Nl])], t)
            }(Su),
            Zu = function(e) {
                function t(t, i, n, r) {
                    var o = e.call(this) || this;
                    return o._slotManager = t, o._prebidMethods = i, o._floors = n, o._floorsExperiment = r, o._percentile = 0, o._sessionPercentile = 0, o._contentCpms = [], o._percentile = o._floorsExperiment.result.percentile.lazy, o._sessionPercentile = o._floorsExperiment.result.percentile.session, o
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._slotManager.requestingBids.on((function(t) {
                        var i = e._floors.getDefaultFloorConfig();
                        t.filter((function(e) {
                            return "Content" === e.location && e.lazy
                        })).forEach((function(t) {
                            var n = Ea(e._contentCpms, e._percentile);
                            e._floors.setValues(i, t.id, n)
                        })), e._floors.setLegacyFloorsConfig(i)
                    })), this._slotManager.requestedBids.on((function(t) {
                        t.filter((function(e) {
                            return "Content" === e.location
                        })).forEach((function(t) {
                            e._prebidMethods.addToQueue((function() {
                                e.saveBids(t)
                            }))
                        }))
                    }))
                }, t.prototype.saveBids = function(e) {
                    var t = this;
                    this._prebidMethods.getBidResponsesForAdUnitCode(e.id).bids.forEach((function(e) {
                        t._contentCpms.push(e.cpm)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return Boolean(this._percentile) && (!0 === na("session_fpv") || !this._sessionPercentile) && !0 === this._floorsExperiment.result.legacy
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("FloorsLazyContentComponent"), zo(), io("design:paramtypes", [Cu, Gc, Yc, Jc])], t)
            }(Su),
            $u = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._slotManager = t, a._floors = i, a._prebidMethods = n, a._videoRequestManager = r, a._floorsExperiment = o, a
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._slotManager.refreshing.on((function(t) {
                        e._prebidMethods.addToQueue((function() {
                            e._setRefreshFloors(t.map((function(e) {
                                return e.id
                            })))
                        }))
                    })), this._videoRequestManager.refreshingVideoBids.on((function(t) {
                        e._prebidMethods.addToQueue((function() {
                            e._setRefreshFloors(t.map((function(e) {
                                var t;
                                return null === (t = e.videoAdUnit) || void 0 === t ? void 0 : t.code
                            })))
                        }))
                    }))
                }, t.prototype._setRefreshFloors = function(e) {
                    var t, i, n = this._floors.getDefaultFloorConfig();
                    try {
                        for (var r = oo(e), o = r.next(); !o.done; o = r.next()) {
                            var a = o.value,
                                s = ao(this._prebidMethods.getHighestCpmBids(a), 1)[0],
                                c = null == s ? void 0 : s.cpm;
                            c && this._floors.setValues(n, a, c)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            o && !o.done && (i = r.return) && i.call(r)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                    this._floors.setLegacyFloorsConfig(n)
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !0 === this._floorsExperiment.result.legacy
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("FloorsRefreshComponent"), zo(), io("design:paramtypes", [Cu, Yc, Gc, Ju, Jc])], t)
            }(Su),
            ed = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._floors = t, a._floorsExperiment = i, a._gam = n, a._prebidMethods = r, a._slots = o, a.baseUrl = "https://ads.adthrive.com/api/v2/host/floors/", a._modalVersionMap = new Map([]), a
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this.setSlotTargeting(), this.getRubiconFloorData().then((function(t) {
                        e.buildFloorsMap(t.modelGroups), e._floors.rubiconData = t, e._floors.setPrebidFloors(t)
                    })).catch((function(e) {
                        Bo.error("RubiconFloorsComponent", "getRubiconFloorData", e)
                    }))
                }, t.prototype.buildFloorsMap = function(e) {
                    var t = this;
                    e.forEach((function(e, i) {
                        t._modalVersionMap.set(e.modelVersion, i)
                    }))
                }, t.prototype.getRubiconFloorData = function() {
                    return no(this, void 0, void 0, (function() {
                        var e = this;
                        return ro(this, (function(t) {
                            return [2, new Promise((function(t, i) {
                                var n = new XMLHttpRequest;
                                n.open("get", "" + e.baseUrl + window.location.hostname), n.addEventListener("load", (function() {
                                    return 200 !== n.status ? i(new Error("Error status: " + n.status + " response: " + n.responseText)) : t(JSON.parse(n.responseText))
                                })), n.addEventListener("error", (function() {
                                    return i(new Error("Request failed"))
                                })), n.send()
                            }))]
                        }))
                    }))
                }, t.prototype.setSlotTargeting = function() {
                    var e = this;
                    this._prebidMethods.onEvent("auctionEnd", (function(t) {
                        var i = t.adUnitCodes[0],
                            n = t.adUnits[0].bids[0].floorData;
                        if (n) {
                            var r = e._slots.get(),
                                o = n.skipped,
                                a = n.modelVersion,
                                s = o ? "s" : "" + e._modalVersionMap.get(a);
                            r.forEach((function(e) {
                                e.id === i && e.setSlotTargetingFlag("rfmv", [s], e.googleTagSlot, !0)
                            }))
                        }
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !0 === this._floorsExperiment.result.rubicon
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("FloorsRubiconComponent"), zo(), io("design:paramtypes", [Yc, Jc, Uc, Gc, qc])], t)
            }(Su),
            td = function(e) {
                function t(t, i, n, r) {
                    var o = e.call(this) || this;
                    o._slotManager = t, o._floors = i, o._prebidMethods = n, o._floorsExperiment = r, o._percentile = 0, o._rdx = 33;
                    var a = na("bc");
                    return o._savedBids = a ? xa(a, o._rdx) : {
                        Content: [],
                        Recipe: [],
                        Header: [],
                        Below_Post: [],
                        Sidebar: [],
                        Footer: []
                    }, o
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    if (this._percentile = this._floorsExperiment.result.percentile.session, !1 === na("session_fpv")) {
                        var t = this._floors.getDefaultFloorConfig();
                        this._slotManager.requestingBids.on((function(i) {
                            i.filter((function(t) {
                                return -1 !== Object.keys(e._savedBids).indexOf(t.location)
                            })).forEach((function(i) {
                                var n = Ea(e._savedBids[i.location], e._percentile);
                                e._floors.setValues(t, i.id, n)
                            })), e._floors.setLegacyFloorsConfig(t)
                        }))
                    }
                    this.saveBids()
                }, t.prototype.saveBids = function() {
                    var e = this;
                    this._slotManager.requestedBids.on((function(t) {
                        t.filter((function(t) {
                            return -1 !== Object.keys(e._savedBids).indexOf(t.location)
                        })).forEach((function(t) {
                            e._prebidMethods.addToQueue((function() {
                                e.saveSlotBids(t)
                            }))
                        })), ra("bc", Ta(e._savedBids, e._rdx))
                    }))
                }, t.prototype.saveSlotBids = function(e) {
                    var t = this;
                    this._prebidMethods.getBidResponsesForAdUnitCode(e.id).bids.forEach((function(i) {
                        var n, r;
                        n = t._savedBids[e.location], r = 1e3, n.length >= r && n.splice(Math.floor(Math.random() * n.length), 1), t._savedBids[e.location].push(i.cpm)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return Boolean(this._percentile) && !0 === this._floorsExperiment.result.legacy
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("FloorsSessionComponent"), zo(), io("design:paramtypes", [Cu, Yc, Gc, Jc])], t)
            }(Su),
            id = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._prebidMethods = o, a._floorsComponents = [t, i, n, r].filter((function(e) {
                        return e.enabled
                    })), a
                }
                return Jr(t, e), t.prototype.init = function() {
                    this._floorsComponents.forEach((function(e) {
                        return void 0 !== e.init && e.init()
                    }))
                }, t = eo([zo(), io("design:paramtypes", [Zu, $u, ed, td, Gc])], t)
            }(Su),
            nd = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i
                }
                return Jr(t, e), t.prototype.start = function() {
                    if (this._config.footer.elements.length) {
                        var e = document.createElement("div");
                        e.className = "adthrive-comscore adthrive-footer-message", this._config.footer.elements.sort((function(e, t) {
                            return e.order - t.order
                        })).forEach((function(t) {
                            var i = t.element;
                            i instanceof Element ? e.insertAdjacentElement("beforeend", i) : e.insertAdjacentHTML("beforeend", i)
                        }));
                        var t = "" === this._config.adOptions.footerSelector ? ".adthrive-mobile #page-wrapper" : this._config.adOptions.footerSelector;
                        (document.querySelector(t) || document.body).insertAdjacentElement("beforeend", e)
                    }
                }, t = eo([Ka("FooterComponent"), zo(), io("design:paramtypes", [Fc])], t)
            }(Su),
            rd = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._slotManager = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    this._slotManager.refreshing.on((function(e) {
                        var t = e.filter((function(e) {
                                return "Footer" === e.location
                            })),
                            i = window.GUMGUM && window.GUMGUM.isad;
                        t && i && window.GUMGUM.removeISAd()
                    }))
                }, t = eo([Ka("GumGumInScreenComponent"), zo(), io("design:paramtypes", [Cu])], t)
            }(Su),
            od = function() {
                function e() {
                    this._elements = [], this._emailProviderOnPage = !1, this._emailProviders = [{
                        divSelector: 'div[id$="-optin"]'
                    }, {
                        divSelector: 'div[class^="cb-form-group"]'
                    }, {
                        divSelector: "div.sumo-form-wrapper.listbuilder-popup"
                    }], this.emailCaptured = new Do, this._emailCheckTimeout = 1500, this._eventMap = new Map([
                        ["mousemove", window],
                        ["scroll", window],
                        ["mouseleave", document],
                        ["om.Campaign.startShow", document]
                    ]), this._boundCallEventHandler = this.callCheckEmailProviders.bind(this), this._boundProcessEventHandler = this.processInputChange.bind(this), this.addElementListeners(), this.addEmailProviderListeners()
                }
                return e.prototype.addEmailProviderListeners = function() {
                    var e = this;
                    this._eventMap.forEach((function(t, i) {
                        t.addEventListener(i, e._boundCallEventHandler)
                    }))
                }, e.prototype.removeEmailProviderListeners = function() {
                    var e = this;
                    this._eventMap.forEach((function(t, i) {
                        t.removeEventListener(i, e._boundCallEventHandler)
                    }))
                }, e.prototype.callCheckEmailProviders = function(e) {
                    var t = this;
                    ("mouseleave" !== e.type || e.clientY <= 0) && setTimeout((function() {
                        t._emailProviderOnPage || t.emailProviderHandler()
                    }), this._emailCheckTimeout)
                }, e.prototype.emailProviderHandler = function() {
                    var e, t;
                    try {
                        for (var i = oo(this._emailProviders), n = i.next(); !n.done; n = i.next()) {
                            var r = n.value;
                            if (document.querySelectorAll(r.divSelector).length) {
                                this.removeEmailProviderListeners(), this._emailProviderOnPage = !0, this.addElementListeners();
                                break
                            }
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, e.prototype.setElements = function() {
                    this._elements = Array.prototype.slice.call(document.querySelectorAll("input[type=text], input[type=email], input[name=email]"))
                }, e.prototype.addElementListeners = function() {
                    var e, t;
                    this.setElements();
                    try {
                        for (var i = oo(this._elements), n = i.next(); !n.done; n = i.next()) {
                            var r = n.value;
                            r.addEventListener("blur", this._boundProcessEventHandler), r.addEventListener("change", this._boundProcessEventHandler)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, e.prototype.removeElementListeners = function() {
                    var e, t;
                    try {
                        for (var i = oo(this._elements), n = i.next(); !n.done; n = i.next()) {
                            var r = n.value;
                            r.removeEventListener("blur", this._boundProcessEventHandler), r.removeEventListener("change", this._boundProcessEventHandler)
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            n && !n.done && (t = i.return) && t.call(i)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, e.prototype.processInputChange = function(e) {
                    var t = e.target.value,
                        i = $o(t);
                    i && (this.emailCaptured.emit({
                        email: i,
                        source: "ecc"
                    }).catch((function() {})), this.removeElementListeners())
                }, e = eo([Ka("EmailCaptureHandler"), Ro(), io("design:paramtypes", [])], e)
            }();
        ! function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i._config = t, i
            }
            Jr(t, e), t.prototype.init = function() {
                this.addPrivacyPreferencesFooter()
            }, t.prototype.addPrivacyPreferencesFooter = function() {
                this._config.footer.elements.push({
                    order: 1,
                    element: '\n      <div class="adthrive-privacy-preferences">\n        <a href="javascript:adthrive.cmd.push(adthrive.showPrivacyPreferences);">Update Privacy Preferences</a>\n      </div>\n    '
                })
            }, t = eo([Ka("GDPRComponent"), zo(), io("design:paramtypes", [Fc])], t)
        }(Su);
        var ad = function() {
                function e() {
                    this.consentCaptured = new Do
                }
                return e = eo([Ro()], e)
            }(),
            sd = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._events = t, n._config = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    Bo.queueLogs = !0, this.checkConsent().then((function(t) {
                        t ? (e._events.consentCaptured.emit(t).catch((function() {})), e.checkConsentForVendor(e._config.gdpr.cafeMediaVendorId, [7]).then((function(e) {
                            e ? Bo.queueLogs && Bo.clearLogQueue(!0) : Bo.disableLogging = !0
                        })).catch((function(e) {
                            Bo.error("init", "checkConsentForVendor", e)
                        }))) : e.listenForConsentSubmit().catch((function(e) {
                            Bo.error("init", "listenForConsentSubmit", e)
                        }))
                    })).catch((function(e) {
                        Bo.error("init", "checkConsent", e)
                    }))
                }, t.prototype.checkConsent = function() {
                    return new Promise((function(e) {
                        window.__tcfapi("getTCData", 2, (function(t, i) {
                            return i && t && t.tcString ? e(t.tcString) : e("")
                        }))
                    }))
                }, t.prototype.checkConsentForVendor = function(e, t) {
                    return new Promise((function(i) {
                        window.__tcfapi("checkConsent", 2, (function(e, t) {
                            return i(!!t && e)
                        }), {
                            data: [{
                                vendorId: e,
                                purposeIds: t
                            }]
                        })
                    }))
                }, t.prototype.listenForConsentSubmit = function() {
                    var e = this;
                    return new Promise((function(t) {
                        window.__tcfapi("addEventListener", 2, (function(i, n) {
                            n && (i && "useractioncomplete" === i.eventStatus && (e._events.consentCaptured.emit(i.tcString).catch((function() {})), e.checkConsentForVendor(e._config.gdpr.cafeMediaVendorId, [7]).then((function(e) {
                                e ? Bo.queueLogs && Bo.clearLogQueue(!0) : (Bo.disableLogging = !0, Bo.clearLogQueue(!1))
                            })).catch((function(e) {
                                Bo.error("listenForConsentSubmit", "checkConsentForVendor", e)
                            })), window.__tcfapi("removeEventListener", 2, (function(e) {}), i.listenerId)), t(!0)), t(!1)
                        }))
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return "function" == typeof window.__tcfapi
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("GDPREnforcementComponent"), zo(), io("design:paramtypes", [ad, Fc])], t)
            }(Su),
            cd = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._emailCaptureHandler = t, r._config = i, r._gdprEnforcement = n, r._hasRun = !1, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._config.identityApi.optIn.on((function(t) {
                        var i = t.data,
                            n = t.cb;
                        return e.identityOptIn(i, n).catch((function() {}))
                    })), window.addEventListener("message", (function(t) {
                        if (window === window.top && t && t.origin === window.origin && t.data && "adthriveIdentityAPI" === t.data.message && t.data.info) {
                            var i = {
                                message: "adthriveIdentityFinished",
                                response: {}
                            };
                            e.identityOptIn(t.data.info, (function(e) {
                                var n;
                                t.source instanceof MessagePort || t.source instanceof ServiceWorker || (i.response = e, null === (n = t.source) || void 0 === n || n.postMessage(i, t.origin))
                            })).catch((function() {}))
                        }
                    }), !1)
                }, t.prototype.start = function() {
                    this._config.identityApi.apiReady.emit().catch((function() {}))
                }, t.prototype.validateData = function(e) {
                    if (!e.source || "string" != typeof e.source || e.source.length > 20) throw Error("source required with 20 characters or less");
                    if (!e.plainText && !e.sha256) throw Error("plainText or sha256 required");
                    if (e.plainText && ("string" != typeof e.plainText || !$o(e.plainText))) throw Error("plainText not string or not valid email: " + e.plainText);
                    if (e.sha256 && ("string" != typeof e.sha256 || 64 !== e.sha256.length)) throw Error("sha256 not string or not encoded properly: " + e.sha256)
                }, t.prototype.buildPII = function(e) {
                    var t = {
                        source: e.source
                    };
                    return e.plainText && (t.email = e.plainText), e.sha256 && (t.hash = e.sha256), t
                }, t.prototype.identityOptIn = function(e, t) {
                    return no(this, void 0, void 0, (function() {
                        var i, n;
                        return ro(this, (function(r) {
                            switch (r.label) {
                                case 0:
                                    if (r.trys.push([0, 3, , 4]), !this._config.identityApi.enabled) throw Error("Identity API not enabled");
                                    if (this._hasRun) throw Error("Identity API Already Successfully Called");
                                    if (this._config.ccpa.userOptedOut) throw Error("User has opted out of CCPA");
                                    return this._config.gdpr.enabled ? [4, this._gdprEnforcement.checkConsentForVendor(this._config.gdpr.cafeMediaVendorId, [1])] : [3, 2];
                                case 1:
                                    if (!r.sent()) throw Error("CafeMedia not given Purpose 1 consent to process identity data.");
                                    r.label = 2;
                                case 2:
                                    return this.validateData(e), i = this.buildPII(e), this._emailCaptureHandler.emailCaptured.emit(i).catch((function() {})), t({
                                        success: !0,
                                        data: {
                                            message: "OK"
                                        }
                                    }), this._hasRun = !0, [3, 4];
                                case 3:
                                    return n = r.sent(), t({
                                        success: !1,
                                        data: {
                                            message: n.message
                                        }
                                    }), [3, 4];
                                case 4:
                                    return [2]
                            }
                        }))
                    }))
                }, t = eo([Ka("IdentityAPIComponent"), zo(), io("design:paramtypes", [od, Fc, sd])], t)
            }(Su),
            ld = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._gam = i, r._slotManager = n, r._renderedSlotKey = new Map, r._filterKeys = new Set(["abgroup", "pvk", "bucket", "branch", "deployment", "siteName", "siteId"]), r._host = "dev-track.adthrive.com", r._enabled = r._config.impressionLog.enabled, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    if (this._gam.slotRenderEnded.on((function(t) {
                            return e.slotRenderEnded(t)
                        })), 1 === this._enabled) {
                        var t = this._config.disableAds.reasons;
                        Promise.all([0 !== t.size ? 0 : this._slotManager.requestingBids.once().then((function() {
                            return Oa()
                        })), 0 !== t.size ? 0 : this._slotManager.requestedBids.once().then((function() {
                            return Oa()
                        })), 0 !== t.size ? 0 : this._slotManager.displayed.once().then((function() {
                            return Oa()
                        })), Ia()]).then((function(t) {
                            var i = ao(t, 3),
                                n = i[0],
                                r = i[1],
                                o = i[2];
                            return e.logTiming(n, r, o)
                        })).catch((function(e) {
                            return Bo.error("EventLogComponent", "init", e)
                        }))
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !!this._enabled
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.slotRenderEnded = function(e) {
                    var t = e.event,
                        i = e.slot,
                        n = 1 === this._enabled,
                        r = t.slot.getAdUnitPath(),
                        o = ts();
                    this._renderedSlotKey.set(r, o);
                    var a = {
                        adUnitPath: r,
                        advertiserId: t.advertiserId,
                        agnosticCreativeId: t.sourceAgnosticCreativeId,
                        agnosticLineItemId: t.sourceAgnosticLineItemId,
                        campaignId: t.campaignId,
                        companyIds: t.companyIds,
                        creativeId: t.creativeId,
                        isEmpty: t.isEmpty,
                        lineItemId: t.lineItemId,
                        serviceName: t.serviceName,
                        siteTargeting: n ? JSON.stringify(this._gam.getTargetingMap()) : this.filterTargeting(this._gam.getTargetingMap()),
                        size: t.size,
                        slotElementId: i.id,
                        slotKey: o,
                        slotTargeting: n ? JSON.stringify(i.getTargetingMap()) : this.filterTargeting(i.getTargetingMap()),
                        yieldGroupIds: t.yieldGroupIds
                    };
                    n ? this.pixel(this._host, "/impression.gif", a) : this.logImpressionEvent(a)
                }, t.prototype.filterTargeting = function(e) {
                    var t = this;
                    return Object.keys(e).filter((function(i) {
                        return !t._filterKeys.has(i) && e[i].length
                    })).reduce((function(t, i) {
                        return t[i] = e[i], t
                    }), {})
                }, t.prototype.logImpressionEvent = function(e) {
                    Bo.event("SlotRenderEnded", "adImpression", e)
                }, t.prototype.logTiming = function(e, t, i) {
                    var n = this;
                    window.performance && window.performance.timing && setTimeout((function() {
                        var r = window.performance.timing;
                        if (r && 0 !== r.navigationStart) {
                            var o = {
                                pageLoad: r.loadEventStart - r.navigationStart,
                                domainLookup: r.domainLookupEnd - r.domainLookupStart,
                                connect: r.connectEnd - r.connectStart,
                                request: r.responseStart - r.requestStart,
                                response: r.responseEnd - r.responseStart,
                                navigation: r.fetchStart - r.navigationStart,
                                domInteractive: r.domInteractive - r.navigationStart,
                                domContentLoaded: r.domContentLoadedEventStart - r.navigationStart
                            };
                            if (Object.keys(o).map((function(e) {
                                    return o[e]
                                })).every((function(e) {
                                    return !isNaN(e) && e >= 0 && e < 36e5
                                }))) {
                                var a = n._config.disableAds.reasons;
                                n.pixel(n._host, "/timing.gif", $r($r($r({}, o), n._config.timing), {
                                    disableAds: a.size > 0 ? so(a).join(",") : "none",
                                    auctionStarted: e,
                                    auctionFinished: t,
                                    displayed: i
                                }))
                            }
                        }
                    }), 0)
                }, t.prototype.pixel = function(e, t, i) {
                    i.abgroup = this._config.abGroup.groups.join(","), i.bucket = this._config.context.bucket, i.branch = this._config.context.branch, i.deployment = this._config.context.deployment, i.siteId = this._config.site.id, i.pageviewKey = this._config.context.pageviewKey, i.sessionKey = this._config.context.sessionKey;
                    var n = Aa(i);
                    return (new Image).src = "https://" + e + t + "?" + n
                }, t = eo([Ka("ImpressionLogComponent"), zo(), io("design:paramtypes", [Fc, Uc, Cu])], t)
            }(Su),
            ud = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._googleAdManager = t, r._config = i, r._slotManager = n, r._locations = ["Footer"], r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._googleAdManager.slotRenderEnded.on((function(t) {
                        var i = t.slot,
                            n = t.event;
                        e.slotRenderEnded(i, n)
                    }))
                }, t.prototype.slotRenderEnded = function(e, t) {
                    var i;
                    t.isEmpty || 2 !== (null === (i = t.size) || void 0 === i ? void 0 : i.length) || e.element && -1 !== this._locations.indexOf(e.location) && e.sticky && (e.element.setAttribute("closable", "true"), this._addCloseButton(e.element, e.location))
                }, t.prototype._addCloseButton = function(e, t) {
                    var i = this,
                        n = e.hasAttribute("closable"),
                        r = e.querySelector(".adthrive-close");
                    if (n && !r) {
                        var o = document.createElement("span");
                        o.innerHTML = "&times;", o.className = "adthrive-close", o.addEventListener("click", (function() {
                            var n = document.createEvent("Event");
                            n.initEvent("adthrive" + t + "Close", !0, !0), e.parentElement && (window.dispatchEvent(n), e.parentElement.removeChild(e), i._slotManager.destroy(e.id))
                        })), e.appendChild(o)
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.adOptions.footerCloseButtonMigrated ? "phone" === this._config.context.device ? this._config.adOptions.footerCloseButtonMobile : this._config.adOptions.footerCloseButtonDesktop : this._config.adOptions.footerCloseButton
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("CloseButtonComponent"), zo(), io("design:paramtypes", [Uc, Fc, Cu])], t)
            }(Su);

        function dd(e) {
            var t = typeof e;
            return null != e && ("object" == t || "function" == t)
        }
        var pd = "object" == typeof global && global && global.Object === Object && global,
            hd = "object" == typeof self && self && self.Object === Object && self,
            fd = pd || hd || Function("return this")(),
            gd = function() {
                return fd.Date.now()
            },
            md = fd.Symbol,
            yd = Object.prototype,
            _d = yd.hasOwnProperty,
            vd = yd.toString,
            bd = md ? md.toStringTag : void 0;
        var wd = Object.prototype.toString;
        var Sd = md ? md.toStringTag : void 0;

        function Cd(e) {
            return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : Sd && Sd in Object(e) ? function(e) {
                var t = _d.call(e, bd),
                    i = e[bd];
                try {
                    e[bd] = void 0;
                    var n = !0
                } catch (e) {}
                var r = vd.call(e);
                return n && (t ? e[bd] = i : delete e[bd]), r
            }(e) : function(e) {
                return wd.call(e)
            }(e)
        }
        var kd = /^\s+|\s+$/g,
            Pd = /^[-+]0x[0-9a-f]+$/i,
            Ed = /^0b[01]+$/i,
            Od = /^0o[0-7]+$/i,
            xd = parseInt;

        function Td(e) {
            if ("number" == typeof e) return e;
            if (function(e) {
                    return "symbol" == typeof e || function(e) {
                        return null != e && "object" == typeof e
                    }(e) && "[object Symbol]" == Cd(e)
                }(e)) return NaN;
            if (dd(e)) {
                var t = "function" == typeof e.valueOf ? e.valueOf() : e;
                e = dd(t) ? t + "" : t
            }
            if ("string" != typeof e) return 0 === e ? e : +e;
            e = e.replace(kd, "");
            var i = Ed.test(e);
            return i || Od.test(e) ? xd(e.slice(2), i ? 2 : 8) : Pd.test(e) ? NaN : +e
        }
        var Id = Math.max,
            Md = Math.min;

        function Ad(e, t, i) {
            var n, r, o, a, s, c, l = 0,
                u = !1,
                d = !1,
                p = !0;
            if ("function" != typeof e) throw new TypeError("Expected a function");

            function h(t) {
                var i = n,
                    o = r;
                return n = r = void 0, l = t, a = e.apply(o, i)
            }

            function f(e) {
                return l = e, s = setTimeout(m, t), u ? h(e) : a
            }

            function g(e) {
                var i = e - c;
                return void 0 === c || i >= t || i < 0 || d && e - l >= o
            }

            function m() {
                var e = gd();
                if (g(e)) return y(e);
                s = setTimeout(m, function(e) {
                    var i = t - (e - c);
                    return d ? Md(i, o - (e - l)) : i
                }(e))
            }

            function y(e) {
                return s = void 0, p && n ? h(e) : (n = r = void 0, a)
            }

            function _() {
                var e = gd(),
                    i = g(e);
                if (n = arguments, r = this, c = e, i) {
                    if (void 0 === s) return f(c);
                    if (d) return clearTimeout(s), s = setTimeout(m, t), h(c)
                }
                return void 0 === s && (s = setTimeout(m, t)), a
            }
            return t = Td(t) || 0, dd(i) && (u = !!i.leading, o = (d = "maxWait" in i) ? Id(Td(i.maxWait) || 0, t) : o, p = "trailing" in i ? !!i.trailing : p), _.cancel = function() {
                void 0 !== s && clearTimeout(s), l = 0, n = c = r = s = void 0
            }, _.flush = function() {
                return void 0 === s ? a : y(gd())
            }, _
        }

        function zd(e, t, i) {
            var n = !0,
                r = !0;
            if ("function" != typeof e) throw new TypeError("Expected a function");
            return dd(i) && (n = "leading" in i ? !!i.leading : n, r = "trailing" in i ? !!i.trailing : r), Ad(e, t, {
                leading: n,
                maxWait: t,
                trailing: r
            })
        }
        var Rd = function() {
                function e(e, t) {
                    var i = this;
                    this._overlap = null, this._stuck = !1, this._start = 0, this._cutoff = 0, this._cutoffBuffer = 20, this._element = e.element, t && (e.stickyOverlapSelector ? this._overlap = document.querySelector(e.stickyOverlapSelector) : this._overlap = this.findOverlap(this._element), this._overlap), window.addEventListener("scroll", zd((function() {
                        return i.update()
                    }), 500)), window.addEventListener("resize", zd((function() {
                        i.unstick(), i.update(), i.check()
                    }), 500)), window.addEventListener("scroll", (function() {
                        return i.check()
                    }))
                }
                return e.prototype.update = function() {
                    this._element && (this._stuck || (this._start = this.getTop(this._element)), this._overlap && (this._cutoff = this.getTop(this._overlap)))
                }, e.prototype.check = function() {
                    if (0 !== this._start) {
                        var e = window.pageYOffset,
                            t = this._element.offsetHeight + this._cutoffBuffer,
                            i = 0 !== this._cutoff && e + t > this._cutoff;
                        this._start < e && !i ? this.stick() : this.unstick()
                    }
                }, e.prototype.stick = function() {
                    if (!this._stuck) {
                        var e = getComputedStyle(this._element, null),
                            t = this._element.parentElement;
                        if (t) {
                            var i = getComputedStyle(t, null);
                            t.style.minHeight = i.getPropertyValue("height")
                        }
                        this._element.style.width || (this._element.style.width = e.getPropertyValue("width")), this._element.classList.add("adthrive-stuck"), this._stuck = !0
                    }
                }, e.prototype.unstick = function() {
                    this._stuck && (this._element.classList.remove("adthrive-stuck"), this._stuck = !1)
                }, e.prototype.getTop = function(e) {
                    return e.getBoundingClientRect().top + window.pageYOffset
                }, e.prototype.findOverlap = function(e) {
                    for (var t = null; e.parentElement;) {
                        for (var i = (e = e.parentElement).nextElementSibling; i && Ca(i);) i = i.nextElementSibling;
                        i && i.offsetTop > 0 && (!t || i.offsetTop < t.offsetTop) && (t = i)
                    }
                    return t
                }, e
            }(),
            jd = function() {
                function e(e, t, i, n, r, o) {
                    this._config = e, this._slotManager = t, this._slot = i, this._stickyCloseButtonExperiment = n, this._eventProxy = r, this._videoCloseButton = o, this._isRendered = !1
                }
                return e.prototype.setup = function() {
                    this._isRendered || (this._isRendered = !0, this._appendCloseButton(), this._activate())
                }, Object.defineProperty(e.prototype, "renderState", {
                    get: function() {
                        return this._isRendered
                    },
                    enumerable: !1,
                    configurable: !0
                }), e.prototype._activate = function() {
                    this._handleWidthBreak(), this._eventProxy.videoPlaying.on(this._handleRelatedPlayClose.bind(this)), this._slot.element.parentElement.classList.add("adthrive-sticky-outstream-active")
                }, e.prototype._appendCloseButton = function() {
                    var e = this._slot.element,
                        t = this._videoCloseButton.createPlayerCloseButton(this._handleCloseClick.bind(this), this._stickyCloseButtonExperiment.result, "adthrive-sticky-outstream-close");
                    e.parentNode.insertBefore(t, e), setTimeout((function() {
                        t.style.display = "inline-flex"
                    }), this._config.video.closeButtonTimeout)
                }, e.prototype._logPlayerClose = function(t) {
                    e.closeEvent.emit().catch((function() {})), Bo.event("StickyOutstream", "handleClose", {
                        device: wa() ? "desktop" : "mobile",
                        closeReason: t
                    })
                }, e.prototype._handleRelatedPlayClose = function() {
                    this._handleClose("relatedPlay")
                }, e.prototype._handleCloseClick = function() {
                    this._handleClose("closeClick")
                }, e.prototype._handleClose = function(e) {
                    var t = this._slot.element,
                        i = t.parentElement;
                    this._logPlayerClose(e), i && (i.removeChild(t), i.classList.remove("adthrive-sticky-outstream-active"), this._slotManager.destroy(t.id), this._removeListener())
                }, e.prototype._handleWidthBreak = function() {
                    this._removeListener = this._eventProxy.footerRefreshed.on(this._handleFooterRefreshedEvent.bind(this)), this._repositionCollapseBottom()
                }, e.prototype._handleFooterRefreshedEvent = function() {
                    this._repositionCollapseBottom()
                }, e.prototype._repositionCollapseBottom = function() {
                    if ("desktop" !== this._config.context.device) {
                        var e = Qo();
                        this._slot.element.parentElement.style.setProperty("top", "auto", "important"), this._slot.element.parentElement.style.setProperty("bottom", e + "px", "important")
                    }
                }, e.closeEvent = new Do, e
            }(),
            Dd = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.abgroup = t, i.key = "socbe", i._choices = [{
                        choice: "sovpcc",
                        weight: 0
                    }, {
                        choice: "sovpct1",
                        weight: 0
                    }, {
                        choice: "sovpct2",
                        weight: 100
                    }], i._result = i.run(), t.set(i.key, i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("StickyCloseButtonExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Bd = function(e) {
                function t() {
                    var t = null !== e && e.apply(this, arguments) || this;
                    return t._hasTitleBar = !1, t._isInstreamExperiment = !1, t._isButtonOutsideContainer = !1, t._isButtonInsideContainer = !1, t._isDefaultPosition = !1, t._experimentResult = "", t
                }
                return Jr(t, e), t.prototype.createDefaultButton = function(e) {
                    var t = document.createElement("div");
                    return t.innerHTML = "<span>&times;</span>", t.className = "adthrive-wrapper-close", t.style.display = "none", t.id = "adthrive-collapse-close", t.onclick = e, t
                }, t.prototype.createPlayerCloseButton = function(e, t, i, n) {
                    void 0 === n && (n = !1), this._hasTitleBar = n, this._isInstreamExperiment = "tlo" === t || "tlw" === t, this._isButtonOutsideContainer = "sovpct1" === t || "tlo" === t, this._isButtonInsideContainer = "sovpct2" === t || "tlw" === t, this._isDefaultPosition = "sovpcc" === t || "off" === t, this._experimentResult = t;
                    var r = this._getButtonClasses(),
                        o = this._getSvgOptions(),
                        a = this._createCloseButton(r, i, o);
                    return a.onclick = e, this._isButtonInsideContainer ? this.applyCloseButtonWrapper(a) : a
                }, t.prototype._getButtonClasses = function() {
                    var e = [];
                    return (this._isButtonOutsideContainer || this._isDefaultPosition) && e.push("adthrive-wrapper-float-close"), this._isInstreamExperiment ? (e.push("adthrive-instream-close"), this._isButtonOutsideContainer && e.push("adthrive-top-left-outer", "adthrive-float-left")) : "sovpcc" !== this._experimentResult && e.push("adthrive-wrapper-close-outside-left"), e
                }, t.prototype._getSvgOptions = function() {
                    return this._isButtonInsideContainer ? {
                        fillColor: "transparent",
                        strokeColor: "white"
                    } : {
                        fillColor: "white",
                        strokeColor: "black"
                    }
                }, t.prototype._createCloseButton = function(e, t, i) {
                    var n = null != i ? i : {
                            fillColor: "white",
                            strokeColor: "black"
                        },
                        r = n.fillColor,
                        o = n.strokeColor,
                        a = this._createButtonHtml(e, t),
                        s = this._createSvg(r),
                        c = this._createPath(o);
                    return s.appendChild(c), a.appendChild(s), a
                }, t.prototype._createButtonHtml = function(e, t) {
                    var i = document.createElement("div");
                    return i.className = e.join(" "), i.id = t, i
                }, t.prototype._createSvg = function(e) {
                    var t = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    return t.setAttribute("width", "18"), t.setAttribute("height", "18"), t.setAttribute("fill", e), t
                }, t.prototype._createPath = function(e) {
                    var t = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    return t.setAttribute("d", "M 0.5 9 A 5 5 0 0 0 17.5 9 A 5 5 0 0 0 0.5 9 M 9 9 L 7 7 L 11 11 M 9 9 L 7 11 L 11 7"), t.setAttribute("stroke", e), t.setAttribute("stroke-width", "1"), t
                }, t.prototype.applyCloseButtonWrapper = function(e) {
                    var t, i = document.createElement("div"),
                        n = ["adthrive-wrapper-float-close", "adthrive-wrapper-close-bkgd-50"];
                    return this._hasTitleBar ? n.push("adthrive-top-left-inner-wrapper") : n.push("adthrive-top-left-inner"), (t = i.classList).add.apply(t, so(n)), i.appendChild(e), i
                }, t = eo([Ka("VideoCloseButtonComponent"), zo()], t)
            }(Su),
            Vd = function() {
                function e(e, t) {
                    var i = this;
                    this._gam = e, this._pageManager = t, this.scroll = new Do, this.resize = new Do, this.pageVisibility = new Do, this.videoPlaying = new Do, this.footerRefreshed = new Do, this.addEventListeners(), this._gam.slotRenderEnded.on((function(e) {
                        "Footer" === e.slot.location && i.footerRefreshed.emit()
                    }))
                }
                return e.prototype.addEventListeners = function() {
                    var e = this,
                        t = !1,
                        i = !1;
                    this._pageManager.scroll.on((function() {
                        t || (t = !0, setTimeout((function() {
                            e.scroll.emit(), t = !1
                        }), 100))
                    })), this._pageManager.resize.on((function() {
                        i || (i = !0, setTimeout((function() {
                            e.resize.emit(), i = !1
                        }), 100))
                    })), this._pageManager.visibilityChange.on((function() {
                        e.pageVisibility.emit(document.hidden)
                    }))
                }, e.prototype.emitVideoPlayingEvent = function(e) {
                    this.videoPlaying.emit(e).catch((function() {}))
                }, e = eo([Ro(), io("design:paramtypes", [Uc, bc])], e)
            }(),
            Ld = function(e) {
                function t(t, i, n, r, o, a) {
                    var s = e.call(this) || this;
                    return s._slots = t, s._config = i, s._slotManager = n, s._stickyCloseButtonExperiment = r, s._eventProxy = o, s._videoCloseButton = a, s._sticky = [], s._slots.added.on((function(e) {
                        e && e.sticky && (e.element.classList.add("adthrive-sticky"), "Sidebar" === e.location && s._sticky.push(new Rd(e, !0)), "Video_StickyOutstream" === e.location && (s._stickyOutstream = new jd(s._config, s._slotManager, e, s._stickyCloseButtonExperiment, s._eventProxy, s._videoCloseButton)))
                    })), s
                }
                return Jr(t, e), t.prototype.stickyOutstreamReady = function() {
                    this._stickyOutstream && !this._stickyOutstream.renderState && this._stickyOutstream.setup()
                }, t = eo([Ka("StickyComponent"), zo(), io("design:paramtypes", [qc, Fc, Cu, Dd, Vd, Bd])], t)
            }(Su),
            Fd = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._config = t, a._pageManager = i, a._slots = n, a._slotManager = r, a._sticky = o, a._debounce = new jo(1e3), a._viewports = a._config.lazyLoad.viewports, a
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = new Map([
                            ["Below_Post", this._viewports.belowPost],
                            ["Content", this._viewports.content],
                            ["Default", this._viewports.default]
                        ]);
                    this._slotManager.added.on((function(i) {
                        var n, r, o = function(i) {
                            if (i.lazy) {
                                var n = e._config.adOptions.infiniteScroll ? e._viewports.infScroll : Ko(t.get(i.location), t.get("Default"));
                                e.getIntersectionObserver(n).observe(i.element)
                            } else "Video_StickyOutstream" === i.location ? e._pageManager.setupOnceEvent("scroll", (function() {
                                e._sticky.stickyOutstreamReady(), e._slotManager.display([i]).catch((function(e) {
                                    Bo.error("LazyLoadComponent", "scroll", "display stickyOutstream slot", e)
                                }))
                            })) : e._slotManager.display([i]).catch((function(e) {
                                Bo.error("LazyLoadComponent", "init", "display", e)
                            }))
                        };
                        try {
                            for (var a = oo(i), s = a.next(); !s.done; s = a.next()) {
                                o(s.value)
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }))
                }, t.prototype.getIntersectionObserver = function(e) {
                    var t = this,
                        i = window.innerHeight * e;
                    return new IntersectionObserver((function(e) {
                        var i, n, r = function(e) {
                            var i = t._slots.get(e.target.id);
                            i && t._debounce.limit(e.target.id).then((function() {
                                return t.processEvent(e, i)
                            })).catch((function(e) {
                                Bo.error("LazyLoadComponent", "getIntersectionObserver", e)
                            }))
                        };
                        try {
                            for (var o = oo(e), a = o.next(); !a.done; a = o.next()) {
                                r(a.value)
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                a && !a.done && (n = o.return) && n.call(o)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }), {
                        rootMargin: i + "px 0px",
                        threshold: [0, 1]
                    })
                }, t.prototype.processEvent = function(e, t) {
                    e.isIntersecting && !t.displayed ? this._slotManager.display(t).catch((function(e) {
                        Bo.error("LazyLoadComponent", "processEvent", "display", e)
                    })) : !e.isIntersecting && t.displayed && this._slotManager.clear(t).catch((function(e) {
                        Bo.error("LazyLoadComponent", "processEvent", "clear", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !1
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("LazyLoadComponent"), zo(), io("design:paramtypes", [Fc, bc, qc, Cu, Ld])], t)
            }(Su),
            Nd = function(e) {
                function t(t, i, n, r, o, a) {
                    var s = e.call(this) || this;
                    return s._config = t, s._gam = i, s._pageManager = n, s._slots = r, s._slotManager = o, s._sticky = a, s._debounce = new jo(1e3), s
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = this._slotManager;
                    this._slotManager.added.on((function(i) {
                        var n, r, o = function(i) {
                            i.lazy ? (Uc.pushToQueue((function() {
                                i.googleTagSlot.setTargeting("lazy", "true")
                            })), e.getIntersectionObserver().observe(i.element)) : "Video_StickyOutstream" === i.location ? e._pageManager.setupOnceEvent("scroll", (function() {
                                e._sticky.stickyOutstreamReady(), t.display([i]).catch((function(e) {
                                    Bo.error("GoogleLazyLoadComponent", "scroll", "display stickyOutstream slot", e)
                                }))
                            })) : (Uc.pushToQueue((function() {
                                i.googleTagSlot.setTargeting("lazy", "false")
                            })), t.display(i).catch((function(e) {
                                Bo.error("GoogleLazyLoadComponent", "init", "display non lazy slot", e)
                            })))
                        };
                        try {
                            for (var a = oo(i), s = a.next(); !s.done; s = a.next()) {
                                o(s.value)
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                s && !s.done && (r = a.return) && r.call(a)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }))
                }, t.prototype.getIntersectionObserver = function() {
                    var e = this,
                        t = window.innerHeight * (this._config.lazyLoad.googleLazyLoadSettings.hbMarginPercent / 100);
                    return new IntersectionObserver((function(t, i) {
                        var n, r;
                        try {
                            for (var o = oo(t), a = o.next(); !a.done; a = o.next()) {
                                var s = a.value;
                                e.processEntry(s, i)
                            }
                        } catch (e) {
                            n = {
                                error: e
                            }
                        } finally {
                            try {
                                a && !a.done && (r = o.return) && r.call(o)
                            } finally {
                                if (n) throw n.error
                            }
                        }
                    }), {
                        rootMargin: t + "px 0px",
                        threshold: [0]
                    })
                }, t.prototype.processEntry = function(e, t) {
                    var i = this,
                        n = this._slots.get(e.target.id);
                    n && e.intersectionRatio > 0 && (this._debounce.limit(e.target.id).then((function() {
                        return i._slotManager.display(n)
                    })).catch((function(e) {
                        Bo.error("GoogleLazyLoadComponent", "callback", "display lazy slot", e)
                    })), t.unobserve(n.element))
                }, t = eo([Ka("GoogleLazyLoadComponent"), zo(), io("design:paramtypes", [Fc, Uc, bc, qc, Cu, Ld])], t)
            }(Su),
            qd = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._gam = t, n._slotManager = i, n._isMobile = Pa(), n
                }
                return Jr(t, e), t.prototype._isCustomHVP = function(e) {
                    return this._isMobile && "Content" === e
                }, t.prototype.init = function() {
                    var e = this;
                    this._slotManager.added.on((function(e) {
                        Uc.pushToQueue((function() {
                            var t, i;
                            try {
                                for (var n = oo(e), r = n.next(); !r.done; r = n.next()) {
                                    var o = r.value,
                                        a = Math.min(10 * Math.floor(100 * o.viewability / 10), 80);
                                    a >= 50 && o.setTargeting({
                                        key: "hvp",
                                        value: a.toString()
                                    })
                                }
                            } catch (e) {
                                t = {
                                    error: e
                                }
                            } finally {
                                try {
                                    r && !r.done && (i = n.return) && i.call(n)
                                } finally {
                                    if (t) throw t.error
                                }
                            }
                        }))
                    })), this._slotManager.refreshing.on((function(t) {
                        Uc.pushToQueue((function() {
                            var i, n;
                            try {
                                for (var r = oo(t), o = r.next(); !o.done; o = r.next()) {
                                    var a = o.value,
                                        s = e._isCustomHVP(a.location);
                                    1 === a.refreshCount ? a.setTargeting({
                                        key: "hvp",
                                        value: s ? "60" : "80"
                                    }) : 2 === a.refreshCount && s && a.setTargeting({
                                        key: "hvp",
                                        value: "80"
                                    })
                                }
                            } catch (e) {
                                i = {
                                    error: e
                                }
                            } finally {
                                try {
                                    o && !o.done && (n = r.return) && n.call(r)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                        }))
                    }))
                }, t = eo([Ka("HvpComponent"), zo(), io("design:paramtypes", [Uc, Cu])], t)
            }(Su),
            Ud = function() {
                function e(e) {
                    this._config = e
                }
                return e.prototype.inject = function() {
                    try {
                        return this._config.marmalade.selectorMatches.reduce(this.processMatch.bind(this), [])
                    } catch (e) {
                        Bo.error("MarmaladeInjector", "inject", e)
                    }
                    return []
                }, e.prototype.processMatch = function(e, t) {
                    var i = t.adUnit,
                        n = t.match,
                        r = this.getElementId(i.location, i.sequence);
                    if (!e.some((function(e) {
                            return e.location === i.location && e.sequence === i.sequence
                        }))) {
                        var o = this.addAd(n, r, i.position, i.classNames);
                        if (o) {
                            var a = new Nc(i.location, i.sequence, i.size, o, !1, i.lazy);
                            e.push(a)
                        }
                    }
                    return e
                }, e.prototype.getElementId = function(e, t) {
                    return [this._config.gam.prefix, e, t].filter(La).join("_")
                }, e.prototype.addAd = function(e, t, i, n) {
                    void 0 === n && (n = []);
                    var r = '<div id="' + t + '" class="adthrive-ad ' + n.join(" ") + '"></div>';
                    return e.insertAdjacentHTML(i, r), document.getElementById(t)
                }, e = eo([Ka("MarmaladeInjector"), zo(), io("design:paramtypes", [Fc])], e)
            }(),
            Hd = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._config = t, a._marmaladeInjector = i, a._slotManager = n, a._gam = r, a._prebidMethods = o, a
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = this._marmaladeInjector.inject();
                    t.forEach((function(e) {
                        return e.refreshInterval = 0
                    }));
                    var i = this._config.marmalade.siteCodes.filter(ea),
                        n = this._config.marmalade.mcmp.filter(ea),
                        r = this._config.marmalade.flpProdIds.filter(ea),
                        o = this._config.marmalade.loaded ? "true" : "false";
                    this._gam.setTargeting({
                        key: "mcmp",
                        value: n
                    }), this._gam.setTargeting({
                        key: "site_code",
                        value: i
                    }), this._gam.setTargeting({
                        key: "marmalade",
                        value: o
                    });
                    var a = i.reduce((function(e, t) {
                        return e[t] = "True", e
                    }), {});
                    if (ha($r({
                            MCMP: n.join("#MCMP:")
                        }, a), this._prebidMethods), t.length > 0 && this._gam.started.on((function() {
                            return e._slotManager.add(t).catch((function(e) {
                                Bo.error("MarmaladeComponent", "init", e)
                            }))
                        })), r) {
                        ! function(e, t) {
                            window.addEventListener("message", (function(i) {
                                try {
                                    var n = i.origin,
                                        r = i.source,
                                        o = JSON.parse(i.data),
                                        a = o && o.message === t.message;
                                    if (!n || !n.match(e) || !a) return;
                                    r.postMessage(JSON.stringify(t), n)
                                } catch (e) {
                                    return
                                }
                            }))
                        }(/https:\/\/\S*\.safeframe.googlesyndication.com/i, {
                            message: "adthriveFlippData",
                            flippData: r
                        })
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !this._config.disableAds.all
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("MarmaladeComponent"), zo(), io("design:paramtypes", [Fc, Ud, Cu, Uc, Gc])], t)
            }(Su),
            Wd = function() {
                function e(e, t, i) {
                    this._emailCaptureHandler = e, this._gdprEvents = t, this._config = i, this._email = "", this._consent = "", this._hash = "", this._source = "", this._consentReceived = !1, this._emailCounted = !1, this.piiCaptured = new Do
                }
                return e.prototype.init = function() {
                    var e = this;
                    this._emailCaptureHandler.emailCaptured.on((function(t) {
                        return e._handleEmailCapture(t)
                    })), this._gdprEvents.consentCaptured.on((function(t) {
                        return e._handleConsentCapture(t)
                    }))
                }, e.prototype._handleEmailCapture = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i, n, r, o;
                        return ro(this, (function(a) {
                            switch (a.label) {
                                case 0:
                                    return t = e.email, i = e.hash, n = e.source, r = this, (o = i) ? [3, 2] : [4, this._hashEmail(t)];
                                case 1:
                                    o = a.sent(), a.label = 2;
                                case 2:
                                    return r._hash = o, this._email = t, this._source = n, this._config.gdpr.enabled && !this._consentReceived || this._sendPii(), [2]
                            }
                        }))
                    }))
                }, e.prototype._handleConsentCapture = function(e) {
                    this._consentReceived = !0, this._consent = e, this._email && this._hash && this._sendPii()
                }, e.prototype._sendPii = function() {
                    this._emailCounted || (this._emailCounted = !0, Bo.event("PiiManager", "_sendPii", this._source)), this.piiCaptured.emit({
                        email: this._email,
                        hash: this._hash,
                        consent: this._consent,
                        source: this._source
                    }).catch((function() {}))
                }, e.prototype._hashEmail = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i, n;
                        return ro(this, (function(r) {
                            switch (r.label) {
                                case 0:
                                    return !("msCrypto" in window) && "https:" === location.protocol && "crypto" in window && "TextEncoder" in window ? (t = (new TextEncoder).encode(e), [4, crypto.subtle.digest("SHA-256", t)]) : [3, 2];
                                case 1:
                                    return i = r.sent(), n = Array.from(new Uint8Array(i)), [2, n.map((function(e) {
                                        return ("00" + e.toString(16)).slice(-2)
                                    })).join("")];
                                case 2:
                                    return [2, ""]
                            }
                        }))
                    }))
                }, e = eo([Ka("PiiManager"), Ro(), io("design:paramtypes", [od, ad, Fc])], e)
            }(),
            Gd = function() {
                function e() {}
                return Object.defineProperty(e.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), e
            }(),
            Qd = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n._liveRampBaseUrl = "https://api.rlcdn.com/api/identity/envelope", n._pid = 111, n._it = 4, n._localKey = "_lr_env", n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        var e;
                        return (null === (e = this._config.liveRampAts) || void 0 === e ? void 0 : e.enabled) && "localStorage" in window
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.init = function() {
                    window.localStorage.getItem(this._localKey) && this._gam.setTargetingFlag("idp", ["ats"])
                }, t.prototype.processPii = function(e) {
                    return no(this, void 0, void 0, (function() {
                        var t, i, n;
                        return ro(this, (function(r) {
                            switch (r.label) {
                                case 0:
                                    if (localStorage.getItem(this._localKey)) return [2];
                                    t = this._liveRampBaseUrl + "?pid=" + this._pid + "&it=" + this._it + "&iv=" + (e.hash ? e.hash : e.email), this._config.gdpr.enabled ? t += "&ct=4&cv=" + e.consent : this._config.ccpa.required && (t += "&ct=4&cv=" + ja("usprivacy")), r.label = 1;
                                case 1:
                                    return r.trys.push([1, 4, , 5]), [4, fetch(t, {
                                        method: "GET",
                                        keepalive: !0
                                    })];
                                case 2:
                                    return [4, r.sent().text()];
                                case 3:
                                    return (i = r.sent()) ? (n = JSON.parse(i).envelope, localStorage.setItem(this._localKey, btoa(JSON.stringify({
                                        envelope: n,
                                        timestamp: +new Date
                                    }))), [2]) : [3, 5];
                                case 4:
                                    return r.sent(), [3, 5];
                                case 5:
                                    return [2]
                            }
                        }))
                    }))
                }, t = eo([Ka("LiveRampPiiPartner"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Gd),
            Kd = function(e, t) {
                return !e.idho.subModule || e.idho.subModule.name !== t
            },
            Xd = new Map([
                ["connectId", {
                    id: {
                        name: "connectId",
                        params: {
                            pixelId: 58404
                        },
                        storage: {
                            name: "connectid",
                            type: "html5",
                            expires: 15
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name) && e.liveRampAts.enabled
                    },
                    targetingKey: "cid"
                }],
                ["unifiedId", {
                    id: {
                        name: "unifiedId",
                        params: {
                            url: "https://match.adsrvr.org/track/rid?ttd_pid=iowij76&fmt=json"
                        },
                        storage: {
                            type: "html5",
                            name: "pbjs-unifiedid",
                            expires: 60
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name)
                    },
                    targetingKey: "uid1"
                }],
                ["id5Id", {
                    id: {
                        name: "id5Id",
                        params: {
                            partner: 367
                        },
                        storage: {
                            type: "html5",
                            name: "pbjs-id5id",
                            expires: 60,
                            refreshInSeconds: 28800
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name)
                    },
                    targetingKey: "id5"
                }],
                ["identityLink", {
                    id: {
                        name: "identityLink",
                        params: {
                            pid: "111"
                        },
                        storage: {
                            type: "html5",
                            name: "pbjs-identitylink",
                            expires: 60
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name)
                    },
                    targetingKey: "idl"
                }],
                ["pubCommonId", {
                    id: {
                        name: "pubCommonId",
                        storage: {
                            type: "html5",
                            name: "pbjs-pubcommonid",
                            expires: 60
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name)
                    },
                    targetingKey: "pc"
                }],
                ["criteo", {
                    id: {
                        name: "criteo",
                        storage: {
                            type: "html5",
                            name: "pbjs-criteo",
                            expires: 60
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name)
                    },
                    targetingKey: "cri"
                }],
                ["parrableId", {
                    id: {
                        name: "parrableId",
                        params: {
                            partner: "9fde8b8d-49db-4c9e-b841-0e777ab8d343"
                        }
                    },
                    enabled: function(e) {
                        return Kd(e, this.id.name) && (Ba(["Pacific/Auckland"], [-720]) || Ba(["Pacific/Honolulu"], [600]) || Ba(["America/Phoenix"], [420]) || Va())
                    },
                    targetingKey: "par"
                }]
            ]),
            Jd = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._prebidMethods = i, n._submitted = !1, n.userId = Xd.get("connectId").id, n
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return Xd.get("connectId").enabled(this._config)
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.updateUserIds = function() {
                    var e = this;
                    return this._prebidMethods.getConfig("userSync.userIds").map((function(t) {
                        return t.name === e.userId.name && (t = e.userId), t
                    }))
                }, t.prototype.processPii = function(e) {
                    var t = this;
                    this._prebidMethods.addToQueue((function() {
                        t.run(e)
                    }))
                }, t.prototype.run = function(e) {
                    if (e.hash && this.userId.params && !this._submitted) {
                        this.userId.params.he = e.hash, this._submitted = !0;
                        var t = this.updateUserIds();
                        this._prebidMethods.setConfig({
                            userSync: {
                                userIds: t
                            }
                        }), this._prebidMethods.refreshUserIds({
                            submoduleNames: [this.userId.name]
                        }, (function() {}))
                    }
                }, t = eo([Ka("YahooPiiPartner"), zo(), io("design:paramtypes", [Fc, Gc])], t)
            }(Gd),
            Yd = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._piiManager = t, r._partners = [i, n].filter((function(e) {
                        return e.enabled
                    })), r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._piiManager.init(), this._partners.forEach((function(e) {
                        return e.init && e.init()
                    })), this._piiManager.piiCaptured.on((function(t) {
                        e._partners.forEach((function(e) {
                            e.processPii(t)
                        }))
                    }))
                }, t = eo([Ka("PiiCaptureComponent"), zo(), io("design:paramtypes", [Wd, Qd, Jd])], t)
            }(Su),
            Zd = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._slotManager = t, i._maxSlotRefreshCount = 4, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._slotManager.displaying.on((function(e) {
                        Uc.pushToQueue((function() {
                            e.forEach((function(e) {
                                return e.setTargeting({
                                    key: "refresh",
                                    value: "00"
                                })
                            })), e.forEach((function(e) {
                                return e.setTargeting({
                                    key: "nref",
                                    value: "0"
                                })
                            }))
                        }))
                    })), this._slotManager.refreshing.on((function(t) {
                        Uc.pushToQueue((function() {
                            var i, n;
                            try {
                                for (var r = oo(t), o = r.next(); !o.done; o = r.next()) {
                                    var a = o.value,
                                        s = ("0" + Math.min(a.refreshCount, e._maxSlotRefreshCount)).slice(-2);
                                    a.setTargeting({
                                        key: "refresh",
                                        value: s
                                    }), a.setTargeting({
                                        key: "nref",
                                        value: a.refreshCount.toString()
                                    })
                                }
                            } catch (e) {
                                i = {
                                    error: e
                                }
                            } finally {
                                try {
                                    o && !o.done && (n = r.return) && n.call(r)
                                } finally {
                                    if (i) throw i.error
                                }
                            }
                        }))
                    }))
                }, t = eo([Ka("RefreshCountComponent"), zo(), io("design:paramtypes", [Cu])], t)
            }(Su),
            $d = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.key = "rebuildslot", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.95).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("RefreshRebuildExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            ep = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._slotManager = t, n._refreshRebuildExperiment = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._slotManager.refreshing.on((function(t) {
                        t.filter(e.slotHasHighRefreshCountIncrement).forEach((function(t) {
                            return e._slotManager.rebuild(t)
                        }))
                    }))
                }, t.prototype.slotHasHighRefreshCountIncrement = function(e) {
                    return e.refreshCount % 100 == 0
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._refreshRebuildExperiment.result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("RefreshRebuildComponent"), zo(), io("design:paramtypes", [Cu, $d])], t)
            }(Su);

        function tp(e, t) {
            void 0 === t && (t = {});
            var i = t.insertAt;
            if (e && "undefined" != typeof document) {
                var n = document.head || document.getElementsByTagName("head")[0],
                    r = document.createElement("style");
                r.type = "text/css", "top" === i && n.firstChild ? n.insertBefore(r, n.firstChild) : n.appendChild(r), r.styleSheet ? r.styleSheet.cssText = e : r.appendChild(document.createTextNode(e))
            }
        }
        var ip = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i
                }
                return Jr(t, e), t.prototype.start = function() {
                    var e, t;
                    this._config.site.style && this._config.site.style.length > 0 ? tp(this._config.site.style) : this._config.context.styleUrl && (e = this._config.context.styleUrl, (t = document.createElement("link")).rel = "stylesheet", t.type = "text/css", t.href = e, document.head.appendChild(t))
                }, t = eo([Ka("SiteStyleComponent"), zo(), io("design:paramtypes", [Fc])], t)
            }(Su),
            np = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._gam = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this.getReferrer();
                    null !== e && this._gam.setTargeting({
                        key: "doc_ref",
                        value: e
                    })
                }, t.prototype.getReferrer = function() {
                    var e = aa();
                    return e && e.length && ra("referrer", e), e
                }, t = eo([Ka("TrafficSourceComponent"), zo(), io("design:paramtypes", [Uc])], t)
            }(Su),
            rp = function() {
                function e(e) {
                    this._gam = e
                }
                return e.prototype.getStoredIdValue = function(e) {
                    var t;
                    return "cookie" === e.type && window.navigator.cookieEnabled ? t = ja(e.name) : "html5" === e.type && (t = window.localStorage.getItem(e.name)), t
                }, e.prototype.getSyncedIdModules = function(e) {
                    var t = this;
                    return so(e).reduce((function(e, i) {
                        return void 0 !== i.storage && t.getStoredIdValue(i.storage) ? (e.push(i.name), e) : e
                    }), [])
                }, e.prototype.setTargeting = function(e) {
                    var t = this.getSyncedIdModules(e).map((function(e) {
                        var t;
                        return (null === (t = Xd.get(e)) || void 0 === t ? void 0 : t.targetingKey) || e
                    }));
                    this._gam.setTargetingFlag("idp", t)
                }, e = eo([Ka("UserIdTargeting"), zo(), io("design:paramtypes", [Uc])], e)
            }(),
            op = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._prebidMethods = i, r.userIdTargeting = n, r._enabledUserIds = [], r._ppid = null, r._enabledUserIds = so(Xd.values()).filter((function(e) {
                        return e.enabled(r._config)
                    })).map((function(e) {
                        if ("pubCommonId" === e.id.name) {
                            var t = e.id.storage && e.id.storage.name || "";
                            r._ppid = localStorage.getItem(t), r._ppid && (e.id.name = "sharedId", e.id.value = {
                                pubcid: r._ppid
                            })
                        }
                        return e.id
                    })), r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = {
                        userIds: this._enabledUserIds
                    };
                    this._ppid && (e = $r({
                        ppid: "pubcid.org"
                    }, e)), this._prebidMethods.setConfig({
                        userSync: e
                    }), this.userIdTargeting.setTargeting(so(Xd.values()).map((function(e) {
                        return e.id
                    })))
                }, t = eo([Ka("UserIdComponent"), zo(), io("design:paramtypes", [Fc, Gc, rp])], t)
            }(Su),
            ap = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = Ko(na("utm", 18e5), {});
                    ["utm_medium", "utm_campaign", "utm_session", "utm_source"].forEach((function(i) {
                        var n = e._config.context.querystring.get(i),
                            r = Ko(n, t[i]);
                        e._gam.setTargeting({
                            key: i,
                            value: r
                        }), r && (t[i] = r)
                    })), ra("utm", t)
                }, t = eo([Ka("UTMComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            sp = function() {
                function e() {}
                var t;
                return t = e, e.changeState = function(e, i) {
                    var n = e.mediaStarted,
                        r = e.playerContainer,
                        o = e.playerElement,
                        a = e.playerInstance,
                        s = e.playerState;
                    if (7 === i) return this.uncollapse(e), a.pause(!0), 7;
                    switch (s) {
                        case 0:
                            if (4 === i) return e.collapseTimer.firstInView || (e.collapseTimer.firstInView = new Date), t.startEvent.emit().catch((function() {})), this._shouldCollapse(r, n) ? (this.collapse(e), a.getViewable() && a.play(!0), a._nonLinearAd ? 8 : 2) : a._nonLinearAd ? 8 : 1;
                            break;
                        case 1:
                            if (4 === i) {
                                if (this._shouldCollapse(r, n)) return this.collapse(e), a.play(!0), 2;
                                a.play(!0)
                            } else {
                                if (3 === i) return a.pause(!0), 5;
                                if (1 === i) return 3
                            }
                            break;
                        case 2:
                            if (4 === i) {
                                if (!this._shouldCollapse(r, n)) return this.uncollapse(e), a.play(!0), 1;
                                a.play(!0)
                            } else {
                                if (1 === i) return 4;
                                if (6 === i) return e.lastCollapsedClasses = o.className, this.uncollapse(e), a.pause(!0), 6;
                                if (5 === i) return this.uncollapse(e), a.pause(!0), 7
                            }
                            break;
                        case 8:
                            if (4 === i) this._shouldCollapse(r, n) && this.collapse(e);
                            else {
                                if (3 === i) return a.pauseAd(!0), 9;
                                if (6 === i) return this.uncollapse(e), a.pauseAd(!0), 10
                            }
                            break;
                        case 4:
                            if (4 === i && !this._shouldCollapse(r, n)) return this.uncollapse(e), 3;
                            if (1 === i) return 2;
                            if (5 === i) return this.uncollapse(e), a.pause(!0), 7;
                            break;
                        case 3:
                            if (4 === i && this._shouldCollapse(r, n)) return this.collapse(e), 4;
                            if (1 === i) return 1;
                            break;
                        case 5:
                            if (4 === i) return a.play(!0), 1;
                        case 9:
                            if (4 === i) return a.pauseAd(!1), 8;
                            if (this.playerWouldOverlapFooter(e)) return 10;
                            break;
                        case 6:
                            return this._shouldCollapse(o, n) && !this.playerWouldOverlapFooter(e) ? (this.collapse(e), a.play(!0), 2) : 6;
                        case 10:
                            return this._shouldCollapse(o, n) && !this.playerWouldOverlapFooter(e) ? (this.collapse(e), a.pauseAd(!1), 8) : (a.pauseAd(!0), 10);
                        default:
                            return s
                    }
                    return s
                }, e.handleResize = function(e) {
                    this._isCollapsed(e.playerState) ? e.forceMobile || "adthrive-collapse-sticky" !== e.collapseType || this._stickToSidebar(e) : this.resizeContainer(e)
                }, e.handleScroll = function(e) {
                    Bc.playerInView(e.playerElement) ? this.playerWouldOverlapFooter(e) ? e.playerState = this.changeState(e, 6) : e.playerState = this.changeState(e, 4) : e.playerState = this.changeState(e, 3), 2 === e.playerState || 4 === e.playerState ? t.startCollapseTimer(e) : t.stopCollapseTimer(e)
                }, e.handleOtherVideoPlaying = function(e) {
                    e.playerState = this.changeState(e, 7)
                }, e.handlePageVisibilityChange = function(e, t) {
                    7 !== t.playerState && 0 !== t.playerState && 3 !== t.playerState && 4 !== t.playerState && 5 !== t.playerState && 6 !== t.playerState && (e ? t.playerInstance.pause(!0) : t.playerInstance.play(!0))
                }, e.handleWidthBreak = function(e, t) {
                    7 !== t.playerState && 0 !== t.playerState && (e.matches ? (this._isCollapsed(t.playerState) && (this.toggleCollapsedPlayerClasses(!1, t), "adthrive-collapse-sticky" === t.collapseType && this._unstickFromSidebar(t.playerElement), t.forceMobile = !0, this.toggleCollapsedPlayerClasses(!0, t)), t.forceMobile = !0) : (this.toggleCollapsedPlayerClasses(!1, t), t.forceMobile = !1, this._isCollapsed(t.playerState) && (this.toggleCollapsedPlayerClasses(!0, t), "adthrive-collapse-sticky" === t.collapseType && this._stickToSidebar(t))))
                }, e.handleClose = function(e) {
                    t.closeEvent.emit().catch((function() {})), e.playerState = this.changeState(e, 5), t.stopCollapseTimer(e), Bo.event("jw-player", "handleClose", {
                        timeElapsed: e.collapseTimer.timeCollapsed,
                        device: wa() ? "desktop" : "mobile",
                        playerType: e.playerType
                    })
                }, e.handleUserClick = function(e) {
                    e.playerState = this.changeState(e, 1)
                }, e.collapse = function(e) {
                    var t = this;
                    this.disableCollapse || (this.collapseEvent.emit().catch((function() {})), this.toggleCollapsedPlayerClasses(!0, e), e.forceMobile || "adthrive-collapse-sticky" !== e.collapseType || this._stickToSidebar(e), e.playerInstance.resize(), setTimeout((function(e) {
                        t.displayCloseButton(e)
                    }), e.closeButtonTimeout, e))
                }, e.displayCloseButton = function(e) {
                    this._isCollapsed(e.playerState) && (e.closeButton.style.display = "inline-flex")
                }, e.uncollapse = function(e) {
                    t.uncollapseEvent.emit().catch((function() {})), this.toggleCollapsedPlayerClasses(!1, e), this._unstickFromSidebar(e.playerElement), e.closeButton.style.display = "none", this.resizeContainer(e)
                }, e._shouldCollapse = function(e, t) {
                    return t && Bc.getScrollTop() >= Zo(e).top + e.offsetHeight / 2
                }, e._isCollapsed = function(e) {
                    return 2 === e || 4 === e
                }, e._stickToSidebar = function(e) {
                    e.stickyElement && (e.playerElement.style.left = e.stickyElement.getBoundingClientRect().left + "px", e.playerElement.style.width = e.stickyElement.clientWidth + "px"), e.playerElement.style.top = e.topMargin + "px"
                }, e._unstickFromSidebar = function(e) {
                    e.style.cssText = ""
                }, e.playerWouldOverlapFooter = function(e) {
                    if (!e.footerElement) return !1;
                    if (e.playerElement.className.indexOf("adthrive-collapse-bottom") >= 0 || e.lastCollapsedClasses && e.lastCollapsedClasses.indexOf("adthrive-collapse-bottom") >= 0) {
                        var t = Qo();
                        return !(window.innerHeight - t < e.footerElement.getBoundingClientRect().top)
                    }
                    return !((e.topMargin || 0) + e.playerElement.getBoundingClientRect().height < e.footerElement.getBoundingClientRect().top)
                }, e.toggleCollapsedPlayerClasses = function(e, t) {
                    var i = t.playerInstance.utils,
                        n = Fa(i, "toggleClass") && "function" == typeof i.toggleClass ? i.toggleClass : function() {};
                    t.forceMobile ? (n(t.playerElement, "adthrive-collapse-mobile", e), n(t.playerElement, t.collapseMobileSizeType, e), n(t.playerElement, t.collapseMobileSubType, e), "adthrive-collapse-bottom-left" !== t.collapseMobileSubType && "adthrive-collapse-bottom-right" !== t.collapseMobileSubType || this.repositionCollapseMobileBottom(t)) : (n(t.playerElement, t.collapseType, e), t.collapseSubType && n(t.playerElement, t.collapseSubType, e), t.collapseMobileSizeType && n(t.playerElement, t.collapseMobileSizeType, e), "adthrive-collapse-mobile" === t.collapseType && (n(t.playerElement, t.collapseMobileSubType, e), "adthrive-collapse-bottom-left" !== t.collapseMobileSubType && "adthrive-collapse-bottom-right" !== t.collapseMobileSubType || this.repositionCollapseMobileBottom(t)))
                }, e.repositionCollapseMobileBottom = function(e) {
                    if (e.playerElement.className.indexOf("adthrive-collapse-bottom") >= 0) {
                        var t = Qo();
                        e.playerElement.style.setProperty("top", "auto", "important"), e.playerElement.style.setProperty("bottom", t + "px", "important")
                    }
                }, e.resizeContainer = function(e) {
                    e.playerContainer.style.height = e.playerElement.offsetHeight + 30 + "px"
                }, e.startCollapseTimer = function(e) {
                    e.collapseTimer.isRunning || (e.collapseTimer.startTime ? e.collapseTimer.lastCollapsedTime = new Date : (e.collapseTimer.startTime = new Date, e.collapseTimer.lastCollapsedTime = e.collapseTimer.startTime), e.collapseTimer.isRunning = !0)
                }, e.stopCollapseTimer = function(e) {
                    e.collapseTimer.isRunning && (e.collapseTimer.lastCollapsedTime && (e.collapseTimer.timeCollapsed += (new Date).getTime() - e.collapseTimer.lastCollapsedTime.getTime()), e.collapseTimer.isRunning = !1)
                }, e.collapseEvent = new Do, e.uncollapseEvent = new Do, e.closeEvent = new Do, e.startEvent = new Do, e.disableCollapse = !1, e = t = eo([Ka("CollapseUtils")], e)
            }(),
            cp = function() {
                function e() {}
                return e.prototype.init = function(e) {
                    this.setup(e)
                }, e
            }(),
            lp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.abgroup = t, i.key = "sicb", i._choices = [{
                        choice: "off",
                        weight: 80
                    }, {
                        choice: "tlo",
                        weight: 10
                    }, {
                        choice: "tlw",
                        weight: 10
                    }], i._result = i.run(), t.set(i.key, i._result), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", void 0)], t.prototype, "run", null), t = eo([Ka("StickyInstreamCloseButtonExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            up = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i.tearDownOnCrash = "tdoc", i._choices = [{
                        choice: 9e5,
                        weight: 5
                    }, {
                        choice: 6e5,
                        weight: 5
                    }, {
                        choice: 3e5,
                        weight: 5
                    }, {
                        choice: -1,
                        weight: 5
                    }, {
                        choice: 0,
                        weight: 80
                    }], i.key = "mgtdtw", i._result = i.run(), t.set(i.key, -1 === i._result ? i.tearDownOnCrash : (i._result / 1e3).toString()), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new ds(this._choices).get()
                }, t = eo([Ka("TearDownPlayerExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            dp = function(e) {
                function t(t, i, n, r, o, a, s, c, l, u, d, p, h, f) {
                    void 0 === l && (l = "adthrive-collapse-float");
                    var g = e.call(this) || this;
                    if (g._playerId = t, g._playlistId = i, g._name = n, g._size = r, g._pageElement = o, g._eventProxy = a, g._vastLoadTimeout = s, g._config = c, g._collapseType = l, g._collapseMobileSizeType = u, g._prebidMethods = d, g._playerType = p, g._isCollapsible = h, g._saveVideoCloseState = f, g.initialAuctionPlayer = !1, g._prerollAdUrl = "", g._prerollNum = 0, g.requestVideoBids = function() {
                            throw new Error("Request video bids not set")
                        }, g.buildVideoUrl = function() {
                            throw new Error("Build video url not set")
                        }, g.setPlayerInstance = function() {
                            throw new Error("Reset player not set")
                        }, g._defaults = {}, g._state = 0, g._collapseCollection = null, g._videoAdUnit = null, g._adPlayed = !1, g._nextAdFetched = !1, g._adDurationLogged = !1, g._isFirstPlay = !0, g._createdSkipContainer = !1, g._calledNextVideo = !1, g._wasClicked = !1, g._canSkip = !0, g._isAdvancePlaylist = !1, g._adDetails = null, g._canTearDown = !1, g._tearDownAfterNextAd = !1, g._tearDownTimer = null, g._tearDownPlayerTimeout = 0, g._stalePlayerTimer = null, g._currentAdTime = 0, g._currentAdDurationWithBuffer = 0, g._adTimingBuffer = 10, g._defaultAdDuration = 30, g._autoplayBehaviorConfig = {
                            autostart: "viewable",
                            mute: !0
                        }, g._baseConfig = {
                            advertising: {
                                adscheduleid: "DmULPHgQ",
                                client: "googima",
                                maxRedirects: g._config.video.maxRedirect,
                                requestTimeout: g._config.video.jwRequestTimeout,
                                vastLoadTimeout: g._vastLoadTimeout,
                                vpaidmode: "insecure"
                            }
                        }, g._stickyInstreamCloseButtonExperiment = Mo.resolve(lp), g._videoCloseButtonComponent = Mo.resolve(Bd), window.matchMedia) {
                        var m = window.matchMedia("only screen and (max-width: " + (g._config.site.breakpoints.desktop - 1) + "px)");
                        m.addListener(g.handleWidthBreak.bind(g)), g.handleWidthBreak(m)
                    }
                    var y = g._config.video.advancePlaylist;
                    return g._isAdvancePlaylist = "playlist" === g._playerType ? y.playlistPlayer.enabled : y.relatedPlayer.enabled, ("contextual" !== g._playerType || g._isCollapsible && y) && (g._tearDownPlayerTimeout = Mo.resolve(up).result, g._canTearDown = 0 !== g._tearDownPlayerTimeout && -1 !== g._tearDownPlayerTimeout), g
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "name", {
                    get: function() {
                        return "" + this._name
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "collapsible", {
                    get: function() {
                        return this._isCollapsible
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "size", {
                    get: function() {
                        return this._size
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "vp", {
                    get: function() {
                        return this._prerollNum <= 1 ? this._prerollNum : this._prerollNum <= 9 ? 2 : 3
                    },
                    enumerable: !1,
                    configurable: !0
                }), Object.defineProperty(t.prototype, "isPlayerType", {
                    get: function() {
                        return this._playerType
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.init = function() {
                    this.setup()
                }, t.prototype.getDefaults = function() {
                    return this._defaults
                }, t.prototype.setDefaults = function(e) {
                    this._defaults = e
                }, t.prototype.resetAdVars = function() {
                    this._adPlayed = !1, this._nextAdFetched = !1, this._adDurationLogged = !1, this._currentAdTime = 0, this._currentAdDurationWithBuffer = 0, this._clearStaleTimers()
                }, t.prototype.handleNextAdFetch = function() {
                    var e, t = this;
                    this._nextAdFetched || (this._nextAdFetched = !0, this._prerollNum++, null === (e = this.requestVideoBids([this])) || void 0 === e || e.then((function() {
                        return t._prerollAdUrl = t.buildVideoUrl(t)
                    })))
                }, t.prototype.preventCollapse = function() {
                    sp.disableCollapse = !0, this._collapseCollection && sp.uncollapse(this._collapseCollection)
                }, t.prototype.playLinearAd = function() {
                    this._playerInstance._nonLinearAd = !1, this._playerInstance.playAd(this._prerollAdUrl), this._prebidMethods.markWinningBidAsUsed({
                        adUnitCode: this.name
                    }), this._adPlayed = !0
                }, t.prototype._setPlayerVersions = function() {
                    var e = new RegExp("^[0-9]+.[0-9]+.[0-9]+", "i"),
                        t = this._playerInstance,
                        i = e.exec(t.version);
                    this.jwVersion = i && i[0], this.imaVersion = t.plugins && t.plugins.googima && t.plugins.googima.version
                }, t.prototype._getPlayerVersions = function() {
                    return {
                        imaSDKVersion: this.imaVersion,
                        jwVersion: this.jwVersion
                    }
                }, t.prototype._tearDownPlayer = function() {
                    this._tearDownAfterNextAd && (this._tearDownAfterNextAd = !1, this._tearDownTimer && clearTimeout(this._tearDownTimer), this._playerInstance.remove(), this.addToPage(), this.setPlayerInstance(this), this.handleScroll())
                }, t.prototype._enableTearDown = function() {
                    this._tearDownAfterNextAd = !0
                }, t.prototype._startTearDownTimer = function() {
                    var e = this._tearDownPlayerTimeout;
                    this._canTearDown && (this._tearDownTimer = setTimeout(this._enableTearDown.bind(this), e))
                }, t.prototype._handleErrors = function() {
                    var e = this;
                    ["adError", "setupError", "error"].forEach((function(t) {
                        var i = "adError" === t;
                        e._playerInstance.on(t, (function(n) {
                            if (e._clearStaleTimers(), "setupError" === t && e.preventCollapse(), Bo.error("JwPlayer", t, $r($r({
                                    code: n.code
                                }, i && {
                                    message: n.message
                                }), e.getJwEventLog(n))), "adError" === t) {
                                var r = $r({
                                    imaSDKVersion: e._playerInstance.plugins.googima.version,
                                    message: n.message,
                                    jwVersion: e._playerInstance.version,
                                    code: n.code
                                }, e._adDetails);
                                Bo.error("JwPlayer", "vastError", r), e._tearDownPlayer()
                            }
                        }))
                    }))
                }, t.prototype._handleTimeEvents = function() {
                    var e = this;
                    this._playerInstance.on("beforeComplete", (function() {
                        e.resetAdVars(), e._playerInstance._nonLinearAd = !1
                    })), this._playerInstance.on("time", (function(t) {
                        var i = t.position,
                            n = t.duration;
                        !e._nextAdFetched && n - i < 5 && e.handleNextAdFetch()
                    })), this._playerInstance.on("adTime", (function(t) {
                        if (e._currentAdTime = t.position, e._config.video.logAdDuration && !e._adDurationLogged) {
                            var i = {
                                adDuration: t.duration,
                                roundedAdDuration: Math.round(t.duration)
                            };
                            Bo.event("VideoManager", "VideoAdDuration", i), e._adDurationLogged = !0
                        }
                    })), this._playerInstance.on("adComplete", (function() {
                        e._tearDownPlayer()
                    }))
                }, t.prototype._handlePlayingEvents = function() {
                    var e = this;
                    ["play", "firstFrame"].forEach((function(t) {
                        e._playerInstance.on(t, (function() {
                            e._clearStaleTimers(), "firstFrame" === t && e._isAdvancePlaylist && !e._adPlayed && e.playLinearAd()
                        }))
                    })), this._playerInstance.on("beforePlay", (function() {
                        return no(e, void 0, void 0, (function() {
                            return ro(this, (function(e) {
                                switch (e.label) {
                                    case 0:
                                        return this._adPlayed ? [3, 3] : this._collapseCollection || !this._isFirstPlay ? [3, 2] : [4, this.requestVideoBids([this])];
                                    case 1:
                                        e.sent(), this._prerollAdUrl = this.buildVideoUrl(this), e.label = 2;
                                    case 2:
                                        this.playLinearAd(), this._isFirstPlay = !1, e.label = 3;
                                    case 3:
                                        return [2]
                                }
                            }))
                        }))
                    })), ["adSkipped", "adPause"].forEach((function(t) {
                        e._playerInstance.on(t, (function() {
                            e._clearStaleTimers(), "adPause" === t && e._playerInstance.once("adPlay", (function() {
                                0 !== e._currentAdTime && e._setStaleAdDetection()
                            }))
                        }))
                    })), this._collapseCollection && ["play", "adPlay"].forEach((function(t) {
                        e._playerInstance.once(t, (function() {
                            e._collapseCollection.mediaStarted = !0, sp.handleScroll(e._collapseCollection)
                        }))
                    }))
                }, t.prototype._handleAdTrackingEvents = function() {
                    var e = this;
                    this._playerInstance.on("adLoaded", (function(t) {
                        var i = t.ima && t.ima.ad && t.ima.ad.h,
                            n = i && i.duration || t.duration || e._defaultAdDuration;
                        e._currentAdDurationWithBuffer = n + e._adTimingBuffer, i && (e._adDetails = {
                            gamLineItem: i.adWrapperIds,
                            gamCreativeId: i.adWrapperCreativeIds,
                            vastCreativeId: i.creativeId,
                            mediaFileURL: i.mediaUrl
                        }), e._setStaleAdDetection()
                    })), this._config.video.logAdLifeCycle && ["adRequest", "adImpression", "adStarted", "adViewableImpression"].forEach((function(t) {
                        e._playerInstance.on(t, (function(i) {
                            Bo.event("JwPlayer", t, e.getJwEventLog(i))
                        }))
                    }))
                }, t.prototype._setupEventListeners = function() {
                    var e = this;
                    this._handleErrors(), this._handleTimeEvents(), this._handlePlayingEvents(), this._handleAdTrackingEvents(), this._playerInstance.on("ready", (function() {
                        e._startTearDownTimer()
                    }))
                }, t.prototype.jwSetup = function(e) {
                    var t = this,
                        i = $r($r($r({}, this._defaults), this._baseConfig), e);
                    this._playerInstance.setup(i), this.handleNonLinearAd(), this._setupEventListeners(), this._playerInstance.on("adLoaded", (function(e) {
                        var i = e.ima && e.ima.ad && e.ima.ad.h,
                            n = i && i.duration || e.duration || t._defaultAdDuration;
                        t._currentAdDurationWithBuffer = n + t._adTimingBuffer, i && (t._adDetails = {
                            gamLineItem: i.adWrapperIds,
                            gamCreativeId: i.adWrapperCreativeIds,
                            vastCreativeId: i.creativeId,
                            mediaFileURL: i.mediaUrl
                        }), t._setStaleAdDetection()
                    }))
                }, t.prototype._clearStaleTimers = function() {
                    this._stalePlayerTimer && (clearTimeout(this._stalePlayerTimer), this._stalePlayerTimer = null)
                }, t.prototype._setStaleAdDetection = function() {
                    var e = this,
                        t = this._currentAdDurationWithBuffer - this._currentAdTime;
                    this._stalePlayerTimer || (this._stalePlayerTimer = setTimeout((function() {
                        Bo.error("JwPlayer", "stalePlayer", $r($r({
                            message: "JwPlayer encountered an unknown error during ad play"
                        }, e._getPlayerVersions()), e._adDetails)), -1 === e._tearDownPlayerTimeout ? (e._enableTearDown(), e._tearDownPlayer()) : e._playerInstance.playlistItem(e._playerInstance.getPlaylistIndex())
                    }), 1e3 * t))
                }, t.prototype.getJwEventLog = function(e) {
                    return {
                        playerName: this._name,
                        rawData: this.trimEventData(e)
                    }
                }, Object.defineProperty(t.prototype, "videoAdUnit", {
                    get: function() {
                        return this._videoAdUnit
                    },
                    set: function(e) {
                        this._videoAdUnit = e
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.handleNonLinearAd = function() {
                    var e = this;
                    this._playerInstance.on("adImpression", (function(t) {
                        var i = Fa(t.ima, "ad") ? t.ima.ad : null,
                            n = Na(i, "g") || Fa(i, "h");
                        if (n && Fa(n, "linear") && !1 === n.linear || "nonlinear" === t.linear) {
                            e._playerInstance._nonLinearAd = !0, e._playerInstance.pause();
                            var r = document.getElementById("" + e._playlistId),
                                o = r.querySelector("div > div.jw-overlays.jw-reset");
                            o.style.backgroundColor = "black";
                            var a = r.querySelector("div.jw-wrapper.jw-reset > div.jw-controls.jw-reset");
                            a.style.zIndex = "-1", e._playerInstance.once("adComplete", (function() {
                                e._playerInstance._nonLinearAd = !1, o.style.backgroundColor = "transparent", a.style.zIndex = "", e._playerInstance.play()
                            }))
                        }
                    }))
                }, t.prototype.getJwBoostTargeting = function() {
                    return $r({
                        playerID: this._playlistId
                    }, (this.name === cs.Video_In_Post_ClicktoPlay_SoundOn || this.name === cs.Video_Individual_Autoplay_SOff) && {
                        mediaID: this._playlistId
                    })
                }, t.prototype.handleScroll = function() {
                    this._collapseCollection && sp.handleScroll(this._collapseCollection)
                }, t.prototype.handleResize = function() {
                    this._collapseCollection && sp.handleResize(this._collapseCollection)
                }, t.prototype.handlePageVisibilityChange = function(e) {
                    this._collapseCollection && sp.handlePageVisibilityChange(e, this._collapseCollection)
                }, t.prototype.displayCloseButton = function() {
                    this._collapseCollection && sp.displayCloseButton(this._collapseCollection)
                }, t.prototype.handleClose = function() {
                    this._collapseCollection && (this._saveVideoCloseState && ra("video_closed", !0), sp.handleClose(this._collapseCollection))
                }, t.prototype.handleUserClick = function() {
                    this._collapseCollection && sp.handleUserClick(this._collapseCollection)
                }, t.prototype.handleWidthBreak = function(e) {
                    this._collapseCollection && sp.handleWidthBreak(e, this._collapseCollection)
                }, t.prototype.handleVideoPlayingEvent = function(e) {
                    if (this._collapseCollection) {
                        if (e === this._playlistId) return;
                        sp.handleOtherVideoPlaying(this._collapseCollection)
                    }
                }, t.prototype.handleTitleClick = function(e) {
                    this._collapseCollection.collapseTimer.firstInView && Bo.event("jw-player", "handleTitleClick", {
                        timeElapsed: Date.now() - this._collapseCollection.collapseTimer.firstInView.valueOf(),
                        link: e.currentTarget.getAttribute("href")
                    })
                }, t.prototype.handleFooterRefreshedEvent = function() {
                    this._collapseCollection && sp.repositionCollapseMobileBottom(this._collapseCollection)
                }, t.prototype.configureQuality = function() {
                    var e = this;
                    wa() || this._playerInstance.on("levels", (function(t) {
                        e._playerInstance.setCurrentQuality(t.levels.length - 1)
                    }))
                }, t.prototype.getCollapseSubType = function(e, t) {
                    return "adthrive-collapse-bottom-right"
                }, t.prototype.createDefaultButton = function() {
                    return this._videoCloseButtonComponent.createDefaultButton(this.handleClose.bind(this))
                }, t.prototype.createPlayerCloseButton = function() {
                    var e = this._wrapperTitleWrapperElement || this._videoTitleElement;
                    return this._closeButton = this._videoCloseButtonComponent.createPlayerCloseButton(this.handleClose.bind(this), this._stickyInstreamCloseButtonExperiment.result, "adthrive-collapse-close", !!e), this._closeButton
                }, t.prototype.createPlayerWrapper = function(e) {
                    if (e) {
                        this._wrapperTitleWrapperElement = document.createElement("a");
                        var t = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                        t.setAttribute("width", "24"), t.setAttribute("height", "24"), t.setAttribute("style", "vertical-align: top;");
                        var i = document.createElementNS("http://www.w3.org/2000/svg", "path");
                        i.setAttribute("d", "M 16 1 H 23 V 8 Z M 19.5 12.5 V 23 H 1 V 4.5 H 12 l 1 1 H 2 V 22 H 18.5 V 11.5 l 1 1 v 1 M 19 4 L 11.5 11.5 l 1 1 L 20 5"), i.setAttribute("stroke", "white"), i.setAttribute("stroke-width", "2"), i.setAttribute("stroke-linejoin", "round"), t.appendChild(i), this._wrapperTitleWrapperElement.appendChild(t)
                    } else this._wrapperTitleWrapperElement = document.createElement("div");
                    this._videoTitleElement = document.createElement("span");
                    var n = document.createElement("div"),
                        r = document.createElement("div");
                    return r.className = "adthrive-wrapper-title-wrapper", this._videoTitleElement.classList.add("adthrive-video-text-cutoff"), this._videoTitleElement.classList.add("adthrive-video-title"), this._wrapperTitleWrapperElement.className = "adthrive-video-text-cutoff", this._wrapperTitleWrapperElement.appendChild(this._videoTitleElement), this._wrapperTitleWrapperElement.target = "_blank", this._wrapperTitleWrapperElement.onclick = this.handleTitleClick.bind(this), this._closeButton = "off" !== this._stickyInstreamCloseButtonExperiment.result ? this.createPlayerCloseButton() : this.createDefaultButton(), r.appendChild(this._wrapperTitleWrapperElement), n.className = "adthrive-wrapper-bar", n.appendChild(r), n.appendChild(this._closeButton), n
                }, t.prototype.trimEventData = function(e) {
                    var t, i, n, r, o, a = $r({}, e);
                    return (null == a ? void 0 : a.tag) && delete a.tag, (null === (n = null === (i = null === (t = null == a ? void 0 : a.ima) || void 0 === t ? void 0 : t.ad) || void 0 === i ? void 0 : i.g) || void 0 === n ? void 0 : n.traffickingParameters) && delete a.ima.ad.g.traffickingParameters, (null === (o = null === (r = null == a ? void 0 : a.ima) || void 0 === r ? void 0 : r.userRequestContext) || void 0 === o ? void 0 : o.adTagUrl) && delete a.ima.userRequestContext.adTagUrl, (null == a ? void 0 : a.mediaFile) && delete a.mediaFile, a
                }, t.prototype.handleNextButton = function() {
                    this._calledNextVideo = !0, this.removeSkipContainer(), this.resetAdVars(), this._isAdvancePlaylist && 1 === this._playerInstance.getPlaylist().length ? (this._playerInstance.pause(), this._playerInstance.seek(0), this._playerInstance.trigger("firstFrame", {
                        loadTime: 0,
                        viewable: 1
                    })) : this._playerInstance.next()
                }, t.prototype.createSkipContainer = function() {
                    var e = document.createElement("div");
                    e.id = "next-stay-container";
                    var t = document.createElement("div");
                    t.onclick = this.handleNextButton.bind(this), t.id = "next-video", t.textContent = "Next", e.appendChild(t);
                    var i = document.createElement("div");
                    return i.id = "stay-video", i.textContent = "Stay", e.appendChild(i), e
                }, t.prototype.initSkipContainer = function() {
                    var e = this;
                    this._playerInstance.on("time", (function(t) {
                        var i = t.position,
                            n = t.duration;
                        !e._canSkip || e._playerInstance._nonLinearAd || e._wasClicked || n < 40 || (!e._createdSkipContainer && i >= 25 ? (e._createdSkipContainer = !0, e.handleNextAdFetch(), e._skipContainer = e.createSkipContainer(), e._playerInstance.getContainer().appendChild(e._skipContainer), getComputedStyle(e._skipContainer).backgroundColor && e._skipContainer.classList.add("loaded")) : e._createdSkipContainer && !e._calledNextVideo && i >= 30 && e.handleNextButton())
                    }))
                }, t.prototype.handleVideoPlayerClicked = function() {
                    this._wasClicked = !0, this.removeSkipContainer()
                }, t.prototype.removeSkipContainer = function() {
                    var e, t;
                    null === (t = null === (e = this._skipContainer) || void 0 === e ? void 0 : e.parentNode) || void 0 === t || t.removeChild(this._skipContainer), this._skipContainer = void 0
                }, t.prototype.handleFirstFrame = function() {
                    this._calledNextVideo = !1, this._createdSkipContainer = !1, this._wasClicked = !1
                }, t
            }(cp),
            pp = function(e) {
                function t(t, i, n, r, o, a, s, c, l, u, d, p) {
                    var h = e.call(this, t, i, n, r, o, a, 1e4, s, l, u, d, "contextual", c) || this;
                    return h._mobileLocation = p, h._playerConfig = {
                        repeat: !0,
                        nextupoffset: -.01,
                        playlist: "https://cdn.jwplayer.com/v2/media/" + h._playlistId
                    }, h._wrapperBarRemoved = !1, h._playerElement = document.createElement("div"), h._canSkip = !1, h._autoplayStationaryPlayer = h._shouldStationaryAutoplay(), (c || h._autoplayStationaryPlayer) && (h._playerConfig = $r($r({}, h._playerConfig), h._autoplayBehaviorConfig), h.initialAuctionPlayer = !0, h._stickyElement = null, "adthrive-collapse-mobile" === h._collapseType && h._eventProxy.footerRefreshed.on(h.handleFooterRefreshedEvent.bind(h)), h._playerContainer = h._pageElement, h._eventProxy.scroll.on(h.handleScroll.bind(h)), h._eventProxy.resize.on(h.handleResize.bind(h)), h._eventProxy.pageVisibility.on(h.handlePageVisibilityChange.bind(h))), h
                }
                return Jr(t, e), t.prototype.addToPage = function() {}, t.prototype._appendPlayer = function() {
                    var e = document.createElement("div");
                    e.id = this._playlistId, e.className = "adthrive-jw-static-player", this._isCollapsible ? (this._pageElement.id = "adthrive-contextual-container", this._playerElement.className = "adthrive-player-position", this._playerElement.id = "adthrive-contextual-position", this._config.video.removeVideoTitleWrapper ? this._playerElement.appendChild(this.createPlayerCloseButton()) : this._playerElement.appendChild(this.createPlayerWrapper(!1)), this._playerElement.appendChild(e), this._pageElement.appendChild(this._playerElement)) : this._pageElement.appendChild(e)
                }, t.prototype.setup = function() {
                    var e = this;
                    this._isFirstPlay && this._appendPlayer(), this._playerInstance = window.jwplayer(this._playlistId), this._isCollapsible && (this._collapseCollection = {
                        playerInstance: this._playerInstance,
                        playerType: "contextualCollapse",
                        playerState: this._state,
                        playerContainer: this._pageElement,
                        playerElement: this._playerElement,
                        footerElement: this._config.video.footerSelector ? document.querySelector(this._config.video.footerSelector) : null,
                        stickyElement: this._stickyElement,
                        closeButton: this._closeButton,
                        closeButtonTimeout: this._config.video.closeButtonTimeout,
                        forceMobile: "desktop" !== this._config.context.device,
                        collapseType: this._collapseType,
                        collapseMobileSizeType: this._collapseMobileSizeType,
                        collapseSubType: this.getCollapseSubType(this._collapseType, this._stickyElement),
                        collapseMobileSubType: this._getCollapseMobileSubType(),
                        collapseTimer: {
                            timeCollapsed: 0,
                            isRunning: !1
                        },
                        mediaStarted: !1
                    }), this.jwSetup(this._playerConfig), this._playerInstance.on("play", (function() {
                        e._eventProxy.emitVideoPlayingEvent(e._playlistId)
                    })), this._playerInstance.on("adPlay", (function() {
                        e._eventProxy.emitVideoPlayingEvent(e._playlistId)
                    })), this._isCollapsible ? this._eventProxy.videoPlaying.on(this.handleVideoPlayingEvent.bind(this)) : this._eventProxy.videoPlaying.on(this.contextualHandleVideoPlayingEvent.bind(this)), this._config.video.contextualPlayerAdded = !0, this._playerInstance.on("ready", (function() {
                        e.configureQuality(), e.initRelatedPlaylist(), e._setPlayerVersions(), e._prerollAdUrl = e.buildVideoUrl(e), e._autoplayStationaryPlayer && (Bc.playerInView(e._pageElement) && e._playerInstance.play(!0), e._logStationaryAutoplay()), e._isCollapsible && e.playerReady()
                    }))
                }, t.prototype._logStationaryAutoplay = function() {
                    this._config.video.logAdLifeCycle && Bo.event("JwPlayer", "StaticPlayer", $r({
                        message: "Static Player set to autoplay for playlist id " + this._playlistId
                    }, this._getPlayerVersions()))
                }, t.prototype.loadPlaylistPlayerVideos = function() {
                    var e = this;
                    this._config.video.jwPlaylist.then((function(t) {
                        if (t.playlist && t.playlist.length) {
                            var i = e._playerInstance.getPlaylist().concat(Bc.shufflePlaylist(t.playlist));
                            e._playerInstance.once("userInactive", (function() {
                                var t;
                                return !(null === (t = e._collapseCollection) || void 0 === t ? void 0 : t.mediaStarted) && e.handleScroll()
                            })), e._playerInstance.load(i), e.handleScroll()
                        }
                    })).catch((function() {
                        return !1
                    }))
                }, t.prototype.setupAllowSkip = function() {
                    var e = this;
                    this._config.video.advancePlaylist.relatedPlayer.applyToFirst && (this._canSkip = !0), this._playerInstance.once("complete", (function() {
                        e.hideWrapperBar(), e._canSkip = !0
                    }))
                }, t.prototype.handleNextButton = function() {
                    this.hideWrapperBar(), e.prototype.handleNextButton.call(this)
                }, t.prototype._shouldStationaryAutoplay = function() {
                    return !this._config.video.playlistPlayerAdded && !!document.querySelector("body.adthrive-video-autoplay")
                }, t.prototype.setWrapperBar = function() {
                    this._wrapperBar = this._playerElement.querySelector(".adthrive-wrapper-bar")
                }, t.prototype.hideWrapperBar = function() {
                    var e = this._wrapperBar,
                        t = this._playerElement;
                    !this._wrapperBarRemoved && e && (this._wrapperBarRemoved = !0, e.parentNode && e.parentNode.removeChild(e), this._wrapperBar = null, t.insertBefore(this.createPlayerCloseButton(), t.firstChild), this._collapseCollection && (this._collapseCollection.closeButton = this._closeButton, this.displayCloseButton()))
                }, t.prototype.initRelatedPlaylist = function() {
                    var e = this;
                    this._config.video.advancePlaylist.relatedPlayer.shouldRun.then((function(t) {
                        t && (e.loadPlaylistPlayerVideos(), e.setupAllowSkip(), e._playerInstance.on("firstFrame", (function() {
                            return e.handleFirstFrame()
                        })), e._playerInstance.getContainer().addEventListener("click", (function() {
                            return e.handleVideoPlayerClicked()
                        })), e.initSkipContainer())
                    })).catch((function() {
                        return !1
                    }))
                }, t.prototype.playerReady = function() {
                    var e = this;
                    if (this.setWrapperBar(), this._wrapperBar && this._wrapperBar.style.setProperty("display", "flex"), this._videoTitleElement) {
                        var t = this._playerInstance.getPlaylistItem(0),
                            i = Na(t, "title");
                        this._videoTitleElement.innerText = "string" == typeof i ? i : ""
                    }
                    this._playerInstance.on("pause", (function(t) {
                        "interaction" === t.pauseReason && e.handleUserClick()
                    })), this._playerInstance.on("play", (function(t) {
                        "interaction" === t.playReason && e.handleUserClick(), e._eventProxy.emitVideoPlayingEvent(e._playlistId)
                    })), this._playerInstance.on("adPlay", (function() {
                        e._eventProxy.emitVideoPlayingEvent(e._playlistId)
                    })), this.handleResize()
                }, t.prototype.contextualHandleVideoPlayingEvent = function(e) {
                    e !== this._playlistId && this._playerInstance.pause(!0)
                }, t.prototype._getCollapseMobileSubType = function() {
                    return this._mobileLocation ? this._mobileLocation : void 0
                }, t = eo([Ka("ContextualPlayer"), io("design:paramtypes", [Object, String, String, Array, HTMLElement, Vd, Fc, Boolean, String, String, Gc, String])], t)
            }(dp),
            hp = function(e) {
                function t(t, i, n, r, o, a, s, c, l, u, d, p, h, f, g) {
                    void 0 === l && (l = "adthrive-collapse-float");
                    var m = e.call(this, t, i, n, r, a, s, c.video.vastTimeout, c, l, u, d, "playlist", !0, h) || this;
                    return m._sharedVideoSettings = o, m._mobileLocation = p, m._title = f, m._shuffle = g, m._isCollapsible = !0, m._playerConfig = {
                        playlist: "https://cdn.jwplayer.com/v2/playlists/" + m._playlistId,
                        related: {
                            autoplaytimer: 0
                        }
                    }, m._playerConfig = $r($r({}, m._playerConfig), m._autoplayBehaviorConfig), m.initialAuctionPlayer = !0, m._stickyElement = null, m._checkVideoClose() && (m._state = 7), m._config.video.footerSelector ? m._footerElement = document.querySelector(m._config.video.footerSelector) : m._footerElement = null, "adthrive-collapse-mobile" === m._collapseType && m._eventProxy.footerRefreshed.on(m.handleFooterRefreshedEvent.bind(m)), m.clsPlayerContainer = document.querySelector("#cls-video-container-" + m._playlistId + " > div"), m._playerContainer = m.clsPlayerContainer ? m.clsPlayerContainer : document.createElement("div"), m._playerElement = document.createElement("div"), m._collapseCollection = {
                        playerInstance: m._playerInstance,
                        playerType: "playlist",
                        playerState: m._state,
                        playerContainer: m._playerContainer,
                        playerElement: m._playerElement,
                        stickyElement: m._stickyElement,
                        footerElement: m._footerElement,
                        closeButton: m._closeButton,
                        closeButtonTimeout: m._config.video.closeButtonTimeout,
                        forceMobile: "desktop" !== m._config.context.device,
                        collapseType: m._collapseType,
                        collapseSubType: m.getCollapseSubType(m._collapseType, m._stickyElement),
                        collapseMobileSizeType: m._collapseMobileSizeType,
                        collapseMobileSubType: m._getCollapseMobileSubType(),
                        collapseTimer: {
                            timeCollapsed: 0,
                            isRunning: !1
                        },
                        mediaStarted: !1
                    }, m
                }
                return Jr(t, e), t.prototype.setup = function() {
                    this._eventProxy.scroll.on(this.handleScroll.bind(this)), this._eventProxy.resize.on(this.handleResize.bind(this)), this._eventProxy.pageVisibility.on(this.handlePageVisibilityChange.bind(this)), this._eventProxy.videoPlaying.on(this.handleVideoPlayingEvent.bind(this))
                }, t.prototype._appendPlayer = function() {
                    var e = document.createElement("div"),
                        t = document.createElement("h3");
                    this._playerContainer.classList.add("adthrive-player-container"), this._playerContainer.classList.add("adthrive-collapse-player"), this._playerContainer.id = "adthrive-collapse-container", this._playerElement.className = "adthrive-player-position", this._playerElement.id = "adthrive-collapse-position", e.id = this._playlistId, t.innerText = this._getTitle(), t.className = "adthrive-player-title", t.id = "adthrive-collapse-title", this._playerElement.appendChild(t), this._config.video.removeVideoTitleWrapper ? this._playerElement.appendChild(this.createPlayerCloseButton()) : this._playerElement.appendChild(this.createPlayerWrapper(!0)), this._collapseCollection.closeButton = this._closeButton, this._playerElement.appendChild(e), this._playerContainer.appendChild(this._playerElement), this.clsPlayerContainer || this._pageElement.insertAdjacentElement(this._sharedVideoSettings.position, this._playerContainer)
                }, t.prototype.addToPage = function() {
                    this._isFirstPlay && this._appendPlayer(), this._playerInstance = window.jwplayer(this._playlistId), this._collapseCollection && (this._collapseCollection.playerInstance = this._playerInstance, this._collapseCollection.playerContainer = this._playerContainer, this._collapseCollection.playerElement = this._playerElement), this.jwSetup(this._playerConfig), this._playerInstance.on("ready", this.playerReady.bind(this)), this._config.video.playlistPlayerAdded = !0
                }, t.prototype.playerReady = function() {
                    var e, t = this;
                    if (this._setPlayerVersions(), this._prerollAdUrl = this.buildVideoUrl(this), null === (e = this._playerElement.querySelector(".adthrive-wrapper-bar")) || void 0 === e || e.style.setProperty("display", "flex"), this._getShuffle()) {
                        var i = this._playerInstance.getPlaylist();
                        this._playerInstance.load(Bc.shufflePlaylist(i))
                    }
                    this._config.video.advancePlaylist.playlistPlayer.enabled && (this._playerInstance.on("firstFrame", (function() {
                        return t.handleFirstFrame()
                    })), this._playerInstance.getContainer().addEventListener("click", (function() {
                        return t.handleVideoPlayerClicked()
                    })), this.initSkipContainer()), this._playerInstance.on("pause", (function(e) {
                        "interaction" === e.pauseReason && t.handleUserClick()
                    })), this._playerInstance.on("play", (function(e) {
                        "interaction" !== e.playReason || t._calledNextVideo || t.handleUserClick(), t._eventProxy.emitVideoPlayingEvent(t._playlistId)
                    })), this._playerInstance.on("adPlay", (function() {
                        t._eventProxy.emitVideoPlayingEvent(t._playlistId)
                    })), this._playerInstance.on("playlistItem", (function(e) {
                        var i = e.item;
                        t._videoTitleElement && Fa(i, "title") && "string" == typeof i.title && (t._videoTitleElement.innerText = i.title), t._wrapperTitleWrapperElement && Fa(i, "link") && "string" == typeof i.link && (t._wrapperTitleWrapperElement.href = i.link)
                    })), this.configureQuality(), this.handleResize()
                }, t.prototype._getShuffle = function() {
                    return !!this._shuffle && this._shuffle
                }, t.prototype._getTitle = function() {
                    return this._title ? this._title : ""
                }, t.prototype._getCollapseMobileSubType = function() {
                    return this._mobileLocation ? this._mobileLocation : void 0
                }, t.prototype._checkVideoClose = function() {
                    return this._saveVideoCloseState && this._config.video.videoWasClosed
                }, t = eo([Ka("PlaylistPlayer"), io("design:paramtypes", [String, String, String, Array, Object, HTMLElement, Vd, Fc, String, String, Gc, String, Boolean, String, Boolean])], t)
            }(dp),
            fp = function(e) {
                function t(t, i, n, r, o, a, s, c, l) {
                    var u = e.call(this) || this;
                    return u._playlistId = t, u._portalSettings = i, u._pageElement = n, u._device = r, u._width = o, u._height = a, u._isCollapse = s, u._config = c, u._videoRequestManager = l, u.API_ID = "sekindoPlayer", u._clsContainer = null, u._hasTitle = !(!u._portalSettings.title || null === u._portalSettings.title && "" === u._portalSettings.title), u
                }
                return Jr(t, e), t.prototype.addToPage = function() {
                    this.setup(), this._config.video.sekindoPlayerAdded = !0
                }, t.prototype.setup = function() {
                    var e = this;
                    window.addEventListener("primisPlayerInit", (function(t) {
                        t.detail.playerApiId === e.API_ID && (Bo.event("sekindo-player", "init", "Sekindo player initialized"), e._videoRequestManager.requestingSekindoBids.emit(e).catch((function() {})))
                    })), this._clsContainer = document.querySelector("#cls-video-container-" + this._playlistId);
                    var t = document.createElement("div");
                    t.className = "adthrive-sekindo-player", t.id = "adthrive-sekindo-container";
                    var i = document.createElement("script"),
                        n = Bc.createQueryString({
                            s: this._isCollapse ? 98876 : 87493,
                            cbuster: "%%CACHEBUSTER%%",
                            pubUrl: "%%REFERRER_URL_ESC_ESC%%",
                            x: this._width,
                            y: this._height,
                            vp_contentFeedId: this._playlistId,
                            subId: this._config.site.id,
                            playerApiId: this.API_ID
                        });
                    i.async = !0, i.defer = !0, i.type = "text/javascript", i.src = "https://live.primis.tech/live/liveView.php?" + n, "desktop" === this._device ? this._desktopSetup(t, i) : this._mobileSetup(t, i)
                }, t.prototype._desktopSetup = function(e, t) {
                    if (this._hasTitle) {
                        var i = document.createElement("h4");
                        i.innerText = this._portalSettings.title, i.classList.add("widgettitle"), i.id = "adthrive-sekindo-desktop-title", e.appendChild(i)
                    }
                    e.appendChild(t), this._clsContainer ? this._clsContainer.appendChild(e) : this._pageElement.insertAdjacentElement(this._portalSettings.position, e)
                }, t.prototype._mobileSetup = function(e, t) {
                    if (this._hasTitle) {
                        var i = document.createElement("strong");
                        i.innerText = this._portalSettings.title, i.id = "adthrive-sekindo-mobile-title", e.appendChild(i)
                    }
                    e.appendChild(t);
                    var n = document.createElement("div");
                    n.className = "adthrive-sekindo-mobile-center", n.id = "adthrive-sekindo-mobile-wrapper", n.appendChild(e), this._clsContainer ? this._clsContainer.appendChild(n) : this._pageElement.insertAdjacentElement(this._portalSettings.position, n)
                }, t = eo([Ka("SekindoPlayer"), io("design:paramtypes", [String, Object, HTMLElement, String, Number, Number, Boolean, Fc, Ju])], t)
            }(cp),
            gp = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    r._videoConfig = t, r._component = n, r._stickyRelatedOnPage = !1, r._contextualMediaIds = [];
                    var o = r._videoConfig.players || [];
                    r._device = wa() ? "desktop" : "mobile", r._potentialPlayerMap = r._setPotentialPlayerMap(i);
                    var a = o.filter((function(e) {
                        return "stationaryRelated" === e.type && e.enabled
                    }));
                    return r._potentialPlayerMap.stationaryRelated = a, r
                }
                return Jr(t, e), t.prototype._setPotentialPlayerMap = function(e) {
                    var t = this,
                        i = this._videoConfig.players,
                        n = {
                            stickyRelated: [],
                            stickyPlaylist: [],
                            sekindo: [],
                            stationaryRelated: []
                        };
                    return i && i.length ? i.filter((function(e) {
                        var i;
                        return (null === (i = e.devices) || void 0 === i ? void 0 : i.indexOf(t._device)) > -1
                    })).reduce((function(i, n) {
                        return i[n.type] || (Bo.event(t._component, "constructor", "Unknown Video Player Type detected", n.type), i[n.type] = []), n.enabled && (e && "sekindo" === n.type || i[n.type].push(n)), i
                    }), n) : n
                }, t.prototype._checkPlayerSelectorOnPage = function(e) {
                    var t = this,
                        i = this._potentialPlayerMap[e].map((function(e) {
                            return {
                                player: e,
                                playerElement: t._getPlacementElement(e)
                            }
                        }));
                    return i.length ? i[0] : {
                        player: null,
                        playerElement: null
                    }
                }, t.prototype._getOverrideElement = function(e, t, i) {
                    if (e && t) {
                        var n = document.createElement("div");
                        t.insertAdjacentElement(e.position, n), i = n
                    } else {
                        var r = this._checkPlayerSelectorOnPage("stickyPlaylist"),
                            o = r.player,
                            a = r.playerElement;
                        if (o && a) {
                            n = document.createElement("div");
                            a.insertAdjacentElement(o.position, n), i = n
                        }
                    }
                    return i
                }, t.prototype._shouldOverrideElement = function(e) {
                    var t = e.getAttribute("override-embed");
                    return "true" === t || "false" === t ? "true" === t : !!this._videoConfig.contextualSettings && this._videoConfig.contextualSettings.overrideEmbedLocation
                }, t.prototype._getPlacementElement = function(e) {
                    var t = Wa(e.pageSelector),
                        i = Ha(e.elementSelector);
                    return t.valid ? e.pageSelector && !t.elements.length ? (Bo.event("VideoUtils", "getPlacementElement", new Error("PSNF: " + e.pageSelector + " does not exist on the page")), null) : i.valid ? i.elements.length > e.skip ? i.elements[e.skip] : (Bo.event("VideoUtils", "getPlacementElement", new Error("ESNF: " + e.elementSelector + " does not exist on the page")), null) : (Bo.error("VideoUtils", "getPlacementElement", new Error(e.elementSelector + " is not a valid selector")), null) : (Bo.error("VideoUtils", "getPlacementElement", new Error(e.pageSelector + " is not a valid selector")), null)
                }, t.prototype._getEmbeddedPlayerType = function(e) {
                    var t = e.getAttribute("data-player-type");
                    return t && "default" !== t || (t = this._videoConfig.contextualSettings ? this._videoConfig.contextualSettings.defaultPlayerType : "static"), this._stickyRelatedOnPage && (t = "static"), t
                }, t.prototype._getUnusedMediaId = function(e) {
                    var t = e.getAttribute("data-video-id");
                    return !(!t || -1 !== this._contextualMediaIds.indexOf(t)) && (this._contextualMediaIds.push(t), t)
                }, t.prototype._createRelatedPlayer = function(e, t, i) {
                    "collapse" === t ? this._createCollapsePlayer(e, i) : "static" === t && this._createStaticPlayer(e, i)
                }, t.prototype._createCollapsePlayer = function(e, t) {
                    var i = this._checkPlayerSelectorOnPage("stickyRelated"),
                        n = i.player,
                        r = i.playerElement,
                        o = n || this._potentialPlayerMap.stationaryRelated[0];
                    o && o.playerId ? (this._shouldOverrideElement(t) && (t = this._getOverrideElement(n, r, t)), t = document.querySelector("#cls-video-container-" + e + " > div") || t, this._createStickyRelatedPlayer($r($r({}, o), {
                        mediaId: e
                    }), t)) : Bo.error(this._component, "_createCollapsePlayer", "No video player found")
                }, t.prototype._createStaticPlayer = function(e, t) {
                    if (this._potentialPlayerMap.stationaryRelated.length && this._potentialPlayerMap.stationaryRelated[0].playerId) {
                        var i = this._potentialPlayerMap.stationaryRelated[0];
                        this._createStationaryRelatedPlayer($r($r({}, i), {
                            mediaId: e
                        }), t)
                    } else Bo.error(this._component, "_createStaticPlayer", "No video player found")
                }, t.prototype._shouldRunAutoplayPlayers = function() {
                    return !(!this._isVideoAllowedOnPage() || !(this._potentialPlayerMap.stickyRelated.length || this._potentialPlayerMap.stickyPlaylist.length || this._potentialPlayerMap.sekindo.length))
                }, t.prototype._determineAutoplayPlayers = function() {
                    var e = this._component,
                        t = "VideoManagerComponent" === e,
                        i = this._config;
                    if (this._stickyRelatedOnPage) Bo.event(e, "stickyRelatedOnPage", t && {
                        device: i && i.context.device,
                        isDesktop: this._device
                    } || {});
                    else {
                        var n = this._checkPlayerSelectorOnPage("stickyPlaylist"),
                            r = n.player,
                            o = n.playerElement,
                            a = this._checkPlayerSelectorOnPage("sekindo"),
                            s = a.player,
                            c = a.playerElement;
                        r && r.playerId && r.playlistId && o ? this._createPlaylistPlayer(r, o) : s && s.playlistId && c ? this._createSekindoPlayer(s, c) : Bo.event(e, "noStickyPlaylistOrSekindo", t && {
                            vendor: "none",
                            device: i && i.context.device,
                            isDesktop: this._device
                        } || {})
                    }
                }, t.prototype._initializeRelatedPlayers = function(e) {
                    for (var t = 0; t < e.length; t++) {
                        var i = e[t],
                            n = this._getEmbeddedPlayerType(i),
                            r = this._getUnusedMediaId(i);
                        r && this._createRelatedPlayer(r, n, i)
                    }
                }, t
            }(Su),
            mp = function() {
                function e(e, t, i, n, r) {
                    this._abgroup = e, this._auctionManagers = t, this._config = i, this._gam = n, this._irisTv = r, this.shouldPrebidRun = !1
                }
                return e.prototype.getVideoTargeting = function(e, t) {
                    var i = this,
                        n = this._irisTv.irisContextualData,
                        r = {},
                        o = "rvadv_ab";
                    if (Object.keys(t).forEach((function(e) {
                            var n = i._abgroup.get(o);
                            "abgroup" === e && n && t[e].push("rvadv_ab:" + n), r[e] = encodeURIComponent(t[e].toString())
                        })), r.vprenum = String(e._prerollNum), r.jwv = e.jwVersion || "", r.imav = e.imaVersion || "", n) {
                        r.iris_context = n.toString()
                    }
                    return r
                }, e.prototype.getAmazonBidTargeting = function(e, t) {
                    var i = e && e.getVideoBid && e.getVideoBid(t);
                    if (i) return {
                        amznbid: i.amznbid,
                        amzniid: i.amzniid,
                        amznp: i.amznp
                    }
                }, e.prototype.getCustParams = function(e) {
                    var t = this._gam.getTargetingMap(),
                        i = this._auctionManagers.getAmazonAuctionManager();
                    return $r($r({}, this.getVideoTargeting(e, t)), i && this.getAmazonBidTargeting(i, e._playlistId))
                }, e.prototype.handleGdprConsent = function() {
                    var e = {
                        gdpr: 1,
                        gdpr_consent: "tcunavailable"
                    };
                    return "function" == typeof window.__tcfapi && window.__tcfapi("getFullTCData", 2, (function(t) {
                        t && t.tcString.length && (e.gdpr_consent = t.tcString), t && t.addtlConsent.length && (e.addtl_consent = t.addtl_consent)
                    })), e
                }, e.prototype.getConsentParams = function() {
                    if (this._config.gdpr.enabled) this.handleGdprConsent();
                    else if (this._config.ccpa.privacyString) return {
                        us_privacy: this._config.ccpa.privacyString
                    }
                }, e.prototype.getDefaultVideoUrlParams = function(e) {
                    return {
                        iu: "/" + this._config.gam.account + "/" + this._config.gam.prefix + "_" + e.name + "/" + this._config.site.id,
                        sz: e.size.join("x"),
                        hl: "en",
                        output: "vast",
                        url: "__referrer__",
                        vad_type: "linear",
                        description_url: "__domain__",
                        pp: "10_VAST%20redirects_video%2Fmp4_VPAID%20JavaScript"
                    }
                }, e.prototype.buildGAMVideoUrl = function(e) {
                    var t = this.getConsentParams(),
                        i = Bc.createQueryString(this.getCustParams(e)),
                        n = Bc.createEncodedQueryString({
                            cust_params: i
                        }),
                        r = this.getDefaultVideoUrlParams(e),
                        o = $r($r({
                            env: "vp",
                            gdfp_req: "1",
                            unviewed_position_start: "1",
                            correlator: Date.now()
                        }, r), t);
                    return "https://securepubads.g.doubleclick.net/gampad/ads?" + Bc.createQueryString(o) + "&" + n
                }, e.prototype.buildGAMVideoUrlPrebid = function(e) {
                    var t = this.getCustParams(e),
                        i = this.getDefaultVideoUrlParams(e);
                    return pbjs.adServers.dfp.buildVideoUrl({
                        adUnit: e.videoAdUnit,
                        params: $r($r({}, i), {
                            cust_params: t
                        })
                    })
                }, e.prototype.buildVideoUrl = function(e) {
                    return this.shouldPrebidRun ? this.buildGAMVideoUrlPrebid(e) : this.buildGAMVideoUrl(e)
                }, e = eo([Ka("VideoUrlBuilder"), Ro(), io("design:paramtypes", [is, bu, Fc, Uc, Nl])], e)
            }(),
            yp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    i.abgroup = t, i.key = "sekho", i._result = !1, i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }];
                    var n = window,
                        r = n && n.adthriveCLS,
                        o = r && r.experiments,
                        a = o && i.key in o;
                    return i._result = o && a ? o[i.key] : i.run(), i.abgroup.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.05).get()
                }, t = eo([zo(), Ka("SekindoHoldoutExperiment"), io("design:paramtypes", [is])], t)
            }(rs),
            _p = function(e) {
                function t(t, i, n, r, o, a, s, c, l, u, d) {
                    var p = e.call(this, t.video, l.result, "VideoManagerComponent") || this;
                    return p._config = t, p._prebidMethods = i, p._jwBoostExperiment = n, p._userPageDataLoggingEvent = r, p._collapsibleVideoLoggingStore = o, p._videoRequestManager = a, p._eventProxy = s, p._mediaType = c, p._sekindoHoldoutExperiment = l, p._videoUrlBuilder = u, p._irisTv = d, p._sekindoPlayers = [], p._jwPlayers = [], p._IN_POST_SELECTOR = ".adthrive-video-player", p
                }
                return Jr(t, e), t.prototype.init = function() {
                    this._handleCollapsibleVideoLogging(), this._initializePlayers(), this._mediaType.runOneStreamExperiment()
                }, t.prototype._initializePlayers = function() {
                    var e = document.querySelectorAll(this._IN_POST_SELECTOR);
                    if (e.length && this._initializeRelatedPlayers(e), this._shouldRunAutoplayPlayers()) {
                        this._determineAutoplayPlayers();
                        try {
                            this._importScripts()
                        } catch (e) {
                            Bo.error("VideoManagerComponent", "initializePlayers", e)
                        }
                    } else try {
                        this._importScripts()
                    } catch (e) {
                        Bo.error("VideoManagerComponent", "initializePlayers", e)
                    }
                }, t.prototype._createStationaryRelatedPlayer = function(e, t) {
                    var i = "mobile" === this._device ? [400, 225] : [640, 360],
                        n = cs.Video_In_Post_ClicktoPlay_SoundOn,
                        r = new pp(e.playerId, e.mediaId, n, i, t, this._eventProxy, this._config, !1, "adthrive-collapse-mobile", "adthrive-collapse-medium", this._prebidMethods);
                    this._jwPlayers.push(r)
                }, t.prototype._createStickyRelatedPlayer = function(e, t) {
                    var i = "mobile" === this._device ? [400, 225] : [640, 360],
                        n = cs.Video_Individual_Autoplay_SOff,
                        r = this._getCollapseType();
                    this._collapsibleVideoLoggingStore.playerName = n, this._stickyRelatedOnPage = !0, this._config.video.mobileStickyPlayerOnPage = "mobile" === this._device;
                    var o = new pp(e.playerId, e.mediaId, n, i, t, this._eventProxy, this._config, !0, r, "adthrive-collapse-medium", this._prebidMethods, e.mobileLocation);
                    this._jwPlayers.push(o)
                }, t.prototype._createSekindoPlayer = function(e, t) {
                    var i = e.playlistId,
                        n = "mobile" === this._device ? {
                            width: 340,
                            height: 260
                        } : {
                            width: 320,
                            height: 250
                        },
                        r = $r($r({}, e), {
                            classNames: []
                        });
                    this._sekindoPlayers.push(new fp(i, r, t, this._device, n.width, n.height, !1, this._config, this._videoRequestManager))
                }, t.prototype._createPlaylistPlayer = function(e, t) {
                    var i = e.playerId,
                        n = e.playlistId,
                        r = this._getCollapseType(),
                        o = "adthrive-collapse-mobile" === r ? [400, 225] : [640, 360],
                        a = "mobile" === this._device ? cs.Video_Coll_SOff_Smartphone : cs.Video_Collapse_Autoplay_SoundOff,
                        s = {
                            classNames: [],
                            enabled: !0,
                            pageSelector: e.pageSelector,
                            elementSelector: e.elementSelector,
                            position: e.position,
                            skip: e.skip
                        };
                    this._config.video.mobileStickyPlayerOnPage = !0;
                    var c = new hp(i, n, a, o, s, t, this._eventProxy, this._config, r, "adthrive-collapse-medium", this._prebidMethods, e.mobileLocation, e.saveVideoCloseState, e.title, e.shuffle);
                    this._collapsibleVideoLoggingStore.playerName = a, this._jwPlayers.push(c)
                }, t.prototype._initJwBoost = function() {
                    this._prebidMethods.setConfig($r({}, this._jwBoostExperiment.result && this._jwPlayers.length && {
                        realTimeData: {
                            dataProviders: [{
                                name: "jwplayer",
                                params: {
                                    mediaIDs: this._contextualMediaIds
                                }
                            }]
                        }
                    }))
                }, t.prototype._hasCollapsiblePlayer = function(e) {
                    return !!e.length && e.some((function(e) {
                        return e.collapsible
                    }))
                }, t.prototype._hasInViewAutoplayStationaryPlayer = function(e) {
                    return !!e.length && e.some((function(e) {
                        return !e.collapsible && Bc.playerInView(e._pageElement)
                    }))
                }, t.prototype._setPlayerInstance = function(e) {
                    this._resetPlayer(e)
                }, t.prototype._resetPlayer = function(e) {
                    e.init()
                }, t.prototype._initializePlayer = function(e, t) {
                    return no(this, void 0, void 0, (function() {
                        var i, n = this;
                        return ro(this, (function(r) {
                            switch (r.label) {
                                case 0:
                                    return i = this._videoRequestManager, e.setDefaults(window.jwplayer.defaults), window.jwplayer.defaults = {}, [4, this._prebidMethods.waitForQueue().then((function() {
                                        n._videoUrlBuilder.shouldPrebidRun = !0
                                    })).catch((function() {}))];
                                case 1:
                                    return r.sent(), t && this._contextualMediaIds[0] ? [4, this._irisTv.setContextualData(this._contextualMediaIds[0])] : [3, 3];
                                case 2:
                                    r.sent(), r.label = 3;
                                case 3:
                                    return i.addVideoSlots([e]), e.initialAuctionPlayer ? [4, i.requestVideoBids([e])] : [3, 5];
                                case 4:
                                    r.sent(), r.label = 5;
                                case 5:
                                    return e.setPlayerInstance = this._setPlayerInstance.bind(this), e.requestVideoBids = function(e) {
                                        return no(n, void 0, void 0, (function() {
                                            return ro(this, (function(t) {
                                                switch (t.label) {
                                                    case 0:
                                                        return [4, i.requestVideoBids(e)];
                                                    case 1:
                                                        return [2, t.sent()]
                                                }
                                            }))
                                        }))
                                    }, Uc.pushToQueue((function() {
                                        e.buildVideoUrl = n._videoUrlBuilder.buildVideoUrl.bind(n._videoUrlBuilder), e.addToPage(), e.init()
                                    })), [2]
                            }
                        }))
                    }))
                }, t.prototype._importScripts = function() {
                    var e = this,
                        t = this._hasCollapsiblePlayer(this._jwPlayers),
                        i = !t && this._hasInViewAutoplayStationaryPlayer(this._jwPlayers);
                    (t || i || this._sekindoPlayers.length) && (this._config.video.preventStickyOutstream = !0), this._initJwBoost(), this._jwPlayers.length && (this._config.video.hasJwPlayer = !0), this._jwPlayers.forEach((function(t) {
                        var i = "contextual" === t.isPlayerType;
                        i && e._config.video.setupAdvanceRelatedExperiment(t.collapsible), ua("https://content.jwplatform.com/libraries/" + t._playerId + ".js").then((function() {
                            return no(e, void 0, void 0, (function() {
                                return ro(this, (function(e) {
                                    return [2, this._initializePlayer(t, i)]
                                }))
                            }))
                        })).catch((function(e) {
                            return Bo.error("VideoManagerComponent", "importScripts", e)
                        }))
                    })), this._sekindoPlayers.forEach((function(e) {
                        e.addToPage()
                    }))
                }, t.prototype._isVideoAllowedOnPage = function() {
                    return !this._config.disableAds.video || (this._config.disableAds.reasons.has("video_tag") ? Bo.error("VideoManagerComponent", "isVideoAllowedOnPage", new Error("DBP: Disabled by publisher via video tag")) : this._config.disableAds.reasons.has("video_plugin") ? Bo.error("VideoManagerComponent", "isVideoAllowedOnPage", new Error("DBP: Disabled by publisher via video plugin")) : this._config.disableAds.reasons.has("video_page") ? Bo.error("VideoManagerComponent", "isVideoAllowedOnPage", new Error("DBP: Disabled by publisher via command queue")) : Bo.error("VideoManagerComponent", "isVideoAllowedOnPage", new Error("DBP: Disabled by publisher via other")), !1)
                }, t.prototype._getCollapseType = function() {
                    return "mobile" === this._device ? "adthrive-collapse-mobile" : "adthrive-collapse-float"
                }, t.prototype._handleCollapsibleVideoLogging = function() {
                    var e = this;
                    sp.collapseEvent.on((function() {
                        e._collapsibleVideoLoggingStore.startedCollapsedTime = Oa()
                    })), sp.uncollapseEvent.on((function() {
                        e._collapsibleVideoLoggingStore.totalTimeCollapsed += e._collapsibleVideoLoggingStore.startedCollapsedTime ? Oa() - e._collapsibleVideoLoggingStore.startedCollapsedTime : 0, e._collapsibleVideoLoggingStore.startedCollapsedTime = void 0
                    })), sp.closeEvent.on((function() {
                        e._collapsibleVideoLoggingStore.wasClosed = !0
                    })), sp.startEvent.once().then((function() {
                        e._collapsibleVideoLoggingStore.wasStarted = !0
                    })).catch((function() {})), this._userPageDataLoggingEvent.loggingData.on((function() {
                        e._collapsibleVideoLoggingStore.startedCollapsedTime && (e._collapsibleVideoLoggingStore.totalTimeCollapsed += Oa() - e._collapsibleVideoLoggingStore.startedCollapsedTime)
                    }))
                }, t = eo([Ka("VideoManagerComponent"), zo(), io("design:paramtypes", [Fc, Gc, lu, _c, ku, Ju, Vd, ll, yp, mp, Nl])], t)
            }(gp),
            vp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._bootstrapConfig = t, n._pageManager = i, n._maxTimeOnPage = 36e5, n._webVitals = [], n._webVitalsSent = !1, n._visibilityChangeOff = n._pageManager.visibilityChange.on((function() {
                        return n.logWebVitals()
                    })), n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    Yo().then((function() {
                        var t = window.webVitals,
                            i = e.addWebVital;
                        t.getFID(i), t.getCLS(i), t.getLCP(i), t.getFCP(i), t.getTTFB(i)
                    })).catch((function() {
                        return !1
                    })), window.addEventListener("LogWebVital", (function(t) {
                        e._webVitals.push(t.detail)
                    })), setTimeout((function() {
                        e.logWebVitals()
                    }), this._maxTimeOnPage)
                }, t.prototype.addWebVital = function(e) {
                    var t = e.name,
                        i = e.delta,
                        n = e.value,
                        r = e.id,
                        o = new CustomEvent("LogWebVital", {
                            detail: {
                                name: t,
                                delta: i,
                                value: n,
                                id: r
                            }
                        });
                    window.dispatchEvent(o)
                }, t.prototype.logWebVitals = function() {
                    if (!this._webVitalsSent) {
                        var e = {
                            webVitals: this._webVitals,
                            gptLoad: !0
                        };
                        this._webVitalsSent = !0, this._visibilityChangeOff(), this._bootstrapConfig.gptLibFailed && (e.gptLoad = !1), Bo.fetchEvent("WebVitalsComponent", "logWebVital", e)
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._bootstrapConfig.webVitalsEnabled
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("WebVitalsComponent"), zo(), io("design:paramtypes", [_s, bc])], t)
            }(Su),
            bp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._result = !1, i.key = "logcls", i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], qo() && (i._result = i.run(), t.set(i.key, i._result ? "on" : "off")), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.1).get()
                }, t = eo([Ka("LayoutShiftExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            wp = function(e) {
                function t(t, i, n, r, o, a) {
                    var s = e.call(this) || this;
                    return s._gam = t, s._slotManager = i, s._slots = n, s._videoRequestManager = r, s._layoutShiftExperiment = o, s._pageManager = a, s._events = [], s._maxTimeOnPage = 36e5, s._screenHeightsWithin = 5, s._previousSiblings = 3, s._layoutShiftData = [], s._slotResize = {}, s._loggedInitialLoadShift = !1, s._maxPayloadSize = 3062, s
                }
                return Jr(t, e), t.prototype.init = function() {
                    this.watchSlotShift()
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._layoutShiftExperiment.result && "ResizeObserver" in window && "PerformanceObserver" in window && PerformanceObserver.supportedEntryTypes.indexOf("layout-shift") > -1
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.watchSlotShift = function() {
                    this.setPerformanceObserver(), this.setResizeEvents(), this.setEventListeners()
                }, t.prototype.setPerformanceObserver = function() {
                    var e = this;
                    if (!this._layoutObserver) try {
                        this._layoutObserver = new PerformanceObserver((function(t) {
                            e.analyzeEntries(t.getEntries())
                        })), this._layoutObserver.observe({
                            type: "layout-shift",
                            buffered: !1
                        })
                    } catch (e) {
                        Bo.error("LayoutShiftComponent", "SetPerformanceObserver", e)
                    }
                }, t.prototype.setResizeEvents = function() {
                    var e = this;
                    this._events.push(this._videoRequestManager.requestingSekindoBids.on((function(t) {
                        e.setResizeObservers(t._playlistId, t._pageElement)
                    }))), this._events.push(this._videoRequestManager.requestingVideoBids.on((function(t) {
                        t.forEach((function(t) {
                            e.setResizeObservers(t._playlistId, t._pageElement)
                        }))
                    }))), this._events.push(this._gam.slotRequested.on((function(t) {
                        var i = t.slot;
                        e.setResizeObservers(i.element.id, i.element)
                    }))), this._slotManager.refreshing.once().then((function() {
                        e.logLayoutShift()
                    })).catch((function() {}))
                }, t.prototype.setEventListeners = function() {
                    var e = this;
                    this._events.push(this._pageManager.beforeUnload.on((function() {
                        return e.logLayoutShift()
                    }))), this._events.push(this._pageManager.visibilityChange.on((function() {
                        return e.logLayoutShift()
                    }))), setTimeout((function() {
                        e.logLayoutShift()
                    }), this._maxTimeOnPage)
                }, t.prototype.setResizeObservers = function(e, t) {
                    var i = this;
                    this._slotResize[e] || (this._slotResize[e] = {
                        hasResized: !1,
                        resizeObserver: new ResizeObserver((function(t) {
                            t.forEach((function() {
                                i._slotResize[e].hasResized = !0, i._slotResize[e].ro_ts = Date.now(), i._slotResize[e].resizeObserver.disconnect()
                            }))
                        }))
                    }, this._slotResize[e].resizeObserver.observe(t))
                }, t.prototype.analyzeEntries = function(e) {
                    var t, i, n, r, o = Date.now();
                    try {
                        for (var a = oo(e), s = a.next(); !s.done; s = a.next()) {
                            var c = s.value,
                                l = c.value,
                                u = c.sources;
                            if (!c.hadRecentInput) {
                                var d = {
                                    value: l,
                                    po_ts: o,
                                    nodes: []
                                };
                                try {
                                    for (var p = (n = void 0, oo(u)), h = p.next(); !h.done; h = p.next()) {
                                        var f = h.value;
                                        if (f.node) {
                                            var g = this.getIdentifier(f.node),
                                                m = g.split(":")[1];
                                            d.nodes.push($r({
                                                identifier: g,
                                                posDiff: f.currentRect.top - f.previousRect.top,
                                                absPos: window.pageYOffset + f.currentRect.top,
                                                prevEls: this.getPreviousSibling(f.node, this._previousSiblings),
                                                parent: this.getIdentifier(f.node.parentNode),
                                                hasResized: this.checkResizes(f.node)
                                            }, this._slotResize[m] && this._slotResize[m].ro_ts && {
                                                ro_ts: this._slotResize[m].ro_ts
                                            }))
                                        }
                                    }
                                } catch (e) {
                                    n = {
                                        error: e
                                    }
                                } finally {
                                    try {
                                        h && !h.done && (r = p.return) && r.call(p)
                                    } finally {
                                        if (n) throw n.error
                                    }
                                }
                                this._layoutShiftData.push(d)
                            }
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            s && !s.done && (i = a.return) && i.call(a)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                }, t.prototype.getIdentifier = function(e) {
                    return e.id ? "id:" + e.id : e.classList && e.classList.value ? "class:" + e.classList.value.split(" ").join(".") : "node:" + e.nodeName.toLowerCase()
                }, t.prototype.getPreviousSibling = function(e, t) {
                    void 0 === t && (t = 3);
                    for (var i = e.previousElementSibling, n = 0, r = []; i && n < t;) ++n, r.push(this.getIdentifier(i)), i = i.previousElementSibling;
                    return r
                }, t.prototype.checkResizes = function(e) {
                    var t = this.getIdentifier(e).split(":")[1];
                    return !(!this._slotResize[t] || !this._slotResize[t].hasResized) && (this.checkIsSticky(t) || this.checkElementPlacement(e))
                }, t.prototype.checkIsSticky = function(e) {
                    var t = this._slots.get(e);
                    return t && t.isSticky
                }, t.prototype.checkElementPlacement = function(e) {
                    return (function(e) {
                        var t = e.getBoundingClientRect();
                        return t.top >= 0 && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= (window.innerWidth || document.documentElement.clientWidth)
                    }(e) || function(e) {
                        return window.pageYOffset > e.getBoundingClientRect().top + window.pageYOffset
                    }(e)) && function(e, t) {
                        return window.pageYOffset - (e.getBoundingClientRect().top + window.pageYOffset) < window.innerHeight + window.innerHeight * t
                    }(e, this._screenHeightsWithin)
                }, t.prototype.logLayoutShift = function() {
                    this._loggedInitialLoadShift || (this._loggedInitialLoadShift = !0, this.checkAndTrim(this._layoutShiftData).forEach((function(e) {
                        Bo.event("LayoutShiftComponent", "logLayoutShift", e)
                    })), this.cleanUp())
                }, t.prototype.checkAndTrim = function(e) {
                    if (void 0 === e && (e = []), !e.length) return [];
                    var t = so(e).sort((function(e, t) {
                            return t.value - e.value
                        })),
                        i = JSON.stringify(t);
                    if (i.length > this._maxPayloadSize) {
                        if (Math.ceil(i.length / this._maxPayloadSize) <= 2) return [t.slice(0, Math.ceil(t.length / 2)), t.slice(Math.ceil(t.length / 2))];
                        var n = this._maxPayloadSize / i.length * (Math.ceil(i.length / this._maxPayloadSize) / 2),
                            r = t.slice();
                        return r.length = Math.floor(t.length * n), this.checkAndTrim(r)
                    }
                    return [t]
                }, t.prototype.cleanUp = function() {
                    this.disconnectObservers(), this.removeEventListeners()
                }, t.prototype.removeEventListeners = function() {
                    this._events.forEach((function(e) {
                        e()
                    }))
                }, t.prototype.disconnectObservers = function() {
                    var e, t;
                    this._layoutObserver.disconnect();
                    var i = Object.keys(this._slotResize);
                    try {
                        for (var n = oo(i), r = n.next(); !r.done; r = n.next()) {
                            var o = r.value;
                            this._slotResize[o].resizeObserver.disconnect()
                        }
                    } catch (t) {
                        e = {
                            error: t
                        }
                    } finally {
                        try {
                            r && !r.done && (t = n.return) && t.call(n)
                        } finally {
                            if (e) throw e.error
                        }
                    }
                }, t = eo([Ka("LayoutShiftComponent"), zo(), io("design:paramtypes", [Uc, Cu, qc, Ju, bp, bc])], t)
            }(Su),
            Sp = function() {
                function e() {
                    this.contentAdded = new Do
                }
                return e = eo([Ka("InfiniteScrollEvents"), Ro()], e)
            }(),
            Cp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._events = i, n._ajaxSelector = "#ajax-load-more", n._heightThreshold = 1e3, n._infiniteScrollElement = null, n
                }
                return Jr(t, e), t.prototype.start = function() {
                    this.detectInfiniteScroll()
                }, t.prototype.detectInfiniteScroll = function() {
                    var e = this;
                    this.checkForCustomConfig();
                    var t = new MutationObserver((function(t, i) {
                        t.filter((function(e) {
                            var t = e.type,
                                i = e.addedNodes;
                            return "childList" === t && i.length > 0
                        })).reduce((function(e, t) {
                            var i = t.addedNodes;
                            return so(e, Array.prototype.slice.call(i))
                        }), []).filter((function(t) {
                            return t instanceof HTMLElement && t.clientHeight > e._heightThreshold
                        })).forEach((function(t) {
                            t.parentElement && (i.disconnect(), i.observe(t.parentElement, {
                                childList: !0
                            })), e._events.contentAdded.emit(t).catch((function(e) {
                                Bo.error("InfiniteScrollDetectionComponent", "addMutationObserver", "added", e)
                            }))
                        }))
                    }));
                    this._infiniteScrollElement ? t.observe(this._infiniteScrollElement, {
                        childList: !0,
                        subtree: !0
                    }) : Array.prototype.slice.call(document.querySelectorAll("body *")).filter((function(t) {
                        return t instanceof HTMLElement && t.offsetHeight > e._heightThreshold
                    })).forEach((function(e) {
                        t.observe(e, {
                            childList: !0
                        })
                    }))
                }, t.prototype.checkForCustomConfig = function() {
                    var e = this._config.adOptions.infiniteScrollOptions,
                        t = e.heightThreshold,
                        i = e.selector,
                        n = i ? document.querySelector(i) : null;
                    if (n) this._infiniteScrollElement = n;
                    else {
                        var r = document.querySelector(this._ajaxSelector);
                        r && (this._config.infiniteScroll.ajaxType = !0, this._infiniteScrollElement = r)
                    }
                    t && t > 0 && (this._heightThreshold = t)
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.adOptions.infiniteScroll && "MutationObserver" in window
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("InfiniteScrollDetectionComponent"), zo(), io("design:paramtypes", [Fc, Sp])], t)
            }(Su),
            kp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._config = t, i._count = 1, i
                }
                return Jr(t, e), t.prototype.getDynamicElementId = function() {
                    return this._config.gam.prefix + "_Infinite_" + this._count++
                }, t = eo([Ka("InfiniteScrollDynamicAdsInjector"), zo(), io("design:paramtypes", [Fc])], t)
            }(Wu),
            Pp = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this) || this;
                    return a._config = t, a._events = i, a._injector = n, a._slotManager = r, a._gam = o, a._page = 1, a
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._events.contentAdded.on((function(t) {
                        e._page++, e._config.context.pageviewKey = ts(), e._gam.setTargeting({
                            key: "pvk",
                            value: e._config.context.pageviewKey
                        }), e.addSlots(t)
                    })), this._slotManager.added.on((function(t) {
                        return t.forEach((function(t) {
                            Uc.pushToQueue((function() {
                                t.setTargeting({
                                    key: "inf_scroll",
                                    value: e._page.toString()
                                })
                            }))
                        }))
                    }))
                }, t.prototype.addSlots = function(e) {
                    var t = this,
                        i = this._config.dynamicAds.filter((function(e) {
                            return !(t._config.infiniteScroll.ajaxType && "Sidebar" === e.location)
                        })).filter((function(e) {
                            return t.locationEnabled(e)
                        })).filter((function(e) {
                            return t.forDevice(e, t._config.context.device)
                        })).filter((function(e) {
                            return t.forPage(e)
                        })),
                        n = this._injector.inject(i, e);
                    this._slotManager.add(n).catch((function(e) {
                        Bo.error("InfiniteScrollDynamicAdsComponent", "addSlots", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.adOptions.infiniteScroll
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.forDevice = function(e, t) {
                    return -1 !== e.devices.indexOf(t)
                }, t.prototype.forPage = function(e) {
                    return 0 === e.pageSelector.length || null !== document.querySelector(e.pageSelector)
                }, t.prototype.locationEnabled = function(e) {
                    return !this._config.disableAds.locations.has(e.location) && !this._config.disableAds.all
                }, t = eo([Ka("InfiniteScrollDynamicAdsComponent"), zo(), io("design:paramtypes", [Fc, Sp, kp, Cu, Uc])], t)
            }(Su),
            Ep = function(e) {
                function t(t, i, n, r) {
                    var o = e.call(this) || this;
                    return o._config = t, o._events = i, o._slotManager = n, o._slots = r, o._debounce = new jo(1e3), o
                }
                return Jr(t, e), t.prototype.start = function() {
                    var e = this;
                    this._observer = this.getIntersectionObserver(), this._events.contentAdded.on((function(t) {
                        e._observer && e._observer.observe(t)
                    }))
                }, t.prototype.getIntersectionObserver = function() {
                    var e = this;
                    return new IntersectionObserver((function(t) {
                        var i, n;
                        try {
                            for (var r = oo(t), o = r.next(); !o.done; o = r.next()) {
                                var a = o.value;
                                a.intersectionRatio > 0 && a.isIntersecting && e._debounce.limit(a.target.id).then((function() {
                                    return e.refresh()
                                })).catch((function(e) {
                                    Bo.error("InfiniteScrollRefreshComponent", "getIntersectionObserver", "refresh", e)
                                }))
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (n = r.return) && n.call(r)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }), {
                        threshold: [.08]
                    })
                }, t.prototype.refresh = function() {
                    var e = this;
                    if (this._config.adOptions.infiniteScrollRefresh) {
                        var t = this._slots.get().filter((function(t) {
                            return e._config.infiniteScroll.refreshSlots.has(t.location) && t.isSticky
                        }));
                        this._slotManager.refresh(t).catch((function(e) {
                            Bo.error("InfiniteScrollRefreshComponent", "refresh", e)
                        }))
                    }
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.adOptions.infiniteScroll && "IntersectionObserver" in window
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("InfiniteScrollRefreshComponent"), zo(), io("design:paramtypes", [Fc, Sp, Cu, qc])], t)
            }(Su),
            Op = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._googleAdManager = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._googleAdManager.slotRenderEnded.on((function(t) {
                        var i = t.slot;
                        e.slotRenderEnded(i)
                    }))
                }, t.prototype.slotRenderEnded = function(e) {
                    e.alwaysInView = "Footer" === e.location || "Video_StickyOutstream" === e.location
                }, t = eo([Ka("AlwaysInViewComponent"), zo(), io("design:paramtypes", [Uc])], t)
            }(Su),
            xp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    i._slotManager = t;
                    return window.addEventListener("message", (function(e) {
                        e && e.data && "set_adthrive_slot_timeout" === e.data.message && e.data.slot_id && e.data.refresh_interval >= 0 && i._slotManager.updateRefreshTimeout(e.data.slot_id, e.data.refresh_interval)
                    }), !1), i
                }
                return Jr(t, e), t = eo([Ka("ChangeSlotRefreshComponent"), zo(), io("design:paramtypes", [Cu])], t)
            }(Su),
            Tp = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._slotManager = t, r._slots = i, r._pageManager = n, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._pageManager.visibilityChange.on((function() {
                        return e.documentVisibilityChanged()
                    }))
                }, t.prototype.documentVisibilityChanged = function() {
                    var e = document.visibilityState,
                        t = this._slots.get();
                    "visible" === e ? this._slotManager.resumeRefresh(t) : "hidden" === e && this._slotManager.pauseRefresh(t)
                }, t = eo([Ka("DocumentHiddenPauseRefreshComponent"), zo(), io("design:paramtypes", [Cu, qc, bc])], t)
            }(Su),
            Ip = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._googleAdManager = t, n._slotManager = i, n._inViewPercentage = 50, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._googleAdManager.impressionViewable.on((function(t) {
                        var i = t.slot;
                        e.processImpressionViewable(i)
                    })), this._googleAdManager.slotVisibilityChanged.on((function(t) {
                        var i = t.slot,
                            n = t.event;
                        e.processVisibilityChanged(i, n)
                    }))
                }, t.prototype.processImpressionViewable = function(e) {
                    e.outOfViewGPT = !1, this._slotManager.inView(e)
                }, t.prototype.processVisibilityChanged = function(e, t) {
                    this.check(e, t.inViewPercentage)
                }, t.prototype.check = function(e, t) {
                    t && t >= this._inViewPercentage || "Video_StickyOutstream" === e.location ? (e.outOfViewGPT = !1, this._slotManager.inView(e)) : (e.outOfViewGPT = !0, this._slotManager.outOfView(e))
                }, t = eo([Ka("ImpressionViewableRefreshComponent"), zo(), io("design:paramtypes", [Uc, Cu])], t)
            }(Su),
            Mp = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._googleAdManager = t, r._slotManager = i, r._slots = n, r._inViewPercentage = 50, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._observer = this.getIntersectionObserver(), this._googleAdManager.slotRenderEnded.on((function(t) {
                        var i = t.slot;
                        e.slotRenderEnded(i)
                    })), this._slotManager.refreshing.on((function(t) {
                        e.refreshing(t)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return "IntersectionObserver" in window
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.slotRenderEnded = function(e) {
                    this._observer && e.element && this._observer.observe(e.element)
                }, t.prototype.refreshing = function(e) {
                    var t, i;
                    if (this._observer) try {
                        for (var n = oo(e), r = n.next(); !r.done; r = n.next()) {
                            var o = r.value;
                            o.element && this._observer.unobserve(o.element)
                        }
                    } catch (e) {
                        t = {
                            error: e
                        }
                    } finally {
                        try {
                            r && !r.done && (i = n.return) && i.call(n)
                        } finally {
                            if (t) throw t.error
                        }
                    }
                }, t.prototype.getIntersectionObserver = function() {
                    var e = this;
                    return new IntersectionObserver((function(t) {
                        var i, n;
                        try {
                            for (var r = oo(t), o = r.next(); !o.done; o = r.next()) {
                                var a = o.value,
                                    s = e._slots.get(a.target.id);
                                s && e.check(s, 100 * a.intersectionRatio)
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                o && !o.done && (n = r.return) && n.call(r)
                            } finally {
                                if (i) throw i.error
                            }
                        }
                    }), {
                        threshold: [0, this._inViewPercentage / 100]
                    })
                }, t.prototype.check = function(e, t) {
                    t >= this._inViewPercentage || "Video_StickyOutstream" === e.location ? (e.outOfViewIO = !1, this._slotManager.inView(e)) : (e.outOfViewIO = !0, this._slotManager.outOfView(e))
                }, t = eo([Ka("IntersectionObserverRefreshComponent"), zo(), io("design:paramtypes", [Uc, Cu, qc])], t)
            }(Su),
            Ap = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gdprEvents = i, n._comscoreId = "20567959", n._gdprEnabled = !1, n._gdprEnabled = n._config.gdpr.enabled, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this,
                        t = this._config.ccpa.comscoreParams || "0",
                        i = $r({
                            c1: "2",
                            c2: this._comscoreId
                        }, (this._gdprEnabled || this._config.ccpa.required) && {
                            cs_ucfr: t
                        });
                    window._comscore = window._comscore || [], window._comscore.push(i);
                    var n = "https://sb.scorecardresearch.com";
                    if (!this._gdprEnabled) return ua(n + "/beacon.js");
                    this._gdprEvents.consentCaptured.on((function() {
                        ua(n + "/cs/" + e._comscoreId + "/beacon.js").catch((function() {}))
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("ComscoreTrackerComponent"), zo(), io("design:paramtypes", [Fc, ad])], t)
            }(Su),
            zp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._gam = t, n._config = i, n._trackerHoldoutKey = "hawk", n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.import()
                    })).then((function() {
                        return e.syncData()
                    })).catch((function(e) {
                        return Bo.error("HawkeyeTrackerComponent", "init", "slotOnload", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.tkho.tracker !== this._trackerHoldoutKey
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.import = function() {
                    return no(this, void 0, void 0, (function() {
                        return ro(this, (function(e) {
                            switch (e.label) {
                                case 0:
                                    return "https://pghub.io/js/pandg-sdk.js", [4, ua("https://pghub.io/js/pandg-sdk.js", !0)];
                                case 1:
                                    return [2, e.sent()]
                            }
                        }))
                    }))
                }, t.prototype.syncData = function() {
                    var e = {
                        ccpa: this._config.ccpa.privacyString ? this._config.ccpa.privacyString : null,
                        bp_id: "cafemedia"
                    };
                    window.Tapad.init(e, {
                        name: "P&G",
                        pixelUrl: "https://pandg.tapad.com/tag"
                    }).sync({}).then((function(e) {}))
                }, t = eo([Ka("HawkeyeTrackerComponent"), zo(), io("design:paramtypes", [Uc, Fc])], t)
            }(Su),
            Rp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n._trackerHoldoutKey = "ats", n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.import()
                    })).catch((function(e) {
                        return Bo.error("LiveRampAtsTrackerComponent", "init", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.liveRampAts.enabled && !this._config.disableAds.all && this._config.tkho.tracker !== this._trackerHoldoutKey
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.import = function() {
                    var e = this;
                    ua(this._config.liveRampAts._url).then((function() {
                        return window.ats.start(e._config.liveRampAts._config)
                    })).catch((function() {}))
                }, t = eo([Ka("LiveRampAtsTrackerComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            jp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n.ptk = "17c1789b-e660-493b-aa74-3c8fb990dc5f", n.pubid = "CAFEMEDIA", n.merkleStorageKey = "IXWRAPPERMerkleIp", n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    window.localStorage.getItem("" + this.merkleStorageKey) ? this.spoof() : this._gam.slotOnload.once().then((function() {
                        e.load().then((function(t) {
                            t instanceof Error || !Object.keys(t).length || (window.localStorage.setItem("" + e.merkleStorageKey, encodeURIComponent(JSON.stringify(t))), e.spoof())
                        })).catch((function() {}))
                    })).catch((function() {}))
                }, t.prototype.load = function() {
                    return no(this, void 0, void 0, (function() {
                        var e;
                        return ro(this, (function(t) {
                            return e = "https://mid.rkdms.com/idsv2?ptk=" + this.ptk + "&pubid=" + this.pubid, [2, new Promise((function(t, i) {
                                var n = new XMLHttpRequest;
                                n.open("get", e), n.withCredentials = !0, n.addEventListener("load", (function() {
                                    return 200 !== n.status ? i(new Error("Error status: " + n.status + " response: " + n.responseText)) : t(JSON.parse(n.responseText))
                                })), n.addEventListener("error", (function() {
                                    return i(new Error("Request failed"))
                                })), n.send()
                            }))]
                        }))
                    }))
                }, t.prototype.spoof = function() {
                    var e = this;
                    window.headertag || (window.headertag = {
                        getIdentityInfo: function() {
                            var t, i = JSON.parse(decodeURIComponent(window.localStorage.getItem("pbjs-unifiedid") || "")),
                                n = JSON.parse(decodeURIComponent(window.localStorage.getItem("" + e.merkleStorageKey) || "{}"));
                            return {
                                AdserverOrgIp: {
                                    data: {
                                        source: "adserver.org",
                                        uids: Object.keys(i).map((function(e) {
                                            return {
                                                id: i[e],
                                                ext: {
                                                    rtiPartner: e
                                                }
                                            }
                                        }))
                                    },
                                    responsePending: !1
                                },
                                MerkleIp: {
                                    data: {
                                        source: "merkleinc.com",
                                        uids: [{
                                            id: null === (t = null == n ? void 0 : n.ppid) || void 0 === t ? void 0 : t.id,
                                            ext: {
                                                enc: 0
                                            }
                                        }]
                                    },
                                    responsePending: !1
                                }
                            }
                        }
                    })
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !this._config.gdpr.enabled && !this._config.ccpa.enabled
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([Ka("MerkleTrackerComponent"), zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            Dp = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t._result = !1, t.key = "NielsenTrackerExperiment", t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], qo() && (t._result = t.run()), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(1 / 300).get()
                }, t = eo([Ka("NielsenTrackerExperiment"), zo(), io("design:paramtypes", [])], t)
            }(rs),
            Bp = function(e) {
                function t(t, i, n) {
                    var r = e.call(this) || this;
                    return r._config = t, r._nielsenTrackerExperiment = i, r._gam = n, r
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.loadImage()
                    })).catch((function(e) {
                        Bo.error("NielsenTrackerComponent", "init", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._nielsenTrackerExperiment.result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.loadImage = function() {
                    var e = this._config.context.device,
                        t = "https://secure-gl.imrworldwide.com/cgi-bin/m?am=3&at=view&rt=banner&st=image&cr=adthrive&ce=cafemedia",
                        i = {
                            phone: "nlsn290957",
                            tablet: "nlsn291137",
                            desktop: "nlsn291136"
                        } [e],
                        n = aa();
                    n && (n.toLowerCase().indexOf("instagram.com") >= 0 || n.toLowerCase().indexOf("pinterest.com") >= 0) && (i = {
                        phone: "nlsn287186",
                        tablet: "nlsn287188",
                        desktop: "nlsn287187"
                    } [e]), t = t + "&ci=nlsnci542&ca=" + i + "&pc=" + window.location.host + "&r=" + Date.now(), (new Image).src = "" + t
                }, t = eo([Ka("NielsenTrackerComponent"), zo(), io("design:paramtypes", [Fc, Dp, Uc])], t)
            }(Su),
            Vp = function(e) {
                function t(t, i) {
                    var n = e.call(this) || this;
                    return n._config = t, n._gam = i, n._accountId = "2773249", n._adId = "81938", n._configId = "2092", n._affDomain = "goto.target.com", n._targetDomain = "www.target.com", n._commonParams = "", n._commonPath = "", n._trackerHoldoutKey = "tgtaff", n._commonParams = Aa({
                        subid1: n._config.site.id,
                        subid2: location.href,
                        sharedid: n._config.site.name
                    }), n._commonPath = n._accountId + "/" + n._adId + "/" + n._configId, n
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.rewriteAllTargetLinksOnPage()
                    })).catch((function(e) {
                        return Bo.error("TargetRewriteTrackerComponent", "getAllTargetLinksOnPage", e)
                    }))
                }, t.prototype.rewriteAllTargetLinksOnPage = function() {
                    var e = this,
                        t = 0;
                    Array.prototype.map.call(document.querySelectorAll('a[href*="' + this._targetDomain + '"]'), (function(e) {
                        return e
                    })).filter((function(t) {
                        return e.isTargetLink(t)
                    })).forEach((function(i) {
                        e.fireImpression(i.href), e.replaceTargetLink(i), t++
                    })), t && Bo.event("TargetRewriteTrackerComponent", "logTargetRewrite", {
                        message: "targetRewrite",
                        countRewrite: t
                    })
                }, t.prototype.fireImpression = function(e) {
                    var t = this.getImpressionPixel(e);
                    return (new Image).src = t
                }, t.prototype.getImpressionPixel = function(e) {
                    var t = "https://" + this._affDomain + "/i/" + this._commonPath + "?",
                        i = "U1|" + this.getUUID();
                    t += "_ir=" + encodeURIComponent(i) + "&" + this._commonParams + "&subid3=" + encodeURIComponent(e);
                    var n = e.split("?");
                    return n.length > 1 && (t += "&" + n[1]), t
                }, t.prototype.getUUID = function() {
                    return (new Date).getTime().toString() + "." + Math.random().toString(36).substring(2, 15)
                }, t.prototype.replaceTargetLink = function(e) {
                    var t, i = encodeURIComponent(e.href);
                    (t = e.classList).add.apply(t, so(["noskimlinks", "norewrite"])), e.href = "https://" + this._affDomain + "/c/" + this._commonPath + "?" + this._commonParams + "&subid3=" + i + "&u=" + i
                }, t.prototype.isTargetLink = function(e) {
                    var t = this.extractDomain(e.href);
                    return t && -1 === t.indexOf(this._affDomain)
                }, t.prototype.extractDomain = function(e) {
                    var t = /^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i.exec(e);
                    return t && t[1] || ""
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return this._config.tkho.tracker !== this._trackerHoldoutKey && !this._config.ccpa.enabled && this._config.adOptions.targetAff
                    },
                    enumerable: !1,
                    configurable: !0
                }), t = eo([zo(), io("design:paramtypes", [Fc, Uc])], t)
            }(Su),
            Lp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._gam = t, i
                }
                return Jr(t, e), t.prototype.init = function() {
                    var e = this;
                    this._gam.slotOnload.once().then((function() {
                        return e.loadImage()
                    })).catch((function(e) {
                        return Bo.error("TheTradeDeskTrackerComponent", "init", e)
                    }))
                }, Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return !0
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.loadImage = function() {
                    (new Image).src = "https://insight.adsrvr.org/track/evnt/?adv=z127r4i&ct=0:p21aj7j&fmt=3"
                }, t = eo([Ka("TheTradeDeskTrackerComponent"), zo(), io("design:paramtypes", [Uc])], t)
            }(Su),
            Fp = function() {
                function e(e, t, i, n, r, o, a, s, c, l, u, d, p, h, f, g, m, y, _, v, b, w, S, C, k, P, E, O, x, T, I, M, A, z, R, j, D, B, V, L, F, N, q, U, H, W, G, Q, K, X, J, Y) {
                    this._config = e, this._components = [t, i, n, r, o, a, s, c, l, u, d, p, h, f, g, m, y, _, v, b, w, S, C, k, E, O, P, x, T, I, M, A, j, z, R, D, B, V, L, F, N, q, U, H, W, G, K, Q, X, J, Y], this._nonCCPAComponents = [y, B, V, W, K]
                }
                return e.prototype.init = function() {
                    var e = this,
                        t = this._config.ccpa;
                    this._components.filter((function(i) {
                        return !t.enabled || t.enabled && -1 === e._nonCCPAComponents.indexOf(i)
                    })).forEach((function(e) {
                        return void 0 !== e.init && e.enabled && e.init()
                    }))
                }, e.prototype.start = function() {
                    this._components.forEach((function(e) {
                        return void 0 !== e.start && e.enabled && e.start()
                    }))
                }, e = eo([Ka("Components"), zo(), io("design:paramtypes", [Fc, Mu, Au, Op, Ru, ju, Du, xp, ud, Bu, Ap, Nu, qu, Fu, Uu, Tp, Qu, ld, Ku, Xu, Yu, id, nd, Nd, rd, cd, zp, qd, Ip, Cp, Pp, Ep, Mp, wp, Fd, Rp, Hd, jp, Bp, Yd, Zd, ep, ip, Ld, Vp, Lp, np, Ou, op, ap, _p, vp])], e)
            }();
        tp(".adthrive-ad{margin-top:10px;margin-bottom:10px;text-align:center;overflow-x:visible;clear:both;line-height:0}.jw-flag-small-player #next-stay-container{margin:0}.jw-flag-small-player #next-video,.jw-flag-small-player #stay-video{width:75px;height:30px;line-height:30px}#next-stay-container{bottom:25%;right:0;margin:12px;position:absolute}#next-video,#stay-video{box-shadow:0 0 10px rgba(0,0,0,.5);opacity:.9;width:100px;height:40px;line-height:40px;text-align:center;cursor:pointer;background-color:#333;color:#fff;margin:10px}#next-video{box-shadow:inset 0 0 0 0 #333;transition:box-shadow 5s linear}#next-stay-container.loaded #next-video{box-shadow:inset 100px 0 0 0 red}.adthrive-ad-cls{display:flex;justify-content:center;align-items:center;flex-wrap:wrap}.adthrive-ad-cls>div,.adthrive-ad-cls>iframe{flex-basis:100%}.adthrive-interstitial{margin-top:0;margin-bottom:0}.adthrive-native-recipe{display:inline-block}.adthrive-stuck.adthrive-sticky.adthrive-header,.adthrive-stuck.adthrive-sticky.adthrive-sidebar{position:fixed;top:0;z-index:9999}.adthrive-stuck.adthrive-header{margin-top:0}.adthrive-sticky.adthrive-footer{text-align:center;margin:0;width:100%;overflow:hidden;position:fixed;left:0;bottom:0;z-index:99999;background-color:hsla(0,0%,100%,.8);border-top:2px solid hsla(0,0%,88.2%,.8)}.adthrive-sticky.adthrive-footer>.adthrive-close{cursor:pointer;color:#b2b2b2;border:1px solid #b2b2b2;border-radius:20px;background:#fff;line-height:20px;display:inline-block;font-size:20px;font-family:arial,sans-serif;padding:0 5px;position:absolute;top:5px;right:5px}.adthrive-device-desktop .adthrive-sticky.adthrive-footer>.adthrive-close{top:10px;right:10px}#_inv_voicefive___{display:none}.adthrive-ccpa-link,.adthrive-footer-message,.adthrive-privacy-preferences{text-align:center;margin-top:5px}.adthrive-ccpa-link,.adthrive-ccpa-link span,.adthrive-footer-message span,.adthrive-privacy-preferences a{font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:13px;color:#b2b2b2}.adthrive-ccpa-link a{text-decoration:underline;cursor:pointer}.adthrive-device-phone .adthrive-footer-message{margin-bottom:60px}.adthrive-footer-message{margin-bottom:100px}.adthrive-footer-message>span{text-transform:uppercase;border-top:1px solid #b2b2b2;padding-top:5px}.adthrive-collapse-player{width:90%;border-top:1px solid #dbdbdb;border-bottom:1px solid #dbdbdb;padding:8px!important;margin-left:auto;margin-right:auto}.adthrive-player-position.adthrive-collapse-float{position:fixed;width:300px;z-index:2147483644}h3.adthrive-player-title{margin:10px 0}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-right{top:0;right:5px}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-right{bottom:100px;right:5px}.adthrive-player-position.adthrive-collapse-float.adthrive-collapse-bottom-left{bottom:100px;left:5px}.adthrive-player-position.adthrive-collapse-float>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-sticky{padding-top:20px;padding-bottom:20px;position:fixed;z-index:9999}.adthrive-player-position.adthrive-collapse-sticky>.adthrive-player-title{display:none}.adthrive-player-position.adthrive-collapse-mobile{position:fixed;width:300px;z-index:99998}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-medium,.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-small{width:272px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-right{top:26px;right:10px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-top-left{top:26px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-left{bottom:52px;left:5px}.adthrive-player-position.adthrive-collapse-mobile.adthrive-collapse-bottom-right{bottom:52px;right:10px}.adthrive-player-position.adthrive-collapse-mobile>.adthrive-player-title{display:none}.adthrive-sekindo-mobile-center{display:flex;flex-direction:row;justify-content:center;text-align:center}.adthrive-wrapper-close{margin-left:auto;margin-right:0;height:36px;min-width:36px;justify-content:center;align-items:center;font-size:36px;color:#fff}.adthrive-wrapper-float-close{float:right;display:none;margin-bottom:5px;cursor:pointer}.adthrive-wrapper-bar{display:none;background-color:#595959;font-family:Arial,Helvetica,sans-serif;border-top-left-radius:5px;border-top-right-radius:5px;height:36px}.adthrive-video-title{font-size:13px;font-weight:700;text-decoration:none;color:#fff}.adthrive-wrapper-title-wrapper{display:inline-flex;min-width:0;margin-left:10px;margin-right:10px;justify-content:center;align-items:center}.adthrive-video-text-cutoff{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;color:#fff}.adthrive-wrapper-title-wrapper>a>svg,.adthrive-wrapper-title-wrapper>div>svg{vertical-align:middle;fill:#fff;margin-right:5px}.adthrive-wrapper-title-wrapper>a{text-decoration:none}.adthrive-sticky-outstream{padding-top:20px;position:fixed;z-index:2147483644;display:none;overflow:hidden}.adthrive-instream-close{pointer-events:all}.adthrive-instream-close.adthrive-float-left{float:left}.adthrive-top-left-outer{position:absolute;top:-20px}.adthrive-top-left-inner{position:absolute;top:0}.adthrive-top-left-inner-wrapper.adthrive-wrapper-float-close,.adthrive-top-left-inner.adthrive-wrapper-float-close{padding:2px;color:#fff;background:rgba(0,0,0,.5);pointer-events:none;z-index:99;width:100%}.adthrive-top-left-inner-wrapper.adthrive-wrapper-float-close{position:absolute;top:36px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close{position:absolute;top:32px;right:1px}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-outside-left{left:2px}.adthrive-wrapper-close-bkgd-50>#adthrive-sticky-outstream-close{padding:2px 0 0 2px;pointer-events:all}.adthrive-sticky-outstream>.adthrive-wrapper-float-close.adthrive-wrapper-close-bkgd-50{top:52px;left:0;padding:2px;color:#fff;background:rgba(0,0,0,.5);pointer-events:none}.adthrive-sticky-outstream.adthrive-sticky-outstream-mobile{bottom:52px;right:10px}.adthrive-sticky-outstream.adthrive-sticky-outstream-desktop{bottom:100px;right:5px}.adthrive-sticky-outstream.adthrive-sticky-outstream-active{display:block}.adthrive-video-stickyoutstream div:first-of-type{margin:-1px}");
        var Np = function() {
                function e(e, t, i, n, r, o, a) {
                    this.config = e, this.cmd = t, this.slotManager = i, this.slots = n, this._auctionManagers = r, this._googleAdManager = o, this._components = a, this.marmalade = {
                        mcmp: null
                    }, this.marmaladeFinished = function(e) {
                        return e
                    }, this.siteAds = {
                        targeting: {
                            push: this._googleAdManager.setTargeting
                        }
                    }, this._apiReady = new Promise((function(e) {
                        return e(!1)
                    })), this.bucket = this.config.context.bucket, this.branch = this.config.context.branch, this.invalidTraffic = this.config.context.invalidTraffic, this.deployment = this.config.context.deployment, this.abgroup = this.config.abGroup.groups
                }
                return e.prototype.init = function() {
                    var e = this;
                    this._apiReady = new Promise((function(t) {
                        return e.config.identityApi.apiReady.on((function() {
                            return t(!0)
                        }))
                    })), Bo.sending.on((function() {
                        Bo.data = $r($r({
                            abgroup: e.config.abGroup.groupsAsObject,
                            sess: e.config.context.sessionKey,
                            pvk: e.config.context.pageviewKey,
                            hbho: e.config.hbho.bidders,
                            vbho: e.config.vbho.bidders
                        }, e.config.clsOptions && e.config.clsOptions.branch && {
                            clsBranch: e.config.clsOptions.branch
                        }), e.config.clsOptions && e.config.clsOptions.bucket && {
                            clsBucket: e.config.clsOptions.bucket
                        })
                    })), ra("session_fpv", null === na("session_fpv")), this.cmd.init(), this._auctionManagers.init(), this._googleAdManager.init(), this._components.init(), this._googleAdManager.start(), this._components.start()
                }, e.prototype.identityApi = function(e, t) {
                    var i = this;
                    return this._apiReady.then((function() {
                        i.config.identityApi.optIn.emit({
                            data: e,
                            cb: t
                        }).catch((function() {}))
                    }))
                }, e.prototype.disableAds = function(e) {
                    this.config.disableAds.disableAllAds(e)
                }, e.prototype.disableContentAds = function(e) {
                    this.config.disableAds.disableContentAds(e)
                }, e.prototype.disablePlaylistPlayers = function(e) {
                    this.config.disableAds.disablePlaylistPlayers(e)
                }, e.prototype.showPrivacyPreferences = function() {
                    window.__tcfapi && window.__tcfapi("showConsentManager", 2)
                }, e.prototype.getConsentData = function() {
                    window.__tcfapi && window.__tcfapi("getFullTCData", 2, (function(e) {}))
                }, e.prototype.getAdthriveFlippData = function() {
                    return this.config.marmalade.flpProdIds.filter(ea)
                }, e.prototype.setTargetingFlag = function(e, t, i) {
                    void 0 === i && (i = !1), e && "string" == typeof e && t && Array.isArray(t) && 0 !== t.length && this._googleAdManager.setTargetingFlag(e, t, i)
                }, e.prototype.setTargeting = function(e) {
                    this._googleAdManager.setTargeting(e)
                }, e.prototype.getTargeting = function() {
                    return this._googleAdManager.getTargeting()
                }, e.prototype.getTargetingMap = function() {
                    return this._googleAdManager.getTargetingMap()
                }, e.prototype.logError = function(e, t, i) {
                    Bo.error(e, t, i)
                }, e.prototype.refreshSlots = function(e) {
                    var t = this,
                        i = this.slots.get();
                    e && e.length && (i = i.filter((function(t) {
                        return -1 !== e.indexOf(t.id)
                    }))), i.forEach((function(e) {
                        t.slotManager.refresh(e, !1).then((function() {
                            t.slotManager.clearRefreshTimeout(e, !0)
                        })).catch((function() {}))
                    }))
                }, e = eo([Ka("AdThrive"), Ro(), io("design:paramtypes", [Fc, wu, Cu, qc, bu, Uc, Fp])], e)
            }(),
            qp = {
                domain: "ads.adthrive.com",
                branch: "master",
                bucket: "prod",
                cmp: !0
            },
            Up = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._setAbGroup = !0, i._choices = [{
                        choice: 500,
                        weight: 10
                    }, {
                        choice: 1e3,
                        weight: 10
                    }, {
                        choice: 2e3,
                        weight: 10
                    }, {
                        choice: 3e3,
                        weight: 70
                    }], i.key = "deftimer1", i._result = i.run(), i._setAbGroup && t.set(i.key, 0 === i._result ? "off" : String(i._result)), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return navigator.userAgent && (navigator.userAgent.search(/GTmetrix/i) > -1 || navigator.userAgent.search(/pingdom/i) > -1 || navigator.userAgent.search(/Google Page Speed Insights/i) > -1) ? (this._setAbGroup = !1, 0) : new ds(this._choices).get()
                }, eo([Xa(), io("design:type", Function), io("design:paramtypes", []), io("design:returntype", Number)], t.prototype, "run", null), t = eo([Ka("DelayLoadingExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Hp = function(e) {
                function t(t) {
                    var i = e.call(this) || this;
                    return i._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], i.key = "delload", i._result = i.run(), t.set(i.key, i._result ? "on" : "off"), i
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(.95).get()
                }, t = eo([Ka("EnableDelayLoadingExperiment"), Ro(), io("design:paramtypes", [is])], t)
            }(rs),
            Wp = function(e) {
                function t() {
                    var t = e.call(this) || this;
                    return t.classList = ["EmailCaptureHandler"], t._result = !1, t._choices = [{
                        choice: !0
                    }, {
                        choice: !1
                    }], t.key = "logfltr", t._result = t.run(), t
                }
                return Jr(t, e), Object.defineProperty(t.prototype, "result", {
                    get: function() {
                        return this._result
                    },
                    enumerable: !1,
                    configurable: !0
                }), t.prototype.run = function() {
                    return new as(0).get()
                }, t = eo([Ka("LoggerFilterExperiment"), Ro(), io("design:paramtypes", [])], t)
            }(rs),
            Gp = function() {
                function e() {}
                return e.prototype.init = function(e) {
                    if (void 0 !== window.__tcfapi && "function" == typeof window.__tcfapi) {
                        var t = !1;
                        window.__tcfapi("adthrive", 2, (function(e) {
                            return t = e
                        })), t && ("true" === e ? window.__tcfapi("setGdprApplies", 2, (function(e) {
                            return e
                        }), !0) : (this.clearQueue(), this.stubCommands()))
                    }
                }, e.prototype.processTcfCommand = function(e) {
                    var t = e.command,
                        i = e.callback;
                    !i || i && "function" != typeof i || ("ping" === t || "getTCData" === t || "addEventListener" === t ? i({
                        apiVersion: "2",
                        cmpLoaded: !0,
                        cmpStatus: "loaded",
                        cmpId: void 0,
                        cmpVersion: void 0,
                        displayStatus: "disabled",
                        gdprApplies: !1,
                        tcfPolicyVersion: void 0,
                        gvlVersion: void 0
                    }, !0) : "removeEventListener" === t && i(!0))
                }, e.prototype.clearQueue = function() {
                    var e = this,
                        t = window.__tcfapi();
                    t && Array.isArray(t) && t.forEach((function(t) {
                        return e.processTcfCommand(t)
                    }))
                }, e.prototype.stubCommands = function() {
                    var e = this;
                    window.__tcfapi = function(t, i, n, r) {
                        e.processTcfCommand({
                            command: t,
                            version: i,
                            callback: n,
                            parameter: r
                        })
                    }
                }, e = eo([Ka("StubCmp"), Ro()], e)
            }(),
            Qp = Mo.resolve(wc),
            Kp = function(e, t, i, n, r, o) {
                var a = Oa();
                return Mo.register("MarmaladeResponse", {
                        useValue: n.result
                    }), window.adthrive = Mo.resolve(Np),
                    function(e, t, i, n, r, o, a) {
                        Qp.loading = e, Qp.bootstrapFinished = t, Qp.amazonStarted = i.started, Qp.amazonFinished = i.finished, Qp.amazonDuration = i.duration, Qp.gamStarted = n.started, Qp.gamFinished = n.finished, Qp.gamDuration = n.duration, Qp.marmaladeStarted = r.started, Qp.marmaladeFinished = r.finished, Qp.marmaladeDuration = r.duration, Qp.prebidStarted = o.started, Qp.prebidFinished = o.finished, Qp.prebidDuration = o.duration, Qp.webVitalsStarted = a.started, Qp.webVitalsFinished = a.finished, Qp.webVitalsDuration = a.duration
                    }(e, a, t, i, n, r, o), window.adthrive.init()
            },
            Xp = function(e) {
                return no(void 0, void 0, void 0, (function() {
                    var t, i, n, r;
                    return ro(this, (function(o) {
                        switch (o.label) {
                            case 0:
                                return t = Oa(), i = window.adthrive.branch, n = i === (null === (r = na("branch")) || void 0 === r ? void 0 : r.branch), ra("branch", {
                                    branch: i,
                                    enabled: n
                                }), Bo.init(e), Mo.register("Build", {
                                    useValue: qp
                                }), Mo.register("AdThrive", {
                                    useValue: e
                                }), [4, Mo.resolve(Os).run().then((function(e) {
                                    var i = e.amazon,
                                        n = e.gam,
                                        r = e.marmalade,
                                        o = e.prebid,
                                        a = e.webvitals;
                                    return Kp(t, i, n, r, o, a)
                                })).catch((function(e) {
                                    return function(e) {
                                        var t = e.marmalade,
                                            i = e.message || e;
                                        return t && Object.prototype.hasOwnProperty.call(t, "result") && (Mo.register("MarmaladeResponse", {
                                            useValue: t.result
                                        }), Mo.resolve(wp).init()), Mo.resolve(vp).init(), Promise.reject(i)
                                    }(e)
                                }))];
                            case 1:
                                return [2, o.sent()]
                        }
                    }))
                }))
            },
            Jp = function(e) {
                var t, i, n, r, o;
                if ((!0 === e.siteAds.adOptions.delayLoading ? Mo.resolve(Hp) : {
                        result: !1
                    }).result) {
                    var a = Mo.resolve(Up),
                        s = (i = a.result, n = Mo.resolve(bc).setupOnceEventWithPromise, r = [n("scroll"), n("mousemove"), n("keyup")], o = [n("load").then((function() {
                            return Xo(i)
                        }))], 0 === i ? r : o.concat(r));
                    t = Promise.race(s)
                } else t = Promise.resolve();
                return t
            };
        (function(e) {
            return e instanceof Np || e instanceof Promise
        })(window.adthrive) || function() {
            var e, t, i, n = window.adthrive;
            e = window.adthrive.siteAds, t = window.adthriveCLS, (i = t && t.siteAds) && "object" == typeof i && (e.adUnits = i.adUnits, e.video = i.video, e.videoPlayers = i.videoPlayers, e.breakpoints = i.breakpoints);
            var r, o = function(e) {
                    var t = e.gdpr,
                        i = e.baseUrl;
                    return "true" === t ? i + "/gdpr" : i
                }(n),
                a = (r = [va(), ma(), _a(), ya(), ba()].filter((function(e) {
                    return !!e
                }))).length ? r : void 0,
                s = a ? "unsupported" : n.bucket,
                c = Mo.resolve(Wp),
                l = c.result ? [] : c.classList,
                u = $r($r({}, n), {
                    bucket: s,
                    baseUrl: o,
                    invalidTraffic: a,
                    loggerFilters: l
                });
            Oa(), Mo.resolve(Gp).init(u.gdpr), Jp(u).then((function() {
                return Xp(u)
            })).then((function() {})).catch((function(e) {
                Bo.error("index", "load", e)
            }))
        }()
    }();;

    */